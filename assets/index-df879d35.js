(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Vy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eC={exports:{}},nm={},tC={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=Symbol.for("react.element"),CR=Symbol.for("react.portal"),ER=Symbol.for("react.fragment"),bR=Symbol.for("react.strict_mode"),AR=Symbol.for("react.profiler"),TR=Symbol.for("react.provider"),RR=Symbol.for("react.context"),LR=Symbol.for("react.forward_ref"),kR=Symbol.for("react.suspense"),PR=Symbol.for("react.memo"),IR=Symbol.for("react.lazy"),XS=Symbol.iterator;function NR(n){return n===null||typeof n!="object"?null:(n=XS&&n[XS]||n["@@iterator"],typeof n=="function"?n:null)}var nC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iC=Object.assign,rC={};function Bc(n,e,t){this.props=n,this.context=e,this.refs=rC,this.updater=t||nC}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Bc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function sC(){}sC.prototype=Bc.prototype;function Gy(n,e,t){this.props=n,this.context=e,this.refs=rC,this.updater=t||nC}var jy=Gy.prototype=new sC;jy.constructor=Gy;iC(jy,Bc.prototype);jy.isPureReactComponent=!0;var YS=Array.isArray,oC=Object.prototype.hasOwnProperty,Ky={current:null},aC={key:!0,ref:!0,__self:!0,__source:!0};function lC(n,e,t){var i,r={},s=null,c=null;if(e!=null)for(i in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(s=""+e.key),e)oC.call(e,i)&&!aC.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];r.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Wh,type:n,key:s,ref:c,props:r,_owner:Ky.current}}function OR(n,e){return{$$typeof:Wh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Xy(n){return typeof n=="object"&&n!==null&&n.$$typeof===Wh}function DR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ZS=/\/+/g;function zg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?DR(""+n.key):e.toString(36)}function rp(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var c=!1;if(n===null)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case Wh:case CR:c=!0}}if(c)return c=n,r=r(c),n=i===""?"."+zg(c,0):i,YS(r)?(t="",n!=null&&(t=n.replace(ZS,"$&/")+"/"),rp(r,e,t,"",function(f){return f})):r!=null&&(Xy(r)&&(r=OR(r,t+(!r.key||c&&c.key===r.key?"":(""+r.key).replace(ZS,"$&/")+"/")+n)),e.push(r)),1;if(c=0,i=i===""?".":i+":",YS(n))for(var l=0;l<n.length;l++){s=n[l];var u=i+zg(s,l);c+=rp(s,e,t,u,r)}else if(u=NR(n),typeof u=="function")for(n=u.call(n),l=0;!(s=n.next()).done;)s=s.value,u=i+zg(s,l++),c+=rp(s,e,t,u,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function jf(n,e,t){if(n==null)return n;var i=[],r=0;return rp(n,i,"","",function(s){return e.call(t,s,r++)}),i}function FR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Zi={current:null},sp={transition:null},UR={ReactCurrentDispatcher:Zi,ReactCurrentBatchConfig:sp,ReactCurrentOwner:Ky};qt.Children={map:jf,forEach:function(n,e,t){jf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return jf(n,function(){e++}),e},toArray:function(n){return jf(n,function(e){return e})||[]},only:function(n){if(!Xy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qt.Component=Bc;qt.Fragment=ER;qt.Profiler=AR;qt.PureComponent=Gy;qt.StrictMode=bR;qt.Suspense=kR;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UR;qt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=iC({},n.props),r=n.key,s=n.ref,c=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,c=Ky.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)oC.call(e,u)&&!aC.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:Wh,type:n.type,key:r,ref:s,props:i,_owner:c}};qt.createContext=function(n){return n={$$typeof:RR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TR,_context:n},n.Consumer=n};qt.createElement=lC;qt.createFactory=function(n){var e=lC.bind(null,n);return e.type=n,e};qt.createRef=function(){return{current:null}};qt.forwardRef=function(n){return{$$typeof:LR,render:n}};qt.isValidElement=Xy;qt.lazy=function(n){return{$$typeof:IR,_payload:{_status:-1,_result:n},_init:FR}};qt.memo=function(n,e){return{$$typeof:PR,type:n,compare:e===void 0?null:e}};qt.startTransition=function(n){var e=sp.transition;sp.transition={};try{n()}finally{sp.transition=e}};qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qt.useCallback=function(n,e){return Zi.current.useCallback(n,e)};qt.useContext=function(n){return Zi.current.useContext(n)};qt.useDebugValue=function(){};qt.useDeferredValue=function(n){return Zi.current.useDeferredValue(n)};qt.useEffect=function(n,e){return Zi.current.useEffect(n,e)};qt.useId=function(){return Zi.current.useId()};qt.useImperativeHandle=function(n,e,t){return Zi.current.useImperativeHandle(n,e,t)};qt.useInsertionEffect=function(n,e){return Zi.current.useInsertionEffect(n,e)};qt.useLayoutEffect=function(n,e){return Zi.current.useLayoutEffect(n,e)};qt.useMemo=function(n,e){return Zi.current.useMemo(n,e)};qt.useReducer=function(n,e,t){return Zi.current.useReducer(n,e,t)};qt.useRef=function(n){return Zi.current.useRef(n)};qt.useState=function(n){return Zi.current.useState(n)};qt.useSyncExternalStore=function(n,e,t){return Zi.current.useSyncExternalStore(n,e,t)};qt.useTransition=function(){return Zi.current.useTransition()};qt.version="18.2.0";tC.exports=qt;var Ce=tC.exports;const cC=Vy(Ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR=Ce,$R=Symbol.for("react.element"),zR=Symbol.for("react.fragment"),HR=Object.prototype.hasOwnProperty,WR=BR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VR={key:!0,ref:!0,__self:!0,__source:!0};function uC(n,e,t){var i,r={},s=null,c=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(c=e.ref);for(i in e)HR.call(e,i)&&!VR.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:$R,type:n,key:s,ref:c,props:r,_owner:WR.current}}nm.Fragment=zR;nm.jsx=uC;nm.jsxs=uC;eC.exports=nm;var Q=eC.exports,r0={},hC={exports:{}},Rr={},fC={exports:{}},dC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,K){var Y=G.length;G.push(K);e:for(;0<Y;){var ne=Y-1>>>1,le=G[ne];if(0<r(le,K))G[ne]=K,G[Y]=le,Y=ne;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var K=G[0],Y=G.pop();if(Y!==K){G[0]=Y;e:for(var ne=0,le=G.length,j=le>>>1;ne<j;){var re=2*(ne+1)-1,fe=G[re],ve=re+1,ye=G[ve];if(0>r(fe,Y))ve<le&&0>r(ye,fe)?(G[ne]=ye,G[ve]=Y,ne=ve):(G[ne]=fe,G[re]=Y,ne=re);else if(ve<le&&0>r(ye,Y))G[ne]=ye,G[ve]=Y,ne=ve;else break e}}return K}function r(G,K){var Y=G.sortIndex-K.sortIndex;return Y!==0?Y:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var c=Date,l=c.now();n.unstable_now=function(){return c.now()-l}}var u=[],f=[],a=1,o=null,h=3,d=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var K=t(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=G)i(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(f)}}function M(G){if(y=!1,C(G),!p)if(t(u)!==null)p=!0,H(_);else{var K=t(f);K!==null&&J(M,K.startTime-G)}}function _(G,K){p=!1,y&&(y=!1,g(A),A=-1),d=!0;var Y=h;try{for(C(K),o=t(u);o!==null&&(!(o.expirationTime>K)||G&&!I());){var ne=o.callback;if(typeof ne=="function"){o.callback=null,h=o.priorityLevel;var le=ne(o.expirationTime<=K);K=n.unstable_now(),typeof le=="function"?o.callback=le:o===t(u)&&i(u),C(K)}else i(u);o=t(u)}if(o!==null)var j=!0;else{var re=t(f);re!==null&&J(M,re.startTime-K),j=!1}return j}finally{o=null,h=Y,d=!1}}var E=!1,R=null,A=-1,T=5,S=-1;function I(){return!(n.unstable_now()-S<T)}function D(){if(R!==null){var G=n.unstable_now();S=G;var K=!0;try{K=R(!0,G)}finally{K?z():(E=!1,R=null)}}else E=!1}var z;if(typeof w=="function")z=function(){w(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=D,z=function(){W.postMessage(null)}}else z=function(){x(D,0)};function H(G){R=G,E||(E=!0,z())}function J(G,K){A=x(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){p||d||(p=!0,H(_))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var Y=h;h=K;try{return G()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=h;h=G;try{return K()}finally{h=Y}},n.unstable_scheduleCallback=function(G,K,Y){var ne=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,G){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Y+le,G={id:a++,callback:K,priorityLevel:G,startTime:Y,expirationTime:le,sortIndex:-1},Y>ne?(G.sortIndex=Y,e(f,G),t(u)===null&&G===t(f)&&(y?(g(A),A=-1):y=!0,J(M,Y-ne))):(G.sortIndex=le,e(u,G),p||d||(p=!0,H(_))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var K=h;return function(){var Y=h;h=K;try{return G.apply(this,arguments)}finally{h=Y}}}})(dC);fC.exports=dC;var GR=fC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=Ce,Tr=GR;function st(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mC=new Set,sh={};function ol(n,e){bc(n,e),bc(n+"Capture",e)}function bc(n,e){for(sh[n]=e,n=0;n<e.length;n++)mC.add(e[n])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s0=Object.prototype.hasOwnProperty,jR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QS={},JS={};function KR(n){return s0.call(JS,n)?!0:s0.call(QS,n)?!1:jR.test(n)?JS[n]=!0:(QS[n]=!0,!1)}function XR(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function YR(n,e,t,i){if(e===null||typeof e>"u"||XR(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qi(n,e,t,i,r,s,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=c}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Mi[n]=new Qi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Mi[e]=new Qi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Mi[n]=new Qi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Mi[n]=new Qi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Mi[n]=new Qi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Mi[n]=new Qi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Mi[n]=new Qi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Mi[n]=new Qi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Mi[n]=new Qi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Zy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Yy,Zy);Mi[e]=new Qi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Yy,Zy);Mi[e]=new Qi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Yy,Zy);Mi[e]=new Qi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Mi[n]=new Qi(n,1,!1,n.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new Qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Mi[n]=new Qi(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qy(n,e,t,i){var r=Mi.hasOwnProperty(e)?Mi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YR(e,t,r,i)&&(t=null),i||r===null?KR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var to=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kf=Symbol.for("react.element"),tc=Symbol.for("react.portal"),nc=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),gC=Symbol.for("react.provider"),vC=Symbol.for("react.context"),qy=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),l0=Symbol.for("react.suspense_list"),ex=Symbol.for("react.memo"),Co=Symbol.for("react.lazy"),yC=Symbol.for("react.offscreen"),qS=Symbol.iterator;function yu(n){return n===null||typeof n!="object"?null:(n=qS&&n[qS]||n["@@iterator"],typeof n=="function"?n:null)}var Un=Object.assign,Hg;function Bu(n){if(Hg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Hg=e&&e[1]||""}return`
`+Hg+n}var Wg=!1;function Vg(n,e){if(!n||Wg)return"";Wg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),c=r.length-1,l=s.length-1;1<=c&&0<=l&&r[c]!==s[l];)l--;for(;1<=c&&0<=l;c--,l--)if(r[c]!==s[l]){if(c!==1||l!==1)do if(c--,l--,0>l||r[c]!==s[l]){var u=`
`+r[c].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=c&&0<=l);break}}}finally{Wg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Bu(n):""}function ZR(n){switch(n.tag){case 5:return Bu(n.type);case 16:return Bu("Lazy");case 13:return Bu("Suspense");case 19:return Bu("SuspenseList");case 0:case 2:case 15:return n=Vg(n.type,!1),n;case 11:return n=Vg(n.type.render,!1),n;case 1:return n=Vg(n.type,!0),n;default:return""}}function c0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case nc:return"Fragment";case tc:return"Portal";case o0:return"Profiler";case Jy:return"StrictMode";case a0:return"Suspense";case l0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case vC:return(n.displayName||"Context")+".Consumer";case gC:return(n._context.displayName||"Context")+".Provider";case qy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ex:return e=n.displayName||null,e!==null?e:c0(n.type)||"Memo";case Co:e=n._payload,n=n._init;try{return c0(n(e))}catch{}}return null}function QR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c0(e);case 8:return e===Jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JR(n){var e=xC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(c){i=""+c,s.call(this,c)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xf(n){n._valueTracker||(n._valueTracker=JR(n))}function _C(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=xC(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Mp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function u0(n,e){var t=e.checked;return Un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ew(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Wo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SC(n,e){e=e.checked,e!=null&&Qy(n,"checked",e,!1)}function h0(n,e){SC(n,e);var t=Wo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?f0(n,e.type,t):e.hasOwnProperty("defaultValue")&&f0(n,e.type,Wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function tw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function f0(n,e,t){(e!=="number"||Mp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var $u=Array.isArray;function xc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Wo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function d0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(st(91));return Un({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(st(92));if($u(t)){if(1<t.length)throw Error(st(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Wo(t)}}function wC(n,e){var t=Wo(e.value),i=Wo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function iw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function MC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?MC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Yf,CC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Yf=Yf||document.createElement("div"),Yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function oh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qR=["Webkit","ms","Moz","O"];Object.keys(Vu).forEach(function(n){qR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Vu[e]=Vu[n]})});function EC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Vu.hasOwnProperty(n)&&Vu[n]?(""+e).trim():e+"px"}function bC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=EC(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var eL=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m0(n,e){if(e){if(eL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(st(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(st(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(st(61))}if(e.style!=null&&typeof e.style!="object")throw Error(st(62))}}function g0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v0=null;function tx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var y0=null,_c=null,Sc=null;function rw(n){if(n=jh(n)){if(typeof y0!="function")throw Error(st(280));var e=n.stateNode;e&&(e=am(e),y0(n.stateNode,n.type,e))}}function AC(n){_c?Sc?Sc.push(n):Sc=[n]:_c=n}function TC(){if(_c){var n=_c,e=Sc;if(Sc=_c=null,rw(n),e)for(n=0;n<e.length;n++)rw(e[n])}}function RC(n,e){return n(e)}function LC(){}var Gg=!1;function kC(n,e,t){if(Gg)return n(e,t);Gg=!0;try{return RC(n,e,t)}finally{Gg=!1,(_c!==null||Sc!==null)&&(LC(),TC())}}function ah(n,e){var t=n.stateNode;if(t===null)return null;var i=am(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(st(231,e,typeof t));return t}var x0=!1;if(Xs)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){x0=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{x0=!1}function tL(n,e,t,i,r,s,c,l,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(a){this.onError(a)}}var Gu=!1,Cp=null,Ep=!1,_0=null,nL={onError:function(n){Gu=!0,Cp=n}};function iL(n,e,t,i,r,s,c,l,u){Gu=!1,Cp=null,tL.apply(nL,arguments)}function rL(n,e,t,i,r,s,c,l,u){if(iL.apply(this,arguments),Gu){if(Gu){var f=Cp;Gu=!1,Cp=null}else throw Error(st(198));Ep||(Ep=!0,_0=f)}}function al(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function PC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function sw(n){if(al(n)!==n)throw Error(st(188))}function sL(n){var e=n.alternate;if(!e){if(e=al(n),e===null)throw Error(st(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return sw(r),n;if(s===i)return sw(r),e;s=s.sibling}throw Error(st(188))}if(t.return!==i.return)t=r,i=s;else{for(var c=!1,l=r.child;l;){if(l===t){c=!0,t=r,i=s;break}if(l===i){c=!0,i=r,t=s;break}l=l.sibling}if(!c){for(l=s.child;l;){if(l===t){c=!0,t=s,i=r;break}if(l===i){c=!0,i=s,t=r;break}l=l.sibling}if(!c)throw Error(st(189))}}if(t.alternate!==i)throw Error(st(190))}if(t.tag!==3)throw Error(st(188));return t.stateNode.current===t?n:e}function IC(n){return n=sL(n),n!==null?NC(n):null}function NC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=NC(n);if(e!==null)return e;n=n.sibling}return null}var OC=Tr.unstable_scheduleCallback,ow=Tr.unstable_cancelCallback,oL=Tr.unstable_shouldYield,aL=Tr.unstable_requestPaint,Yn=Tr.unstable_now,lL=Tr.unstable_getCurrentPriorityLevel,nx=Tr.unstable_ImmediatePriority,DC=Tr.unstable_UserBlockingPriority,bp=Tr.unstable_NormalPriority,cL=Tr.unstable_LowPriority,FC=Tr.unstable_IdlePriority,im=null,Ss=null;function uL(n){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(im,n,void 0,(n.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:dL,hL=Math.log,fL=Math.LN2;function dL(n){return n>>>=0,n===0?32:31-(hL(n)/fL|0)|0}var Zf=64,Qf=4194304;function zu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ap(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,c=t&268435455;if(c!==0){var l=c&~r;l!==0?i=zu(l):(s&=c,s!==0&&(i=zu(s)))}else c=t&~r,c!==0?i=zu(c):s!==0&&(i=zu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-os(e),r=1<<t,i|=n[t],e&=~r;return i}function pL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mL(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var c=31-os(s),l=1<<c,u=r[c];u===-1?(!(l&t)||l&i)&&(r[c]=pL(l,e)):u<=e&&(n.expiredLanes|=l),s&=~l}}function S0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function UC(){var n=Zf;return Zf<<=1,!(Zf&4194240)&&(Zf=64),n}function jg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Vh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-os(e),n[e]=t}function gL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-os(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function ix(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-os(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var fn=0;function BC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $C,rx,zC,HC,WC,w0=!1,Jf=[],ko=null,Po=null,Io=null,lh=new Map,ch=new Map,bo=[],vL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aw(n,e){switch(n){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ch.delete(e.pointerId)}}function _u(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=jh(e),e!==null&&rx(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function yL(n,e,t,i,r){switch(e){case"focusin":return ko=_u(ko,n,e,t,i,r),!0;case"dragenter":return Po=_u(Po,n,e,t,i,r),!0;case"mouseover":return Io=_u(Io,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return lh.set(s,_u(lh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ch.set(s,_u(ch.get(s)||null,n,e,t,i,r)),!0}return!1}function VC(n){var e=Fa(n.target);if(e!==null){var t=al(e);if(t!==null){if(e=t.tag,e===13){if(e=PC(t),e!==null){n.blockedOn=e,WC(n.priority,function(){zC(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function op(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=M0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);v0=i,t.target.dispatchEvent(i),v0=null}else return e=jh(t),e!==null&&rx(e),n.blockedOn=t,!1;e.shift()}return!0}function lw(n,e,t){op(n)&&t.delete(e)}function xL(){w0=!1,ko!==null&&op(ko)&&(ko=null),Po!==null&&op(Po)&&(Po=null),Io!==null&&op(Io)&&(Io=null),lh.forEach(lw),ch.forEach(lw)}function Su(n,e){n.blockedOn===e&&(n.blockedOn=null,w0||(w0=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,xL)))}function uh(n){function e(r){return Su(r,n)}if(0<Jf.length){Su(Jf[0],n);for(var t=1;t<Jf.length;t++){var i=Jf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ko!==null&&Su(ko,n),Po!==null&&Su(Po,n),Io!==null&&Su(Io,n),lh.forEach(e),ch.forEach(e),t=0;t<bo.length;t++)i=bo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<bo.length&&(t=bo[0],t.blockedOn===null);)VC(t),t.blockedOn===null&&bo.shift()}var wc=to.ReactCurrentBatchConfig,Tp=!0;function _L(n,e,t,i){var r=fn,s=wc.transition;wc.transition=null;try{fn=1,sx(n,e,t,i)}finally{fn=r,wc.transition=s}}function SL(n,e,t,i){var r=fn,s=wc.transition;wc.transition=null;try{fn=4,sx(n,e,t,i)}finally{fn=r,wc.transition=s}}function sx(n,e,t,i){if(Tp){var r=M0(n,e,t,i);if(r===null)nv(n,e,i,Rp,t),aw(n,i);else if(yL(r,n,e,t,i))i.stopPropagation();else if(aw(n,i),e&4&&-1<vL.indexOf(n)){for(;r!==null;){var s=jh(r);if(s!==null&&$C(s),s=M0(n,e,t,i),s===null&&nv(n,e,i,Rp,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else nv(n,e,i,null,t)}}var Rp=null;function M0(n,e,t,i){if(Rp=null,n=tx(i),n=Fa(n),n!==null)if(e=al(n),e===null)n=null;else if(t=e.tag,t===13){if(n=PC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Rp=n,null}function GC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lL()){case nx:return 1;case DC:return 4;case bp:case cL:return 16;case FC:return 536870912;default:return 16}default:return 16}}var Ro=null,ox=null,ap=null;function jC(){if(ap)return ap;var n,e=ox,t=e.length,i,r="value"in Ro?Ro.value:Ro.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var c=t-n;for(i=1;i<=c&&e[t-i]===r[s-i];i++);return ap=r.slice(n,1<i?1-i:void 0)}function lp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qf(){return!0}function cw(){return!1}function Lr(n){function e(t,i,r,s,c){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=c,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qf:cw,this.isPropagationStopped=cw,this}return Un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qf)},persist:function(){},isPersistent:qf}),e}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ax=Lr($c),Gh=Un({},$c,{view:0,detail:0}),wL=Lr(Gh),Kg,Xg,wu,rm=Un({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lx,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wu&&(wu&&n.type==="mousemove"?(Kg=n.screenX-wu.screenX,Xg=n.screenY-wu.screenY):Xg=Kg=0,wu=n),Kg)},movementY:function(n){return"movementY"in n?n.movementY:Xg}}),uw=Lr(rm),ML=Un({},rm,{dataTransfer:0}),CL=Lr(ML),EL=Un({},Gh,{relatedTarget:0}),Yg=Lr(EL),bL=Un({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),AL=Lr(bL),TL=Un({},$c,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),RL=Lr(TL),LL=Un({},$c,{data:0}),hw=Lr(LL),kL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=IL[n])?!!e[n]:!1}function lx(){return NL}var OL=Un({},Gh,{key:function(n){if(n.key){var e=kL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=lp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?PL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lx,charCode:function(n){return n.type==="keypress"?lp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?lp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),DL=Lr(OL),FL=Un({},rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fw=Lr(FL),UL=Un({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lx}),BL=Lr(UL),$L=Un({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),zL=Lr($L),HL=Un({},rm,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),WL=Lr(HL),VL=[9,13,27,32],cx=Xs&&"CompositionEvent"in window,ju=null;Xs&&"documentMode"in document&&(ju=document.documentMode);var GL=Xs&&"TextEvent"in window&&!ju,KC=Xs&&(!cx||ju&&8<ju&&11>=ju),dw=String.fromCharCode(32),pw=!1;function XC(n,e){switch(n){case"keyup":return VL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ic=!1;function jL(n,e){switch(n){case"compositionend":return YC(e);case"keypress":return e.which!==32?null:(pw=!0,dw);case"textInput":return n=e.data,n===dw&&pw?null:n;default:return null}}function KL(n,e){if(ic)return n==="compositionend"||!cx&&XC(n,e)?(n=jC(),ap=ox=Ro=null,ic=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KC&&e.locale!=="ko"?null:e.data;default:return null}}var XL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!XL[n.type]:e==="textarea"}function ZC(n,e,t,i){AC(i),e=Lp(e,"onChange"),0<e.length&&(t=new ax("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ku=null,hh=null;function YL(n){aE(n,0)}function sm(n){var e=oc(n);if(_C(e))return n}function ZL(n,e){if(n==="change")return e}var QC=!1;if(Xs){var Zg;if(Xs){var Qg="oninput"in document;if(!Qg){var gw=document.createElement("div");gw.setAttribute("oninput","return;"),Qg=typeof gw.oninput=="function"}Zg=Qg}else Zg=!1;QC=Zg&&(!document.documentMode||9<document.documentMode)}function vw(){Ku&&(Ku.detachEvent("onpropertychange",JC),hh=Ku=null)}function JC(n){if(n.propertyName==="value"&&sm(hh)){var e=[];ZC(e,hh,n,tx(n)),kC(YL,e)}}function QL(n,e,t){n==="focusin"?(vw(),Ku=e,hh=t,Ku.attachEvent("onpropertychange",JC)):n==="focusout"&&vw()}function JL(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sm(hh)}function qL(n,e){if(n==="click")return sm(e)}function e2(n,e){if(n==="input"||n==="change")return sm(e)}function t2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ls=typeof Object.is=="function"?Object.is:t2;function fh(n,e){if(ls(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!s0.call(e,r)||!ls(n[r],e[r]))return!1}return!0}function yw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xw(n,e){var t=yw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yw(t)}}function qC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?qC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function eE(){for(var n=window,e=Mp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Mp(n.document)}return e}function ux(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function n2(n){var e=eE(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&qC(t.ownerDocument.documentElement,t)){if(i!==null&&ux(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=xw(t,s);var c=xw(t,i);r&&c&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==c.node||n.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var i2=Xs&&"documentMode"in document&&11>=document.documentMode,rc=null,C0=null,Xu=null,E0=!1;function _w(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;E0||rc==null||rc!==Mp(i)||(i=rc,"selectionStart"in i&&ux(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xu&&fh(Xu,i)||(Xu=i,i=Lp(C0,"onSelect"),0<i.length&&(e=new ax("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=rc)))}function ed(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var sc={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},Jg={},tE={};Xs&&(tE=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function om(n){if(Jg[n])return Jg[n];if(!sc[n])return n;var e=sc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tE)return Jg[n]=e[t];return n}var nE=om("animationend"),iE=om("animationiteration"),rE=om("animationstart"),sE=om("transitionend"),oE=new Map,Sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xo(n,e){oE.set(n,e),ol(e,[n])}for(var qg=0;qg<Sw.length;qg++){var ev=Sw[qg],r2=ev.toLowerCase(),s2=ev[0].toUpperCase()+ev.slice(1);Xo(r2,"on"+s2)}Xo(nE,"onAnimationEnd");Xo(iE,"onAnimationIteration");Xo(rE,"onAnimationStart");Xo("dblclick","onDoubleClick");Xo("focusin","onFocus");Xo("focusout","onBlur");Xo(sE,"onTransitionEnd");bc("onMouseEnter",["mouseout","mouseover"]);bc("onMouseLeave",["mouseout","mouseover"]);bc("onPointerEnter",["pointerout","pointerover"]);bc("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hu));function ww(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,rL(i,e,void 0,n),n.currentTarget=null}function aE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var c=i.length-1;0<=c;c--){var l=i[c],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;ww(r,l,f),s=u}else for(c=0;c<i.length;c++){if(l=i[c],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;ww(r,l,f),s=u}}}if(Ep)throw n=_0,Ep=!1,_0=null,n}function En(n,e){var t=e[L0];t===void 0&&(t=e[L0]=new Set);var i=n+"__bubble";t.has(i)||(lE(e,n,2,!1),t.add(i))}function tv(n,e,t){var i=0;e&&(i|=4),lE(t,n,i,e)}var td="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[td]){n[td]=!0,mC.forEach(function(t){t!=="selectionchange"&&(o2.has(t)||tv(t,!1,n),tv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[td]||(e[td]=!0,tv("selectionchange",!1,e))}}function lE(n,e,t,i){switch(GC(e)){case 1:var r=_L;break;case 4:r=SL;break;default:r=sx}t=r.bind(null,e,t,n),r=void 0,!x0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function nv(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(c===4)for(c=i.return;c!==null;){var u=c.tag;if((u===3||u===4)&&(u=c.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;c=c.return}for(;l!==null;){if(c=Fa(l),c===null)return;if(u=c.tag,u===5||u===6){i=s=c;continue e}l=l.parentNode}}i=i.return}kC(function(){var f=s,a=tx(t),o=[];e:{var h=oE.get(n);if(h!==void 0){var d=ax,p=n;switch(n){case"keypress":if(lp(t)===0)break e;case"keydown":case"keyup":d=DL;break;case"focusin":p="focus",d=Yg;break;case"focusout":p="blur",d=Yg;break;case"beforeblur":case"afterblur":d=Yg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=uw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=CL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=BL;break;case nE:case iE:case rE:d=AL;break;case sE:d=zL;break;case"scroll":d=wL;break;case"wheel":d=WL;break;case"copy":case"cut":case"paste":d=RL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=fw}var y=(e&4)!==0,x=!y&&n==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var w=f,C;w!==null;){C=w;var M=C.stateNode;if(C.tag===5&&M!==null&&(C=M,g!==null&&(M=ah(w,g),M!=null&&y.push(ph(w,M,C)))),x)break;w=w.return}0<y.length&&(h=new d(h,p,null,t,a),o.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",h&&t!==v0&&(p=t.relatedTarget||t.fromElement)&&(Fa(p)||p[Ys]))break e;if((d||h)&&(h=a.window===a?a:(h=a.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=t.relatedTarget||t.toElement,d=f,p=p?Fa(p):null,p!==null&&(x=al(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=f),d!==p)){if(y=uw,M="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(y=fw,M="onPointerLeave",g="onPointerEnter",w="pointer"),x=d==null?h:oc(d),C=p==null?h:oc(p),h=new y(M,w+"leave",d,t,a),h.target=x,h.relatedTarget=C,M=null,Fa(a)===f&&(y=new y(g,w+"enter",p,t,a),y.target=C,y.relatedTarget=x,M=y),x=M,d&&p)t:{for(y=d,g=p,w=0,C=y;C;C=Rl(C))w++;for(C=0,M=g;M;M=Rl(M))C++;for(;0<w-C;)y=Rl(y),w--;for(;0<C-w;)g=Rl(g),C--;for(;w--;){if(y===g||g!==null&&y===g.alternate)break t;y=Rl(y),g=Rl(g)}y=null}else y=null;d!==null&&Mw(o,h,d,y,!1),p!==null&&x!==null&&Mw(o,x,p,y,!0)}}e:{if(h=f?oc(f):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=ZL;else if(mw(h))if(QC)_=e2;else{_=JL;var E=QL}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=qL);if(_&&(_=_(n,f))){ZC(o,_,t,a);break e}E&&E(n,h,f),n==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&f0(h,"number",h.value)}switch(E=f?oc(f):window,n){case"focusin":(mw(E)||E.contentEditable==="true")&&(rc=E,C0=f,Xu=null);break;case"focusout":Xu=C0=rc=null;break;case"mousedown":E0=!0;break;case"contextmenu":case"mouseup":case"dragend":E0=!1,_w(o,t,a);break;case"selectionchange":if(i2)break;case"keydown":case"keyup":_w(o,t,a)}var R;if(cx)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ic?XC(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(KC&&t.locale!=="ko"&&(ic||A!=="onCompositionStart"?A==="onCompositionEnd"&&ic&&(R=jC()):(Ro=a,ox="value"in Ro?Ro.value:Ro.textContent,ic=!0)),E=Lp(f,A),0<E.length&&(A=new hw(A,n,null,t,a),o.push({event:A,listeners:E}),R?A.data=R:(R=YC(t),R!==null&&(A.data=R)))),(R=GL?jL(n,t):KL(n,t))&&(f=Lp(f,"onBeforeInput"),0<f.length&&(a=new hw("onBeforeInput","beforeinput",null,t,a),o.push({event:a,listeners:f}),a.data=R))}aE(o,e)})}function ph(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Lp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ah(n,t),s!=null&&i.unshift(ph(n,s,r)),s=ah(n,e),s!=null&&i.push(ph(n,s,r))),n=n.return}return i}function Rl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Mw(n,e,t,i,r){for(var s=e._reactName,c=[];t!==null&&t!==i;){var l=t,u=l.alternate,f=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&f!==null&&(l=f,r?(u=ah(t,s),u!=null&&c.unshift(ph(t,u,l))):r||(u=ah(t,s),u!=null&&c.push(ph(t,u,l)))),t=t.return}c.length!==0&&n.push({event:e,listeners:c})}var a2=/\r\n?/g,l2=/\u0000|\uFFFD/g;function Cw(n){return(typeof n=="string"?n:""+n).replace(a2,`
`).replace(l2,"")}function nd(n,e,t){if(e=Cw(e),Cw(n)!==e&&t)throw Error(st(425))}function kp(){}var b0=null,A0=null;function T0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,c2=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(n){return Ew.resolve(null).then(n).catch(h2)}:R0;function h2(n){setTimeout(function(){throw n})}function iv(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),uh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);uh(e)}function No(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function bw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var zc=Math.random().toString(36).slice(2),_s="__reactFiber$"+zc,mh="__reactProps$"+zc,Ys="__reactContainer$"+zc,L0="__reactEvents$"+zc,f2="__reactListeners$"+zc,d2="__reactHandles$"+zc;function Fa(n){var e=n[_s];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ys]||t[_s]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=bw(n);n!==null;){if(t=n[_s])return t;n=bw(n)}return e}n=t,t=n.parentNode}return null}function jh(n){return n=n[_s]||n[Ys],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(st(33))}function am(n){return n[mh]||null}var k0=[],ac=-1;function Yo(n){return{current:n}}function bn(n){0>ac||(n.current=k0[ac],k0[ac]=null,ac--)}function _n(n,e){ac++,k0[ac]=n.current,n.current=e}var Vo={},Bi=Yo(Vo),ur=Yo(!1),Qa=Vo;function Ac(n,e){var t=n.type.contextTypes;if(!t)return Vo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function hr(n){return n=n.childContextTypes,n!=null}function Pp(){bn(ur),bn(Bi)}function Aw(n,e,t){if(Bi.current!==Vo)throw Error(st(168));_n(Bi,e),_n(ur,t)}function cE(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(st(108,QR(n)||"Unknown",r));return Un({},t,i)}function Ip(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Vo,Qa=Bi.current,_n(Bi,n),_n(ur,ur.current),!0}function Tw(n,e,t){var i=n.stateNode;if(!i)throw Error(st(169));t?(n=cE(n,e,Qa),i.__reactInternalMemoizedMergedChildContext=n,bn(ur),bn(Bi),_n(Bi,n)):bn(ur),_n(ur,t)}var Bs=null,lm=!1,rv=!1;function uE(n){Bs===null?Bs=[n]:Bs.push(n)}function p2(n){lm=!0,uE(n)}function Zo(){if(!rv&&Bs!==null){rv=!0;var n=0,e=fn;try{var t=Bs;for(fn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Bs=null,lm=!1}catch(r){throw Bs!==null&&(Bs=Bs.slice(n+1)),OC(nx,Zo),r}finally{fn=e,rv=!1}}return null}var lc=[],cc=0,Np=null,Op=0,Br=[],$r=0,Ja=null,Hs=1,Ws="";function La(n,e){lc[cc++]=Op,lc[cc++]=Np,Np=n,Op=e}function hE(n,e,t){Br[$r++]=Hs,Br[$r++]=Ws,Br[$r++]=Ja,Ja=n;var i=Hs;n=Ws;var r=32-os(i)-1;i&=~(1<<r),t+=1;var s=32-os(e)+r;if(30<s){var c=r-r%5;s=(i&(1<<c)-1).toString(32),i>>=c,r-=c,Hs=1<<32-os(e)+r|t<<r|i,Ws=s+n}else Hs=1<<s|t<<r|i,Ws=n}function hx(n){n.return!==null&&(La(n,1),hE(n,1,0))}function fx(n){for(;n===Np;)Np=lc[--cc],lc[cc]=null,Op=lc[--cc],lc[cc]=null;for(;n===Ja;)Ja=Br[--$r],Br[$r]=null,Ws=Br[--$r],Br[$r]=null,Hs=Br[--$r],Br[$r]=null}var br=null,Er=null,Pn=!1,ns=null;function fE(n,e){var t=zr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Rw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,br=n,Er=No(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,br=n,Er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ja!==null?{id:Hs,overflow:Ws}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,br=n,Er=null,!0):!1;default:return!1}}function P0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function I0(n){if(Pn){var e=Er;if(e){var t=e;if(!Rw(n,e)){if(P0(n))throw Error(st(418));e=No(t.nextSibling);var i=br;e&&Rw(n,e)?fE(i,t):(n.flags=n.flags&-4097|2,Pn=!1,br=n)}}else{if(P0(n))throw Error(st(418));n.flags=n.flags&-4097|2,Pn=!1,br=n}}}function Lw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;br=n}function id(n){if(n!==br)return!1;if(!Pn)return Lw(n),Pn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!T0(n.type,n.memoizedProps)),e&&(e=Er)){if(P0(n))throw dE(),Error(st(418));for(;e;)fE(n,e),e=No(e.nextSibling)}if(Lw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(st(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Er=No(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Er=null}}else Er=br?No(n.stateNode.nextSibling):null;return!0}function dE(){for(var n=Er;n;)n=No(n.nextSibling)}function Tc(){Er=br=null,Pn=!1}function dx(n){ns===null?ns=[n]:ns.push(n)}var m2=to.ReactCurrentBatchConfig;function qr(n,e){if(n&&n.defaultProps){e=Un({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Dp=Yo(null),Fp=null,uc=null,px=null;function mx(){px=uc=Fp=null}function gx(n){var e=Dp.current;bn(Dp),n._currentValue=e}function N0(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Mc(n,e){Fp=n,px=uc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cr=!0),n.firstContext=null)}function Vr(n){var e=n._currentValue;if(px!==n)if(n={context:n,memoizedValue:e,next:null},uc===null){if(Fp===null)throw Error(st(308));uc=n,Fp.dependencies={lanes:0,firstContext:n}}else uc=uc.next=n;return e}var Ua=null;function vx(n){Ua===null?Ua=[n]:Ua.push(n)}function pE(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,vx(e)):(t.next=r.next,r.next=t),e.interleaved=t,Zs(n,i)}function Zs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Eo=!1;function yx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function js(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,rn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Zs(n,t)}return r=i.interleaved,r===null?(e.next=e,vx(i)):(e.next=r.next,r.next=e),i.interleaved=e,Zs(n,t)}function cp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,ix(n,t)}}function kw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var c={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=c:s=s.next=c,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Up(n,e,t,i){var r=n.updateQueue;Eo=!1;var s=r.firstBaseUpdate,c=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,f=u.next;u.next=null,c===null?s=f:c.next=f,c=u;var a=n.alternate;a!==null&&(a=a.updateQueue,l=a.lastBaseUpdate,l!==c&&(l===null?a.firstBaseUpdate=f:l.next=f,a.lastBaseUpdate=u))}if(s!==null){var o=r.baseState;c=0,a=f=u=null,l=s;do{var h=l.lane,d=l.eventTime;if((i&h)===h){a!==null&&(a=a.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=n,y=l;switch(h=e,d=t,y.tag){case 1:if(p=y.payload,typeof p=="function"){o=p.call(d,o,h);break e}o=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(d,o,h):p,h==null)break e;o=Un({},o,h);break e;case 2:Eo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},a===null?(f=a=d,u=o):a=a.next=d,c|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(a===null&&(u=o),r.baseState=u,r.firstBaseUpdate=f,r.lastBaseUpdate=a,e=r.shared.interleaved,e!==null){r=e;do c|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);el|=c,n.lanes=c,n.memoizedState=o}}function Pw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(st(191,r));r.call(i)}}}var gE=new pC.Component().refs;function O0(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Un({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var cm={isMounted:function(n){return(n=n._reactInternals)?al(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ki(),r=Fo(n),s=js(i,r);s.payload=e,t!=null&&(s.callback=t),e=Oo(n,s,r),e!==null&&(as(e,n,r,i),cp(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ki(),r=Fo(n),s=js(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Oo(n,s,r),e!==null&&(as(e,n,r,i),cp(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ki(),i=Fo(n),r=js(t,i);r.tag=2,e!=null&&(r.callback=e),e=Oo(n,r,i),e!==null&&(as(e,n,i,t),cp(e,n,i))}};function Iw(n,e,t,i,r,s,c){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,c):e.prototype&&e.prototype.isPureReactComponent?!fh(t,i)||!fh(r,s):!0}function vE(n,e,t){var i=!1,r=Vo,s=e.contextType;return typeof s=="object"&&s!==null?s=Vr(s):(r=hr(e)?Qa:Bi.current,i=e.contextTypes,s=(i=i!=null)?Ac(n,r):Vo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cm,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Nw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&cm.enqueueReplaceState(e,e.state,null)}function D0(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=gE,yx(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Vr(s):(s=hr(e)?Qa:Bi.current,r.context=Ac(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(O0(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&cm.enqueueReplaceState(r,r.state,null),Up(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Mu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(st(309));var i=t.stateNode}if(!i)throw Error(st(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(c){var l=r.refs;l===gE&&(l=r.refs={}),c===null?delete l[s]:l[s]=c},e._stringRef=s,e)}if(typeof n!="string")throw Error(st(284));if(!t._owner)throw Error(st(290,n))}return n}function rd(n,e){throw n=Object.prototype.toString.call(e),Error(st(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Ow(n){var e=n._init;return e(n._payload)}function yE(n){function e(g,w){if(n){var C=g.deletions;C===null?(g.deletions=[w],g.flags|=16):C.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function i(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function r(g,w){return g=Uo(g,w),g.index=0,g.sibling=null,g}function s(g,w,C){return g.index=C,n?(C=g.alternate,C!==null?(C=C.index,C<w?(g.flags|=2,w):C):(g.flags|=2,w)):(g.flags|=1048576,w)}function c(g){return n&&g.alternate===null&&(g.flags|=2),g}function l(g,w,C,M){return w===null||w.tag!==6?(w=hv(C,g.mode,M),w.return=g,w):(w=r(w,C),w.return=g,w)}function u(g,w,C,M){var _=C.type;return _===nc?a(g,w,C.props.children,M,C.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Co&&Ow(_)===w.type)?(M=r(w,C.props),M.ref=Mu(g,w,C),M.return=g,M):(M=mp(C.type,C.key,C.props,null,g.mode,M),M.ref=Mu(g,w,C),M.return=g,M)}function f(g,w,C,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=fv(C,g.mode,M),w.return=g,w):(w=r(w,C.children||[]),w.return=g,w)}function a(g,w,C,M,_){return w===null||w.tag!==7?(w=Ga(C,g.mode,M,_),w.return=g,w):(w=r(w,C),w.return=g,w)}function o(g,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hv(""+w,g.mode,C),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kf:return C=mp(w.type,w.key,w.props,null,g.mode,C),C.ref=Mu(g,null,w),C.return=g,C;case tc:return w=fv(w,g.mode,C),w.return=g,w;case Co:var M=w._init;return o(g,M(w._payload),C)}if($u(w)||yu(w))return w=Ga(w,g.mode,C,null),w.return=g,w;rd(g,w)}return null}function h(g,w,C,M){var _=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return _!==null?null:l(g,w,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Kf:return C.key===_?u(g,w,C,M):null;case tc:return C.key===_?f(g,w,C,M):null;case Co:return _=C._init,h(g,w,_(C._payload),M)}if($u(C)||yu(C))return _!==null?null:a(g,w,C,M,null);rd(g,C)}return null}function d(g,w,C,M,_){if(typeof M=="string"&&M!==""||typeof M=="number")return g=g.get(C)||null,l(w,g,""+M,_);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Kf:return g=g.get(M.key===null?C:M.key)||null,u(w,g,M,_);case tc:return g=g.get(M.key===null?C:M.key)||null,f(w,g,M,_);case Co:var E=M._init;return d(g,w,C,E(M._payload),_)}if($u(M)||yu(M))return g=g.get(C)||null,a(w,g,M,_,null);rd(w,M)}return null}function p(g,w,C,M){for(var _=null,E=null,R=w,A=w=0,T=null;R!==null&&A<C.length;A++){R.index>A?(T=R,R=null):T=R.sibling;var S=h(g,R,C[A],M);if(S===null){R===null&&(R=T);break}n&&R&&S.alternate===null&&e(g,R),w=s(S,w,A),E===null?_=S:E.sibling=S,E=S,R=T}if(A===C.length)return t(g,R),Pn&&La(g,A),_;if(R===null){for(;A<C.length;A++)R=o(g,C[A],M),R!==null&&(w=s(R,w,A),E===null?_=R:E.sibling=R,E=R);return Pn&&La(g,A),_}for(R=i(g,R);A<C.length;A++)T=d(R,g,A,C[A],M),T!==null&&(n&&T.alternate!==null&&R.delete(T.key===null?A:T.key),w=s(T,w,A),E===null?_=T:E.sibling=T,E=T);return n&&R.forEach(function(I){return e(g,I)}),Pn&&La(g,A),_}function y(g,w,C,M){var _=yu(C);if(typeof _!="function")throw Error(st(150));if(C=_.call(C),C==null)throw Error(st(151));for(var E=_=null,R=w,A=w=0,T=null,S=C.next();R!==null&&!S.done;A++,S=C.next()){R.index>A?(T=R,R=null):T=R.sibling;var I=h(g,R,S.value,M);if(I===null){R===null&&(R=T);break}n&&R&&I.alternate===null&&e(g,R),w=s(I,w,A),E===null?_=I:E.sibling=I,E=I,R=T}if(S.done)return t(g,R),Pn&&La(g,A),_;if(R===null){for(;!S.done;A++,S=C.next())S=o(g,S.value,M),S!==null&&(w=s(S,w,A),E===null?_=S:E.sibling=S,E=S);return Pn&&La(g,A),_}for(R=i(g,R);!S.done;A++,S=C.next())S=d(R,g,A,S.value,M),S!==null&&(n&&S.alternate!==null&&R.delete(S.key===null?A:S.key),w=s(S,w,A),E===null?_=S:E.sibling=S,E=S);return n&&R.forEach(function(D){return e(g,D)}),Pn&&La(g,A),_}function x(g,w,C,M){if(typeof C=="object"&&C!==null&&C.type===nc&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Kf:e:{for(var _=C.key,E=w;E!==null;){if(E.key===_){if(_=C.type,_===nc){if(E.tag===7){t(g,E.sibling),w=r(E,C.props.children),w.return=g,g=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Co&&Ow(_)===E.type){t(g,E.sibling),w=r(E,C.props),w.ref=Mu(g,E,C),w.return=g,g=w;break e}t(g,E);break}else e(g,E);E=E.sibling}C.type===nc?(w=Ga(C.props.children,g.mode,M,C.key),w.return=g,g=w):(M=mp(C.type,C.key,C.props,null,g.mode,M),M.ref=Mu(g,w,C),M.return=g,g=M)}return c(g);case tc:e:{for(E=C.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){t(g,w.sibling),w=r(w,C.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=fv(C,g.mode,M),w.return=g,g=w}return c(g);case Co:return E=C._init,x(g,w,E(C._payload),M)}if($u(C))return p(g,w,C,M);if(yu(C))return y(g,w,C,M);rd(g,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(t(g,w.sibling),w=r(w,C),w.return=g,g=w):(t(g,w),w=hv(C,g.mode,M),w.return=g,g=w),c(g)):t(g,w)}return x}var Rc=yE(!0),xE=yE(!1),Kh={},ws=Yo(Kh),gh=Yo(Kh),vh=Yo(Kh);function Ba(n){if(n===Kh)throw Error(st(174));return n}function xx(n,e){switch(_n(vh,e),_n(gh,n),_n(ws,Kh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=p0(e,n)}bn(ws),_n(ws,e)}function Lc(){bn(ws),bn(gh),bn(vh)}function _E(n){Ba(vh.current);var e=Ba(ws.current),t=p0(e,n.type);e!==t&&(_n(gh,n),_n(ws,t))}function _x(n){gh.current===n&&(bn(ws),bn(gh))}var Nn=Yo(0);function Bp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sv=[];function Sx(){for(var n=0;n<sv.length;n++)sv[n]._workInProgressVersionPrimary=null;sv.length=0}var up=to.ReactCurrentDispatcher,ov=to.ReactCurrentBatchConfig,qa=0,Fn=null,ci=null,yi=null,$p=!1,Yu=!1,yh=0,g2=0;function Li(){throw Error(st(321))}function wx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ls(n[t],e[t]))return!1;return!0}function Mx(n,e,t,i,r,s){if(qa=s,Fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,up.current=n===null||n.memoizedState===null?_2:S2,n=t(i,r),Yu){s=0;do{if(Yu=!1,yh=0,25<=s)throw Error(st(301));s+=1,yi=ci=null,e.updateQueue=null,up.current=w2,n=t(i,r)}while(Yu)}if(up.current=zp,e=ci!==null&&ci.next!==null,qa=0,yi=ci=Fn=null,$p=!1,e)throw Error(st(300));return n}function Cx(){var n=yh!==0;return yh=0,n}function xs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Fn.memoizedState=yi=n:yi=yi.next=n,yi}function Gr(){if(ci===null){var n=Fn.alternate;n=n!==null?n.memoizedState:null}else n=ci.next;var e=yi===null?Fn.memoizedState:yi.next;if(e!==null)yi=e,ci=n;else{if(n===null)throw Error(st(310));ci=n,n={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},yi===null?Fn.memoizedState=yi=n:yi=yi.next=n}return yi}function xh(n,e){return typeof e=="function"?e(n):e}function av(n){var e=Gr(),t=e.queue;if(t===null)throw Error(st(311));t.lastRenderedReducer=n;var i=ci,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var c=r.next;r.next=s.next,s.next=c}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=c=null,u=null,f=s;do{var a=f.lane;if((qa&a)===a)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var o={lane:a,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=o,c=i):u=u.next=o,Fn.lanes|=a,el|=a}f=f.next}while(f!==null&&f!==s);u===null?c=i:u.next=l,ls(i,e.memoizedState)||(cr=!0),e.memoizedState=i,e.baseState=c,e.baseQueue=u,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Fn.lanes|=s,el|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function lv(n){var e=Gr(),t=e.queue;if(t===null)throw Error(st(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var c=r=r.next;do s=n(s,c.action),c=c.next;while(c!==r);ls(s,e.memoizedState)||(cr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function SE(){}function wE(n,e){var t=Fn,i=Gr(),r=e(),s=!ls(i.memoizedState,r);if(s&&(i.memoizedState=r,cr=!0),i=i.queue,Ex(EE.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||yi!==null&&yi.memoizedState.tag&1){if(t.flags|=2048,_h(9,CE.bind(null,t,i,r,e),void 0,null),xi===null)throw Error(st(349));qa&30||ME(t,e,r)}return r}function ME(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function CE(n,e,t,i){e.value=t,e.getSnapshot=i,bE(e)&&AE(n)}function EE(n,e,t){return t(function(){bE(e)&&AE(n)})}function bE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ls(n,t)}catch{return!0}}function AE(n){var e=Zs(n,1);e!==null&&as(e,n,1,-1)}function Dw(n){var e=xs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:n},e.queue=n,n=n.dispatch=x2.bind(null,Fn,n),[e.memoizedState,n]}function _h(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function TE(){return Gr().memoizedState}function hp(n,e,t,i){var r=xs();Fn.flags|=n,r.memoizedState=_h(1|e,t,void 0,i===void 0?null:i)}function um(n,e,t,i){var r=Gr();i=i===void 0?null:i;var s=void 0;if(ci!==null){var c=ci.memoizedState;if(s=c.destroy,i!==null&&wx(i,c.deps)){r.memoizedState=_h(e,t,s,i);return}}Fn.flags|=n,r.memoizedState=_h(1|e,t,s,i)}function Fw(n,e){return hp(8390656,8,n,e)}function Ex(n,e){return um(2048,8,n,e)}function RE(n,e){return um(4,2,n,e)}function LE(n,e){return um(4,4,n,e)}function kE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function PE(n,e,t){return t=t!=null?t.concat([n]):null,um(4,4,kE.bind(null,e,n),t)}function bx(){}function IE(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&wx(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function NE(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&wx(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function OE(n,e,t){return qa&21?(ls(t,e)||(t=UC(),Fn.lanes|=t,el|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cr=!0),n.memoizedState=t)}function v2(n,e){var t=fn;fn=t!==0&&4>t?t:4,n(!0);var i=ov.transition;ov.transition={};try{n(!1),e()}finally{fn=t,ov.transition=i}}function DE(){return Gr().memoizedState}function y2(n,e,t){var i=Fo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},FE(n))UE(e,t);else if(t=pE(n,e,t,i),t!==null){var r=Ki();as(t,n,i,r),BE(t,e,i)}}function x2(n,e,t){var i=Fo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(FE(n))UE(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var c=e.lastRenderedState,l=s(c,t);if(r.hasEagerState=!0,r.eagerState=l,ls(l,c)){var u=e.interleaved;u===null?(r.next=r,vx(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=pE(n,e,r,i),t!==null&&(r=Ki(),as(t,n,i,r),BE(t,e,i))}}function FE(n){var e=n.alternate;return n===Fn||e!==null&&e===Fn}function UE(n,e){Yu=$p=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function BE(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,ix(n,t)}}var zp={readContext:Vr,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},_2={readContext:Vr,useCallback:function(n,e){return xs().memoizedState=[n,e===void 0?null:e],n},useContext:Vr,useEffect:Fw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,hp(4194308,4,kE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return hp(4194308,4,n,e)},useInsertionEffect:function(n,e){return hp(4,2,n,e)},useMemo:function(n,e){var t=xs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=xs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=y2.bind(null,Fn,n),[i.memoizedState,n]},useRef:function(n){var e=xs();return n={current:n},e.memoizedState=n},useState:Dw,useDebugValue:bx,useDeferredValue:function(n){return xs().memoizedState=n},useTransition:function(){var n=Dw(!1),e=n[0];return n=v2.bind(null,n[1]),xs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Fn,r=xs();if(Pn){if(t===void 0)throw Error(st(407));t=t()}else{if(t=e(),xi===null)throw Error(st(349));qa&30||ME(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Fw(EE.bind(null,i,s,n),[n]),i.flags|=2048,_h(9,CE.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=xs(),e=xi.identifierPrefix;if(Pn){var t=Ws,i=Hs;t=(i&~(1<<32-os(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=yh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=g2++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},S2={readContext:Vr,useCallback:IE,useContext:Vr,useEffect:Ex,useImperativeHandle:PE,useInsertionEffect:RE,useLayoutEffect:LE,useMemo:NE,useReducer:av,useRef:TE,useState:function(){return av(xh)},useDebugValue:bx,useDeferredValue:function(n){var e=Gr();return OE(e,ci.memoizedState,n)},useTransition:function(){var n=av(xh)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:SE,useSyncExternalStore:wE,useId:DE,unstable_isNewReconciler:!1},w2={readContext:Vr,useCallback:IE,useContext:Vr,useEffect:Ex,useImperativeHandle:PE,useInsertionEffect:RE,useLayoutEffect:LE,useMemo:NE,useReducer:lv,useRef:TE,useState:function(){return lv(xh)},useDebugValue:bx,useDeferredValue:function(n){var e=Gr();return ci===null?e.memoizedState=n:OE(e,ci.memoizedState,n)},useTransition:function(){var n=lv(xh)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:SE,useSyncExternalStore:wE,useId:DE,unstable_isNewReconciler:!1};function kc(n,e){try{var t="",i=e;do t+=ZR(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function cv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function F0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var M2=typeof WeakMap=="function"?WeakMap:Map;function $E(n,e,t){t=js(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Wp||(Wp=!0,K0=i),F0(n,e)},t}function zE(n,e,t){t=js(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){F0(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){F0(n,e),typeof i!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),t}function Uw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new M2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=F2.bind(null,n,e,t),e.then(n,n))}function Bw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function $w(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=js(-1,1),e.tag=2,Oo(t,e,1))),t.lanes|=1),n)}var C2=to.ReactCurrentOwner,cr=!1;function Gi(n,e,t,i){e.child=n===null?xE(e,null,t,i):Rc(e,n.child,t,i)}function zw(n,e,t,i,r){t=t.render;var s=e.ref;return Mc(e,r),i=Mx(n,e,t,i,s,r),t=Cx(),n!==null&&!cr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Qs(n,e,r)):(Pn&&t&&hx(e),e.flags|=1,Gi(n,e,i,r),e.child)}function Hw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Nx(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,HE(n,e,s,i,r)):(n=mp(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var c=s.memoizedProps;if(t=t.compare,t=t!==null?t:fh,t(c,i)&&n.ref===e.ref)return Qs(n,e,r)}return e.flags|=1,n=Uo(s,i),n.ref=e.ref,n.return=e,e.child=n}function HE(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(fh(s,i)&&n.ref===e.ref)if(cr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(cr=!0);else return e.lanes=n.lanes,Qs(n,e,r)}return U0(n,e,t,i,r)}function WE(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(fc,wr),wr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_n(fc,wr),wr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,_n(fc,wr),wr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,_n(fc,wr),wr|=i;return Gi(n,e,r,t),e.child}function VE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function U0(n,e,t,i,r){var s=hr(t)?Qa:Bi.current;return s=Ac(e,s),Mc(e,r),t=Mx(n,e,t,i,s,r),i=Cx(),n!==null&&!cr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Qs(n,e,r)):(Pn&&i&&hx(e),e.flags|=1,Gi(n,e,t,r),e.child)}function Ww(n,e,t,i,r){if(hr(t)){var s=!0;Ip(e)}else s=!1;if(Mc(e,r),e.stateNode===null)fp(n,e),vE(e,t,i),D0(e,t,i,r),i=!0;else if(n===null){var c=e.stateNode,l=e.memoizedProps;c.props=l;var u=c.context,f=t.contextType;typeof f=="object"&&f!==null?f=Vr(f):(f=hr(t)?Qa:Bi.current,f=Ac(e,f));var a=t.getDerivedStateFromProps,o=typeof a=="function"||typeof c.getSnapshotBeforeUpdate=="function";o||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(l!==i||u!==f)&&Nw(e,c,i,f),Eo=!1;var h=e.memoizedState;c.state=h,Up(e,i,c,r),u=e.memoizedState,l!==i||h!==u||ur.current||Eo?(typeof a=="function"&&(O0(e,t,a,i),u=e.memoizedState),(l=Eo||Iw(e,t,l,i,h,u,f))?(o||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),c.props=i,c.state=u,c.context=f,i=l):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{c=e.stateNode,mE(n,e),l=e.memoizedProps,f=e.type===e.elementType?l:qr(e.type,l),c.props=f,o=e.pendingProps,h=c.context,u=t.contextType,typeof u=="object"&&u!==null?u=Vr(u):(u=hr(t)?Qa:Bi.current,u=Ac(e,u));var d=t.getDerivedStateFromProps;(a=typeof d=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(l!==o||h!==u)&&Nw(e,c,i,u),Eo=!1,h=e.memoizedState,c.state=h,Up(e,i,c,r);var p=e.memoizedState;l!==o||h!==p||ur.current||Eo?(typeof d=="function"&&(O0(e,t,d,i),p=e.memoizedState),(f=Eo||Iw(e,t,f,i,h,p,u)||!1)?(a||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,p,u),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,p,u)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),c.props=i,c.state=p,c.context=u,i=f):(typeof c.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return B0(n,e,t,i,s,r)}function B0(n,e,t,i,r,s){VE(n,e);var c=(e.flags&128)!==0;if(!i&&!c)return r&&Tw(e,t,!1),Qs(n,e,s);i=e.stateNode,C2.current=e;var l=c&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&c?(e.child=Rc(e,n.child,null,s),e.child=Rc(e,null,l,s)):Gi(n,e,l,s),e.memoizedState=i.state,r&&Tw(e,t,!0),e.child}function GE(n){var e=n.stateNode;e.pendingContext?Aw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Aw(n,e.context,!1),xx(n,e.containerInfo)}function Vw(n,e,t,i,r){return Tc(),dx(r),e.flags|=256,Gi(n,e,t,i),e.child}var $0={dehydrated:null,treeContext:null,retryLane:0};function z0(n){return{baseLanes:n,cachePool:null,transitions:null}}function jE(n,e,t){var i=e.pendingProps,r=Nn.current,s=!1,c=(e.flags&128)!==0,l;if((l=c)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),_n(Nn,r&1),n===null)return I0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=i.children,n=i.fallback,s?(i=e.mode,s=e.child,c={mode:"hidden",children:c},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=c):s=dm(c,i,0,null),n=Ga(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=z0(t),e.memoizedState=$0,n):Ax(e,c));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return E2(n,e,c,i,l,r,t);if(s){s=i.fallback,c=e.mode,r=n.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(c&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=Uo(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Uo(l,s):(s=Ga(s,c,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,c=n.child.memoizedState,c=c===null?z0(t):{baseLanes:c.baseLanes|t,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=n.childLanes&~t,e.memoizedState=$0,i}return s=n.child,n=s.sibling,i=Uo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Ax(n,e){return e=dm({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function sd(n,e,t,i){return i!==null&&dx(i),Rc(e,n.child,null,t),n=Ax(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function E2(n,e,t,i,r,s,c){if(t)return e.flags&256?(e.flags&=-257,i=cv(Error(st(422))),sd(n,e,c,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=dm({mode:"visible",children:i.children},r,0,null),s=Ga(s,r,c,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Rc(e,n.child,null,c),e.child.memoizedState=z0(c),e.memoizedState=$0,s);if(!(e.mode&1))return sd(n,e,c,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(st(419)),i=cv(s,i,void 0),sd(n,e,c,i)}if(l=(c&n.childLanes)!==0,cr||l){if(i=xi,i!==null){switch(c&-c){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|c)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Zs(n,r),as(i,n,r,-1))}return Ix(),i=cv(Error(st(421))),sd(n,e,c,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=U2.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Er=No(r.nextSibling),br=e,Pn=!0,ns=null,n!==null&&(Br[$r++]=Hs,Br[$r++]=Ws,Br[$r++]=Ja,Hs=n.id,Ws=n.overflow,Ja=e),e=Ax(e,i.children),e.flags|=4096,e)}function Gw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),N0(n.return,e,t)}function uv(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function KE(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Gi(n,e,i.children,t),i=Nn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gw(n,t,e);else if(n.tag===19)Gw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_n(Nn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Bp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),uv(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Bp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}uv(e,!0,t,null,s);break;case"together":uv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),el|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(st(153));if(e.child!==null){for(n=e.child,t=Uo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Uo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function b2(n,e,t){switch(e.tag){case 3:GE(e),Tc();break;case 5:_E(e);break;case 1:hr(e.type)&&Ip(e);break;case 4:xx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;_n(Dp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_n(Nn,Nn.current&1),e.flags|=128,null):t&e.child.childLanes?jE(n,e,t):(_n(Nn,Nn.current&1),n=Qs(n,e,t),n!==null?n.sibling:null);_n(Nn,Nn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return KE(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_n(Nn,Nn.current),i)break;return null;case 22:case 23:return e.lanes=0,WE(n,e,t)}return Qs(n,e,t)}var XE,H0,YE,ZE;XE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};H0=function(){};YE=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ba(ws.current);var s=null;switch(t){case"input":r=u0(n,r),i=u0(n,i),s=[];break;case"select":r=Un({},r,{value:void 0}),i=Un({},i,{value:void 0}),s=[];break;case"textarea":r=d0(n,r),i=d0(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=kp)}m0(t,i);var c;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var l=r[f];for(c in l)l.hasOwnProperty(c)&&(t||(t={}),t[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(sh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var u=i[f];if(l=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(t||(t={}),t[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(t||(t={}),t[c]=u[c])}else t||(s||(s=[]),s.push(f,t)),t=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(sh.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&En("scroll",n),s||l===u||(s=[])):(s=s||[]).push(f,u))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};ZE=function(n,e,t,i){t!==i&&(e.flags|=4)};function Cu(n,e){if(!Pn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ki(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function A2(n,e,t){var i=e.pendingProps;switch(fx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(e),null;case 1:return hr(e.type)&&Pp(),ki(e),null;case 3:return i=e.stateNode,Lc(),bn(ur),bn(Bi),Sx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(id(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(Z0(ns),ns=null))),H0(n,e),ki(e),null;case 5:_x(e);var r=Ba(vh.current);if(t=e.type,n!==null&&e.stateNode!=null)YE(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(st(166));return ki(e),null}if(n=Ba(ws.current),id(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[_s]=e,i[mh]=s,n=(e.mode&1)!==0,t){case"dialog":En("cancel",i),En("close",i);break;case"iframe":case"object":case"embed":En("load",i);break;case"video":case"audio":for(r=0;r<Hu.length;r++)En(Hu[r],i);break;case"source":En("error",i);break;case"img":case"image":case"link":En("error",i),En("load",i);break;case"details":En("toggle",i);break;case"input":ew(i,s),En("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},En("invalid",i);break;case"textarea":nw(i,s),En("invalid",i)}m0(t,s),r=null;for(var c in s)if(s.hasOwnProperty(c)){var l=s[c];c==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&nd(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&nd(i.textContent,l,n),r=["children",""+l]):sh.hasOwnProperty(c)&&l!=null&&c==="onScroll"&&En("scroll",i)}switch(t){case"input":Xf(i),tw(i,s,!0);break;case"textarea":Xf(i),iw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=kp)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{c=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=MC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=c.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=c.createElement(t,{is:i.is}):(n=c.createElement(t),t==="select"&&(c=n,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):n=c.createElementNS(n,t),n[_s]=e,n[mh]=i,XE(n,e,!1,!1),e.stateNode=n;e:{switch(c=g0(t,i),t){case"dialog":En("cancel",n),En("close",n),r=i;break;case"iframe":case"object":case"embed":En("load",n),r=i;break;case"video":case"audio":for(r=0;r<Hu.length;r++)En(Hu[r],n);r=i;break;case"source":En("error",n),r=i;break;case"img":case"image":case"link":En("error",n),En("load",n),r=i;break;case"details":En("toggle",n),r=i;break;case"input":ew(n,i),r=u0(n,i),En("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Un({},i,{value:void 0}),En("invalid",n);break;case"textarea":nw(n,i),r=d0(n,i),En("invalid",n);break;default:r=i}m0(t,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?bC(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&CC(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&oh(n,u):typeof u=="number"&&oh(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sh.hasOwnProperty(s)?u!=null&&s==="onScroll"&&En("scroll",n):u!=null&&Qy(n,s,u,c))}switch(t){case"input":Xf(n),tw(n,i,!1);break;case"textarea":Xf(n),iw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Wo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?xc(n,!!i.multiple,s,!1):i.defaultValue!=null&&xc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=kp)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ki(e),null;case 6:if(n&&e.stateNode!=null)ZE(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(st(166));if(t=Ba(vh.current),Ba(ws.current),id(e)){if(i=e.stateNode,t=e.memoizedProps,i[_s]=e,(s=i.nodeValue!==t)&&(n=br,n!==null))switch(n.tag){case 3:nd(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nd(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[_s]=e,e.stateNode=i}return ki(e),null;case 13:if(bn(Nn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pn&&Er!==null&&e.mode&1&&!(e.flags&128))dE(),Tc(),e.flags|=98560,s=!1;else if(s=id(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(st(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(st(317));s[_s]=e}else Tc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ki(e),s=!1}else ns!==null&&(Z0(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Nn.current&1?hi===0&&(hi=3):Ix())),e.updateQueue!==null&&(e.flags|=4),ki(e),null);case 4:return Lc(),H0(n,e),n===null&&dh(e.stateNode.containerInfo),ki(e),null;case 10:return gx(e.type._context),ki(e),null;case 17:return hr(e.type)&&Pp(),ki(e),null;case 19:if(bn(Nn),s=e.memoizedState,s===null)return ki(e),null;if(i=(e.flags&128)!==0,c=s.rendering,c===null)if(i)Cu(s,!1);else{if(hi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(c=Bp(n),c!==null){for(e.flags|=128,Cu(s,!1),i=c.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,c=s.alternate,c===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,n=c.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _n(Nn,Nn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Yn()>Pc&&(e.flags|=128,i=!0,Cu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Bp(c),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Cu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!Pn)return ki(e),null}else 2*Yn()-s.renderingStartTime>Pc&&t!==1073741824&&(e.flags|=128,i=!0,Cu(s,!1),e.lanes=4194304);s.isBackwards?(c.sibling=e.child,e.child=c):(t=s.last,t!==null?t.sibling=c:e.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yn(),e.sibling=null,t=Nn.current,_n(Nn,i?t&1|2:t&1),e):(ki(e),null);case 22:case 23:return Px(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?wr&1073741824&&(ki(e),e.subtreeFlags&6&&(e.flags|=8192)):ki(e),null;case 24:return null;case 25:return null}throw Error(st(156,e.tag))}function T2(n,e){switch(fx(e),e.tag){case 1:return hr(e.type)&&Pp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Lc(),bn(ur),bn(Bi),Sx(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return _x(e),null;case 13:if(bn(Nn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(st(340));Tc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return bn(Nn),null;case 4:return Lc(),null;case 10:return gx(e.type._context),null;case 22:case 23:return Px(),null;case 24:return null;default:return null}}var od=!1,Oi=!1,R2=typeof WeakSet=="function"?WeakSet:Set,yt=null;function hc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Hn(n,e,i)}else t.current=null}function W0(n,e,t){try{t()}catch(i){Hn(n,e,i)}}var jw=!1;function L2(n,e){if(b0=Tp,n=eE(),ux(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var c=0,l=-1,u=-1,f=0,a=0,o=n,h=null;t:for(;;){for(var d;o!==t||r!==0&&o.nodeType!==3||(l=c+r),o!==s||i!==0&&o.nodeType!==3||(u=c+i),o.nodeType===3&&(c+=o.nodeValue.length),(d=o.firstChild)!==null;)h=o,o=d;for(;;){if(o===n)break t;if(h===t&&++f===r&&(l=c),h===s&&++a===i&&(u=c),(d=o.nextSibling)!==null)break;o=h,h=o.parentNode}o=d}t=l===-1||u===-1?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(A0={focusedElem:n,selectionRange:t},Tp=!1,yt=e;yt!==null;)if(e=yt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,yt=n;else for(;yt!==null;){e=yt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,x=p.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:qr(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(M){Hn(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}return p=jw,jw=!1,p}function Zu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&W0(e,t,s)}r=r.next}while(r!==i)}}function hm(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function V0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function QE(n){var e=n.alternate;e!==null&&(n.alternate=null,QE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_s],delete e[mh],delete e[L0],delete e[f2],delete e[d2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function JE(n){return n.tag===5||n.tag===3||n.tag===4}function Kw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function G0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=kp));else if(i!==4&&(n=n.child,n!==null))for(G0(n,e,t),n=n.sibling;n!==null;)G0(n,e,t),n=n.sibling}function j0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(j0(n,e,t),n=n.sibling;n!==null;)j0(n,e,t),n=n.sibling}var Si=null,ts=!1;function go(n,e,t){for(t=t.child;t!==null;)qE(n,e,t),t=t.sibling}function qE(n,e,t){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(im,t)}catch{}switch(t.tag){case 5:Oi||hc(t,e);case 6:var i=Si,r=ts;Si=null,go(n,e,t),Si=i,ts=r,Si!==null&&(ts?(n=Si,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Si.removeChild(t.stateNode));break;case 18:Si!==null&&(ts?(n=Si,t=t.stateNode,n.nodeType===8?iv(n.parentNode,t):n.nodeType===1&&iv(n,t),uh(n)):iv(Si,t.stateNode));break;case 4:i=Si,r=ts,Si=t.stateNode.containerInfo,ts=!0,go(n,e,t),Si=i,ts=r;break;case 0:case 11:case 14:case 15:if(!Oi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,c=s.destroy;s=s.tag,c!==void 0&&(s&2||s&4)&&W0(t,e,c),r=r.next}while(r!==i)}go(n,e,t);break;case 1:if(!Oi&&(hc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(l){Hn(t,e,l)}go(n,e,t);break;case 21:go(n,e,t);break;case 22:t.mode&1?(Oi=(i=Oi)||t.memoizedState!==null,go(n,e,t),Oi=i):go(n,e,t);break;default:go(n,e,t)}}function Xw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new R2),e.forEach(function(i){var r=B2.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Yr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,c=e,l=c;e:for(;l!==null;){switch(l.tag){case 5:Si=l.stateNode,ts=!1;break e;case 3:Si=l.stateNode.containerInfo,ts=!0;break e;case 4:Si=l.stateNode.containerInfo,ts=!0;break e}l=l.return}if(Si===null)throw Error(st(160));qE(s,c,r),Si=null,ts=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(f){Hn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eb(e,n),e=e.sibling}function eb(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Yr(e,n),ys(n),i&4){try{Zu(3,n,n.return),hm(3,n)}catch(y){Hn(n,n.return,y)}try{Zu(5,n,n.return)}catch(y){Hn(n,n.return,y)}}break;case 1:Yr(e,n),ys(n),i&512&&t!==null&&hc(t,t.return);break;case 5:if(Yr(e,n),ys(n),i&512&&t!==null&&hc(t,t.return),n.flags&32){var r=n.stateNode;try{oh(r,"")}catch(y){Hn(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,c=t!==null?t.memoizedProps:s,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&SC(r,s),g0(l,c);var f=g0(l,s);for(c=0;c<u.length;c+=2){var a=u[c],o=u[c+1];a==="style"?bC(r,o):a==="dangerouslySetInnerHTML"?CC(r,o):a==="children"?oh(r,o):Qy(r,a,o,f)}switch(l){case"input":h0(r,s);break;case"textarea":wC(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?xc(r,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?xc(r,!!s.multiple,s.defaultValue,!0):xc(r,!!s.multiple,s.multiple?[]:"",!1))}r[mh]=s}catch(y){Hn(n,n.return,y)}}break;case 6:if(Yr(e,n),ys(n),i&4){if(n.stateNode===null)throw Error(st(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){Hn(n,n.return,y)}}break;case 3:if(Yr(e,n),ys(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{uh(e.containerInfo)}catch(y){Hn(n,n.return,y)}break;case 4:Yr(e,n),ys(n);break;case 13:Yr(e,n),ys(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Lx=Yn())),i&4&&Xw(n);break;case 22:if(a=t!==null&&t.memoizedState!==null,n.mode&1?(Oi=(f=Oi)||a,Yr(e,n),Oi=f):Yr(e,n),ys(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!a&&n.mode&1)for(yt=n,a=n.child;a!==null;){for(o=yt=a;yt!==null;){switch(h=yt,d=h.child,h.tag){case 0:case 11:case 14:case 15:Zu(4,h,h.return);break;case 1:hc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Hn(i,t,y)}}break;case 5:hc(h,h.return);break;case 22:if(h.memoizedState!==null){Zw(o);continue}}d!==null?(d.return=h,yt=d):Zw(o)}a=a.sibling}e:for(a=null,o=n;;){if(o.tag===5){if(a===null){a=o;try{r=o.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=o.stateNode,u=o.memoizedProps.style,c=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=EC("display",c))}catch(y){Hn(n,n.return,y)}}}else if(o.tag===6){if(a===null)try{o.stateNode.nodeValue=f?"":o.memoizedProps}catch(y){Hn(n,n.return,y)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}}break;case 19:Yr(e,n),ys(n),i&4&&Xw(n);break;case 21:break;default:Yr(e,n),ys(n)}}function ys(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(JE(t)){var i=t;break e}t=t.return}throw Error(st(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(oh(r,""),i.flags&=-33);var s=Kw(n);j0(n,s,r);break;case 3:case 4:var c=i.stateNode.containerInfo,l=Kw(n);G0(n,l,c);break;default:throw Error(st(161))}}catch(u){Hn(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function k2(n,e,t){yt=n,tb(n)}function tb(n,e,t){for(var i=(n.mode&1)!==0;yt!==null;){var r=yt,s=r.child;if(r.tag===22&&i){var c=r.memoizedState!==null||od;if(!c){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Oi;l=od;var f=Oi;if(od=c,(Oi=u)&&!f)for(yt=r;yt!==null;)c=yt,u=c.child,c.tag===22&&c.memoizedState!==null?Qw(r):u!==null?(u.return=c,yt=u):Qw(r);for(;s!==null;)yt=s,tb(s),s=s.sibling;yt=r,od=l,Oi=f}Yw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,yt=s):Yw(n)}}function Yw(n){for(;yt!==null;){var e=yt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oi||hm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Oi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:qr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Pw(e,s,i);break;case 3:var c=e.updateQueue;if(c!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Pw(e,c,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var a=f.memoizedState;if(a!==null){var o=a.dehydrated;o!==null&&uh(o)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}Oi||e.flags&512&&V0(e)}catch(h){Hn(e,e.return,h)}}if(e===n){yt=null;break}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}}function Zw(n){for(;yt!==null;){var e=yt;if(e===n){yt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,yt=t;break}yt=e.return}}function Qw(n){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hm(4,e)}catch(u){Hn(e,t,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){Hn(e,r,u)}}var s=e.return;try{V0(e)}catch(u){Hn(e,s,u)}break;case 5:var c=e.return;try{V0(e)}catch(u){Hn(e,c,u)}}}catch(u){Hn(e,e.return,u)}if(e===n){yt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,yt=l;break}yt=e.return}}var P2=Math.ceil,Hp=to.ReactCurrentDispatcher,Tx=to.ReactCurrentOwner,Wr=to.ReactCurrentBatchConfig,rn=0,xi=null,ri=null,wi=0,wr=0,fc=Yo(0),hi=0,Sh=null,el=0,fm=0,Rx=0,Qu=null,or=null,Lx=0,Pc=1/0,Us=null,Wp=!1,K0=null,Do=null,ad=!1,Lo=null,Vp=0,Ju=0,X0=null,dp=-1,pp=0;function Ki(){return rn&6?Yn():dp!==-1?dp:dp=Yn()}function Fo(n){return n.mode&1?rn&2&&wi!==0?wi&-wi:m2.transition!==null?(pp===0&&(pp=UC()),pp):(n=fn,n!==0||(n=window.event,n=n===void 0?16:GC(n.type)),n):1}function as(n,e,t,i){if(50<Ju)throw Ju=0,X0=null,Error(st(185));Vh(n,t,i),(!(rn&2)||n!==xi)&&(n===xi&&(!(rn&2)&&(fm|=t),hi===4&&Ao(n,wi)),fr(n,i),t===1&&rn===0&&!(e.mode&1)&&(Pc=Yn()+500,lm&&Zo()))}function fr(n,e){var t=n.callbackNode;mL(n,e);var i=Ap(n,n===xi?wi:0);if(i===0)t!==null&&ow(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&ow(t),e===1)n.tag===0?p2(Jw.bind(null,n)):uE(Jw.bind(null,n)),u2(function(){!(rn&6)&&Zo()}),t=null;else{switch(BC(i)){case 1:t=nx;break;case 4:t=DC;break;case 16:t=bp;break;case 536870912:t=FC;break;default:t=bp}t=cb(t,nb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function nb(n,e){if(dp=-1,pp=0,rn&6)throw Error(st(327));var t=n.callbackNode;if(Cc()&&n.callbackNode!==t)return null;var i=Ap(n,n===xi?wi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Gp(n,i);else{e=i;var r=rn;rn|=2;var s=rb();(xi!==n||wi!==e)&&(Us=null,Pc=Yn()+500,Va(n,e));do try{O2();break}catch(l){ib(n,l)}while(1);mx(),Hp.current=s,rn=r,ri!==null?e=0:(xi=null,wi=0,e=hi)}if(e!==0){if(e===2&&(r=S0(n),r!==0&&(i=r,e=Y0(n,r))),e===1)throw t=Sh,Va(n,0),Ao(n,i),fr(n,Yn()),t;if(e===6)Ao(n,i);else{if(r=n.current.alternate,!(i&30)&&!I2(r)&&(e=Gp(n,i),e===2&&(s=S0(n),s!==0&&(i=s,e=Y0(n,s))),e===1))throw t=Sh,Va(n,0),Ao(n,i),fr(n,Yn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(st(345));case 2:ka(n,or,Us);break;case 3:if(Ao(n,i),(i&130023424)===i&&(e=Lx+500-Yn(),10<e)){if(Ap(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Ki(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=R0(ka.bind(null,n,or,Us),e);break}ka(n,or,Us);break;case 4:if(Ao(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var c=31-os(i);s=1<<c,c=e[c],c>r&&(r=c),i&=~s}if(i=r,i=Yn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*P2(i/1960))-i,10<i){n.timeoutHandle=R0(ka.bind(null,n,or,Us),i);break}ka(n,or,Us);break;case 5:ka(n,or,Us);break;default:throw Error(st(329))}}}return fr(n,Yn()),n.callbackNode===t?nb.bind(null,n):null}function Y0(n,e){var t=Qu;return n.current.memoizedState.isDehydrated&&(Va(n,e).flags|=256),n=Gp(n,e),n!==2&&(e=or,or=t,e!==null&&Z0(e)),n}function Z0(n){or===null?or=n:or.push.apply(or,n)}function I2(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!ls(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ao(n,e){for(e&=~Rx,e&=~fm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-os(e),i=1<<t;n[t]=-1,e&=~i}}function Jw(n){if(rn&6)throw Error(st(327));Cc();var e=Ap(n,0);if(!(e&1))return fr(n,Yn()),null;var t=Gp(n,e);if(n.tag!==0&&t===2){var i=S0(n);i!==0&&(e=i,t=Y0(n,i))}if(t===1)throw t=Sh,Va(n,0),Ao(n,e),fr(n,Yn()),t;if(t===6)throw Error(st(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ka(n,or,Us),fr(n,Yn()),null}function kx(n,e){var t=rn;rn|=1;try{return n(e)}finally{rn=t,rn===0&&(Pc=Yn()+500,lm&&Zo())}}function tl(n){Lo!==null&&Lo.tag===0&&!(rn&6)&&Cc();var e=rn;rn|=1;var t=Wr.transition,i=fn;try{if(Wr.transition=null,fn=1,n)return n()}finally{fn=i,Wr.transition=t,rn=e,!(rn&6)&&Zo()}}function Px(){wr=fc.current,bn(fc)}function Va(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,c2(t)),ri!==null)for(t=ri.return;t!==null;){var i=t;switch(fx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Pp();break;case 3:Lc(),bn(ur),bn(Bi),Sx();break;case 5:_x(i);break;case 4:Lc();break;case 13:bn(Nn);break;case 19:bn(Nn);break;case 10:gx(i.type._context);break;case 22:case 23:Px()}t=t.return}if(xi=n,ri=n=Uo(n.current,null),wi=wr=e,hi=0,Sh=null,Rx=fm=el=0,or=Qu=null,Ua!==null){for(e=0;e<Ua.length;e++)if(t=Ua[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var c=s.next;s.next=r,i.next=c}t.pending=i}Ua=null}return n}function ib(n,e){do{var t=ri;try{if(mx(),up.current=zp,$p){for(var i=Fn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}$p=!1}if(qa=0,yi=ci=Fn=null,Yu=!1,yh=0,Tx.current=null,t===null||t.return===null){hi=1,Sh=e,ri=null;break}e:{var s=n,c=t.return,l=t,u=e;if(e=wi,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,a=l,o=a.tag;if(!(a.mode&1)&&(o===0||o===11||o===15)){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=Bw(c);if(d!==null){d.flags&=-257,$w(d,c,l,s,e),d.mode&1&&Uw(s,f,e),e=d,u=f;var p=e.updateQueue;if(p===null){var y=new Set;y.add(u),e.updateQueue=y}else p.add(u);break e}else{if(!(e&1)){Uw(s,f,e),Ix();break e}u=Error(st(426))}}else if(Pn&&l.mode&1){var x=Bw(c);if(x!==null){!(x.flags&65536)&&(x.flags|=256),$w(x,c,l,s,e),dx(kc(u,l));break e}}s=u=kc(u,l),hi!==4&&(hi=2),Qu===null?Qu=[s]:Qu.push(s),s=c;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=$E(s,u,e);kw(s,g);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Do===null||!Do.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=zE(s,l,e);kw(s,M);break e}}s=s.return}while(s!==null)}ob(t)}catch(_){e=_,ri===t&&t!==null&&(ri=t=t.return);continue}break}while(1)}function rb(){var n=Hp.current;return Hp.current=zp,n===null?zp:n}function Ix(){(hi===0||hi===3||hi===2)&&(hi=4),xi===null||!(el&268435455)&&!(fm&268435455)||Ao(xi,wi)}function Gp(n,e){var t=rn;rn|=2;var i=rb();(xi!==n||wi!==e)&&(Us=null,Va(n,e));do try{N2();break}catch(r){ib(n,r)}while(1);if(mx(),rn=t,Hp.current=i,ri!==null)throw Error(st(261));return xi=null,wi=0,hi}function N2(){for(;ri!==null;)sb(ri)}function O2(){for(;ri!==null&&!oL();)sb(ri)}function sb(n){var e=lb(n.alternate,n,wr);n.memoizedProps=n.pendingProps,e===null?ob(n):ri=e,Tx.current=null}function ob(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=T2(t,e),t!==null){t.flags&=32767,ri=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{hi=6,ri=null;return}}else if(t=A2(t,e,wr),t!==null){ri=t;return}if(e=e.sibling,e!==null){ri=e;return}ri=e=n}while(e!==null);hi===0&&(hi=5)}function ka(n,e,t){var i=fn,r=Wr.transition;try{Wr.transition=null,fn=1,D2(n,e,t,i)}finally{Wr.transition=r,fn=i}return null}function D2(n,e,t,i){do Cc();while(Lo!==null);if(rn&6)throw Error(st(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(st(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(gL(n,s),n===xi&&(ri=xi=null,wi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ad||(ad=!0,cb(bp,function(){return Cc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Wr.transition,Wr.transition=null;var c=fn;fn=1;var l=rn;rn|=4,Tx.current=null,L2(n,t),eb(t,n),n2(A0),Tp=!!b0,A0=b0=null,n.current=t,k2(t),aL(),rn=l,fn=c,Wr.transition=s}else n.current=t;if(ad&&(ad=!1,Lo=n,Vp=r),s=n.pendingLanes,s===0&&(Do=null),uL(t.stateNode),fr(n,Yn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wp)throw Wp=!1,n=K0,K0=null,n;return Vp&1&&n.tag!==0&&Cc(),s=n.pendingLanes,s&1?n===X0?Ju++:(Ju=0,X0=n):Ju=0,Zo(),null}function Cc(){if(Lo!==null){var n=BC(Vp),e=Wr.transition,t=fn;try{if(Wr.transition=null,fn=16>n?16:n,Lo===null)var i=!1;else{if(n=Lo,Lo=null,Vp=0,rn&6)throw Error(st(331));var r=rn;for(rn|=4,yt=n.current;yt!==null;){var s=yt,c=s.child;if(yt.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(yt=f;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:Zu(8,a,s)}var o=a.child;if(o!==null)o.return=a,yt=o;else for(;yt!==null;){a=yt;var h=a.sibling,d=a.return;if(QE(a),a===f){yt=null;break}if(h!==null){h.return=d,yt=h;break}yt=d}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}yt=s}}if(s.subtreeFlags&2064&&c!==null)c.return=s,yt=c;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zu(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,yt=g;break e}yt=s.return}}var w=n.current;for(yt=w;yt!==null;){c=yt;var C=c.child;if(c.subtreeFlags&2064&&C!==null)C.return=c,yt=C;else e:for(c=w;yt!==null;){if(l=yt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hm(9,l)}}catch(_){Hn(l,l.return,_)}if(l===c){yt=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,yt=M;break e}yt=l.return}}if(rn=r,Zo(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(im,n)}catch{}i=!0}return i}finally{fn=t,Wr.transition=e}}return!1}function qw(n,e,t){e=kc(t,e),e=$E(n,e,1),n=Oo(n,e,1),e=Ki(),n!==null&&(Vh(n,1,e),fr(n,e))}function Hn(n,e,t){if(n.tag===3)qw(n,n,t);else for(;e!==null;){if(e.tag===3){qw(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Do===null||!Do.has(i))){n=kc(t,n),n=zE(e,n,1),e=Oo(e,n,1),n=Ki(),e!==null&&(Vh(e,1,n),fr(e,n));break}}e=e.return}}function F2(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ki(),n.pingedLanes|=n.suspendedLanes&t,xi===n&&(wi&t)===t&&(hi===4||hi===3&&(wi&130023424)===wi&&500>Yn()-Lx?Va(n,0):Rx|=t),fr(n,e)}function ab(n,e){e===0&&(n.mode&1?(e=Qf,Qf<<=1,!(Qf&130023424)&&(Qf=4194304)):e=1);var t=Ki();n=Zs(n,e),n!==null&&(Vh(n,e,t),fr(n,t))}function U2(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ab(n,t)}function B2(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(st(314))}i!==null&&i.delete(e),ab(n,t)}var lb;lb=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ur.current)cr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cr=!1,b2(n,e,t);cr=!!(n.flags&131072)}else cr=!1,Pn&&e.flags&1048576&&hE(e,Op,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;fp(n,e),n=e.pendingProps;var r=Ac(e,Bi.current);Mc(e,t),r=Mx(null,e,i,n,r,t);var s=Cx();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hr(i)?(s=!0,Ip(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,yx(e),r.updater=cm,e.stateNode=r,r._reactInternals=e,D0(e,i,n,t),e=B0(null,e,i,!0,s,t)):(e.tag=0,Pn&&s&&hx(e),Gi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(fp(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=z2(i),n=qr(i,n),r){case 0:e=U0(null,e,i,n,t);break e;case 1:e=Ww(null,e,i,n,t);break e;case 11:e=zw(null,e,i,n,t);break e;case 14:e=Hw(null,e,i,qr(i.type,n),t);break e}throw Error(st(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),U0(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),Ww(n,e,i,r,t);case 3:e:{if(GE(e),n===null)throw Error(st(387));i=e.pendingProps,s=e.memoizedState,r=s.element,mE(n,e),Up(e,i,null,t);var c=e.memoizedState;if(i=c.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=kc(Error(st(423)),e),e=Vw(n,e,i,t,r);break e}else if(i!==r){r=kc(Error(st(424)),e),e=Vw(n,e,i,t,r);break e}else for(Er=No(e.stateNode.containerInfo.firstChild),br=e,Pn=!0,ns=null,t=xE(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tc(),i===r){e=Qs(n,e,t);break e}Gi(n,e,i,t)}e=e.child}return e;case 5:return _E(e),n===null&&I0(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,c=r.children,T0(i,r)?c=null:s!==null&&T0(i,s)&&(e.flags|=32),VE(n,e),Gi(n,e,c,t),e.child;case 6:return n===null&&I0(e),null;case 13:return jE(n,e,t);case 4:return xx(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Rc(e,null,i,t):Gi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),zw(n,e,i,r,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,c=r.value,_n(Dp,i._currentValue),i._currentValue=c,s!==null)if(ls(s.value,c)){if(s.children===r.children&&!ur.current){e=Qs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){c=s.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=js(-1,t&-t),u.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var a=f.pending;a===null?u.next=u:(u.next=a.next,a.next=u),f.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),N0(s.return,t,e),l.lanes|=t;break}u=u.next}}else if(s.tag===10)c=s.type===e.type?null:s.child;else if(s.tag===18){if(c=s.return,c===null)throw Error(st(341));c.lanes|=t,l=c.alternate,l!==null&&(l.lanes|=t),N0(c,t,e),c=s.sibling}else c=s.child;if(c!==null)c.return=s;else for(c=s;c!==null;){if(c===e){c=null;break}if(s=c.sibling,s!==null){s.return=c.return,c=s;break}c=c.return}s=c}Gi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Mc(e,t),r=Vr(r),i=i(r),e.flags|=1,Gi(n,e,i,t),e.child;case 14:return i=e.type,r=qr(i,e.pendingProps),r=qr(i.type,r),Hw(n,e,i,r,t);case 15:return HE(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),fp(n,e),e.tag=1,hr(i)?(n=!0,Ip(e)):n=!1,Mc(e,t),vE(e,i,r),D0(e,i,r,t),B0(null,e,i,!0,n,t);case 19:return KE(n,e,t);case 22:return WE(n,e,t)}throw Error(st(156,e.tag))};function cb(n,e){return OC(n,e)}function $2(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(n,e,t,i){return new $2(n,e,t,i)}function Nx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function z2(n){if(typeof n=="function")return Nx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===qy)return 11;if(n===ex)return 14}return 2}function Uo(n,e){var t=n.alternate;return t===null?(t=zr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function mp(n,e,t,i,r,s){var c=2;if(i=n,typeof n=="function")Nx(n)&&(c=1);else if(typeof n=="string")c=5;else e:switch(n){case nc:return Ga(t.children,r,s,e);case Jy:c=8,r|=8;break;case o0:return n=zr(12,t,e,r|2),n.elementType=o0,n.lanes=s,n;case a0:return n=zr(13,t,e,r),n.elementType=a0,n.lanes=s,n;case l0:return n=zr(19,t,e,r),n.elementType=l0,n.lanes=s,n;case yC:return dm(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gC:c=10;break e;case vC:c=9;break e;case qy:c=11;break e;case ex:c=14;break e;case Co:c=16,i=null;break e}throw Error(st(130,n==null?n:typeof n,""))}return e=zr(c,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ga(n,e,t,i){return n=zr(7,n,i,e),n.lanes=t,n}function dm(n,e,t,i){return n=zr(22,n,i,e),n.elementType=yC,n.lanes=t,n.stateNode={isHidden:!1},n}function hv(n,e,t){return n=zr(6,n,null,e),n.lanes=t,n}function fv(n,e,t){return e=zr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function H2(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jg(0),this.expirationTimes=jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ox(n,e,t,i,r,s,c,l,u){return n=new H2(n,e,t,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},yx(s),n}function W2(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function ub(n){if(!n)return Vo;n=n._reactInternals;e:{if(al(n)!==n||n.tag!==1)throw Error(st(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(st(171))}if(n.tag===1){var t=n.type;if(hr(t))return cE(n,t,e)}return e}function hb(n,e,t,i,r,s,c,l,u){return n=Ox(t,i,!0,n,r,s,c,l,u),n.context=ub(null),t=n.current,i=Ki(),r=Fo(t),s=js(i,r),s.callback=e??null,Oo(t,s,r),n.current.lanes=r,Vh(n,r,i),fr(n,i),n}function pm(n,e,t,i){var r=e.current,s=Ki(),c=Fo(r);return t=ub(t),e.context===null?e.context=t:e.pendingContext=t,e=js(s,c),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Oo(r,e,c),n!==null&&(as(n,r,c,s),cp(n,r,c)),c}function jp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function e1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Dx(n,e){e1(n,e),(n=n.alternate)&&e1(n,e)}function V2(){return null}var fb=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fx(n){this._internalRoot=n}mm.prototype.render=Fx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(st(409));pm(n,e,null,null)};mm.prototype.unmount=Fx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;tl(function(){pm(null,n,null,null)}),e[Ys]=null}};function mm(n){this._internalRoot=n}mm.prototype.unstable_scheduleHydration=function(n){if(n){var e=HC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<bo.length&&e!==0&&e<bo[t].priority;t++);bo.splice(t,0,n),t===0&&VC(n)}};function Ux(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function t1(){}function G2(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=jp(c);s.call(f)}}var c=hb(e,i,n,0,null,!1,!1,"",t1);return n._reactRootContainer=c,n[Ys]=c.current,dh(n.nodeType===8?n.parentNode:n),tl(),c}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var f=jp(u);l.call(f)}}var u=Ox(n,0,!1,null,null,!1,!1,"",t1);return n._reactRootContainer=u,n[Ys]=u.current,dh(n.nodeType===8?n.parentNode:n),tl(function(){pm(e,u,t,i)}),u}function vm(n,e,t,i,r){var s=t._reactRootContainer;if(s){var c=s;if(typeof r=="function"){var l=r;r=function(){var u=jp(c);l.call(u)}}pm(e,c,n,r)}else c=G2(t,e,n,r,i);return jp(c)}$C=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=zu(e.pendingLanes);t!==0&&(ix(e,t|1),fr(e,Yn()),!(rn&6)&&(Pc=Yn()+500,Zo()))}break;case 13:tl(function(){var i=Zs(n,1);if(i!==null){var r=Ki();as(i,n,1,r)}}),Dx(n,1)}};rx=function(n){if(n.tag===13){var e=Zs(n,134217728);if(e!==null){var t=Ki();as(e,n,134217728,t)}Dx(n,134217728)}};zC=function(n){if(n.tag===13){var e=Fo(n),t=Zs(n,e);if(t!==null){var i=Ki();as(t,n,e,i)}Dx(n,e)}};HC=function(){return fn};WC=function(n,e){var t=fn;try{return fn=n,e()}finally{fn=t}};y0=function(n,e,t){switch(e){case"input":if(h0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=am(i);if(!r)throw Error(st(90));_C(i),h0(i,r)}}}break;case"textarea":wC(n,t);break;case"select":e=t.value,e!=null&&xc(n,!!t.multiple,e,!1)}};RC=kx;LC=tl;var j2={usingClientEntryPoint:!1,Events:[jh,oc,am,AC,TC,kx]},Eu={findFiberByHostInstance:Fa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},K2={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=IC(n),n===null?null:n.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||V2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{im=ld.inject(K2),Ss=ld}catch{}}Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j2;Rr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ux(e))throw Error(st(200));return W2(n,e,null,t)};Rr.createRoot=function(n,e){if(!Ux(n))throw Error(st(299));var t=!1,i="",r=fb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ox(n,1,!1,null,null,t,!1,i,r),n[Ys]=e.current,dh(n.nodeType===8?n.parentNode:n),new Fx(e)};Rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(st(188)):(n=Object.keys(n).join(","),Error(st(268,n)));return n=IC(e),n=n===null?null:n.stateNode,n};Rr.flushSync=function(n){return tl(n)};Rr.hydrate=function(n,e,t){if(!gm(e))throw Error(st(200));return vm(null,n,e,!0,t)};Rr.hydrateRoot=function(n,e,t){if(!Ux(n))throw Error(st(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",c=fb;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),e=hb(e,null,n,1,t??null,r,!1,s,c),n[Ys]=e.current,dh(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new mm(e)};Rr.render=function(n,e,t){if(!gm(e))throw Error(st(200));return vm(null,n,e,!1,t)};Rr.unmountComponentAtNode=function(n){if(!gm(n))throw Error(st(40));return n._reactRootContainer?(tl(function(){vm(null,null,n,!1,function(){n._reactRootContainer=null,n[Ys]=null})}),!0):!1};Rr.unstable_batchedUpdates=kx;Rr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!gm(t))throw Error(st(200));if(n==null||n._reactInternals===void 0)throw Error(st(38));return vm(n,e,t,!1,i)};Rr.version="18.2.0-next-9e3b772b8-20220608";function db(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(db)}catch(n){console.error(n)}}db(),hC.exports=Rr;var X2=hC.exports,n1=X2;r0.createRoot=n1.createRoot,r0.hydrateRoot=n1.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ym="160",Pa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ia={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},pb=0,Q0=1,mb=2,Y2=3,gb=0,xm=1,qu=2,es=3,Js=0,Xi=1,rs=2,Z2=2,Ks=0,ja=1,J0=2,q0=3,ey=4,vb=5,To=100,yb=101,xb=102,ty=103,ny=104,_b=200,Sb=201,wb=202,Mb=203,Kp=204,Xp=205,Cb=206,Eb=207,bb=208,Ab=209,Tb=210,Rb=211,Lb=212,kb=213,Pb=214,Ib=0,Nb=1,Ob=2,wh=3,Db=4,Fb=5,Ub=6,Bb=7,Xh=0,$b=1,zb=2,Ms=0,Hb=1,Wb=2,Vb=3,Bx=4,Gb=5,jb=6,iy="attached",Kb="detached",_m=300,qs=301,Go=302,Mh=303,Ch=304,Hc=306,Eh=1e3,Di=1001,bh=1002,Xn=1003,Yp=1004,Q2=1004,eh=1005,J2=1005,On=1006,$x=1007,q2=1007,jo=1008,ek=1008,Cs=1009,Xb=1010,Yb=1011,Sm=1012,zx=1013,Vs=1014,Hr=1015,nl=1016,Hx=1017,Wx=1018,Bo=1020,Zb=1021,ji=1023,Qb=1024,Jb=1025,$o=1026,il=1027,qb=1028,Vx=1029,eA=1030,Gx=1031,jx=1033,gp=33776,vp=33777,yp=33778,xp=33779,ry=35840,sy=35841,oy=35842,ay=35843,Kx=36196,ly=37492,cy=37496,uy=37808,hy=37809,fy=37810,dy=37811,py=37812,my=37813,gy=37814,vy=37815,yy=37816,xy=37817,_y=37818,Sy=37819,wy=37820,My=37821,_p=36492,Cy=36494,Ey=36495,tA=36283,by=36284,Ay=36285,Ty=36286,nA=2200,iA=2201,rA=2202,Ah=2300,Th=2301,Sp=2302,$a=2400,za=2401,Rh=2402,wm=2500,Xx=2501,tk=0,nk=1,ik=2,Yx=3e3,zo=3001,sA=3200,oA=3201,Qo=0,aA=1,Cr="",ui="srgb",bs="srgb-linear",Mm="display-p3",Yh="display-p3-linear",Lh="linear",xn="srgb",kh="rec709",Ph="p3",rk=0,Na=7680,sk=7681,ok=7682,ak=7683,lk=34055,ck=34056,uk=5386,hk=512,fk=513,dk=514,pk=515,mk=516,gk=517,vk=518,Ry=519,lA=512,cA=513,uA=514,Zx=515,hA=516,fA=517,dA=518,pA=519,Ih=35044,yk=35048,xk=35040,_k=35045,Sk=35049,wk=35041,Mk=35046,Ck=35050,Ek=35042,bk="100",Ly="300 es",Zp=1035,ss=2e3,Ic=2001;let no=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,c=r.length;s<c;s++)r[s].call(this,e);e.target=null}}};const Pi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let i1=1234567;const Ka=Math.PI/180,Nc=180/Math.PI;function Ar(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pi[n&255]+Pi[n>>8&255]+Pi[n>>16&255]+Pi[n>>24&255]+"-"+Pi[e&255]+Pi[e>>8&255]+"-"+Pi[e>>16&15|64]+Pi[e>>24&255]+"-"+Pi[t&63|128]+Pi[t>>8&255]+"-"+Pi[t>>16&255]+Pi[t>>24&255]+Pi[i&255]+Pi[i>>8&255]+Pi[i>>16&255]+Pi[i>>24&255]).toLowerCase()}function Wn(n,e,t){return Math.max(e,Math.min(t,n))}function Qx(n,e){return(n%e+e)%e}function Ak(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Tk(n,e,t){return n!==e?(t-n)/(e-n):0}function th(n,e,t){return(1-t)*n+t*e}function Rk(n,e,t,i){return th(n,e,1-Math.exp(-t*i))}function Lk(n,e=1){return e-Math.abs(Qx(n,e*2)-e)}function kk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Pk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Ik(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Nk(n,e){return n+Math.random()*(e-n)}function Ok(n){return n*(.5-Math.random())}function Dk(n){n!==void 0&&(i1=n);let e=i1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Fk(n){return n*Ka}function Uk(n){return n*Nc}function ky(n){return(n&n-1)===0&&n!==0}function Bk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Qp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $k(n,e,t,i,r){const s=Math.cos,c=Math.sin,l=s(t/2),u=c(t/2),f=s((e+i)/2),a=c((e+i)/2),o=s((e-i)/2),h=c((e-i)/2),d=s((i-e)/2),p=c((i-e)/2);switch(r){case"XYX":n.set(l*a,u*o,u*h,l*f);break;case"YZY":n.set(u*h,l*a,u*o,l*f);break;case"ZXZ":n.set(u*o,u*h,l*a,l*f);break;case"XZX":n.set(l*a,u*p,u*d,l*f);break;case"YXY":n.set(u*d,l*a,u*p,l*f);break;case"ZYZ":n.set(u*p,u*d,l*a,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function lr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zk={DEG2RAD:Ka,RAD2DEG:Nc,generateUUID:Ar,clamp:Wn,euclideanModulo:Qx,mapLinear:Ak,inverseLerp:Tk,lerp:th,damp:Rk,pingpong:Lk,smoothstep:kk,smootherstep:Pk,randInt:Ik,randFloat:Nk,randFloatSpread:Ok,seededRandom:Dk,degToRad:Fk,radToDeg:Uk,isPowerOfTwo:ky,ceilPowerOfTwo:Bk,floorPowerOfTwo:Qp,setQuaternionFromProperEuler:$k,normalize:jt,denormalize:lr};class Ge{constructor(e=0,t=0){Ge.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Wn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,c=this.y-e.y;return this.x=s*i-c*r+e.x,this.y=s*r+c*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zt{constructor(e,t,i,r,s,c,l,u,f){Zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,c,l,u,f)}set(e,t,i,r,s,c,l,u,f){const a=this.elements;return a[0]=e,a[1]=r,a[2]=l,a[3]=t,a[4]=s,a[5]=u,a[6]=i,a[7]=c,a[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,c=i[0],l=i[3],u=i[6],f=i[1],a=i[4],o=i[7],h=i[2],d=i[5],p=i[8],y=r[0],x=r[3],g=r[6],w=r[1],C=r[4],M=r[7],_=r[2],E=r[5],R=r[8];return s[0]=c*y+l*w+u*_,s[3]=c*x+l*C+u*E,s[6]=c*g+l*M+u*R,s[1]=f*y+a*w+o*_,s[4]=f*x+a*C+o*E,s[7]=f*g+a*M+o*R,s[2]=h*y+d*w+p*_,s[5]=h*x+d*C+p*E,s[8]=h*g+d*M+p*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],c=e[4],l=e[5],u=e[6],f=e[7],a=e[8];return t*c*a-t*l*f-i*s*a+i*l*u+r*s*f-r*c*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],c=e[4],l=e[5],u=e[6],f=e[7],a=e[8],o=a*c-l*f,h=l*u-a*s,d=f*s-c*u,p=t*o+i*h+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=o*y,e[1]=(r*f-a*i)*y,e[2]=(l*i-r*c)*y,e[3]=h*y,e[4]=(a*t-r*u)*y,e[5]=(r*s-l*t)*y,e[6]=d*y,e[7]=(i*u-f*t)*y,e[8]=(c*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,c,l){const u=Math.cos(s),f=Math.sin(s);return this.set(i*u,i*f,-i*(u*c+f*l)+c+e,-r*f,r*u,-r*(-f*c+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(dv.makeScale(e,t)),this}rotate(e){return this.premultiply(dv.makeRotation(-e)),this}translate(e,t){return this.premultiply(dv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dv=new Zt;function mA(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Hk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function dc(n,e){return new Hk[n](e)}function Nh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function gA(){const n=Nh("canvas");return n.style.display="block",n}const r1={};function nh(n){n in r1||(r1[n]=!0,console.warn(n))}const s1=new Zt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),o1=new Zt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),cd={[bs]:{transfer:Lh,primaries:kh,toReference:n=>n,fromReference:n=>n},[ui]:{transfer:xn,primaries:kh,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Yh]:{transfer:Lh,primaries:Ph,toReference:n=>n.applyMatrix3(o1),fromReference:n=>n.applyMatrix3(s1)},[Mm]:{transfer:xn,primaries:Ph,toReference:n=>n.convertSRGBToLinear().applyMatrix3(o1),fromReference:n=>n.applyMatrix3(s1).convertLinearToSRGB()}},Wk=new Set([bs,Yh]),hn={enabled:!0,_workingColorSpace:bs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Wk.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=cd[e].toReference,r=cd[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return cd[n].primaries},getTransfer:function(n){return n===Cr?Lh:cd[n].transfer}};function Ec(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function pv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ll;class Jx{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ll===void 0&&(Ll=Nh("canvas")),Ll.width=e.width,Ll.height=e.height;const i=Ll.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ll}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Nh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let c=0;c<s.length;c++)s[c]=Ec(s[c]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ec(t[i]/255)*255):t[i]=Ec(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vk=0;class Ha{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vk++}),this.uuid=Ar(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let c=0,l=r.length;c<l;c++)r[c].isDataTexture?s.push(mv(r[c].image)):s.push(mv(r[c]))}else s=mv(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function mv(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Jx.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Gk=0;class An extends no{constructor(e=An.DEFAULT_IMAGE,t=An.DEFAULT_MAPPING,i=Di,r=Di,s=On,c=jo,l=ji,u=Cs,f=An.DEFAULT_ANISOTROPY,a=Cr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gk++}),this.uuid=Ar(),this.name="",this.source=new Ha(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=c,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof a=="string"?this.colorSpace=a:(nh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=a===zo?ui:Cr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_m)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Eh:e.x=e.x-Math.floor(e.x);break;case Di:e.x=e.x<0?0:1;break;case bh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Eh:e.y=e.y-Math.floor(e.y);break;case Di:e.y=e.y<0?0:1;break;case bh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ui?zo:Yx}set encoding(e){nh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===zo?ui:Cr}}An.DEFAULT_IMAGE=null;An.DEFAULT_MAPPING=_m;An.DEFAULT_ANISOTROPY=1;class ln{constructor(e=0,t=0,i=0,r=1){ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,c=e.elements;return this.x=c[0]*t+c[4]*i+c[8]*r+c[12]*s,this.y=c[1]*t+c[5]*i+c[9]*r+c[13]*s,this.z=c[2]*t+c[6]*i+c[10]*r+c[14]*s,this.w=c[3]*t+c[7]*i+c[11]*r+c[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,f=u[0],a=u[4],o=u[8],h=u[1],d=u[5],p=u[9],y=u[2],x=u[6],g=u[10];if(Math.abs(a-h)<.01&&Math.abs(o-y)<.01&&Math.abs(p-x)<.01){if(Math.abs(a+h)<.1&&Math.abs(o+y)<.1&&Math.abs(p+x)<.1&&Math.abs(f+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(f+1)/2,M=(d+1)/2,_=(g+1)/2,E=(a+h)/4,R=(o+y)/4,A=(p+x)/4;return C>M&&C>_?C<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(C),r=E/i,s=R/i):M>_?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=E/r,s=A/r):_<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(_),i=R/s,r=A/s),this.set(i,r,s,t),this}let w=Math.sqrt((x-p)*(x-p)+(o-y)*(o-y)+(h-a)*(h-a));return Math.abs(w)<.001&&(w=1),this.x=(x-p)/w,this.y=(o-y)/w,this.z=(h-a)/w,this.w=Math.acos((f+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vA extends no{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ln(0,0,e,t),this.scissorTest=!1,this.viewport=new ln(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(nh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===zo?ui:Cr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:On,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new An(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ha(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jr extends vA{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Cm extends An{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jk extends jr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Cm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class qx extends An{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Kk extends jr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new qx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Xk extends jr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let c=0;c<i;c++)this.texture[c]=s.clone(),this.texture[c].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Fi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,c,l){let u=i[r+0],f=i[r+1],a=i[r+2],o=i[r+3];const h=s[c+0],d=s[c+1],p=s[c+2],y=s[c+3];if(l===0){e[t+0]=u,e[t+1]=f,e[t+2]=a,e[t+3]=o;return}if(l===1){e[t+0]=h,e[t+1]=d,e[t+2]=p,e[t+3]=y;return}if(o!==y||u!==h||f!==d||a!==p){let x=1-l;const g=u*h+f*d+a*p+o*y,w=g>=0?1:-1,C=1-g*g;if(C>Number.EPSILON){const _=Math.sqrt(C),E=Math.atan2(_,g*w);x=Math.sin(x*E)/_,l=Math.sin(l*E)/_}const M=l*w;if(u=u*x+h*M,f=f*x+d*M,a=a*x+p*M,o=o*x+y*M,x===1-l){const _=1/Math.sqrt(u*u+f*f+a*a+o*o);u*=_,f*=_,a*=_,o*=_}}e[t]=u,e[t+1]=f,e[t+2]=a,e[t+3]=o}static multiplyQuaternionsFlat(e,t,i,r,s,c){const l=i[r],u=i[r+1],f=i[r+2],a=i[r+3],o=s[c],h=s[c+1],d=s[c+2],p=s[c+3];return e[t]=l*p+a*o+u*d-f*h,e[t+1]=u*p+a*h+f*o-l*d,e[t+2]=f*p+a*d+l*h-u*o,e[t+3]=a*p-l*o-u*h-f*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,c=e._order,l=Math.cos,u=Math.sin,f=l(i/2),a=l(r/2),o=l(s/2),h=u(i/2),d=u(r/2),p=u(s/2);switch(c){case"XYZ":this._x=h*a*o+f*d*p,this._y=f*d*o-h*a*p,this._z=f*a*p+h*d*o,this._w=f*a*o-h*d*p;break;case"YXZ":this._x=h*a*o+f*d*p,this._y=f*d*o-h*a*p,this._z=f*a*p-h*d*o,this._w=f*a*o+h*d*p;break;case"ZXY":this._x=h*a*o-f*d*p,this._y=f*d*o+h*a*p,this._z=f*a*p+h*d*o,this._w=f*a*o-h*d*p;break;case"ZYX":this._x=h*a*o-f*d*p,this._y=f*d*o+h*a*p,this._z=f*a*p-h*d*o,this._w=f*a*o+h*d*p;break;case"YZX":this._x=h*a*o+f*d*p,this._y=f*d*o+h*a*p,this._z=f*a*p-h*d*o,this._w=f*a*o-h*d*p;break;case"XZY":this._x=h*a*o-f*d*p,this._y=f*d*o-h*a*p,this._z=f*a*p+h*d*o,this._w=f*a*o+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],c=t[1],l=t[5],u=t[9],f=t[2],a=t[6],o=t[10],h=i+l+o;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(a-u)*d,this._y=(s-f)*d,this._z=(c-r)*d}else if(i>l&&i>o){const d=2*Math.sqrt(1+i-l-o);this._w=(a-u)/d,this._x=.25*d,this._y=(r+c)/d,this._z=(s+f)/d}else if(l>o){const d=2*Math.sqrt(1+l-i-o);this._w=(s-f)/d,this._x=(r+c)/d,this._y=.25*d,this._z=(u+a)/d}else{const d=2*Math.sqrt(1+o-i-l);this._w=(c-r)/d,this._x=(s+f)/d,this._y=(u+a)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,c=e._w,l=t._x,u=t._y,f=t._z,a=t._w;return this._x=i*a+c*l+r*f-s*u,this._y=r*a+c*u+s*l-i*f,this._z=s*a+c*f+i*u-r*l,this._w=c*a-i*l-r*u-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,c=this._w;let l=c*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=c,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const d=1-t;return this._w=d*c+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this}const f=Math.sqrt(u),a=Math.atan2(f,l),o=Math.sin((1-t)*a)/f,h=Math.sin(t*a)/f;return this._w=c*o+this._w*h,this._x=i*o+this._x*h,this._y=r*o+this._y*h,this._z=s*o+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,t=0,i=0){se.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(a1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(a1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,c=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*c,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*c,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*c,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,c=e.y,l=e.z,u=e.w,f=2*(c*r-l*i),a=2*(l*t-s*r),o=2*(s*i-c*t);return this.x=t+u*f+c*o-l*a,this.y=i+u*a+l*f-s*o,this.z=r+u*o+s*a-c*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,c=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*c-i*u,this.z=i*l-r*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gv.copy(this).projectOnVector(e),this.sub(gv)}reflect(e){return this.sub(gv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Wn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gv=new se,a1=new Fi;class Yi{constructor(e=new se(1/0,1/0,1/0),t=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Zr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Zr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let c=0,l=s.count;c<l;c++)e.isMesh===!0?e.getVertexPosition(c,Zr):Zr.fromBufferAttribute(s,c),Zr.applyMatrix4(e.matrixWorld),this.expandByPoint(Zr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ud.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ud.copy(i.boundingBox)),ud.applyMatrix4(e.matrixWorld),this.union(ud)}const r=e.children;for(let s=0,c=r.length;s<c;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zr),Zr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bu),hd.subVectors(this.max,bu),kl.subVectors(e.a,bu),Pl.subVectors(e.b,bu),Il.subVectors(e.c,bu),vo.subVectors(Pl,kl),yo.subVectors(Il,Pl),_a.subVectors(kl,Il);let t=[0,-vo.z,vo.y,0,-yo.z,yo.y,0,-_a.z,_a.y,vo.z,0,-vo.x,yo.z,0,-yo.x,_a.z,0,-_a.x,-vo.y,vo.x,0,-yo.y,yo.x,0,-_a.y,_a.x,0];return!vv(t,kl,Pl,Il,hd)||(t=[1,0,0,0,1,0,0,0,1],!vv(t,kl,Pl,Il,hd))?!1:(fd.crossVectors(vo,yo),t=[fd.x,fd.y,fd.z],vv(t,kl,Pl,Il,hd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ps),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ps=[new se,new se,new se,new se,new se,new se,new se,new se],Zr=new se,ud=new Yi,kl=new se,Pl=new se,Il=new se,vo=new se,yo=new se,_a=new se,bu=new se,hd=new se,fd=new se,Sa=new se;function vv(n,e,t,i,r){for(let s=0,c=n.length-3;s<=c;s+=3){Sa.fromArray(n,s);const l=r.x*Math.abs(Sa.x)+r.y*Math.abs(Sa.y)+r.z*Math.abs(Sa.z),u=e.dot(Sa),f=t.dot(Sa),a=i.dot(Sa);if(Math.max(-Math.max(u,f,a),Math.min(u,f,a))>l)return!1}return!0}const Yk=new Yi,Au=new se,yv=new se;class Ui{constructor(e=new se,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Yk.setFromPoints(e).getCenter(i);let r=0;for(let s=0,c=e.length;s<c;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Au.subVectors(e,this.center);const t=Au.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Au,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Au.copy(e.center).add(yv)),this.expandByPoint(Au.copy(e.center).sub(yv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Is=new se,xv=new se,dd=new se,xo=new se,_v=new se,pd=new se,Sv=new se;class ll{constructor(e=new se,t=new se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Is)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Is.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Is.copy(this.origin).addScaledVector(this.direction,t),Is.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){xv.copy(e).add(t).multiplyScalar(.5),dd.copy(t).sub(e).normalize(),xo.copy(this.origin).sub(xv);const s=e.distanceTo(t)*.5,c=-this.direction.dot(dd),l=xo.dot(this.direction),u=-xo.dot(dd),f=xo.lengthSq(),a=Math.abs(1-c*c);let o,h,d,p;if(a>0)if(o=c*u-l,h=c*l-u,p=s*a,o>=0)if(h>=-p)if(h<=p){const y=1/a;o*=y,h*=y,d=o*(o+c*h+2*l)+h*(c*o+h+2*u)+f}else h=s,o=Math.max(0,-(c*h+l)),d=-o*o+h*(h+2*u)+f;else h=-s,o=Math.max(0,-(c*h+l)),d=-o*o+h*(h+2*u)+f;else h<=-p?(o=Math.max(0,-(-c*s+l)),h=o>0?-s:Math.min(Math.max(-s,-u),s),d=-o*o+h*(h+2*u)+f):h<=p?(o=0,h=Math.min(Math.max(-s,-u),s),d=h*(h+2*u)+f):(o=Math.max(0,-(c*s+l)),h=o>0?s:Math.min(Math.max(-s,-u),s),d=-o*o+h*(h+2*u)+f);else h=c>0?-s:s,o=Math.max(0,-(c*h+l)),d=-o*o+h*(h+2*u)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,o),r&&r.copy(xv).addScaledVector(dd,h),d}intersectSphere(e,t){Is.subVectors(e.center,this.origin);const i=Is.dot(this.direction),r=Is.dot(Is)-i*i,s=e.radius*e.radius;if(r>s)return null;const c=Math.sqrt(s-r),l=i-c,u=i+c;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,c,l,u;const f=1/this.direction.x,a=1/this.direction.y,o=1/this.direction.z,h=this.origin;return f>=0?(i=(e.min.x-h.x)*f,r=(e.max.x-h.x)*f):(i=(e.max.x-h.x)*f,r=(e.min.x-h.x)*f),a>=0?(s=(e.min.y-h.y)*a,c=(e.max.y-h.y)*a):(s=(e.max.y-h.y)*a,c=(e.min.y-h.y)*a),i>c||s>r||((s>i||isNaN(i))&&(i=s),(c<r||isNaN(r))&&(r=c),o>=0?(l=(e.min.z-h.z)*o,u=(e.max.z-h.z)*o):(l=(e.max.z-h.z)*o,u=(e.min.z-h.z)*o),i>u||l>r)||((l>i||i!==i)&&(i=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Is)!==null}intersectTriangle(e,t,i,r,s){_v.subVectors(t,e),pd.subVectors(i,e),Sv.crossVectors(_v,pd);let c=this.direction.dot(Sv),l;if(c>0){if(r)return null;l=1}else if(c<0)l=-1,c=-c;else return null;xo.subVectors(this.origin,e);const u=l*this.direction.dot(pd.crossVectors(xo,pd));if(u<0)return null;const f=l*this.direction.dot(_v.cross(xo));if(f<0||u+f>c)return null;const a=-l*xo.dot(Sv);return a<0?null:this.at(a/c,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Bt{constructor(e,t,i,r,s,c,l,u,f,a,o,h,d,p,y,x){Bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,c,l,u,f,a,o,h,d,p,y,x)}set(e,t,i,r,s,c,l,u,f,a,o,h,d,p,y,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=c,g[9]=l,g[13]=u,g[2]=f,g[6]=a,g[10]=o,g[14]=h,g[3]=d,g[7]=p,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Nl.setFromMatrixColumn(e,0).length(),s=1/Nl.setFromMatrixColumn(e,1).length(),c=1/Nl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*c,t[9]=i[9]*c,t[10]=i[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,c=Math.cos(i),l=Math.sin(i),u=Math.cos(r),f=Math.sin(r),a=Math.cos(s),o=Math.sin(s);if(e.order==="XYZ"){const h=c*a,d=c*o,p=l*a,y=l*o;t[0]=u*a,t[4]=-u*o,t[8]=f,t[1]=d+p*f,t[5]=h-y*f,t[9]=-l*u,t[2]=y-h*f,t[6]=p+d*f,t[10]=c*u}else if(e.order==="YXZ"){const h=u*a,d=u*o,p=f*a,y=f*o;t[0]=h+y*l,t[4]=p*l-d,t[8]=c*f,t[1]=c*o,t[5]=c*a,t[9]=-l,t[2]=d*l-p,t[6]=y+h*l,t[10]=c*u}else if(e.order==="ZXY"){const h=u*a,d=u*o,p=f*a,y=f*o;t[0]=h-y*l,t[4]=-c*o,t[8]=p+d*l,t[1]=d+p*l,t[5]=c*a,t[9]=y-h*l,t[2]=-c*f,t[6]=l,t[10]=c*u}else if(e.order==="ZYX"){const h=c*a,d=c*o,p=l*a,y=l*o;t[0]=u*a,t[4]=p*f-d,t[8]=h*f+y,t[1]=u*o,t[5]=y*f+h,t[9]=d*f-p,t[2]=-f,t[6]=l*u,t[10]=c*u}else if(e.order==="YZX"){const h=c*u,d=c*f,p=l*u,y=l*f;t[0]=u*a,t[4]=y-h*o,t[8]=p*o+d,t[1]=o,t[5]=c*a,t[9]=-l*a,t[2]=-f*a,t[6]=d*o+p,t[10]=h-y*o}else if(e.order==="XZY"){const h=c*u,d=c*f,p=l*u,y=l*f;t[0]=u*a,t[4]=-o,t[8]=f*a,t[1]=h*o+y,t[5]=c*a,t[9]=d*o-p,t[2]=p*o-d,t[6]=l*a,t[10]=y*o+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Zk,e,Qk)}lookAt(e,t,i){const r=this.elements;return _r.subVectors(e,t),_r.lengthSq()===0&&(_r.z=1),_r.normalize(),_o.crossVectors(i,_r),_o.lengthSq()===0&&(Math.abs(i.z)===1?_r.x+=1e-4:_r.z+=1e-4,_r.normalize(),_o.crossVectors(i,_r)),_o.normalize(),md.crossVectors(_r,_o),r[0]=_o.x,r[4]=md.x,r[8]=_r.x,r[1]=_o.y,r[5]=md.y,r[9]=_r.y,r[2]=_o.z,r[6]=md.z,r[10]=_r.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,c=i[0],l=i[4],u=i[8],f=i[12],a=i[1],o=i[5],h=i[9],d=i[13],p=i[2],y=i[6],x=i[10],g=i[14],w=i[3],C=i[7],M=i[11],_=i[15],E=r[0],R=r[4],A=r[8],T=r[12],S=r[1],I=r[5],D=r[9],z=r[13],B=r[2],W=r[6],H=r[10],J=r[14],G=r[3],K=r[7],Y=r[11],ne=r[15];return s[0]=c*E+l*S+u*B+f*G,s[4]=c*R+l*I+u*W+f*K,s[8]=c*A+l*D+u*H+f*Y,s[12]=c*T+l*z+u*J+f*ne,s[1]=a*E+o*S+h*B+d*G,s[5]=a*R+o*I+h*W+d*K,s[9]=a*A+o*D+h*H+d*Y,s[13]=a*T+o*z+h*J+d*ne,s[2]=p*E+y*S+x*B+g*G,s[6]=p*R+y*I+x*W+g*K,s[10]=p*A+y*D+x*H+g*Y,s[14]=p*T+y*z+x*J+g*ne,s[3]=w*E+C*S+M*B+_*G,s[7]=w*R+C*I+M*W+_*K,s[11]=w*A+C*D+M*H+_*Y,s[15]=w*T+C*z+M*J+_*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],c=e[1],l=e[5],u=e[9],f=e[13],a=e[2],o=e[6],h=e[10],d=e[14],p=e[3],y=e[7],x=e[11],g=e[15];return p*(+s*u*o-r*f*o-s*l*h+i*f*h+r*l*d-i*u*d)+y*(+t*u*d-t*f*h+s*c*h-r*c*d+r*f*a-s*u*a)+x*(+t*f*o-t*l*d-s*c*o+i*c*d+s*l*a-i*f*a)+g*(-r*l*a-t*u*o+t*l*h+r*c*o-i*c*h+i*u*a)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],c=e[4],l=e[5],u=e[6],f=e[7],a=e[8],o=e[9],h=e[10],d=e[11],p=e[12],y=e[13],x=e[14],g=e[15],w=o*x*f-y*h*f+y*u*d-l*x*d-o*u*g+l*h*g,C=p*h*f-a*x*f-p*u*d+c*x*d+a*u*g-c*h*g,M=a*y*f-p*o*f+p*l*d-c*y*d-a*l*g+c*o*g,_=p*o*u-a*y*u-p*l*h+c*y*h+a*l*x-c*o*x,E=t*w+i*C+r*M+s*_;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/E;return e[0]=w*R,e[1]=(y*h*s-o*x*s-y*r*d+i*x*d+o*r*g-i*h*g)*R,e[2]=(l*x*s-y*u*s+y*r*f-i*x*f-l*r*g+i*u*g)*R,e[3]=(o*u*s-l*h*s-o*r*f+i*h*f+l*r*d-i*u*d)*R,e[4]=C*R,e[5]=(a*x*s-p*h*s+p*r*d-t*x*d-a*r*g+t*h*g)*R,e[6]=(p*u*s-c*x*s-p*r*f+t*x*f+c*r*g-t*u*g)*R,e[7]=(c*h*s-a*u*s+a*r*f-t*h*f-c*r*d+t*u*d)*R,e[8]=M*R,e[9]=(p*o*s-a*y*s-p*i*d+t*y*d+a*i*g-t*o*g)*R,e[10]=(c*y*s-p*l*s+p*i*f-t*y*f-c*i*g+t*l*g)*R,e[11]=(a*l*s-c*o*s-a*i*f+t*o*f+c*i*d-t*l*d)*R,e[12]=_*R,e[13]=(a*y*r-p*o*r+p*i*h-t*y*h-a*i*x+t*o*x)*R,e[14]=(p*l*r-c*y*r-p*i*u+t*y*u+c*i*x-t*l*x)*R,e[15]=(c*o*r-a*l*r+a*i*u-t*o*u-c*i*h+t*l*h)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,c=e.x,l=e.y,u=e.z,f=s*c,a=s*l;return this.set(f*c+i,f*l-r*u,f*u+r*l,0,f*l+r*u,a*l+i,a*u-r*c,0,f*u-r*l,a*u+r*c,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,c){return this.set(1,i,s,0,e,1,c,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,c=t._y,l=t._z,u=t._w,f=s+s,a=c+c,o=l+l,h=s*f,d=s*a,p=s*o,y=c*a,x=c*o,g=l*o,w=u*f,C=u*a,M=u*o,_=i.x,E=i.y,R=i.z;return r[0]=(1-(y+g))*_,r[1]=(d+M)*_,r[2]=(p-C)*_,r[3]=0,r[4]=(d-M)*E,r[5]=(1-(h+g))*E,r[6]=(x+w)*E,r[7]=0,r[8]=(p+C)*R,r[9]=(x-w)*R,r[10]=(1-(h+y))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Nl.set(r[0],r[1],r[2]).length();const c=Nl.set(r[4],r[5],r[6]).length(),l=Nl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Qr.copy(this);const f=1/s,a=1/c,o=1/l;return Qr.elements[0]*=f,Qr.elements[1]*=f,Qr.elements[2]*=f,Qr.elements[4]*=a,Qr.elements[5]*=a,Qr.elements[6]*=a,Qr.elements[8]*=o,Qr.elements[9]*=o,Qr.elements[10]*=o,t.setFromRotationMatrix(Qr),i.x=s,i.y=c,i.z=l,this}makePerspective(e,t,i,r,s,c,l=ss){const u=this.elements,f=2*s/(t-e),a=2*s/(i-r),o=(t+e)/(t-e),h=(i+r)/(i-r);let d,p;if(l===ss)d=-(c+s)/(c-s),p=-2*c*s/(c-s);else if(l===Ic)d=-c/(c-s),p=-c*s/(c-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=o,u[12]=0,u[1]=0,u[5]=a,u[9]=h,u[13]=0,u[2]=0,u[6]=0,u[10]=d,u[14]=p,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,c,l=ss){const u=this.elements,f=1/(t-e),a=1/(i-r),o=1/(c-s),h=(t+e)*f,d=(i+r)*a;let p,y;if(l===ss)p=(c+s)*o,y=-2*o;else if(l===Ic)p=s*o,y=-1*o;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-h,u[1]=0,u[5]=2*a,u[9]=0,u[13]=-d,u[2]=0,u[6]=0,u[10]=y,u[14]=-p,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Nl=new se,Qr=new Bt,Zk=new se(0,0,0),Qk=new se(1,1,1),_o=new se,md=new se,_r=new se,l1=new Bt,c1=new Fi;class Zh{constructor(e=0,t=0,i=0,r=Zh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],c=r[4],l=r[8],u=r[1],f=r[5],a=r[9],o=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-a,d),this._z=Math.atan2(-c,s)):(this._x=Math.atan2(h,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Wn(a,-1,1)),Math.abs(a)<.9999999?(this._y=Math.atan2(l,d),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-o,s),this._z=0);break;case"ZXY":this._x=Math.asin(Wn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-o,d),this._z=Math.atan2(-c,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Wn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-c,f));break;case"YZX":this._z=Math.asin(Wn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-a,f),this._y=Math.atan2(-o,s)):(this._x=0,this._y=Math.atan2(l,d));break;case"XZY":this._z=Math.asin(-Wn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-a,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return l1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l1,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return c1.setFromEuler(this),this.setFromQuaternion(c1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zh.DEFAULT_ORDER="XYZ";class Xa{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jk=0;const u1=new se,Ol=new Fi,Ns=new Bt,gd=new se,Tu=new se,qk=new se,eP=new Fi,h1=new se(1,0,0),f1=new se(0,1,0),d1=new se(0,0,1),tP={type:"added"},nP={type:"removed"};class an extends no{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jk++}),this.uuid=Ar(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=an.DEFAULT_UP.clone();const e=new se,t=new Zh,i=new Fi,r=new se(1,1,1);function s(){i.setFromEuler(t,!1)}function c(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Bt},normalMatrix:{value:new Zt}}),this.matrix=new Bt,this.matrixWorld=new Bt,this.matrixAutoUpdate=an.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Xa,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ol.setFromAxisAngle(e,t),this.quaternion.multiply(Ol),this}rotateOnWorldAxis(e,t){return Ol.setFromAxisAngle(e,t),this.quaternion.premultiply(Ol),this}rotateX(e){return this.rotateOnAxis(h1,e)}rotateY(e){return this.rotateOnAxis(f1,e)}rotateZ(e){return this.rotateOnAxis(d1,e)}translateOnAxis(e,t){return u1.copy(e).applyQuaternion(this.quaternion),this.position.add(u1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(h1,e)}translateY(e){return this.translateOnAxis(f1,e)}translateZ(e){return this.translateOnAxis(d1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ns.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?gd.copy(e):gd.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Tu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ns.lookAt(Tu,gd,this.up):Ns.lookAt(gd,Tu,this.up),this.quaternion.setFromRotationMatrix(Ns),r&&(Ns.extractRotation(r.matrixWorld),Ol.setFromRotationMatrix(Ns),this.quaternion.premultiply(Ol.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tP)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ns.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ns.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ns),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const c=this.children[i].getObjectByProperty(e,t);if(c!==void 0)return c}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,c=r.length;s<c;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tu,e,qk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tu,eP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,c=r.length;s<c;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,a=u.length;f<a;f++){const o=u[f];s(e.shapes,o)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=c(e.geometries),u=c(e.materials),f=c(e.textures),a=c(e.images),o=c(e.shapes),h=c(e.skeletons),d=c(e.animations),p=c(e.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),f.length>0&&(i.textures=f),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=r,i;function c(l){const u=[];for(const f in l){const a=l[f];delete a.metadata,u.push(a)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}an.DEFAULT_UP=new se(0,1,0);an.DEFAULT_MATRIX_AUTO_UPDATE=!0;an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jr=new se,Os=new se,wv=new se,Ds=new se,Dl=new se,Fl=new se,p1=new se,Mv=new se,Cv=new se,Ev=new se;let vd=!1;class ar{constructor(e=new se,t=new se,i=new se){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Jr.subVectors(e,t),r.cross(Jr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Jr.subVectors(r,t),Os.subVectors(i,t),wv.subVectors(e,t);const c=Jr.dot(Jr),l=Jr.dot(Os),u=Jr.dot(wv),f=Os.dot(Os),a=Os.dot(wv),o=c*f-l*l;if(o===0)return s.set(0,0,0),null;const h=1/o,d=(f*u-l*a)*h,p=(c*a-l*u)*h;return s.set(1-d-p,p,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ds)===null?!1:Ds.x>=0&&Ds.y>=0&&Ds.x+Ds.y<=1}static getUV(e,t,i,r,s,c,l,u){return vd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vd=!0),this.getInterpolation(e,t,i,r,s,c,l,u)}static getInterpolation(e,t,i,r,s,c,l,u){return this.getBarycoord(e,t,i,r,Ds)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Ds.x),u.addScaledVector(c,Ds.y),u.addScaledVector(l,Ds.z),u)}static isFrontFacing(e,t,i,r){return Jr.subVectors(i,t),Os.subVectors(e,t),Jr.cross(Os).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jr.subVectors(this.c,this.b),Os.subVectors(this.a,this.b),Jr.cross(Os).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ar.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ar.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return vd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vd=!0),ar.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return ar.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ar.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ar.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let c,l;Dl.subVectors(r,i),Fl.subVectors(s,i),Mv.subVectors(e,i);const u=Dl.dot(Mv),f=Fl.dot(Mv);if(u<=0&&f<=0)return t.copy(i);Cv.subVectors(e,r);const a=Dl.dot(Cv),o=Fl.dot(Cv);if(a>=0&&o<=a)return t.copy(r);const h=u*o-a*f;if(h<=0&&u>=0&&a<=0)return c=u/(u-a),t.copy(i).addScaledVector(Dl,c);Ev.subVectors(e,s);const d=Dl.dot(Ev),p=Fl.dot(Ev);if(p>=0&&d<=p)return t.copy(s);const y=d*f-u*p;if(y<=0&&f>=0&&p<=0)return l=f/(f-p),t.copy(i).addScaledVector(Fl,l);const x=a*p-d*o;if(x<=0&&o-a>=0&&d-p>=0)return p1.subVectors(s,r),l=(o-a)/(o-a+(d-p)),t.copy(r).addScaledVector(p1,l);const g=1/(x+y+h);return c=y*g,l=h*g,t.copy(i).addScaledVector(Dl,c).addScaledVector(Fl,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const yA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},So={h:0,s:0,l:0},yd={h:0,s:0,l:0};function bv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class gt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ui){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=hn.workingColorSpace){return this.r=e,this.g=t,this.b=i,hn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=hn.workingColorSpace){if(e=Qx(e,1),t=Wn(t,0,1),i=Wn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,c=2*i-s;this.r=bv(c,s,e+1/3),this.g=bv(c,s,e),this.b=bv(c,s,e-1/3)}return hn.toWorkingColorSpace(this,r),this}setStyle(e,t=ui){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const c=r[1],l=r[2];switch(c){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],c=s.length;if(c===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(c===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ui){const i=yA[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ec(e.r),this.g=Ec(e.g),this.b=Ec(e.b),this}copyLinearToSRGB(e){return this.r=pv(e.r),this.g=pv(e.g),this.b=pv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ui){return hn.fromWorkingColorSpace(Ii.copy(this),e),Math.round(Wn(Ii.r*255,0,255))*65536+Math.round(Wn(Ii.g*255,0,255))*256+Math.round(Wn(Ii.b*255,0,255))}getHexString(e=ui){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=hn.workingColorSpace){hn.fromWorkingColorSpace(Ii.copy(this),t);const i=Ii.r,r=Ii.g,s=Ii.b,c=Math.max(i,r,s),l=Math.min(i,r,s);let u,f;const a=(l+c)/2;if(l===c)u=0,f=0;else{const o=c-l;switch(f=a<=.5?o/(c+l):o/(2-c-l),c){case i:u=(r-s)/o+(r<s?6:0);break;case r:u=(s-i)/o+2;break;case s:u=(i-r)/o+4;break}u/=6}return e.h=u,e.s=f,e.l=a,e}getRGB(e,t=hn.workingColorSpace){return hn.fromWorkingColorSpace(Ii.copy(this),t),e.r=Ii.r,e.g=Ii.g,e.b=Ii.b,e}getStyle(e=ui){hn.fromWorkingColorSpace(Ii.copy(this),e);const t=Ii.r,i=Ii.g,r=Ii.b;return e!==ui?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(So),this.setHSL(So.h+e,So.s+t,So.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(So),e.getHSL(yd);const i=th(So.h,yd.h,t),r=th(So.s,yd.s,t),s=th(So.l,yd.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ii=new gt;gt.NAMES=yA;let iP=0;class Ci extends no{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iP++}),this.uuid=Ar(),this.name="",this.type="Material",this.blending=ja,this.side=Js,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Kp,this.blendDst=Xp,this.blendEquation=To,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=wh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ry,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Na,this.stencilZFail=Na,this.stencilZPass=Na,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ja&&(i.blending=this.blending),this.side!==Js&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Kp&&(i.blendSrc=this.blendSrc),this.blendDst!==Xp&&(i.blendDst=this.blendDst),this.blendEquation!==To&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==wh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ry&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Na&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Na&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Na&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const c=[];for(const l in s){const u=s[l];delete u.metadata,c.push(u)}return c}if(t){const s=r(e.textures),c=r(e.images);s.length>0&&(i.textures=s),c.length>0&&(i.images=c)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Jo extends Ci{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zs=rP();function rP(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):f<-14?(i[u]=1024>>-f-14,i[u|256]=1024>>-f-14|32768,r[u]=-f-1,r[u|256]=-f-1):f<=15?(i[u]=f+15<<10,i[u|256]=f+15<<10|32768,r[u]=13,r[u|256]=13):f<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),c=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,a=0;for(;!(f&8388608);)f<<=1,a-=8388608;f&=-8388609,a+=947912704,s[u]=f|a}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)c[u]=u<<23;c[31]=1199570944,c[32]=2147483648;for(let u=33;u<63;++u)c[u]=2147483648+(u-32<<23);c[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:c,offsetTable:l}}function sr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Wn(n,-65504,65504),zs.floatView[0]=n;const e=zs.uint32View[0],t=e>>23&511;return zs.baseTable[t]+((e&8388607)>>zs.shiftTable[t])}function Wu(n){const e=n>>10;return zs.uint32View[0]=zs.mantissaTable[zs.offsetTable[e]+(n&1023)]+zs.exponentTable[e],zs.floatView[0]}const sP={toHalfFloat:sr,fromHalfFloat:Wu},ii=new se,xd=new Ge;class dn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Ih,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)xd.fromBufferAttribute(this,t),xd.applyMatrix3(e),this.setXY(t,xd.x,xd.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix3(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=lr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=jt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=lr(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=lr(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=lr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=lr(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ih&&(e.usage=this.usage),e}}class oP extends dn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class aP extends dn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class lP extends dn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class cP extends dn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class e_ extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class uP extends dn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class t_ extends dn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class hP extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Wu(this.array[e*this.itemSize]);return this.normalized&&(t=lr(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=sr(t),this}getY(e){let t=Wu(this.array[e*this.itemSize+1]);return this.normalized&&(t=lr(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=sr(t),this}getZ(e){let t=Wu(this.array[e*this.itemSize+2]);return this.normalized&&(t=lr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=sr(t),this}getW(e){let t=Wu(this.array[e*this.itemSize+3]);return this.normalized&&(t=lr(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=sr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=sr(t),this.array[e+1]=sr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=sr(t),this.array[e+1]=sr(i),this.array[e+2]=sr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=sr(t),this.array[e+1]=sr(i),this.array[e+2]=sr(r),this.array[e+3]=sr(s),this}}class Mt extends dn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class fP extends dn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let dP=0;const Ur=new Bt,Av=new an,Ul=new se,Sr=new Yi,Ru=new Yi,vi=new se;class Kt extends no{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dP++}),this.uuid=Ar(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mA(e)?t_:e_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Zt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return Av.lookAt(e),Av.updateMatrix(),this.applyMatrix4(Av.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ul).negate(),this.translate(Ul.x,Ul.y,Ul.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Mt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Sr.setFromBufferAttribute(s),this.morphTargetsRelative?(vi.addVectors(this.boundingBox.min,Sr.min),this.boundingBox.expandByPoint(vi),vi.addVectors(this.boundingBox.max,Sr.max),this.boundingBox.expandByPoint(vi)):(this.boundingBox.expandByPoint(Sr.min),this.boundingBox.expandByPoint(Sr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new se,1/0);return}if(e){const i=this.boundingSphere.center;if(Sr.setFromBufferAttribute(e),t)for(let s=0,c=t.length;s<c;s++){const l=t[s];Ru.setFromBufferAttribute(l),this.morphTargetsRelative?(vi.addVectors(Sr.min,Ru.min),Sr.expandByPoint(vi),vi.addVectors(Sr.max,Ru.max),Sr.expandByPoint(vi)):(Sr.expandByPoint(Ru.min),Sr.expandByPoint(Ru.max))}Sr.getCenter(i);let r=0;for(let s=0,c=e.count;s<c;s++)vi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(vi));if(t)for(let s=0,c=t.length;s<c;s++){const l=t[s],u=this.morphTargetsRelative;for(let f=0,a=l.count;f<a;f++)vi.fromBufferAttribute(l,f),u&&(Ul.fromBufferAttribute(e,f),vi.add(Ul)),r=Math.max(r,i.distanceToSquared(vi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,c=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new dn(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,f=[],a=[];for(let S=0;S<l;S++)f[S]=new se,a[S]=new se;const o=new se,h=new se,d=new se,p=new Ge,y=new Ge,x=new Ge,g=new se,w=new se;function C(S,I,D){o.fromArray(r,S*3),h.fromArray(r,I*3),d.fromArray(r,D*3),p.fromArray(c,S*2),y.fromArray(c,I*2),x.fromArray(c,D*2),h.sub(o),d.sub(o),y.sub(p),x.sub(p);const z=1/(y.x*x.y-x.x*y.y);isFinite(z)&&(g.copy(h).multiplyScalar(x.y).addScaledVector(d,-y.y).multiplyScalar(z),w.copy(d).multiplyScalar(y.x).addScaledVector(h,-x.x).multiplyScalar(z),f[S].add(g),f[I].add(g),f[D].add(g),a[S].add(w),a[I].add(w),a[D].add(w))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let S=0,I=M.length;S<I;++S){const D=M[S],z=D.start,B=D.count;for(let W=z,H=z+B;W<H;W+=3)C(i[W+0],i[W+1],i[W+2])}const _=new se,E=new se,R=new se,A=new se;function T(S){R.fromArray(s,S*3),A.copy(R);const I=f[S];_.copy(I),_.sub(R.multiplyScalar(R.dot(I))).normalize(),E.crossVectors(A,I);const z=E.dot(a[S])<0?-1:1;u[S*4]=_.x,u[S*4+1]=_.y,u[S*4+2]=_.z,u[S*4+3]=z}for(let S=0,I=M.length;S<I;++S){const D=M[S],z=D.start,B=D.count;for(let W=z,H=z+B;W<H;W+=3)T(i[W+0]),T(i[W+1]),T(i[W+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new dn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new se,s=new se,c=new se,l=new se,u=new se,f=new se,a=new se,o=new se;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),y=e.getX(h+1),x=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),c.fromBufferAttribute(t,x),a.subVectors(c,s),o.subVectors(r,s),a.cross(o),l.fromBufferAttribute(i,p),u.fromBufferAttribute(i,y),f.fromBufferAttribute(i,x),l.add(a),u.add(a),f.add(a),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z),i.setXYZ(x,f.x,f.y,f.z)}else for(let h=0,d=t.count;h<d;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),c.fromBufferAttribute(t,h+2),a.subVectors(c,s),o.subVectors(r,s),a.cross(o),i.setXYZ(h+0,a.x,a.y,a.z),i.setXYZ(h+1,a.x,a.y,a.z),i.setXYZ(h+2,a.x,a.y,a.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)vi.fromBufferAttribute(e,t),vi.normalize(),e.setXYZ(t,vi.x,vi.y,vi.z)}toNonIndexed(){function e(l,u){const f=l.array,a=l.itemSize,o=l.normalized,h=new f.constructor(u.length*a);let d=0,p=0;for(let y=0,x=u.length;y<x;y++){l.isInterleavedBufferAttribute?d=u[y]*l.data.stride+l.offset:d=u[y]*a;for(let g=0;g<a;g++)h[p++]=f[d++]}return new dn(h,a,o)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kt,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],f=e(u,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const u=[],f=s[l];for(let a=0,o=f.length;a<o;a++){const h=f[a],d=e(h,i);u.push(d)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let l=0,u=c.length;l<u;l++){const f=c[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const f=i[u];e.data.attributes[u]=f.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],a=[];for(let o=0,h=f.length;o<h;o++){const d=f[o];a.push(d.toJSON(e.data))}a.length>0&&(r[u]=a,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const a=r[f];this.setAttribute(f,a.clone(t))}const s=e.morphAttributes;for(const f in s){const a=[],o=s[f];for(let h=0,d=o.length;h<d;h++)a.push(o[h].clone(t));this.morphAttributes[f]=a}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let f=0,a=c.length;f<a;f++){const o=c[f];this.addGroup(o.start,o.count,o.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const m1=new Bt,wa=new ll,_d=new Ui,g1=new se,Bl=new se,$l=new se,zl=new se,Tv=new se,Sd=new se,wd=new Ge,Md=new Ge,Cd=new Ge,v1=new se,y1=new se,x1=new se,Ed=new se,bd=new se;class fi extends an{constructor(e=new Kt,t=new Jo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,c=r.length;s<c;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,c=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Sd.set(0,0,0);for(let u=0,f=s.length;u<f;u++){const a=l[u],o=s[u];a!==0&&(Tv.fromBufferAttribute(o,e),c?Sd.addScaledVector(Tv,a):Sd.addScaledVector(Tv.sub(t),a))}t.add(Sd)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),_d.copy(i.boundingSphere),_d.applyMatrix4(s),wa.copy(e.ray).recast(e.near),!(_d.containsPoint(wa.origin)===!1&&(wa.intersectSphere(_d,g1)===null||wa.origin.distanceToSquared(g1)>(e.far-e.near)**2))&&(m1.copy(s).invert(),wa.copy(e.ray).applyMatrix4(m1),!(i.boundingBox!==null&&wa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,wa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,c=this.material,l=s.index,u=s.attributes.position,f=s.attributes.uv,a=s.attributes.uv1,o=s.attributes.normal,h=s.groups,d=s.drawRange;if(l!==null)if(Array.isArray(c))for(let p=0,y=h.length;p<y;p++){const x=h[p],g=c[x.materialIndex],w=Math.max(x.start,d.start),C=Math.min(l.count,Math.min(x.start+x.count,d.start+d.count));for(let M=w,_=C;M<_;M+=3){const E=l.getX(M),R=l.getX(M+1),A=l.getX(M+2);r=Ad(this,g,e,i,f,a,o,E,R,A),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let x=p,g=y;x<g;x+=3){const w=l.getX(x),C=l.getX(x+1),M=l.getX(x+2);r=Ad(this,c,e,i,f,a,o,w,C,M),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(c))for(let p=0,y=h.length;p<y;p++){const x=h[p],g=c[x.materialIndex],w=Math.max(x.start,d.start),C=Math.min(u.count,Math.min(x.start+x.count,d.start+d.count));for(let M=w,_=C;M<_;M+=3){const E=M,R=M+1,A=M+2;r=Ad(this,g,e,i,f,a,o,E,R,A),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),y=Math.min(u.count,d.start+d.count);for(let x=p,g=y;x<g;x+=3){const w=x,C=x+1,M=x+2;r=Ad(this,c,e,i,f,a,o,w,C,M),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function pP(n,e,t,i,r,s,c,l){let u;if(e.side===Xi?u=i.intersectTriangle(c,s,r,!0,l):u=i.intersectTriangle(r,s,c,e.side===Js,l),u===null)return null;bd.copy(l),bd.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(bd);return f<t.near||f>t.far?null:{distance:f,point:bd.clone(),object:n}}function Ad(n,e,t,i,r,s,c,l,u,f){n.getVertexPosition(l,Bl),n.getVertexPosition(u,$l),n.getVertexPosition(f,zl);const a=pP(n,e,t,i,Bl,$l,zl,Ed);if(a){r&&(wd.fromBufferAttribute(r,l),Md.fromBufferAttribute(r,u),Cd.fromBufferAttribute(r,f),a.uv=ar.getInterpolation(Ed,Bl,$l,zl,wd,Md,Cd,new Ge)),s&&(wd.fromBufferAttribute(s,l),Md.fromBufferAttribute(s,u),Cd.fromBufferAttribute(s,f),a.uv1=ar.getInterpolation(Ed,Bl,$l,zl,wd,Md,Cd,new Ge),a.uv2=a.uv1),c&&(v1.fromBufferAttribute(c,l),y1.fromBufferAttribute(c,u),x1.fromBufferAttribute(c,f),a.normal=ar.getInterpolation(Ed,Bl,$l,zl,v1,y1,x1,new se),a.normal.dot(i.direction)>0&&a.normal.multiplyScalar(-1));const o={a:l,b:u,c:f,normal:new se,materialIndex:0};ar.getNormal(Bl,$l,zl,o.normal),a.face=o}return a}class cl extends Kt{constructor(e=1,t=1,i=1,r=1,s=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:c};const l=this;r=Math.floor(r),s=Math.floor(s),c=Math.floor(c);const u=[],f=[],a=[],o=[];let h=0,d=0;p("z","y","x",-1,-1,i,t,e,c,s,0),p("z","y","x",1,-1,i,t,-e,c,s,1),p("x","z","y",1,1,e,i,t,r,c,2),p("x","z","y",1,-1,e,i,-t,r,c,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new Mt(f,3)),this.setAttribute("normal",new Mt(a,3)),this.setAttribute("uv",new Mt(o,2));function p(y,x,g,w,C,M,_,E,R,A,T){const S=M/R,I=_/A,D=M/2,z=_/2,B=E/2,W=R+1,H=A+1;let J=0,G=0;const K=new se;for(let Y=0;Y<H;Y++){const ne=Y*I-z;for(let le=0;le<W;le++){const j=le*S-D;K[y]=j*w,K[x]=ne*C,K[g]=B,f.push(K.x,K.y,K.z),K[y]=0,K[x]=0,K[g]=E>0?1:-1,a.push(K.x,K.y,K.z),o.push(le/R),o.push(1-Y/A),J+=1}}for(let Y=0;Y<A;Y++)for(let ne=0;ne<R;ne++){const le=h+ne+W*Y,j=h+ne+W*(Y+1),re=h+(ne+1)+W*(Y+1),fe=h+(ne+1)+W*Y;u.push(le,j,fe),u.push(j,re,fe),G+=6}l.addGroup(d,G,T),d+=G,h+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Oc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Vi(n){const e={};for(let t=0;t<n.length;t++){const i=Oc(n[t]);for(const r in i)e[r]=i[r]}return e}function mP(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function xA(n){return n.getRenderTarget()===null?n.outputColorSpace:hn.workingColorSpace}const _A={clone:Oc,merge:Vi};var gP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let cs=class extends Ci{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gP,this.fragmentShader=vP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Oc(e.uniforms),this.uniformsGroups=mP(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const c=this.uniforms[r].value;c&&c.isTexture?t.uniforms[r]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[r]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[r]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[r]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[r]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[r]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[r]={type:"m4",value:c.toArray()}:t.uniforms[r]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}};class Qh extends an{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bt,this.projectionMatrix=new Bt,this.projectionMatrixInverse=new Bt,this.coordinateSystem=ss}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Zn=class extends Qh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Nc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ka*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Nc*2*Math.atan(Math.tan(Ka*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ka*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const c=this.view;if(this.view!==null&&this.view.enabled){const u=c.fullWidth,f=c.fullHeight;s+=c.offsetX*r/u,t-=c.offsetY*i/f,r*=c.width/u,i*=c.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Hl=-90,Wl=1;class SA extends an{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Zn(Hl,Wl,e,t);r.layers=this.layers,this.add(r);const s=new Zn(Hl,Wl,e,t);s.layers=this.layers,this.add(s);const c=new Zn(Hl,Wl,e,t);c.layers=this.layers,this.add(c);const l=new Zn(Hl,Wl,e,t);l.layers=this.layers,this.add(l);const u=new Zn(Hl,Wl,e,t);u.layers=this.layers,this.add(u);const f=new Zn(Hl,Wl,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,c,l,u]=t;for(const f of t)this.remove(f);if(e===ss)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Ic)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,c,l,u,f,a]=this.children,o=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,c),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(t,a),e.setRenderTarget(o,h,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Jh extends An{constructor(e,t,i,r,s,c,l,u,f,a){e=e!==void 0?e:[],t=t!==void 0?t:qs,super(e,t,i,r,s,c,l,u,f,a),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wA extends jr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(nh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===zo?ui:Cr),this.texture=new Jh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:On}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new cl(5,5,5),s=new cs({name:"CubemapFromEquirect",uniforms:Oc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xi,blending:Ks});s.uniforms.tEquirect.value=t;const c=new fi(r,s),l=t.minFilter;return t.minFilter===jo&&(t.minFilter=On),new SA(1,10,this).update(e,c),t.minFilter=l,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,i,r);e.setRenderTarget(s)}}const Rv=new se,yP=new se,xP=new Zt;class $s{constructor(e=new se(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Rv.subVectors(i,t).cross(yP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Rv),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||xP.getNormalMatrix(e),r=this.coplanarPoint(Rv).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ma=new Ui,Td=new se;class qh{constructor(e=new $s,t=new $s,i=new $s,r=new $s,s=new $s,c=new $s){this.planes=[e,t,i,r,s,c]}set(e,t,i,r,s,c){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(c),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ss){const i=this.planes,r=e.elements,s=r[0],c=r[1],l=r[2],u=r[3],f=r[4],a=r[5],o=r[6],h=r[7],d=r[8],p=r[9],y=r[10],x=r[11],g=r[12],w=r[13],C=r[14],M=r[15];if(i[0].setComponents(u-s,h-f,x-d,M-g).normalize(),i[1].setComponents(u+s,h+f,x+d,M+g).normalize(),i[2].setComponents(u+c,h+a,x+p,M+w).normalize(),i[3].setComponents(u-c,h-a,x-p,M-w).normalize(),i[4].setComponents(u-l,h-o,x-y,M-C).normalize(),t===ss)i[5].setComponents(u+l,h+o,x+y,M+C).normalize();else if(t===Ic)i[5].setComponents(l,o,y,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ma.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ma.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ma)}intersectsSprite(e){return Ma.center.set(0,0,0),Ma.radius=.7071067811865476,Ma.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ma)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Td.x=r.normal.x>0?e.max.x:e.min.x,Td.y=r.normal.y>0?e.max.y:e.min.y,Td.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Td)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function MA(){let n=null,e=!1,t=null,i=null;function r(s,c){t(s,c),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _P(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,a){const o=f.array,h=f.usage,d=o.byteLength,p=n.createBuffer();n.bindBuffer(a,p),n.bufferData(a,o,h),f.onUploadCallback();let y;if(o instanceof Float32Array)y=n.FLOAT;else if(o instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)y=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=n.UNSIGNED_SHORT;else if(o instanceof Int16Array)y=n.SHORT;else if(o instanceof Uint32Array)y=n.UNSIGNED_INT;else if(o instanceof Int32Array)y=n.INT;else if(o instanceof Int8Array)y=n.BYTE;else if(o instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(o instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);return{buffer:p,type:y,bytesPerElement:o.BYTES_PER_ELEMENT,version:f.version,size:d}}function s(f,a,o){const h=a.array,d=a._updateRange,p=a.updateRanges;if(n.bindBuffer(o,f),d.count===-1&&p.length===0&&n.bufferSubData(o,0,h),p.length!==0){for(let y=0,x=p.length;y<x;y++){const g=p[y];t?n.bufferSubData(o,g.start*h.BYTES_PER_ELEMENT,h,g.start,g.count):n.bufferSubData(o,g.start*h.BYTES_PER_ELEMENT,h.subarray(g.start,g.start+g.count))}a.clearUpdateRanges()}d.count!==-1&&(t?n.bufferSubData(o,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(o,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),a.onUploadCallback()}function c(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const a=i.get(f);a&&(n.deleteBuffer(a.buffer),i.delete(f))}function u(f,a){if(f.isGLBufferAttribute){const h=i.get(f);(!h||h.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const o=i.get(f);if(o===void 0)i.set(f,r(f,a));else if(o.version<f.version){if(o.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(o.buffer,f,a),o.version=f.version}}return{get:c,remove:l,update:u}}class ef extends Kt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,c=t/2,l=Math.floor(i),u=Math.floor(r),f=l+1,a=u+1,o=e/l,h=t/u,d=[],p=[],y=[],x=[];for(let g=0;g<a;g++){const w=g*h-c;for(let C=0;C<f;C++){const M=C*o-s;p.push(M,-w,0),y.push(0,0,1),x.push(C/l),x.push(1-g/u)}}for(let g=0;g<u;g++)for(let w=0;w<l;w++){const C=w+f*g,M=w+f*(g+1),_=w+1+f*(g+1),E=w+1+f*g;d.push(C,M,E),d.push(M,_,E)}this.setIndex(d),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(y,3)),this.setAttribute("uv",new Mt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ef(e.width,e.height,e.widthSegments,e.heightSegments)}}var SP=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,MP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EP=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,bP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,AP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,TP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RP=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,LP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,kP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,PP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,IP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,NP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,DP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,FP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,BP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$P=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,WP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,VP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,GP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,jP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,KP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,YP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,QP="gl_FragColor = linearToOutputTexel( gl_FragColor );",JP=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,qP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,sI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,oI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cI=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,uI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,mI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_I=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,SI=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,CI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,AI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,TI=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RI=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LI=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kI=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PI=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,II=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NI=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,OI=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,DI=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,FI=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UI=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,BI=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$I=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zI=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HI=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WI=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,VI=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,GI=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,jI=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,KI=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XI=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,YI=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZI=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,QI=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JI=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qI=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,e3=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,t3=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,n3=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,i3=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,r3=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,s3=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,o3=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,a3=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,l3=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,c3=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,u3=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h3=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,f3=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,d3=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,p3=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,m3=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,g3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,v3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,y3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,x3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,S3=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,M3=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,E3=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b3=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,A3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,T3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,R3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,L3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,k3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,I3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,N3=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,O3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D3=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,F3=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,B3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,z3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,H3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,G3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Y3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Z3=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,J3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gt={alphahash_fragment:SP,alphahash_pars_fragment:wP,alphamap_fragment:MP,alphamap_pars_fragment:CP,alphatest_fragment:EP,alphatest_pars_fragment:bP,aomap_fragment:AP,aomap_pars_fragment:TP,batching_pars_vertex:RP,batching_vertex:LP,begin_vertex:kP,beginnormal_vertex:PP,bsdfs:IP,iridescence_fragment:NP,bumpmap_pars_fragment:OP,clipping_planes_fragment:DP,clipping_planes_pars_fragment:FP,clipping_planes_pars_vertex:UP,clipping_planes_vertex:BP,color_fragment:$P,color_pars_fragment:zP,color_pars_vertex:HP,color_vertex:WP,common:VP,cube_uv_reflection_fragment:GP,defaultnormal_vertex:jP,displacementmap_pars_vertex:KP,displacementmap_vertex:XP,emissivemap_fragment:YP,emissivemap_pars_fragment:ZP,colorspace_fragment:QP,colorspace_pars_fragment:JP,envmap_fragment:qP,envmap_common_pars_fragment:eI,envmap_pars_fragment:tI,envmap_pars_vertex:nI,envmap_physical_pars_fragment:pI,envmap_vertex:iI,fog_vertex:rI,fog_pars_vertex:sI,fog_fragment:oI,fog_pars_fragment:aI,gradientmap_pars_fragment:lI,lightmap_fragment:cI,lightmap_pars_fragment:uI,lights_lambert_fragment:hI,lights_lambert_pars_fragment:fI,lights_pars_begin:dI,lights_toon_fragment:mI,lights_toon_pars_fragment:gI,lights_phong_fragment:vI,lights_phong_pars_fragment:yI,lights_physical_fragment:xI,lights_physical_pars_fragment:_I,lights_fragment_begin:SI,lights_fragment_maps:wI,lights_fragment_end:MI,logdepthbuf_fragment:CI,logdepthbuf_pars_fragment:EI,logdepthbuf_pars_vertex:bI,logdepthbuf_vertex:AI,map_fragment:TI,map_pars_fragment:RI,map_particle_fragment:LI,map_particle_pars_fragment:kI,metalnessmap_fragment:PI,metalnessmap_pars_fragment:II,morphcolor_vertex:NI,morphnormal_vertex:OI,morphtarget_pars_vertex:DI,morphtarget_vertex:FI,normal_fragment_begin:UI,normal_fragment_maps:BI,normal_pars_fragment:$I,normal_pars_vertex:zI,normal_vertex:HI,normalmap_pars_fragment:WI,clearcoat_normal_fragment_begin:VI,clearcoat_normal_fragment_maps:GI,clearcoat_pars_fragment:jI,iridescence_pars_fragment:KI,opaque_fragment:XI,packing:YI,premultiplied_alpha_fragment:ZI,project_vertex:QI,dithering_fragment:JI,dithering_pars_fragment:qI,roughnessmap_fragment:e3,roughnessmap_pars_fragment:t3,shadowmap_pars_fragment:n3,shadowmap_pars_vertex:i3,shadowmap_vertex:r3,shadowmask_pars_fragment:s3,skinbase_vertex:o3,skinning_pars_vertex:a3,skinning_vertex:l3,skinnormal_vertex:c3,specularmap_fragment:u3,specularmap_pars_fragment:h3,tonemapping_fragment:f3,tonemapping_pars_fragment:d3,transmission_fragment:p3,transmission_pars_fragment:m3,uv_pars_fragment:g3,uv_pars_vertex:v3,uv_vertex:y3,worldpos_vertex:x3,background_vert:_3,background_frag:S3,backgroundCube_vert:w3,backgroundCube_frag:M3,cube_vert:C3,cube_frag:E3,depth_vert:b3,depth_frag:A3,distanceRGBA_vert:T3,distanceRGBA_frag:R3,equirect_vert:L3,equirect_frag:k3,linedashed_vert:P3,linedashed_frag:I3,meshbasic_vert:N3,meshbasic_frag:O3,meshlambert_vert:D3,meshlambert_frag:F3,meshmatcap_vert:U3,meshmatcap_frag:B3,meshnormal_vert:$3,meshnormal_frag:z3,meshphong_vert:H3,meshphong_frag:W3,meshphysical_vert:V3,meshphysical_frag:G3,meshtoon_vert:j3,meshtoon_frag:K3,points_vert:X3,points_frag:Y3,shadow_vert:Z3,shadow_frag:Q3,sprite_vert:J3,sprite_frag:q3},ut={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zt},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0},uvTransform:{value:new Zt}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}}},is={basic:{uniforms:Vi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:Vi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new gt(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:Vi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:Vi([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:Vi([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new gt(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:Vi([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:Vi([ut.points,ut.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:Vi([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:Vi([ut.common,ut.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:Vi([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.meshnormal_vert,fragmentShader:Gt.meshnormal_frag},sprite:{uniforms:Vi([ut.sprite,ut.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Gt.backgroundCube_vert,fragmentShader:Gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:Vi([ut.common,ut.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:Vi([ut.lights,ut.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};is.physical={uniforms:Vi([is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zt},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zt},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zt},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zt},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zt},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zt}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};const Rd={r:0,b:0,g:0};function eN(n,e,t,i,r,s,c){const l=new gt(0);let u=s===!0?0:1,f,a,o=null,h=0,d=null;function p(x,g){let w=!1,C=g.isScene===!0?g.background:null;C&&C.isTexture&&(C=(g.backgroundBlurriness>0?t:e).get(C)),C===null?y(l,u):C&&C.isColor&&(y(C,1),w=!0);const M=n.xr.getEnvironmentBlendMode();M==="additive"?i.buffers.color.setClear(0,0,0,1,c):M==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,c),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),C&&(C.isCubeTexture||C.mapping===Hc)?(a===void 0&&(a=new fi(new cl(1,1,1),new cs({name:"BackgroundCubeMaterial",uniforms:Oc(is.backgroundCube.uniforms),vertexShader:is.backgroundCube.vertexShader,fragmentShader:is.backgroundCube.fragmentShader,side:Xi,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(_,E,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=C,a.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,a.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,a.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,a.material.toneMapped=hn.getTransfer(C.colorSpace)!==xn,(o!==C||h!==C.version||d!==n.toneMapping)&&(a.material.needsUpdate=!0,o=C,h=C.version,d=n.toneMapping),a.layers.enableAll(),x.unshift(a,a.geometry,a.material,0,0,null)):C&&C.isTexture&&(f===void 0&&(f=new fi(new ef(2,2),new cs({name:"BackgroundMaterial",uniforms:Oc(is.background.uniforms),vertexShader:is.background.vertexShader,fragmentShader:is.background.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=C,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=hn.getTransfer(C.colorSpace)!==xn,C.matrixAutoUpdate===!0&&C.updateMatrix(),f.material.uniforms.uvTransform.value.copy(C.matrix),(o!==C||h!==C.version||d!==n.toneMapping)&&(f.material.needsUpdate=!0,o=C,h=C.version,d=n.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null))}function y(x,g){x.getRGB(Rd,xA(n)),i.buffers.color.setClear(Rd.r,Rd.g,Rd.b,g,c)}return{getClearColor:function(){return l},setClearColor:function(x,g=1){l.set(x),u=g,y(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(x){u=x,y(l,u)},render:p}}function tN(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),c=i.isWebGL2||s!==null,l={},u=x(null);let f=u,a=!1;function o(B,W,H,J,G){let K=!1;if(c){const Y=y(J,H,W);f!==Y&&(f=Y,d(f.object)),K=g(B,J,H,G),K&&w(B,J,H,G)}else{const Y=W.wireframe===!0;(f.geometry!==J.id||f.program!==H.id||f.wireframe!==Y)&&(f.geometry=J.id,f.program=H.id,f.wireframe=Y,K=!0)}G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(K||a)&&(a=!1,A(B,W,H,J),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(B){return i.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function p(B){return i.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function y(B,W,H){const J=H.wireframe===!0;let G=l[B.id];G===void 0&&(G={},l[B.id]=G);let K=G[W.id];K===void 0&&(K={},G[W.id]=K);let Y=K[J];return Y===void 0&&(Y=x(h()),K[J]=Y),Y}function x(B){const W=[],H=[],J=[];for(let G=0;G<r;G++)W[G]=0,H[G]=0,J[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:H,attributeDivisors:J,object:B,attributes:{},index:null}}function g(B,W,H,J){const G=f.attributes,K=W.attributes;let Y=0;const ne=H.getAttributes();for(const le in ne)if(ne[le].location>=0){const re=G[le];let fe=K[le];if(fe===void 0&&(le==="instanceMatrix"&&B.instanceMatrix&&(fe=B.instanceMatrix),le==="instanceColor"&&B.instanceColor&&(fe=B.instanceColor)),re===void 0||re.attribute!==fe||fe&&re.data!==fe.data)return!0;Y++}return f.attributesNum!==Y||f.index!==J}function w(B,W,H,J){const G={},K=W.attributes;let Y=0;const ne=H.getAttributes();for(const le in ne)if(ne[le].location>=0){let re=K[le];re===void 0&&(le==="instanceMatrix"&&B.instanceMatrix&&(re=B.instanceMatrix),le==="instanceColor"&&B.instanceColor&&(re=B.instanceColor));const fe={};fe.attribute=re,re&&re.data&&(fe.data=re.data),G[le]=fe,Y++}f.attributes=G,f.attributesNum=Y,f.index=J}function C(){const B=f.newAttributes;for(let W=0,H=B.length;W<H;W++)B[W]=0}function M(B){_(B,0)}function _(B,W){const H=f.newAttributes,J=f.enabledAttributes,G=f.attributeDivisors;H[B]=1,J[B]===0&&(n.enableVertexAttribArray(B),J[B]=1),G[B]!==W&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,W),G[B]=W)}function E(){const B=f.newAttributes,W=f.enabledAttributes;for(let H=0,J=W.length;H<J;H++)W[H]!==B[H]&&(n.disableVertexAttribArray(H),W[H]=0)}function R(B,W,H,J,G,K,Y){Y===!0?n.vertexAttribIPointer(B,W,H,G,K):n.vertexAttribPointer(B,W,H,J,G,K)}function A(B,W,H,J){if(i.isWebGL2===!1&&(B.isInstancedMesh||J.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const G=J.attributes,K=H.getAttributes(),Y=W.defaultAttributeValues;for(const ne in K){const le=K[ne];if(le.location>=0){let j=G[ne];if(j===void 0&&(ne==="instanceMatrix"&&B.instanceMatrix&&(j=B.instanceMatrix),ne==="instanceColor"&&B.instanceColor&&(j=B.instanceColor)),j!==void 0){const re=j.normalized,fe=j.itemSize,ve=t.get(j);if(ve===void 0)continue;const ye=ve.buffer,ze=ve.type,Xe=ve.bytesPerElement,Ae=i.isWebGL2===!0&&(ze===n.INT||ze===n.UNSIGNED_INT||j.gpuType===zx);if(j.isInterleavedBufferAttribute){const je=j.data,oe=je.stride,Ve=j.offset;if(je.isInstancedInterleavedBuffer){for(let Te=0;Te<le.locationSize;Te++)_(le.location+Te,je.meshPerAttribute);B.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=je.meshPerAttribute*je.count)}else for(let Te=0;Te<le.locationSize;Te++)M(le.location+Te);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Te=0;Te<le.locationSize;Te++)R(le.location+Te,fe/le.locationSize,ze,re,oe*Xe,(Ve+fe/le.locationSize*Te)*Xe,Ae)}else{if(j.isInstancedBufferAttribute){for(let je=0;je<le.locationSize;je++)_(le.location+je,j.meshPerAttribute);B.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let je=0;je<le.locationSize;je++)M(le.location+je);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let je=0;je<le.locationSize;je++)R(le.location+je,fe/le.locationSize,ze,re,fe*Xe,fe/le.locationSize*je*Xe,Ae)}}else if(Y!==void 0){const re=Y[ne];if(re!==void 0)switch(re.length){case 2:n.vertexAttrib2fv(le.location,re);break;case 3:n.vertexAttrib3fv(le.location,re);break;case 4:n.vertexAttrib4fv(le.location,re);break;default:n.vertexAttrib1fv(le.location,re)}}}}E()}function T(){D();for(const B in l){const W=l[B];for(const H in W){const J=W[H];for(const G in J)p(J[G].object),delete J[G];delete W[H]}delete l[B]}}function S(B){if(l[B.id]===void 0)return;const W=l[B.id];for(const H in W){const J=W[H];for(const G in J)p(J[G].object),delete J[G];delete W[H]}delete l[B.id]}function I(B){for(const W in l){const H=l[W];if(H[B.id]===void 0)continue;const J=H[B.id];for(const G in J)p(J[G].object),delete J[G];delete H[B.id]}}function D(){z(),a=!0,f!==u&&(f=u,d(f.object))}function z(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:o,reset:D,resetDefaultState:z,dispose:T,releaseStatesOfGeometry:S,releaseStatesOfProgram:I,initAttributes:C,enableAttribute:M,disableUnusedAttributes:E}}function nN(n,e,t,i){const r=i.isWebGL2;let s;function c(a){s=a}function l(a,o){n.drawArrays(s,a,o),t.update(o,s,1)}function u(a,o,h){if(h===0)return;let d,p;if(r)d=n,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,a,o,h),t.update(o,s,h)}function f(a,o,h){if(h===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<h;p++)this.render(a[p],o[p]);else{d.multiDrawArraysWEBGL(s,a,0,o,0,h);let p=0;for(let y=0;y<h;y++)p+=o[y];t.update(p,s,1)}}this.setMode=c,this.render=l,this.renderInstances=u,this.renderMultiDraw=f}function iN(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const f=c||e.has("WEBGL_draw_buffers"),a=t.logarithmicDepthBuffer===!0,o=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=h>0,M=c||e.has("OES_texture_float"),_=C&&M,E=c?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:c,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:a,maxTextures:o,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:y,maxVertexUniforms:x,maxVaryings:g,maxFragmentUniforms:w,vertexTextures:C,floatFragmentTextures:M,floatVertexTextures:_,maxSamples:E}}function rN(n){const e=this;let t=null,i=0,r=!1,s=!1;const c=new $s,l=new Zt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(o,h){const d=o.length!==0||h||i!==0||r;return r=h,i=o.length,d},this.beginShadows=function(){s=!0,a(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(o,h){t=a(o,h,0)},this.setState=function(o,h,d){const p=o.clippingPlanes,y=o.clipIntersection,x=o.clipShadows,g=n.get(o);if(!r||p===null||p.length===0||s&&!x)s?a(null):f();else{const w=s?0:i,C=w*4;let M=g.clippingState||null;u.value=M,M=a(p,h,C,d);for(let _=0;_!==C;++_)M[_]=t[_];g.clippingState=M,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function a(o,h,d,p){const y=o!==null?o.length:0;let x=null;if(y!==0){if(x=u.value,p!==!0||x===null){const g=d+y*4,w=h.matrixWorldInverse;l.getNormalMatrix(w),(x===null||x.length<g)&&(x=new Float32Array(g));for(let C=0,M=d;C!==y;++C,M+=4)c.copy(o[C]).applyMatrix4(w,l),c.normal.toArray(x,M),x[M+3]=c.constant}u.value=x,u.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function sN(n){let e=new WeakMap;function t(c,l){return l===Mh?c.mapping=qs:l===Ch&&(c.mapping=Go),c}function i(c){if(c&&c.isTexture){const l=c.mapping;if(l===Mh||l===Ch)if(e.has(c)){const u=e.get(c).texture;return t(u,c.mapping)}else{const u=c.image;if(u&&u.height>0){const f=new wA(u.height/2);return f.fromEquirectangularTexture(n,c),e.set(c,f),c.addEventListener("dispose",r),t(f.texture,c.mapping)}else return null}}return c}function r(c){const l=c.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ho extends Qh{constructor(e=-1,t=1,i=1,r=-1,s=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,c=i+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,c=s+f*this.view.width,l-=a*this.view.offsetY,u=l-a*this.view.height}this.projectionMatrix.makeOrthographic(s,c,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const pc=4,_1=[.125,.215,.35,.446,.526,.582],Da=20,Lv=new Ho,S1=new gt;let kv=null,Pv=0,Iv=0;const Oa=(1+Math.sqrt(5))/2,Vl=1/Oa,w1=[new se(1,1,1),new se(-1,1,1),new se(1,1,-1),new se(-1,1,-1),new se(0,Oa,Vl),new se(0,Oa,-Vl),new se(Vl,0,Oa),new se(-Vl,0,Oa),new se(Oa,Vl,0),new se(-Oa,Vl,0)];class Py{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){kv=this._renderer.getRenderTarget(),Pv=this._renderer.getActiveCubeFace(),Iv=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=E1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=C1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(kv,Pv,Iv),e.scissorTest=!1,Ld(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qs||e.mapping===Go?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),kv=this._renderer.getRenderTarget(),Pv=this._renderer.getActiveCubeFace(),Iv=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:On,minFilter:On,generateMipmaps:!1,type:nl,format:ji,colorSpace:bs,depthBuffer:!1},r=M1(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M1(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=oN(s)),this._blurMaterial=aN(s,e,t)}return r}_compileMaterial(e){const t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,Lv)}_sceneToCubeUV(e,t,i,r){const l=new Zn(90,1,t,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],a=this._renderer,o=a.autoClear,h=a.toneMapping;a.getClearColor(S1),a.toneMapping=Ms,a.autoClear=!1;const d=new Jo({name:"PMREM.Background",side:Xi,depthWrite:!1,depthTest:!1}),p=new fi(new cl,d);let y=!1;const x=e.background;x?x.isColor&&(d.color.copy(x),e.background=null,y=!0):(d.color.copy(S1),y=!0);for(let g=0;g<6;g++){const w=g%3;w===0?(l.up.set(0,u[g],0),l.lookAt(f[g],0,0)):w===1?(l.up.set(0,0,u[g]),l.lookAt(0,f[g],0)):(l.up.set(0,u[g],0),l.lookAt(0,0,f[g]));const C=this._cubeSize;Ld(r,w*C,g>2?C:0,C,C),a.setRenderTarget(r),y&&a.render(p,l),a.render(e,l)}p.geometry.dispose(),p.material.dispose(),a.toneMapping=h,a.autoClear=o,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===qs||e.mapping===Go;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=E1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=C1());const s=r?this._cubemapMaterial:this._equirectMaterial,c=new fi(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;Ld(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(c,Lv)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),c=w1[(r-1)%w1.length];this._blur(e,r-1,r,s,c)}t.autoClear=i}_blur(e,t,i,r,s){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,i,r,"latitudinal",s),this._halfBlur(c,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,c,l){const u=this._renderer,f=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const a=3,o=new fi(this._lodPlanes[r],f),h=f.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Da-1),y=s/p,x=isFinite(s)?1+Math.floor(a*y):Da;x>Da&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Da}`);const g=[];let w=0;for(let R=0;R<Da;++R){const A=R/y,T=Math.exp(-A*A/2);g.push(T),R===0?w+=T:R<x&&(w+=2*T)}for(let R=0;R<g.length;R++)g[R]=g[R]/w;h.envMap.value=e.texture,h.samples.value=x,h.weights.value=g,h.latitudinal.value=c==="latitudinal",l&&(h.poleAxis.value=l);const{_lodMax:C}=this;h.dTheta.value=p,h.mipInt.value=C-i;const M=this._sizeLods[r],_=3*M*(r>C-pc?r-C+pc:0),E=4*(this._cubeSize-M);Ld(t,_,E,3*M,2*M),u.setRenderTarget(t),u.render(o,Lv)}}function oN(n){const e=[],t=[],i=[];let r=n;const s=n-pc+1+_1.length;for(let c=0;c<s;c++){const l=Math.pow(2,r);t.push(l);let u=1/l;c>n-pc?u=_1[c-n+pc-1]:c===0&&(u=0),i.push(u);const f=1/(l-2),a=-f,o=1+f,h=[a,a,o,a,o,o,a,a,o,o,a,o],d=6,p=6,y=3,x=2,g=1,w=new Float32Array(y*p*d),C=new Float32Array(x*p*d),M=new Float32Array(g*p*d);for(let E=0;E<d;E++){const R=E%3*2/3-1,A=E>2?0:-1,T=[R,A,0,R+2/3,A,0,R+2/3,A+1,0,R,A,0,R+2/3,A+1,0,R,A+1,0];w.set(T,y*p*E),C.set(h,x*p*E);const S=[E,E,E,E,E,E];M.set(S,g*p*E)}const _=new Kt;_.setAttribute("position",new dn(w,y)),_.setAttribute("uv",new dn(C,x)),_.setAttribute("faceIndex",new dn(M,g)),e.push(_),r>pc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function M1(n,e,t){const i=new jr(n,e,t);return i.texture.mapping=Hc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ld(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function aN(n,e,t){const i=new Float32Array(Da),r=new se(0,1,0);return new cs({name:"SphericalGaussianBlur",defines:{n:Da,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:n_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ks,depthTest:!1,depthWrite:!1})}function C1(){return new cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:n_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ks,depthTest:!1,depthWrite:!1})}function E1(){return new cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:n_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ks,depthTest:!1,depthWrite:!1})}function n_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lN(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const u=l.mapping,f=u===Mh||u===Ch,a=u===qs||u===Go;if(f||a)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let o=e.get(l);return t===null&&(t=new Py(n)),o=f?t.fromEquirectangular(l,o):t.fromCubemap(l,o),e.set(l,o),o.texture}else{if(e.has(l))return e.get(l).texture;{const o=l.image;if(f&&o&&o.height>0||a&&o&&r(o)){t===null&&(t=new Py(n));const h=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,h),l.addEventListener("dispose",s),h.texture}else return null}}}return l}function r(l){let u=0;const f=6;for(let a=0;a<f;a++)l[a]!==void 0&&u++;return u===f}function s(l){const u=l.target;u.removeEventListener("dispose",s);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:c}}function cN(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function uN(n,e,t,i){const r={},s=new WeakMap;function c(o){const h=o.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const y=h.morphAttributes[p];for(let x=0,g=y.length;x<g;x++)e.remove(y[x])}h.removeEventListener("dispose",c),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function l(o,h){return r[h.id]===!0||(h.addEventListener("dispose",c),r[h.id]=!0,t.memory.geometries++),h}function u(o){const h=o.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const d=o.morphAttributes;for(const p in d){const y=d[p];for(let x=0,g=y.length;x<g;x++)e.update(y[x],n.ARRAY_BUFFER)}}function f(o){const h=[],d=o.index,p=o.attributes.position;let y=0;if(d!==null){const w=d.array;y=d.version;for(let C=0,M=w.length;C<M;C+=3){const _=w[C+0],E=w[C+1],R=w[C+2];h.push(_,E,E,R,R,_)}}else if(p!==void 0){const w=p.array;y=p.version;for(let C=0,M=w.length/3-1;C<M;C+=3){const _=C+0,E=C+1,R=C+2;h.push(_,E,E,R,R,_)}}else return;const x=new(mA(h)?t_:e_)(h,1);x.version=y;const g=s.get(o);g&&e.remove(g),s.set(o,x)}function a(o){const h=s.get(o);if(h){const d=o.index;d!==null&&h.version<d.version&&f(o)}else f(o);return s.get(o)}return{get:l,update:u,getWireframeAttribute:a}}function hN(n,e,t,i){const r=i.isWebGL2;let s;function c(d){s=d}let l,u;function f(d){l=d.type,u=d.bytesPerElement}function a(d,p){n.drawElements(s,p,l,d*u),t.update(p,s,1)}function o(d,p,y){if(y===0)return;let x,g;if(r)x=n,g="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[g](s,p,l,d*u,y),t.update(p,s,y)}function h(d,p,y){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<y;g++)this.render(d[g]/u,p[g]);else{x.multiDrawElementsWEBGL(s,p,0,l,d,0,y);let g=0;for(let w=0;w<y;w++)g+=p[w];t.update(g,s,1)}}this.setMode=c,this.setIndex=f,this.render=a,this.renderInstances=o,this.renderMultiDraw=h}function fN(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,c,l){switch(t.calls++,c){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function dN(n,e){return n[0]-e[0]}function pN(n,e){return Math.abs(e[1])-Math.abs(n[1])}function mN(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,c=new ln,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function u(f,a,o){const h=f.morphTargetInfluences;if(e.isWebGL2===!0){const p=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,y=p!==void 0?p.length:0;let x=s.get(a);if(x===void 0||x.count!==y){let W=function(){z.dispose(),s.delete(a),a.removeEventListener("dispose",W)};var d=W;x!==void 0&&x.texture.dispose();const C=a.morphAttributes.position!==void 0,M=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,E=a.morphAttributes.position||[],R=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let T=0;C===!0&&(T=1),M===!0&&(T=2),_===!0&&(T=3);let S=a.attributes.position.count*T,I=1;S>e.maxTextureSize&&(I=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const D=new Float32Array(S*I*4*y),z=new Cm(D,S,I,y);z.type=Hr,z.needsUpdate=!0;const B=T*4;for(let H=0;H<y;H++){const J=E[H],G=R[H],K=A[H],Y=S*I*4*H;for(let ne=0;ne<J.count;ne++){const le=ne*B;C===!0&&(c.fromBufferAttribute(J,ne),D[Y+le+0]=c.x,D[Y+le+1]=c.y,D[Y+le+2]=c.z,D[Y+le+3]=0),M===!0&&(c.fromBufferAttribute(G,ne),D[Y+le+4]=c.x,D[Y+le+5]=c.y,D[Y+le+6]=c.z,D[Y+le+7]=0),_===!0&&(c.fromBufferAttribute(K,ne),D[Y+le+8]=c.x,D[Y+le+9]=c.y,D[Y+le+10]=c.z,D[Y+le+11]=K.itemSize===4?c.w:1)}}x={count:y,texture:z,size:new Ge(S,I)},s.set(a,x),a.addEventListener("dispose",W)}let g=0;for(let C=0;C<h.length;C++)g+=h[C];const w=a.morphTargetsRelative?1:1-g;o.getUniforms().setValue(n,"morphTargetBaseInfluence",w),o.getUniforms().setValue(n,"morphTargetInfluences",h),o.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),o.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const p=h===void 0?0:h.length;let y=i[a.id];if(y===void 0||y.length!==p){y=[];for(let M=0;M<p;M++)y[M]=[M,0];i[a.id]=y}for(let M=0;M<p;M++){const _=y[M];_[0]=M,_[1]=h[M]}y.sort(pN);for(let M=0;M<8;M++)M<p&&y[M][1]?(l[M][0]=y[M][0],l[M][1]=y[M][1]):(l[M][0]=Number.MAX_SAFE_INTEGER,l[M][1]=0);l.sort(dN);const x=a.morphAttributes.position,g=a.morphAttributes.normal;let w=0;for(let M=0;M<8;M++){const _=l[M],E=_[0],R=_[1];E!==Number.MAX_SAFE_INTEGER&&R?(x&&a.getAttribute("morphTarget"+M)!==x[E]&&a.setAttribute("morphTarget"+M,x[E]),g&&a.getAttribute("morphNormal"+M)!==g[E]&&a.setAttribute("morphNormal"+M,g[E]),r[M]=R,w+=R):(x&&a.hasAttribute("morphTarget"+M)===!0&&a.deleteAttribute("morphTarget"+M),g&&a.hasAttribute("morphNormal"+M)===!0&&a.deleteAttribute("morphNormal"+M),r[M]=0)}const C=a.morphTargetsRelative?1:1-w;o.getUniforms().setValue(n,"morphTargetBaseInfluence",C),o.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:u}}function gN(n,e,t,i){let r=new WeakMap;function s(u){const f=i.render.frame,a=u.geometry,o=e.get(u,a);if(r.get(o)!==f&&(e.update(o),r.set(o,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==f&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,f))),u.isSkinnedMesh){const h=u.skeleton;r.get(h)!==f&&(h.update(),r.set(h,f))}return o}function c(){r=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:c}}class Em extends An{constructor(e,t,i,r,s,c,l,u,f,a){if(a=a!==void 0?a:$o,a!==$o&&a!==il)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&a===$o&&(i=Vs),i===void 0&&a===il&&(i=Bo),super(null,r,s,c,l,u,a,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Xn,this.minFilter=u!==void 0?u:Xn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const CA=new An,EA=new Em(1,1);EA.compareFunction=Zx;const bA=new Cm,AA=new qx,TA=new Jh,b1=[],A1=[],T1=new Float32Array(16),R1=new Float32Array(9),L1=new Float32Array(4);function Wc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=b1[r];if(s===void 0&&(s=new Float32Array(r),b1[r]=s),e!==0){i.toArray(s,0);for(let c=1,l=0;c!==e;++c)l+=t,n[c].toArray(s,l)}return s}function di(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function pi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function bm(n,e){let t=A1[e];t===void 0&&(t=new Int32Array(e),A1[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function vN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function yN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2fv(this.addr,e),pi(t,e)}}function xN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(di(t,e))return;n.uniform3fv(this.addr,e),pi(t,e)}}function _N(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4fv(this.addr,e),pi(t,e)}}function SN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;L1.set(i),n.uniformMatrix2fv(this.addr,!1,L1),pi(t,i)}}function wN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;R1.set(i),n.uniformMatrix3fv(this.addr,!1,R1),pi(t,i)}}function MN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(di(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),pi(t,e)}else{if(di(t,i))return;T1.set(i),n.uniformMatrix4fv(this.addr,!1,T1),pi(t,i)}}function CN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function EN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2iv(this.addr,e),pi(t,e)}}function bN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(di(t,e))return;n.uniform3iv(this.addr,e),pi(t,e)}}function AN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4iv(this.addr,e),pi(t,e)}}function TN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function RN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(di(t,e))return;n.uniform2uiv(this.addr,e),pi(t,e)}}function LN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(di(t,e))return;n.uniform3uiv(this.addr,e),pi(t,e)}}function kN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(di(t,e))return;n.uniform4uiv(this.addr,e),pi(t,e)}}function PN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?EA:CA;t.setTexture2D(e||s,r)}function IN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||AA,r)}function NN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||TA,r)}function ON(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||bA,r)}function DN(n){switch(n){case 5126:return vN;case 35664:return yN;case 35665:return xN;case 35666:return _N;case 35674:return SN;case 35675:return wN;case 35676:return MN;case 5124:case 35670:return CN;case 35667:case 35671:return EN;case 35668:case 35672:return bN;case 35669:case 35673:return AN;case 5125:return TN;case 36294:return RN;case 36295:return LN;case 36296:return kN;case 35678:case 36198:case 36298:case 36306:case 35682:return PN;case 35679:case 36299:case 36307:return IN;case 35680:case 36300:case 36308:case 36293:return NN;case 36289:case 36303:case 36311:case 36292:return ON}}function FN(n,e){n.uniform1fv(this.addr,e)}function UN(n,e){const t=Wc(e,this.size,2);n.uniform2fv(this.addr,t)}function BN(n,e){const t=Wc(e,this.size,3);n.uniform3fv(this.addr,t)}function $N(n,e){const t=Wc(e,this.size,4);n.uniform4fv(this.addr,t)}function zN(n,e){const t=Wc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function HN(n,e){const t=Wc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function WN(n,e){const t=Wc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function VN(n,e){n.uniform1iv(this.addr,e)}function GN(n,e){n.uniform2iv(this.addr,e)}function jN(n,e){n.uniform3iv(this.addr,e)}function KN(n,e){n.uniform4iv(this.addr,e)}function XN(n,e){n.uniform1uiv(this.addr,e)}function YN(n,e){n.uniform2uiv(this.addr,e)}function ZN(n,e){n.uniform3uiv(this.addr,e)}function QN(n,e){n.uniform4uiv(this.addr,e)}function JN(n,e,t){const i=this.cache,r=e.length,s=bm(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let c=0;c!==r;++c)t.setTexture2D(e[c]||CA,s[c])}function qN(n,e,t){const i=this.cache,r=e.length,s=bm(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let c=0;c!==r;++c)t.setTexture3D(e[c]||AA,s[c])}function eO(n,e,t){const i=this.cache,r=e.length,s=bm(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let c=0;c!==r;++c)t.setTextureCube(e[c]||TA,s[c])}function tO(n,e,t){const i=this.cache,r=e.length,s=bm(t,r);di(i,s)||(n.uniform1iv(this.addr,s),pi(i,s));for(let c=0;c!==r;++c)t.setTexture2DArray(e[c]||bA,s[c])}function nO(n){switch(n){case 5126:return FN;case 35664:return UN;case 35665:return BN;case 35666:return $N;case 35674:return zN;case 35675:return HN;case 35676:return WN;case 5124:case 35670:return VN;case 35667:case 35671:return GN;case 35668:case 35672:return jN;case 35669:case 35673:return KN;case 5125:return XN;case 36294:return YN;case 36295:return ZN;case 36296:return QN;case 35678:case 36198:case 36298:case 36306:case 35682:return JN;case 35679:case 36299:case 36307:return qN;case 35680:case 36300:case 36308:case 36293:return eO;case 36289:case 36303:case 36311:case 36292:return tO}}class iO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=DN(t.type)}}class rO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=nO(t.type)}}class sO{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,c=r.length;s!==c;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const Nv=/(\w+)(\])?(\[|\.)?/g;function k1(n,e){n.seq.push(e),n.map[e.id]=e}function oO(n,e,t){const i=n.name,r=i.length;for(Nv.lastIndex=0;;){const s=Nv.exec(i),c=Nv.lastIndex;let l=s[1];const u=s[2]==="]",f=s[3];if(u&&(l=l|0),f===void 0||f==="["&&c+2===r){k1(t,f===void 0?new iO(l,n,e):new rO(l,n,e));break}else{let o=t.map[l];o===void 0&&(o=new sO(l),k1(t,o)),t=o}}}class wp{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),c=e.getUniformLocation(t,s.name);oO(s,c,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,c=t.length;s!==c;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const c=e[r];c.id in t&&i.push(c)}return i}}function P1(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const aO=37297;let lO=0;function cO(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let c=r;c<s;c++){const l=c+1;i.push(`${l===e?">":" "} ${l}: ${t[c]}`)}return i.join(`
`)}function uO(n){const e=hn.getPrimaries(hn.workingColorSpace),t=hn.getPrimaries(n);let i;switch(e===t?i="":e===Ph&&t===kh?i="LinearDisplayP3ToLinearSRGB":e===kh&&t===Ph&&(i="LinearSRGBToLinearDisplayP3"),n){case bs:case Yh:return[i,"LinearTransferOETF"];case ui:case Mm:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function I1(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const c=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+cO(n.getShaderSource(e),c)}else return r}function hO(n,e){const t=uO(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function fO(n,e){let t;switch(e){case Hb:t="Linear";break;case Wb:t="Reinhard";break;case Vb:t="OptimizedCineon";break;case Bx:t="ACESFilmic";break;case jb:t="AgX";break;case Gb:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function dO(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mc).join(`
`)}function pO(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(mc).join(`
`)}function mO(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function gO(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),c=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[c]={type:s.type,location:n.getAttribLocation(e,c),locationSize:l}}return t}function mc(n){return n!==""}function N1(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function O1(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const vO=/^[ \t]*#include +<([\w\d./]+)>/gm;function Iy(n){return n.replace(vO,xO)}const yO=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function xO(n,e){let t=Gt[e];if(t===void 0){const i=yO.get(e);if(i!==void 0)t=Gt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Iy(t)}const _O=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function D1(n){return n.replace(_O,SO)}function SO(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function F1(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wO(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xm?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===qu?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===es&&(e="SHADOWMAP_TYPE_VSM"),e}function MO(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qs:case Go:e="ENVMAP_TYPE_CUBE";break;case Hc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function CO(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Go:e="ENVMAP_MODE_REFRACTION";break}return e}function EO(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Xh:e="ENVMAP_BLENDING_MULTIPLY";break;case $b:e="ENVMAP_BLENDING_MIX";break;case zb:e="ENVMAP_BLENDING_ADD";break}return e}function bO(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function AO(n,e,t,i){const r=n.getContext(),s=t.defines;let c=t.vertexShader,l=t.fragmentShader;const u=wO(t),f=MO(t),a=CO(t),o=EO(t),h=bO(t),d=t.isWebGL2?"":dO(t),p=pO(t),y=mO(s),x=r.createProgram();let g,w,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(mc).join(`
`),g.length>0&&(g+=`
`),w=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(mc).join(`
`),w.length>0&&(w+=`
`)):(g=[F1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+a:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mc).join(`
`),w=[d,F1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+a:"",t.envMap?"#define "+o:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ms?"#define TONE_MAPPING":"",t.toneMapping!==Ms?Gt.tonemapping_pars_fragment:"",t.toneMapping!==Ms?fO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Gt.colorspace_pars_fragment,hO("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(mc).join(`
`)),c=Iy(c),c=N1(c,t),c=O1(c,t),l=Iy(l),l=N1(l,t),l=O1(l,t),c=D1(c),l=D1(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,g=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Ly?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ly?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const M=C+g+c,_=C+w+l,E=P1(r,r.VERTEX_SHADER,M),R=P1(r,r.FRAGMENT_SHADER,_);r.attachShader(x,E),r.attachShader(x,R),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function A(D){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(x).trim(),B=r.getShaderInfoLog(E).trim(),W=r.getShaderInfoLog(R).trim();let H=!0,J=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(H=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,E,R);else{const G=I1(r,E,"vertex"),K=I1(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Program Info Log: `+z+`
`+G+`
`+K)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(B===""||W==="")&&(J=!1);J&&(D.diagnostics={runnable:H,programLog:z,vertexShader:{log:B,prefix:g},fragmentShader:{log:W,prefix:w}})}r.deleteShader(E),r.deleteShader(R),T=new wp(r,x),S=gO(r,x)}let T;this.getUniforms=function(){return T===void 0&&A(this),T};let S;this.getAttributes=function(){return S===void 0&&A(this),S};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=r.getProgramParameter(x,aO)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=lO++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=E,this.fragmentShader=R,this}let TO=0;class RO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),c=this._getShaderCacheForMaterial(e);return c.has(r)===!1&&(c.add(r),r.usedTimes++),c.has(s)===!1&&(c.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new LO(e),t.set(e,i)),i}}class LO{constructor(e){this.id=TO++,this.code=e,this.usedTimes=0}}function kO(n,e,t,i,r,s,c){const l=new Xa,u=new RO,f=[],a=r.isWebGL2,o=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T){return T===0?"uv":`uv${T}`}function x(T,S,I,D,z){const B=D.fog,W=z.geometry,H=T.isMeshStandardMaterial?D.environment:null,J=(T.isMeshStandardMaterial?t:e).get(T.envMap||H),G=J&&J.mapping===Hc?J.image.height:null,K=p[T.type];T.precision!==null&&(d=r.getMaxPrecision(T.precision),d!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",d,"instead."));const Y=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,ne=Y!==void 0?Y.length:0;let le=0;W.morphAttributes.position!==void 0&&(le=1),W.morphAttributes.normal!==void 0&&(le=2),W.morphAttributes.color!==void 0&&(le=3);let j,re,fe,ve;if(K){const tn=is[K];j=tn.vertexShader,re=tn.fragmentShader}else j=T.vertexShader,re=T.fragmentShader,u.update(T),fe=u.getVertexShaderID(T),ve=u.getFragmentShaderID(T);const ye=n.getRenderTarget(),ze=z.isInstancedMesh===!0,Xe=z.isBatchedMesh===!0,Ae=!!T.map,je=!!T.matcap,oe=!!J,Ve=!!T.aoMap,Te=!!T.lightMap,$e=!!T.bumpMap,Ne=!!T.normalMap,ht=!!T.displacementMap,Ze=!!T.emissiveMap,q=!!T.metalnessMap,Z=!!T.roughnessMap,ae=T.anisotropy>0,Ee=T.clearcoat>0,me=T.iridescence>0,ke=T.sheen>0,Qe=T.transmission>0,Ye=ae&&!!T.anisotropyMap,Je=Ee&&!!T.clearcoatMap,ge=Ee&&!!T.clearcoatNormalMap,Me=Ee&&!!T.clearcoatRoughnessMap,_e=me&&!!T.iridescenceMap,et=me&&!!T.iridescenceThicknessMap,ot=ke&&!!T.sheenColorMap,Ue=ke&&!!T.sheenRoughnessMap,We=!!T.specularMap,rt=!!T.specularColorMap,he=!!T.specularIntensityMap,De=Qe&&!!T.transmissionMap,tt=Qe&&!!T.thicknessMap,at=!!T.gradientMap,Ke=!!T.alphaMap,pe=T.alphaTest>0,lt=!!T.alphaHash,nt=!!T.extensions,Tt=!!W.attributes.uv1,_t=!!W.attributes.uv2,Xt=!!W.attributes.uv3;let Jt=Ms;return T.toneMapped&&(ye===null||ye.isXRRenderTarget===!0)&&(Jt=n.toneMapping),{isWebGL2:a,shaderID:K,shaderType:T.type,shaderName:T.name,vertexShader:j,fragmentShader:re,defines:T.defines,customVertexShaderID:fe,customFragmentShaderID:ve,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:d,batching:Xe,instancing:ze,instancingColor:ze&&z.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:ye===null?n.outputColorSpace:ye.isXRRenderTarget===!0?ye.texture.colorSpace:bs,map:Ae,matcap:je,envMap:oe,envMapMode:oe&&J.mapping,envMapCubeUVHeight:G,aoMap:Ve,lightMap:Te,bumpMap:$e,normalMap:Ne,displacementMap:h&&ht,emissiveMap:Ze,normalMapObjectSpace:Ne&&T.normalMapType===aA,normalMapTangentSpace:Ne&&T.normalMapType===Qo,metalnessMap:q,roughnessMap:Z,anisotropy:ae,anisotropyMap:Ye,clearcoat:Ee,clearcoatMap:Je,clearcoatNormalMap:ge,clearcoatRoughnessMap:Me,iridescence:me,iridescenceMap:_e,iridescenceThicknessMap:et,sheen:ke,sheenColorMap:ot,sheenRoughnessMap:Ue,specularMap:We,specularColorMap:rt,specularIntensityMap:he,transmission:Qe,transmissionMap:De,thicknessMap:tt,gradientMap:at,opaque:T.transparent===!1&&T.blending===ja,alphaMap:Ke,alphaTest:pe,alphaHash:lt,combine:T.combine,mapUv:Ae&&y(T.map.channel),aoMapUv:Ve&&y(T.aoMap.channel),lightMapUv:Te&&y(T.lightMap.channel),bumpMapUv:$e&&y(T.bumpMap.channel),normalMapUv:Ne&&y(T.normalMap.channel),displacementMapUv:ht&&y(T.displacementMap.channel),emissiveMapUv:Ze&&y(T.emissiveMap.channel),metalnessMapUv:q&&y(T.metalnessMap.channel),roughnessMapUv:Z&&y(T.roughnessMap.channel),anisotropyMapUv:Ye&&y(T.anisotropyMap.channel),clearcoatMapUv:Je&&y(T.clearcoatMap.channel),clearcoatNormalMapUv:ge&&y(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&y(T.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&y(T.iridescenceMap.channel),iridescenceThicknessMapUv:et&&y(T.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&y(T.sheenColorMap.channel),sheenRoughnessMapUv:Ue&&y(T.sheenRoughnessMap.channel),specularMapUv:We&&y(T.specularMap.channel),specularColorMapUv:rt&&y(T.specularColorMap.channel),specularIntensityMapUv:he&&y(T.specularIntensityMap.channel),transmissionMapUv:De&&y(T.transmissionMap.channel),thicknessMapUv:tt&&y(T.thicknessMap.channel),alphaMapUv:Ke&&y(T.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(Ne||ae),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,vertexUv1s:Tt,vertexUv2s:_t,vertexUv3s:Xt,pointsUvs:z.isPoints===!0&&!!W.attributes.uv&&(Ae||Ke),fog:!!B,useFog:T.fog===!0,fogExp2:B&&B.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:o,skinning:z.isSkinnedMesh===!0,morphTargets:W.morphAttributes.position!==void 0,morphNormals:W.morphAttributes.normal!==void 0,morphColors:W.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:le,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numLightProbes:S.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Jt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ae&&T.map.isVideoTexture===!0&&hn.getTransfer(T.map.colorSpace)===xn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===rs,flipSided:T.side===Xi,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:nt&&T.extensions.derivatives===!0,extensionFragDepth:nt&&T.extensions.fragDepth===!0,extensionDrawBuffers:nt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:nt&&T.extensions.shaderTextureLOD===!0,extensionClipCullDistance:nt&&T.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:a||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}}function g(T){const S=[];if(T.shaderID?S.push(T.shaderID):(S.push(T.customVertexShaderID),S.push(T.customFragmentShaderID)),T.defines!==void 0)for(const I in T.defines)S.push(I),S.push(T.defines[I]);return T.isRawShaderMaterial===!1&&(w(S,T),C(S,T),S.push(n.outputColorSpace)),S.push(T.customProgramCacheKey),S.join()}function w(T,S){T.push(S.precision),T.push(S.outputColorSpace),T.push(S.envMapMode),T.push(S.envMapCubeUVHeight),T.push(S.mapUv),T.push(S.alphaMapUv),T.push(S.lightMapUv),T.push(S.aoMapUv),T.push(S.bumpMapUv),T.push(S.normalMapUv),T.push(S.displacementMapUv),T.push(S.emissiveMapUv),T.push(S.metalnessMapUv),T.push(S.roughnessMapUv),T.push(S.anisotropyMapUv),T.push(S.clearcoatMapUv),T.push(S.clearcoatNormalMapUv),T.push(S.clearcoatRoughnessMapUv),T.push(S.iridescenceMapUv),T.push(S.iridescenceThicknessMapUv),T.push(S.sheenColorMapUv),T.push(S.sheenRoughnessMapUv),T.push(S.specularMapUv),T.push(S.specularColorMapUv),T.push(S.specularIntensityMapUv),T.push(S.transmissionMapUv),T.push(S.thicknessMapUv),T.push(S.combine),T.push(S.fogExp2),T.push(S.sizeAttenuation),T.push(S.morphTargetsCount),T.push(S.morphAttributeCount),T.push(S.numDirLights),T.push(S.numPointLights),T.push(S.numSpotLights),T.push(S.numSpotLightMaps),T.push(S.numHemiLights),T.push(S.numRectAreaLights),T.push(S.numDirLightShadows),T.push(S.numPointLightShadows),T.push(S.numSpotLightShadows),T.push(S.numSpotLightShadowsWithMaps),T.push(S.numLightProbes),T.push(S.shadowMapType),T.push(S.toneMapping),T.push(S.numClippingPlanes),T.push(S.numClipIntersection),T.push(S.depthPacking)}function C(T,S){l.disableAll(),S.isWebGL2&&l.enable(0),S.supportsVertexTextures&&l.enable(1),S.instancing&&l.enable(2),S.instancingColor&&l.enable(3),S.matcap&&l.enable(4),S.envMap&&l.enable(5),S.normalMapObjectSpace&&l.enable(6),S.normalMapTangentSpace&&l.enable(7),S.clearcoat&&l.enable(8),S.iridescence&&l.enable(9),S.alphaTest&&l.enable(10),S.vertexColors&&l.enable(11),S.vertexAlphas&&l.enable(12),S.vertexUv1s&&l.enable(13),S.vertexUv2s&&l.enable(14),S.vertexUv3s&&l.enable(15),S.vertexTangents&&l.enable(16),S.anisotropy&&l.enable(17),S.alphaHash&&l.enable(18),S.batching&&l.enable(19),T.push(l.mask),l.disableAll(),S.fog&&l.enable(0),S.useFog&&l.enable(1),S.flatShading&&l.enable(2),S.logarithmicDepthBuffer&&l.enable(3),S.skinning&&l.enable(4),S.morphTargets&&l.enable(5),S.morphNormals&&l.enable(6),S.morphColors&&l.enable(7),S.premultipliedAlpha&&l.enable(8),S.shadowMapEnabled&&l.enable(9),S.useLegacyLights&&l.enable(10),S.doubleSided&&l.enable(11),S.flipSided&&l.enable(12),S.useDepthPacking&&l.enable(13),S.dithering&&l.enable(14),S.transmission&&l.enable(15),S.sheen&&l.enable(16),S.opaque&&l.enable(17),S.pointsUvs&&l.enable(18),S.decodeVideoTexture&&l.enable(19),T.push(l.mask)}function M(T){const S=p[T.type];let I;if(S){const D=is[S];I=_A.clone(D.uniforms)}else I=T.uniforms;return I}function _(T,S){let I;for(let D=0,z=f.length;D<z;D++){const B=f[D];if(B.cacheKey===S){I=B,++I.usedTimes;break}}return I===void 0&&(I=new AO(n,S,T,s),f.push(I)),I}function E(T){if(--T.usedTimes===0){const S=f.indexOf(T);f[S]=f[f.length-1],f.pop(),T.destroy()}}function R(T){u.remove(T)}function A(){u.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:M,acquireProgram:_,releaseProgram:E,releaseShaderCache:R,programs:f,dispose:A}}function PO(){let n=new WeakMap;function e(s){let c=n.get(s);return c===void 0&&(c={},n.set(s,c)),c}function t(s){n.delete(s)}function i(s,c,l){n.get(s)[c]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function IO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function U1(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function B1(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function c(o,h,d,p,y,x){let g=n[e];return g===void 0?(g={id:o.id,object:o,geometry:h,material:d,groupOrder:p,renderOrder:o.renderOrder,z:y,group:x},n[e]=g):(g.id=o.id,g.object=o,g.geometry=h,g.material=d,g.groupOrder=p,g.renderOrder=o.renderOrder,g.z=y,g.group=x),e++,g}function l(o,h,d,p,y,x){const g=c(o,h,d,p,y,x);d.transmission>0?i.push(g):d.transparent===!0?r.push(g):t.push(g)}function u(o,h,d,p,y,x){const g=c(o,h,d,p,y,x);d.transmission>0?i.unshift(g):d.transparent===!0?r.unshift(g):t.unshift(g)}function f(o,h){t.length>1&&t.sort(o||IO),i.length>1&&i.sort(h||U1),r.length>1&&r.sort(h||U1)}function a(){for(let o=e,h=n.length;o<h;o++){const d=n[o];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:a,sort:f}}function NO(){let n=new WeakMap;function e(i,r){const s=n.get(i);let c;return s===void 0?(c=new B1,n.set(i,[c])):r>=s.length?(c=new B1,s.push(c)):c=s[r],c}function t(){n=new WeakMap}return{get:e,dispose:t}}function OO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new se,color:new gt};break;case"SpotLight":t={position:new se,direction:new se,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new se,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new se,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new se,halfWidth:new se,halfHeight:new se};break}return n[e.id]=t,t}}}function DO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let FO=0;function UO(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function BO(n,e){const t=new OO,i=DO(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)r.probe.push(new se);const s=new se,c=new Bt,l=new Bt;function u(a,o){let h=0,d=0,p=0;for(let D=0;D<9;D++)r.probe[D].set(0,0,0);let y=0,x=0,g=0,w=0,C=0,M=0,_=0,E=0,R=0,A=0,T=0;a.sort(UO);const S=o===!0?Math.PI:1;for(let D=0,z=a.length;D<z;D++){const B=a[D],W=B.color,H=B.intensity,J=B.distance,G=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=W.r*H*S,d+=W.g*H*S,p+=W.b*H*S;else if(B.isLightProbe){for(let K=0;K<9;K++)r.probe[K].addScaledVector(B.sh.coefficients[K],H);T++}else if(B.isDirectionalLight){const K=t.get(B);if(K.color.copy(B.color).multiplyScalar(B.intensity*S),B.castShadow){const Y=B.shadow,ne=i.get(B);ne.shadowBias=Y.bias,ne.shadowNormalBias=Y.normalBias,ne.shadowRadius=Y.radius,ne.shadowMapSize=Y.mapSize,r.directionalShadow[y]=ne,r.directionalShadowMap[y]=G,r.directionalShadowMatrix[y]=B.shadow.matrix,M++}r.directional[y]=K,y++}else if(B.isSpotLight){const K=t.get(B);K.position.setFromMatrixPosition(B.matrixWorld),K.color.copy(W).multiplyScalar(H*S),K.distance=J,K.coneCos=Math.cos(B.angle),K.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),K.decay=B.decay,r.spot[g]=K;const Y=B.shadow;if(B.map&&(r.spotLightMap[R]=B.map,R++,Y.updateMatrices(B),B.castShadow&&A++),r.spotLightMatrix[g]=Y.matrix,B.castShadow){const ne=i.get(B);ne.shadowBias=Y.bias,ne.shadowNormalBias=Y.normalBias,ne.shadowRadius=Y.radius,ne.shadowMapSize=Y.mapSize,r.spotShadow[g]=ne,r.spotShadowMap[g]=G,E++}g++}else if(B.isRectAreaLight){const K=t.get(B);K.color.copy(W).multiplyScalar(H),K.halfWidth.set(B.width*.5,0,0),K.halfHeight.set(0,B.height*.5,0),r.rectArea[w]=K,w++}else if(B.isPointLight){const K=t.get(B);if(K.color.copy(B.color).multiplyScalar(B.intensity*S),K.distance=B.distance,K.decay=B.decay,B.castShadow){const Y=B.shadow,ne=i.get(B);ne.shadowBias=Y.bias,ne.shadowNormalBias=Y.normalBias,ne.shadowRadius=Y.radius,ne.shadowMapSize=Y.mapSize,ne.shadowCameraNear=Y.camera.near,ne.shadowCameraFar=Y.camera.far,r.pointShadow[x]=ne,r.pointShadowMap[x]=G,r.pointShadowMatrix[x]=B.shadow.matrix,_++}r.point[x]=K,x++}else if(B.isHemisphereLight){const K=t.get(B);K.skyColor.copy(B.color).multiplyScalar(H*S),K.groundColor.copy(B.groundColor).multiplyScalar(H*S),r.hemi[C]=K,C++}}w>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_FLOAT_1,r.rectAreaLTC2=ut.LTC_FLOAT_2):(r.rectAreaLTC1=ut.LTC_HALF_1,r.rectAreaLTC2=ut.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_FLOAT_1,r.rectAreaLTC2=ut.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_HALF_1,r.rectAreaLTC2=ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==y||I.pointLength!==x||I.spotLength!==g||I.rectAreaLength!==w||I.hemiLength!==C||I.numDirectionalShadows!==M||I.numPointShadows!==_||I.numSpotShadows!==E||I.numSpotMaps!==R||I.numLightProbes!==T)&&(r.directional.length=y,r.spot.length=g,r.rectArea.length=w,r.point.length=x,r.hemi.length=C,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=_,r.spotLightMatrix.length=E+R-A,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=A,r.numLightProbes=T,I.directionalLength=y,I.pointLength=x,I.spotLength=g,I.rectAreaLength=w,I.hemiLength=C,I.numDirectionalShadows=M,I.numPointShadows=_,I.numSpotShadows=E,I.numSpotMaps=R,I.numLightProbes=T,r.version=FO++)}function f(a,o){let h=0,d=0,p=0,y=0,x=0;const g=o.matrixWorldInverse;for(let w=0,C=a.length;w<C;w++){const M=a[w];if(M.isDirectionalLight){const _=r.directional[h];_.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(g),h++}else if(M.isSpotLight){const _=r.spot[p];_.position.setFromMatrixPosition(M.matrixWorld),_.position.applyMatrix4(g),_.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(g),p++}else if(M.isRectAreaLight){const _=r.rectArea[y];_.position.setFromMatrixPosition(M.matrixWorld),_.position.applyMatrix4(g),l.identity(),c.copy(M.matrixWorld),c.premultiply(g),l.extractRotation(c),_.halfWidth.set(M.width*.5,0,0),_.halfHeight.set(0,M.height*.5,0),_.halfWidth.applyMatrix4(l),_.halfHeight.applyMatrix4(l),y++}else if(M.isPointLight){const _=r.point[d];_.position.setFromMatrixPosition(M.matrixWorld),_.position.applyMatrix4(g),d++}else if(M.isHemisphereLight){const _=r.hemi[x];_.direction.setFromMatrixPosition(M.matrixWorld),_.direction.transformDirection(g),x++}}}return{setup:u,setupView:f,state:r}}function $1(n,e){const t=new BO(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function c(o){i.push(o)}function l(o){r.push(o)}function u(o){t.setup(i,o)}function f(o){t.setupView(i,o)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:u,setupLightsView:f,pushLight:c,pushShadow:l}}function $O(n,e){let t=new WeakMap;function i(s,c=0){const l=t.get(s);let u;return l===void 0?(u=new $1(n,e),t.set(s,[u])):c>=l.length?(u=new $1(n,e),l.push(u)):u=l[c],u}function r(){t=new WeakMap}return{get:i,dispose:r}}class i_ extends Ci{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class r_ extends Ci{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const zO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,HO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WO(n,e,t){let i=new qh;const r=new Ge,s=new Ge,c=new ln,l=new i_({depthPacking:oA}),u=new r_,f={},a=t.maxTextureSize,o={[Js]:Xi,[Xi]:Js,[rs]:rs},h=new cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:zO,fragmentShader:HO}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new Kt;p.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new fi(p,h),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xm;let g=this.type;this.render=function(E,R,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||E.length===0)return;const T=n.getRenderTarget(),S=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Ks),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const z=g!==es&&this.type===es,B=g===es&&this.type!==es;for(let W=0,H=E.length;W<H;W++){const J=E[W],G=J.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;r.copy(G.mapSize);const K=G.getFrameExtents();if(r.multiply(K),s.copy(G.mapSize),(r.x>a||r.y>a)&&(r.x>a&&(s.x=Math.floor(a/K.x),r.x=s.x*K.x,G.mapSize.x=s.x),r.y>a&&(s.y=Math.floor(a/K.y),r.y=s.y*K.y,G.mapSize.y=s.y)),G.map===null||z===!0||B===!0){const ne=this.type!==es?{minFilter:Xn,magFilter:Xn}:{};G.map!==null&&G.map.dispose(),G.map=new jr(r.x,r.y,ne),G.map.texture.name=J.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const Y=G.getViewportCount();for(let ne=0;ne<Y;ne++){const le=G.getViewport(ne);c.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),D.viewport(c),G.updateMatrices(J,ne),i=G.getFrustum(),M(R,A,G.camera,J,this.type)}G.isPointLightShadow!==!0&&this.type===es&&w(G,A),G.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(T,S,I)};function w(E,R){const A=e.update(y);h.defines.VSM_SAMPLES!==E.blurSamples&&(h.defines.VSM_SAMPLES=E.blurSamples,d.defines.VSM_SAMPLES=E.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new jr(r.x,r.y)),h.uniforms.shadow_pass.value=E.map.texture,h.uniforms.resolution.value=E.mapSize,h.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(R,null,A,h,y,null),d.uniforms.shadow_pass.value=E.mapPass.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(R,null,A,d,y,null)}function C(E,R,A,T){let S=null;const I=A.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(I!==void 0)S=I;else if(S=A.isPointLight===!0?u:l,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const D=S.uuid,z=R.uuid;let B=f[D];B===void 0&&(B={},f[D]=B);let W=B[z];W===void 0&&(W=S.clone(),B[z]=W,R.addEventListener("dispose",_)),S=W}if(S.visible=R.visible,S.wireframe=R.wireframe,T===es?S.side=R.shadowSide!==null?R.shadowSide:R.side:S.side=R.shadowSide!==null?R.shadowSide:o[R.side],S.alphaMap=R.alphaMap,S.alphaTest=R.alphaTest,S.map=R.map,S.clipShadows=R.clipShadows,S.clippingPlanes=R.clippingPlanes,S.clipIntersection=R.clipIntersection,S.displacementMap=R.displacementMap,S.displacementScale=R.displacementScale,S.displacementBias=R.displacementBias,S.wireframeLinewidth=R.wireframeLinewidth,S.linewidth=R.linewidth,A.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const D=n.properties.get(S);D.light=A}return S}function M(E,R,A,T,S){if(E.visible===!1)return;if(E.layers.test(R.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&S===es)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,E.matrixWorld);const z=e.update(E),B=E.material;if(Array.isArray(B)){const W=z.groups;for(let H=0,J=W.length;H<J;H++){const G=W[H],K=B[G.materialIndex];if(K&&K.visible){const Y=C(E,K,T,S);E.onBeforeShadow(n,E,R,A,z,Y,G),n.renderBufferDirect(A,null,z,Y,E,G),E.onAfterShadow(n,E,R,A,z,Y,G)}}}else if(B.visible){const W=C(E,B,T,S);E.onBeforeShadow(n,E,R,A,z,W,null),n.renderBufferDirect(A,null,z,W,E,null),E.onAfterShadow(n,E,R,A,z,W,null)}}const D=E.children;for(let z=0,B=D.length;z<B;z++)M(D[z],R,A,T,S)}function _(E){E.target.removeEventListener("dispose",_);for(const A in f){const T=f[A],S=E.target.uuid;S in T&&(T[S].dispose(),delete T[S])}}}function VO(n,e,t){const i=t.isWebGL2;function r(){let pe=!1;const lt=new ln;let nt=null;const Tt=new ln(0,0,0,0);return{setMask:function(_t){nt!==_t&&!pe&&(n.colorMask(_t,_t,_t,_t),nt=_t)},setLocked:function(_t){pe=_t},setClear:function(_t,Xt,Jt,Pt,tn){tn===!0&&(_t*=Pt,Xt*=Pt,Jt*=Pt),lt.set(_t,Xt,Jt,Pt),Tt.equals(lt)===!1&&(n.clearColor(_t,Xt,Jt,Pt),Tt.copy(lt))},reset:function(){pe=!1,nt=null,Tt.set(-1,0,0,0)}}}function s(){let pe=!1,lt=null,nt=null,Tt=null;return{setTest:function(_t){_t?Xe(n.DEPTH_TEST):Ae(n.DEPTH_TEST)},setMask:function(_t){lt!==_t&&!pe&&(n.depthMask(_t),lt=_t)},setFunc:function(_t){if(nt!==_t){switch(_t){case Ib:n.depthFunc(n.NEVER);break;case Nb:n.depthFunc(n.ALWAYS);break;case Ob:n.depthFunc(n.LESS);break;case wh:n.depthFunc(n.LEQUAL);break;case Db:n.depthFunc(n.EQUAL);break;case Fb:n.depthFunc(n.GEQUAL);break;case Ub:n.depthFunc(n.GREATER);break;case Bb:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}nt=_t}},setLocked:function(_t){pe=_t},setClear:function(_t){Tt!==_t&&(n.clearDepth(_t),Tt=_t)},reset:function(){pe=!1,lt=null,nt=null,Tt=null}}}function c(){let pe=!1,lt=null,nt=null,Tt=null,_t=null,Xt=null,Jt=null,Pt=null,tn=null;return{setTest:function(At){pe||(At?Xe(n.STENCIL_TEST):Ae(n.STENCIL_TEST))},setMask:function(At){lt!==At&&!pe&&(n.stencilMask(At),lt=At)},setFunc:function(At,cn,Qn){(nt!==At||Tt!==cn||_t!==Qn)&&(n.stencilFunc(At,cn,Qn),nt=At,Tt=cn,_t=Qn)},setOp:function(At,cn,Qn){(Xt!==At||Jt!==cn||Pt!==Qn)&&(n.stencilOp(At,cn,Qn),Xt=At,Jt=cn,Pt=Qn)},setLocked:function(At){pe=At},setClear:function(At){tn!==At&&(n.clearStencil(At),tn=At)},reset:function(){pe=!1,lt=null,nt=null,Tt=null,_t=null,Xt=null,Jt=null,Pt=null,tn=null}}}const l=new r,u=new s,f=new c,a=new WeakMap,o=new WeakMap;let h={},d={},p=new WeakMap,y=[],x=null,g=!1,w=null,C=null,M=null,_=null,E=null,R=null,A=null,T=new gt(0,0,0),S=0,I=!1,D=null,z=null,B=null,W=null,H=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,K=0;const Y=n.getParameter(n.VERSION);Y.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(Y)[1]),G=K>=1):Y.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),G=K>=2);let ne=null,le={};const j=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),fe=new ln().fromArray(j),ve=new ln().fromArray(re);function ye(pe,lt,nt,Tt){const _t=new Uint8Array(4),Xt=n.createTexture();n.bindTexture(pe,Xt),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Jt=0;Jt<nt;Jt++)i&&(pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY)?n.texImage3D(lt,0,n.RGBA,1,1,Tt,0,n.RGBA,n.UNSIGNED_BYTE,_t):n.texImage2D(lt+Jt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_t);return Xt}const ze={};ze[n.TEXTURE_2D]=ye(n.TEXTURE_2D,n.TEXTURE_2D,1),ze[n.TEXTURE_CUBE_MAP]=ye(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(ze[n.TEXTURE_2D_ARRAY]=ye(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ze[n.TEXTURE_3D]=ye(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Xe(n.DEPTH_TEST),u.setFunc(wh),Ze(!1),q(Q0),Xe(n.CULL_FACE),Ne(Ks);function Xe(pe){h[pe]!==!0&&(n.enable(pe),h[pe]=!0)}function Ae(pe){h[pe]!==!1&&(n.disable(pe),h[pe]=!1)}function je(pe,lt){return d[pe]!==lt?(n.bindFramebuffer(pe,lt),d[pe]=lt,i&&(pe===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=lt),pe===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=lt)),!0):!1}function oe(pe,lt){let nt=y,Tt=!1;if(pe)if(nt=p.get(lt),nt===void 0&&(nt=[],p.set(lt,nt)),pe.isWebGLMultipleRenderTargets){const _t=pe.texture;if(nt.length!==_t.length||nt[0]!==n.COLOR_ATTACHMENT0){for(let Xt=0,Jt=_t.length;Xt<Jt;Xt++)nt[Xt]=n.COLOR_ATTACHMENT0+Xt;nt.length=_t.length,Tt=!0}}else nt[0]!==n.COLOR_ATTACHMENT0&&(nt[0]=n.COLOR_ATTACHMENT0,Tt=!0);else nt[0]!==n.BACK&&(nt[0]=n.BACK,Tt=!0);Tt&&(t.isWebGL2?n.drawBuffers(nt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(nt))}function Ve(pe){return x!==pe?(n.useProgram(pe),x=pe,!0):!1}const Te={[To]:n.FUNC_ADD,[yb]:n.FUNC_SUBTRACT,[xb]:n.FUNC_REVERSE_SUBTRACT};if(i)Te[ty]=n.MIN,Te[ny]=n.MAX;else{const pe=e.get("EXT_blend_minmax");pe!==null&&(Te[ty]=pe.MIN_EXT,Te[ny]=pe.MAX_EXT)}const $e={[_b]:n.ZERO,[Sb]:n.ONE,[wb]:n.SRC_COLOR,[Kp]:n.SRC_ALPHA,[Tb]:n.SRC_ALPHA_SATURATE,[bb]:n.DST_COLOR,[Cb]:n.DST_ALPHA,[Mb]:n.ONE_MINUS_SRC_COLOR,[Xp]:n.ONE_MINUS_SRC_ALPHA,[Ab]:n.ONE_MINUS_DST_COLOR,[Eb]:n.ONE_MINUS_DST_ALPHA,[Rb]:n.CONSTANT_COLOR,[Lb]:n.ONE_MINUS_CONSTANT_COLOR,[kb]:n.CONSTANT_ALPHA,[Pb]:n.ONE_MINUS_CONSTANT_ALPHA};function Ne(pe,lt,nt,Tt,_t,Xt,Jt,Pt,tn,At){if(pe===Ks){g===!0&&(Ae(n.BLEND),g=!1);return}if(g===!1&&(Xe(n.BLEND),g=!0),pe!==vb){if(pe!==w||At!==I){if((C!==To||E!==To)&&(n.blendEquation(n.FUNC_ADD),C=To,E=To),At)switch(pe){case ja:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case J0:n.blendFunc(n.ONE,n.ONE);break;case q0:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ey:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case ja:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case J0:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case q0:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ey:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}M=null,_=null,R=null,A=null,T.set(0,0,0),S=0,w=pe,I=At}return}_t=_t||lt,Xt=Xt||nt,Jt=Jt||Tt,(lt!==C||_t!==E)&&(n.blendEquationSeparate(Te[lt],Te[_t]),C=lt,E=_t),(nt!==M||Tt!==_||Xt!==R||Jt!==A)&&(n.blendFuncSeparate($e[nt],$e[Tt],$e[Xt],$e[Jt]),M=nt,_=Tt,R=Xt,A=Jt),(Pt.equals(T)===!1||tn!==S)&&(n.blendColor(Pt.r,Pt.g,Pt.b,tn),T.copy(Pt),S=tn),w=pe,I=!1}function ht(pe,lt){pe.side===rs?Ae(n.CULL_FACE):Xe(n.CULL_FACE);let nt=pe.side===Xi;lt&&(nt=!nt),Ze(nt),pe.blending===ja&&pe.transparent===!1?Ne(Ks):Ne(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),u.setFunc(pe.depthFunc),u.setTest(pe.depthTest),u.setMask(pe.depthWrite),l.setMask(pe.colorWrite);const Tt=pe.stencilWrite;f.setTest(Tt),Tt&&(f.setMask(pe.stencilWriteMask),f.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),f.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),ae(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Xe(n.SAMPLE_ALPHA_TO_COVERAGE):Ae(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(pe){D!==pe&&(pe?n.frontFace(n.CW):n.frontFace(n.CCW),D=pe)}function q(pe){pe!==pb?(Xe(n.CULL_FACE),pe!==z&&(pe===Q0?n.cullFace(n.BACK):pe===mb?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ae(n.CULL_FACE),z=pe}function Z(pe){pe!==B&&(G&&n.lineWidth(pe),B=pe)}function ae(pe,lt,nt){pe?(Xe(n.POLYGON_OFFSET_FILL),(W!==lt||H!==nt)&&(n.polygonOffset(lt,nt),W=lt,H=nt)):Ae(n.POLYGON_OFFSET_FILL)}function Ee(pe){pe?Xe(n.SCISSOR_TEST):Ae(n.SCISSOR_TEST)}function me(pe){pe===void 0&&(pe=n.TEXTURE0+J-1),ne!==pe&&(n.activeTexture(pe),ne=pe)}function ke(pe,lt,nt){nt===void 0&&(ne===null?nt=n.TEXTURE0+J-1:nt=ne);let Tt=le[nt];Tt===void 0&&(Tt={type:void 0,texture:void 0},le[nt]=Tt),(Tt.type!==pe||Tt.texture!==lt)&&(ne!==nt&&(n.activeTexture(nt),ne=nt),n.bindTexture(pe,lt||ze[pe]),Tt.type=pe,Tt.texture=lt)}function Qe(){const pe=le[ne];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function Ye(){try{n.compressedTexImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Je(){try{n.compressedTexImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ge(){try{n.texSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Me(){try{n.texSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function _e(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function et(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ot(){try{n.texStorage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function We(){try{n.texImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function rt(){try{n.texImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function he(pe){fe.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),fe.copy(pe))}function De(pe){ve.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),ve.copy(pe))}function tt(pe,lt){let nt=o.get(lt);nt===void 0&&(nt=new WeakMap,o.set(lt,nt));let Tt=nt.get(pe);Tt===void 0&&(Tt=n.getUniformBlockIndex(lt,pe.name),nt.set(pe,Tt))}function at(pe,lt){const Tt=o.get(lt).get(pe);a.get(lt)!==Tt&&(n.uniformBlockBinding(lt,Tt,pe.__bindingPointIndex),a.set(lt,Tt))}function Ke(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},ne=null,le={},d={},p=new WeakMap,y=[],x=null,g=!1,w=null,C=null,M=null,_=null,E=null,R=null,A=null,T=new gt(0,0,0),S=0,I=!1,D=null,z=null,B=null,W=null,H=null,fe.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),l.reset(),u.reset(),f.reset()}return{buffers:{color:l,depth:u,stencil:f},enable:Xe,disable:Ae,bindFramebuffer:je,drawBuffers:oe,useProgram:Ve,setBlending:Ne,setMaterial:ht,setFlipSided:Ze,setCullFace:q,setLineWidth:Z,setPolygonOffset:ae,setScissorTest:Ee,activeTexture:me,bindTexture:ke,unbindTexture:Qe,compressedTexImage2D:Ye,compressedTexImage3D:Je,texImage2D:We,texImage3D:rt,updateUBOMapping:tt,uniformBlockBinding:at,texStorage2D:ot,texStorage3D:Ue,texSubImage2D:ge,texSubImage3D:Me,compressedTexSubImage2D:_e,compressedTexSubImage3D:et,scissor:he,viewport:De,reset:Ke}}function GO(n,e,t,i,r,s,c){const l=r.isWebGL2,u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),a=new WeakMap;let o;const h=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(q,Z){return d?new OffscreenCanvas(q,Z):Nh("canvas")}function y(q,Z,ae,Ee){let me=1;if((q.width>Ee||q.height>Ee)&&(me=Ee/Math.max(q.width,q.height)),me<1||Z===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const ke=Z?Qp:Math.floor,Qe=ke(me*q.width),Ye=ke(me*q.height);o===void 0&&(o=p(Qe,Ye));const Je=ae?p(Qe,Ye):o;return Je.width=Qe,Je.height=Ye,Je.getContext("2d").drawImage(q,0,0,Qe,Ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+Qe+"x"+Ye+")."),Je}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function x(q){return ky(q.width)&&ky(q.height)}function g(q){return l?!1:q.wrapS!==Di||q.wrapT!==Di||q.minFilter!==Xn&&q.minFilter!==On}function w(q,Z){return q.generateMipmaps&&Z&&q.minFilter!==Xn&&q.minFilter!==On}function C(q){n.generateMipmap(q)}function M(q,Z,ae,Ee,me=!1){if(l===!1)return Z;if(q!==null){if(n[q]!==void 0)return n[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let ke=Z;if(Z===n.RED&&(ae===n.FLOAT&&(ke=n.R32F),ae===n.HALF_FLOAT&&(ke=n.R16F),ae===n.UNSIGNED_BYTE&&(ke=n.R8)),Z===n.RED_INTEGER&&(ae===n.UNSIGNED_BYTE&&(ke=n.R8UI),ae===n.UNSIGNED_SHORT&&(ke=n.R16UI),ae===n.UNSIGNED_INT&&(ke=n.R32UI),ae===n.BYTE&&(ke=n.R8I),ae===n.SHORT&&(ke=n.R16I),ae===n.INT&&(ke=n.R32I)),Z===n.RG&&(ae===n.FLOAT&&(ke=n.RG32F),ae===n.HALF_FLOAT&&(ke=n.RG16F),ae===n.UNSIGNED_BYTE&&(ke=n.RG8)),Z===n.RGBA){const Qe=me?Lh:hn.getTransfer(Ee);ae===n.FLOAT&&(ke=n.RGBA32F),ae===n.HALF_FLOAT&&(ke=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(ke=Qe===xn?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(ke=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(ke=n.RGB5_A1)}return(ke===n.R16F||ke===n.R32F||ke===n.RG16F||ke===n.RG32F||ke===n.RGBA16F||ke===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function _(q,Z,ae){return w(q,ae)===!0||q.isFramebufferTexture&&q.minFilter!==Xn&&q.minFilter!==On?Math.log2(Math.max(Z.width,Z.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?Z.mipmaps.length:1}function E(q){return q===Xn||q===Yp||q===eh?n.NEAREST:n.LINEAR}function R(q){const Z=q.target;Z.removeEventListener("dispose",R),T(Z),Z.isVideoTexture&&a.delete(Z)}function A(q){const Z=q.target;Z.removeEventListener("dispose",A),I(Z)}function T(q){const Z=i.get(q);if(Z.__webglInit===void 0)return;const ae=q.source,Ee=h.get(ae);if(Ee){const me=Ee[Z.__cacheKey];me.usedTimes--,me.usedTimes===0&&S(q),Object.keys(Ee).length===0&&h.delete(ae)}i.remove(q)}function S(q){const Z=i.get(q);n.deleteTexture(Z.__webglTexture);const ae=q.source,Ee=h.get(ae);delete Ee[Z.__cacheKey],c.memory.textures--}function I(q){const Z=q.texture,ae=i.get(q),Ee=i.get(Z);if(Ee.__webglTexture!==void 0&&(n.deleteTexture(Ee.__webglTexture),c.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let me=0;me<6;me++){if(Array.isArray(ae.__webglFramebuffer[me]))for(let ke=0;ke<ae.__webglFramebuffer[me].length;ke++)n.deleteFramebuffer(ae.__webglFramebuffer[me][ke]);else n.deleteFramebuffer(ae.__webglFramebuffer[me]);ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[me])}else{if(Array.isArray(ae.__webglFramebuffer))for(let me=0;me<ae.__webglFramebuffer.length;me++)n.deleteFramebuffer(ae.__webglFramebuffer[me]);else n.deleteFramebuffer(ae.__webglFramebuffer);if(ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let me=0;me<ae.__webglColorRenderbuffer.length;me++)ae.__webglColorRenderbuffer[me]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[me]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let me=0,ke=Z.length;me<ke;me++){const Qe=i.get(Z[me]);Qe.__webglTexture&&(n.deleteTexture(Qe.__webglTexture),c.memory.textures--),i.remove(Z[me])}i.remove(Z),i.remove(q)}let D=0;function z(){D=0}function B(){const q=D;return q>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+r.maxTextures),D+=1,q}function W(q){const Z=[];return Z.push(q.wrapS),Z.push(q.wrapT),Z.push(q.wrapR||0),Z.push(q.magFilter),Z.push(q.minFilter),Z.push(q.anisotropy),Z.push(q.internalFormat),Z.push(q.format),Z.push(q.type),Z.push(q.generateMipmaps),Z.push(q.premultiplyAlpha),Z.push(q.flipY),Z.push(q.unpackAlignment),Z.push(q.colorSpace),Z.join()}function H(q,Z){const ae=i.get(q);if(q.isVideoTexture&&ht(q),q.isRenderTargetTexture===!1&&q.version>0&&ae.__version!==q.version){const Ee=q.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(ae,q,Z);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+Z)}function J(q,Z){const ae=i.get(q);if(q.version>0&&ae.__version!==q.version){fe(ae,q,Z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+Z)}function G(q,Z){const ae=i.get(q);if(q.version>0&&ae.__version!==q.version){fe(ae,q,Z);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+Z)}function K(q,Z){const ae=i.get(q);if(q.version>0&&ae.__version!==q.version){ve(ae,q,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+Z)}const Y={[Eh]:n.REPEAT,[Di]:n.CLAMP_TO_EDGE,[bh]:n.MIRRORED_REPEAT},ne={[Xn]:n.NEAREST,[Yp]:n.NEAREST_MIPMAP_NEAREST,[eh]:n.NEAREST_MIPMAP_LINEAR,[On]:n.LINEAR,[$x]:n.LINEAR_MIPMAP_NEAREST,[jo]:n.LINEAR_MIPMAP_LINEAR},le={[lA]:n.NEVER,[pA]:n.ALWAYS,[cA]:n.LESS,[Zx]:n.LEQUAL,[uA]:n.EQUAL,[dA]:n.GEQUAL,[hA]:n.GREATER,[fA]:n.NOTEQUAL};function j(q,Z,ae){if(ae?(n.texParameteri(q,n.TEXTURE_WRAP_S,Y[Z.wrapS]),n.texParameteri(q,n.TEXTURE_WRAP_T,Y[Z.wrapT]),(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(q,n.TEXTURE_WRAP_R,Y[Z.wrapR]),n.texParameteri(q,n.TEXTURE_MAG_FILTER,ne[Z.magFilter]),n.texParameteri(q,n.TEXTURE_MIN_FILTER,ne[Z.minFilter])):(n.texParameteri(q,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(q,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(q,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(Z.wrapS!==Di||Z.wrapT!==Di)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(q,n.TEXTURE_MAG_FILTER,E(Z.magFilter)),n.texParameteri(q,n.TEXTURE_MIN_FILTER,E(Z.minFilter)),Z.minFilter!==Xn&&Z.minFilter!==On&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Z.compareFunction&&(n.texParameteri(q,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(q,n.TEXTURE_COMPARE_FUNC,le[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ee=e.get("EXT_texture_filter_anisotropic");if(Z.magFilter===Xn||Z.minFilter!==eh&&Z.minFilter!==jo||Z.type===Hr&&e.has("OES_texture_float_linear")===!1||l===!1&&Z.type===nl&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||i.get(Z).__currentAnisotropy)&&(n.texParameterf(q,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy)}}function re(q,Z){let ae=!1;q.__webglInit===void 0&&(q.__webglInit=!0,Z.addEventListener("dispose",R));const Ee=Z.source;let me=h.get(Ee);me===void 0&&(me={},h.set(Ee,me));const ke=W(Z);if(ke!==q.__cacheKey){me[ke]===void 0&&(me[ke]={texture:n.createTexture(),usedTimes:0},c.memory.textures++,ae=!0),me[ke].usedTimes++;const Qe=me[q.__cacheKey];Qe!==void 0&&(me[q.__cacheKey].usedTimes--,Qe.usedTimes===0&&S(Z)),q.__cacheKey=ke,q.__webglTexture=me[ke].texture}return ae}function fe(q,Z,ae){let Ee=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Ee=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Ee=n.TEXTURE_3D);const me=re(q,Z),ke=Z.source;t.bindTexture(Ee,q.__webglTexture,n.TEXTURE0+ae);const Qe=i.get(ke);if(ke.version!==Qe.__version||me===!0){t.activeTexture(n.TEXTURE0+ae);const Ye=hn.getPrimaries(hn.workingColorSpace),Je=Z.colorSpace===Cr?null:hn.getPrimaries(Z.colorSpace),ge=Z.colorSpace===Cr||Ye===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const Me=g(Z)&&x(Z.image)===!1;let _e=y(Z.image,Me,!1,r.maxTextureSize);_e=Ze(Z,_e);const et=x(_e)||l,ot=s.convert(Z.format,Z.colorSpace);let Ue=s.convert(Z.type),We=M(Z.internalFormat,ot,Ue,Z.colorSpace,Z.isVideoTexture);j(Ee,Z,et);let rt;const he=Z.mipmaps,De=l&&Z.isVideoTexture!==!0&&We!==Kx,tt=Qe.__version===void 0||me===!0,at=_(Z,_e,et);if(Z.isDepthTexture)We=n.DEPTH_COMPONENT,l?Z.type===Hr?We=n.DEPTH_COMPONENT32F:Z.type===Vs?We=n.DEPTH_COMPONENT24:Z.type===Bo?We=n.DEPTH24_STENCIL8:We=n.DEPTH_COMPONENT16:Z.type===Hr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===$o&&We===n.DEPTH_COMPONENT&&Z.type!==Sm&&Z.type!==Vs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=Vs,Ue=s.convert(Z.type)),Z.format===il&&We===n.DEPTH_COMPONENT&&(We=n.DEPTH_STENCIL,Z.type!==Bo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=Bo,Ue=s.convert(Z.type))),tt&&(De?t.texStorage2D(n.TEXTURE_2D,1,We,_e.width,_e.height):t.texImage2D(n.TEXTURE_2D,0,We,_e.width,_e.height,0,ot,Ue,null));else if(Z.isDataTexture)if(he.length>0&&et){De&&tt&&t.texStorage2D(n.TEXTURE_2D,at,We,he[0].width,he[0].height);for(let Ke=0,pe=he.length;Ke<pe;Ke++)rt=he[Ke],De?t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,rt.width,rt.height,ot,Ue,rt.data):t.texImage2D(n.TEXTURE_2D,Ke,We,rt.width,rt.height,0,ot,Ue,rt.data);Z.generateMipmaps=!1}else De?(tt&&t.texStorage2D(n.TEXTURE_2D,at,We,_e.width,_e.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,_e.width,_e.height,ot,Ue,_e.data)):t.texImage2D(n.TEXTURE_2D,0,We,_e.width,_e.height,0,ot,Ue,_e.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){De&&tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,We,he[0].width,he[0].height,_e.depth);for(let Ke=0,pe=he.length;Ke<pe;Ke++)rt=he[Ke],Z.format!==ji?ot!==null?De?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ke,0,0,0,rt.width,rt.height,_e.depth,ot,rt.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ke,We,rt.width,rt.height,_e.depth,0,rt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ke,0,0,0,rt.width,rt.height,_e.depth,ot,Ue,rt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ke,We,rt.width,rt.height,_e.depth,0,ot,Ue,rt.data)}else{De&&tt&&t.texStorage2D(n.TEXTURE_2D,at,We,he[0].width,he[0].height);for(let Ke=0,pe=he.length;Ke<pe;Ke++)rt=he[Ke],Z.format!==ji?ot!==null?De?t.compressedTexSubImage2D(n.TEXTURE_2D,Ke,0,0,rt.width,rt.height,ot,rt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ke,We,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,rt.width,rt.height,ot,Ue,rt.data):t.texImage2D(n.TEXTURE_2D,Ke,We,rt.width,rt.height,0,ot,Ue,rt.data)}else if(Z.isDataArrayTexture)De?(tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,We,_e.width,_e.height,_e.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,ot,Ue,_e.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,We,_e.width,_e.height,_e.depth,0,ot,Ue,_e.data);else if(Z.isData3DTexture)De?(tt&&t.texStorage3D(n.TEXTURE_3D,at,We,_e.width,_e.height,_e.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,ot,Ue,_e.data)):t.texImage3D(n.TEXTURE_3D,0,We,_e.width,_e.height,_e.depth,0,ot,Ue,_e.data);else if(Z.isFramebufferTexture){if(tt)if(De)t.texStorage2D(n.TEXTURE_2D,at,We,_e.width,_e.height);else{let Ke=_e.width,pe=_e.height;for(let lt=0;lt<at;lt++)t.texImage2D(n.TEXTURE_2D,lt,We,Ke,pe,0,ot,Ue,null),Ke>>=1,pe>>=1}}else if(he.length>0&&et){De&&tt&&t.texStorage2D(n.TEXTURE_2D,at,We,he[0].width,he[0].height);for(let Ke=0,pe=he.length;Ke<pe;Ke++)rt=he[Ke],De?t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,ot,Ue,rt):t.texImage2D(n.TEXTURE_2D,Ke,We,ot,Ue,rt);Z.generateMipmaps=!1}else De?(tt&&t.texStorage2D(n.TEXTURE_2D,at,We,_e.width,_e.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Ue,_e)):t.texImage2D(n.TEXTURE_2D,0,We,ot,Ue,_e);w(Z,et)&&C(Ee),Qe.__version=ke.version,Z.onUpdate&&Z.onUpdate(Z)}q.__version=Z.version}function ve(q,Z,ae){if(Z.image.length!==6)return;const Ee=re(q,Z),me=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture,n.TEXTURE0+ae);const ke=i.get(me);if(me.version!==ke.__version||Ee===!0){t.activeTexture(n.TEXTURE0+ae);const Qe=hn.getPrimaries(hn.workingColorSpace),Ye=Z.colorSpace===Cr?null:hn.getPrimaries(Z.colorSpace),Je=Z.colorSpace===Cr||Qe===Ye?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const ge=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Me=Z.image[0]&&Z.image[0].isDataTexture,_e=[];for(let Ke=0;Ke<6;Ke++)!ge&&!Me?_e[Ke]=y(Z.image[Ke],!1,!0,r.maxCubemapSize):_e[Ke]=Me?Z.image[Ke].image:Z.image[Ke],_e[Ke]=Ze(Z,_e[Ke]);const et=_e[0],ot=x(et)||l,Ue=s.convert(Z.format,Z.colorSpace),We=s.convert(Z.type),rt=M(Z.internalFormat,Ue,We,Z.colorSpace),he=l&&Z.isVideoTexture!==!0,De=ke.__version===void 0||Ee===!0;let tt=_(Z,et,ot);j(n.TEXTURE_CUBE_MAP,Z,ot);let at;if(ge){he&&De&&t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,rt,et.width,et.height);for(let Ke=0;Ke<6;Ke++){at=_e[Ke].mipmaps;for(let pe=0;pe<at.length;pe++){const lt=at[pe];Z.format!==ji?Ue!==null?he?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe,0,0,lt.width,lt.height,Ue,lt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe,rt,lt.width,lt.height,0,lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe,0,0,lt.width,lt.height,Ue,We,lt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe,rt,lt.width,lt.height,0,Ue,We,lt.data)}}}else{at=Z.mipmaps,he&&De&&(at.length>0&&tt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,rt,_e[0].width,_e[0].height));for(let Ke=0;Ke<6;Ke++)if(Me){he?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,_e[Ke].width,_e[Ke].height,Ue,We,_e[Ke].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,rt,_e[Ke].width,_e[Ke].height,0,Ue,We,_e[Ke].data);for(let pe=0;pe<at.length;pe++){const nt=at[pe].image[Ke].image;he?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe+1,0,0,nt.width,nt.height,Ue,We,nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe+1,rt,nt.width,nt.height,0,Ue,We,nt.data)}}else{he?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,Ue,We,_e[Ke]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,rt,Ue,We,_e[Ke]);for(let pe=0;pe<at.length;pe++){const lt=at[pe];he?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe+1,0,0,Ue,We,lt.image[Ke]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pe+1,rt,Ue,We,lt.image[Ke])}}}w(Z,ot)&&C(n.TEXTURE_CUBE_MAP),ke.__version=me.version,Z.onUpdate&&Z.onUpdate(Z)}q.__version=Z.version}function ye(q,Z,ae,Ee,me,ke){const Qe=s.convert(ae.format,ae.colorSpace),Ye=s.convert(ae.type),Je=M(ae.internalFormat,Qe,Ye,ae.colorSpace);if(!i.get(Z).__hasExternalTextures){const Me=Math.max(1,Z.width>>ke),_e=Math.max(1,Z.height>>ke);me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?t.texImage3D(me,ke,Je,Me,_e,Z.depth,0,Qe,Ye,null):t.texImage2D(me,ke,Je,Me,_e,0,Qe,Ye,null)}t.bindFramebuffer(n.FRAMEBUFFER,q),Ne(Z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,me,i.get(ae).__webglTexture,0,$e(Z)):(me===n.TEXTURE_2D||me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ee,me,i.get(ae).__webglTexture,ke),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(q,Z,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,q),Z.depthBuffer&&!Z.stencilBuffer){let Ee=l===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ae||Ne(Z)){const me=Z.depthTexture;me&&me.isDepthTexture&&(me.type===Hr?Ee=n.DEPTH_COMPONENT32F:me.type===Vs&&(Ee=n.DEPTH_COMPONENT24));const ke=$e(Z);Ne(Z)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ke,Ee,Z.width,Z.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ke,Ee,Z.width,Z.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ee,Z.width,Z.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,q)}else if(Z.depthBuffer&&Z.stencilBuffer){const Ee=$e(Z);ae&&Ne(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,n.DEPTH24_STENCIL8,Z.width,Z.height):Ne(Z)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ee,n.DEPTH24_STENCIL8,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,q)}else{const Ee=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let me=0;me<Ee.length;me++){const ke=Ee[me],Qe=s.convert(ke.format,ke.colorSpace),Ye=s.convert(ke.type),Je=M(ke.internalFormat,Qe,Ye,ke.colorSpace),ge=$e(Z);ae&&Ne(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,Je,Z.width,Z.height):Ne(Z)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,Je,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,Je,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Xe(q,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,q),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),H(Z.depthTexture,0);const Ee=i.get(Z.depthTexture).__webglTexture,me=$e(Z);if(Z.depthTexture.format===$o)Ne(Z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ee,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ee,0);else if(Z.depthTexture.format===il)Ne(Z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ee,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ee,0);else throw new Error("Unknown depthTexture format")}function Ae(q){const Z=i.get(q),ae=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");Xe(Z.__webglFramebuffer,q)}else if(ae){Z.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[Ee]),Z.__webglDepthbuffer[Ee]=n.createRenderbuffer(),ze(Z.__webglDepthbuffer[Ee],q,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer=n.createRenderbuffer(),ze(Z.__webglDepthbuffer,q,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(q,Z,ae){const Ee=i.get(q);Z!==void 0&&ye(Ee.__webglFramebuffer,q,q.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ae!==void 0&&Ae(q)}function oe(q){const Z=q.texture,ae=i.get(q),Ee=i.get(Z);q.addEventListener("dispose",A),q.isWebGLMultipleRenderTargets!==!0&&(Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture()),Ee.__version=Z.version,c.memory.textures++);const me=q.isWebGLCubeRenderTarget===!0,ke=q.isWebGLMultipleRenderTargets===!0,Qe=x(q)||l;if(me){ae.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(l&&Z.mipmaps&&Z.mipmaps.length>0){ae.__webglFramebuffer[Ye]=[];for(let Je=0;Je<Z.mipmaps.length;Je++)ae.__webglFramebuffer[Ye][Je]=n.createFramebuffer()}else ae.__webglFramebuffer[Ye]=n.createFramebuffer()}else{if(l&&Z.mipmaps&&Z.mipmaps.length>0){ae.__webglFramebuffer=[];for(let Ye=0;Ye<Z.mipmaps.length;Ye++)ae.__webglFramebuffer[Ye]=n.createFramebuffer()}else ae.__webglFramebuffer=n.createFramebuffer();if(ke)if(r.drawBuffers){const Ye=q.texture;for(let Je=0,ge=Ye.length;Je<ge;Je++){const Me=i.get(Ye[Je]);Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&q.samples>0&&Ne(q)===!1){const Ye=ke?Z:[Z];ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let Je=0;Je<Ye.length;Je++){const ge=Ye[Je];ae.__webglColorRenderbuffer[Je]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[Je]);const Me=s.convert(ge.format,ge.colorSpace),_e=s.convert(ge.type),et=M(ge.internalFormat,Me,_e,ge.colorSpace,q.isXRRenderTarget===!0),ot=$e(q);n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,et,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,ae.__webglColorRenderbuffer[Je])}n.bindRenderbuffer(n.RENDERBUFFER,null),q.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),ze(ae.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture),j(n.TEXTURE_CUBE_MAP,Z,Qe);for(let Ye=0;Ye<6;Ye++)if(l&&Z.mipmaps&&Z.mipmaps.length>0)for(let Je=0;Je<Z.mipmaps.length;Je++)ye(ae.__webglFramebuffer[Ye][Je],q,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Je);else ye(ae.__webglFramebuffer[Ye],q,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);w(Z,Qe)&&C(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ke){const Ye=q.texture;for(let Je=0,ge=Ye.length;Je<ge;Je++){const Me=Ye[Je],_e=i.get(Me);t.bindTexture(n.TEXTURE_2D,_e.__webglTexture),j(n.TEXTURE_2D,Me,Qe),ye(ae.__webglFramebuffer,q,Me,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,0),w(Me,Qe)&&C(n.TEXTURE_2D)}t.unbindTexture()}else{let Ye=n.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(l?Ye=q.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ye,Ee.__webglTexture),j(Ye,Z,Qe),l&&Z.mipmaps&&Z.mipmaps.length>0)for(let Je=0;Je<Z.mipmaps.length;Je++)ye(ae.__webglFramebuffer[Je],q,Z,n.COLOR_ATTACHMENT0,Ye,Je);else ye(ae.__webglFramebuffer,q,Z,n.COLOR_ATTACHMENT0,Ye,0);w(Z,Qe)&&C(Ye),t.unbindTexture()}q.depthBuffer&&Ae(q)}function Ve(q){const Z=x(q)||l,ae=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Ee=0,me=ae.length;Ee<me;Ee++){const ke=ae[Ee];if(w(ke,Z)){const Qe=q.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ye=i.get(ke).__webglTexture;t.bindTexture(Qe,Ye),C(Qe),t.unbindTexture()}}}function Te(q){if(l&&q.samples>0&&Ne(q)===!1){const Z=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],ae=q.width,Ee=q.height;let me=n.COLOR_BUFFER_BIT;const ke=[],Qe=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ye=i.get(q),Je=q.isWebGLMultipleRenderTargets===!0;if(Je)for(let ge=0;ge<Z.length;ge++)t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer);for(let ge=0;ge<Z.length;ge++){ke.push(n.COLOR_ATTACHMENT0+ge),q.depthBuffer&&ke.push(Qe);const Me=Ye.__ignoreDepthValues!==void 0?Ye.__ignoreDepthValues:!1;if(Me===!1&&(q.depthBuffer&&(me|=n.DEPTH_BUFFER_BIT),q.stencilBuffer&&(me|=n.STENCIL_BUFFER_BIT)),Je&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[ge]),Me===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Qe])),Je){const _e=i.get(Z[ge]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_e,0)}n.blitFramebuffer(0,0,ae,Ee,0,0,ae,Ee,me,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ke)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Je)for(let ge=0;ge<Z.length;ge++){t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[ge]);const Me=i.get(Z[ge]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.TEXTURE_2D,Me,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer)}}function $e(q){return Math.min(r.maxSamples,q.samples)}function Ne(q){const Z=i.get(q);return l&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function ht(q){const Z=c.render.frame;a.get(q)!==Z&&(a.set(q,Z),q.update())}function Ze(q,Z){const ae=q.colorSpace,Ee=q.format,me=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===Zp||ae!==bs&&ae!==Cr&&(hn.getTransfer(ae)===xn?l===!1?e.has("EXT_sRGB")===!0&&Ee===ji?(q.format=Zp,q.minFilter=On,q.generateMipmaps=!1):Z=Jx.sRGBToLinear(Z):(Ee!==ji||me!==Cs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),Z}this.allocateTextureUnit=B,this.resetTextureUnits=z,this.setTexture2D=H,this.setTexture2DArray=J,this.setTexture3D=G,this.setTextureCube=K,this.rebindTextures=je,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=Te,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=Ne}function RA(n,e,t){const i=t.isWebGL2;function r(s,c=Cr){let l;const u=hn.getTransfer(c);if(s===Cs)return n.UNSIGNED_BYTE;if(s===Hx)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Wx)return n.UNSIGNED_SHORT_5_5_5_1;if(s===Xb)return n.BYTE;if(s===Yb)return n.SHORT;if(s===Sm)return n.UNSIGNED_SHORT;if(s===zx)return n.INT;if(s===Vs)return n.UNSIGNED_INT;if(s===Hr)return n.FLOAT;if(s===nl)return i?n.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===Zb)return n.ALPHA;if(s===ji)return n.RGBA;if(s===Qb)return n.LUMINANCE;if(s===Jb)return n.LUMINANCE_ALPHA;if(s===$o)return n.DEPTH_COMPONENT;if(s===il)return n.DEPTH_STENCIL;if(s===Zp)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===qb)return n.RED;if(s===Vx)return n.RED_INTEGER;if(s===eA)return n.RG;if(s===Gx)return n.RG_INTEGER;if(s===jx)return n.RGBA_INTEGER;if(s===gp||s===vp||s===yp||s===xp)if(u===xn)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===gp)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===vp)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===yp)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===xp)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===gp)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===vp)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===yp)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===xp)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ry||s===sy||s===oy||s===ay)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===ry)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===sy)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===oy)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ay)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Kx)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===ly||s===cy)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===ly)return u===xn?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===cy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===uy||s===hy||s===fy||s===dy||s===py||s===my||s===gy||s===vy||s===yy||s===xy||s===_y||s===Sy||s===wy||s===My)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===uy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===hy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===fy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===dy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===py)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===my)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===gy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===vy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===yy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===xy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===_y)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Sy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===wy)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===My)return u===xn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===_p||s===Cy||s===Ey)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===_p)return u===xn?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Cy)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Ey)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===tA||s===by||s===Ay||s===Ty)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===_p)return l.COMPRESSED_RED_RGTC1_EXT;if(s===by)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Ay)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Ty)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Bo?i?n.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class LA extends Zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class gc extends an{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jO={type:"move"};class Ov{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,c=null;const l=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){c=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,i),g=this._getHandJoint(f,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const a=f.joints["index-finger-tip"],o=f.joints["thumb-tip"],h=a.position.distanceTo(o.position),d=.02,p=.005;f.inputState.pinching&&h>d+p?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&h<=d-p&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(jO)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=s!==null),f!==null&&(f.visible=c!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new gc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class KO extends no{constructor(e,t){super();const i=this;let r=null,s=1,c=null,l="local-floor",u=1,f=null,a=null,o=null,h=null,d=null,p=null;const y=t.getContextAttributes();let x=null,g=null;const w=[],C=[],M=new Ge;let _=null;const E=new Zn;E.layers.enable(1),E.viewport=new ln;const R=new Zn;R.layers.enable(2),R.viewport=new ln;const A=[E,R],T=new LA;T.layers.enable(1),T.layers.enable(2);let S=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let re=w[j];return re===void 0&&(re=new Ov,w[j]=re),re.getTargetRaySpace()},this.getControllerGrip=function(j){let re=w[j];return re===void 0&&(re=new Ov,w[j]=re),re.getGripSpace()},this.getHand=function(j){let re=w[j];return re===void 0&&(re=new Ov,w[j]=re),re.getHandSpace()};function D(j){const re=C.indexOf(j.inputSource);if(re===-1)return;const fe=w[re];fe!==void 0&&(fe.update(j.inputSource,j.frame,f||c),fe.dispatchEvent({type:j.type,data:j.inputSource}))}function z(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",B);for(let j=0;j<w.length;j++){const re=C[j];re!==null&&(C[j]=null,w[j].disconnect(re))}S=null,I=null,e.setRenderTarget(x),d=null,h=null,o=null,r=null,g=null,le.stop(),i.isPresenting=!1,e.setPixelRatio(_),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){s=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){l=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||c},this.setReferenceSpace=function(j){f=j},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return o},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(j){if(r=j,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",z),r.addEventListener("inputsourceschange",B),y.xrCompatible!==!0&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(M),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const re={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,re),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),g=new jr(d.framebufferWidth,d.framebufferHeight,{format:ji,type:Cs,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let re=null,fe=null,ve=null;y.depth&&(ve=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,re=y.stencil?il:$o,fe=y.stencil?Bo:Vs);const ye={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};o=new XRWebGLBinding(r,t),h=o.createProjectionLayer(ye),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),g=new jr(h.textureWidth,h.textureHeight,{format:ji,type:Cs,depthTexture:new Em(h.textureWidth,h.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const ze=e.properties.get(g);ze.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(u),f=null,c=await r.requestReferenceSpace(l),le.setContext(r),le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function B(j){for(let re=0;re<j.removed.length;re++){const fe=j.removed[re],ve=C.indexOf(fe);ve>=0&&(C[ve]=null,w[ve].disconnect(fe))}for(let re=0;re<j.added.length;re++){const fe=j.added[re];let ve=C.indexOf(fe);if(ve===-1){for(let ze=0;ze<w.length;ze++)if(ze>=C.length){C.push(fe),ve=ze;break}else if(C[ze]===null){C[ze]=fe,ve=ze;break}if(ve===-1)break}const ye=w[ve];ye&&ye.connect(fe)}}const W=new se,H=new se;function J(j,re,fe){W.setFromMatrixPosition(re.matrixWorld),H.setFromMatrixPosition(fe.matrixWorld);const ve=W.distanceTo(H),ye=re.projectionMatrix.elements,ze=fe.projectionMatrix.elements,Xe=ye[14]/(ye[10]-1),Ae=ye[14]/(ye[10]+1),je=(ye[9]+1)/ye[5],oe=(ye[9]-1)/ye[5],Ve=(ye[8]-1)/ye[0],Te=(ze[8]+1)/ze[0],$e=Xe*Ve,Ne=Xe*Te,ht=ve/(-Ve+Te),Ze=ht*-Ve;re.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(Ze),j.translateZ(ht),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const q=Xe+ht,Z=Ae+ht,ae=$e-Ze,Ee=Ne+(ve-Ze),me=je*Ae/Z*q,ke=oe*Ae/Z*q;j.projectionMatrix.makePerspective(ae,Ee,me,ke,q,Z),j.projectionMatrixInverse.copy(j.projectionMatrix).invert()}function G(j,re){re===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(re.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(r===null)return;T.near=R.near=E.near=j.near,T.far=R.far=E.far=j.far,(S!==T.near||I!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),S=T.near,I=T.far);const re=j.parent,fe=T.cameras;G(T,re);for(let ve=0;ve<fe.length;ve++)G(fe[ve],re);fe.length===2?J(T,E,R):T.projectionMatrix.copy(E.projectionMatrix),K(j,T,re)};function K(j,re,fe){fe===null?j.matrix.copy(re.matrixWorld):(j.matrix.copy(fe.matrixWorld),j.matrix.invert(),j.matrix.multiply(re.matrixWorld)),j.matrix.decompose(j.position,j.quaternion,j.scale),j.updateMatrixWorld(!0),j.projectionMatrix.copy(re.projectionMatrix),j.projectionMatrixInverse.copy(re.projectionMatrixInverse),j.isPerspectiveCamera&&(j.fov=Nc*2*Math.atan(1/j.projectionMatrix.elements[5]),j.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(h===null&&d===null))return u},this.setFoveation=function(j){u=j,h!==null&&(h.fixedFoveation=j),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=j)};let Y=null;function ne(j,re){if(a=re.getViewerPose(f||c),p=re,a!==null){const fe=a.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let ve=!1;fe.length!==T.cameras.length&&(T.cameras.length=0,ve=!0);for(let ye=0;ye<fe.length;ye++){const ze=fe[ye];let Xe=null;if(d!==null)Xe=d.getViewport(ze);else{const je=o.getViewSubImage(h,ze);Xe=je.viewport,ye===0&&(e.setRenderTargetTextures(g,je.colorTexture,h.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(g))}let Ae=A[ye];Ae===void 0&&(Ae=new Zn,Ae.layers.enable(ye),Ae.viewport=new ln,A[ye]=Ae),Ae.matrix.fromArray(ze.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(ze.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),ye===0&&(T.matrix.copy(Ae.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ve===!0&&T.cameras.push(Ae)}}for(let fe=0;fe<w.length;fe++){const ve=C[fe],ye=w[fe];ve!==null&&ye!==void 0&&ye.update(ve,re,f||c)}Y&&Y(j,re),re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:re}),p=null}const le=new MA;le.setAnimationLoop(ne),this.setAnimationLoop=function(j){Y=j},this.dispose=function(){}}}function XO(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,xA(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,w,C,M){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),o(x,g)):g.isMeshPhongMaterial?(s(x,g),a(x,g)):g.isMeshStandardMaterial?(s(x,g),h(x,g),g.isMeshPhysicalMaterial&&d(x,g,M)):g.isMeshMatcapMaterial?(s(x,g),p(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),y(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(c(x,g),g.isLineDashedMaterial&&l(x,g)):g.isPointsMaterial?u(x,g,w,C):g.isSpriteMaterial?f(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===Xi&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===Xi&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const w=e.get(g).envMap;if(w&&(x.envMap.value=w,x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap){x.lightMap.value=g.lightMap;const C=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=g.lightMapIntensity*C,t(g.lightMap,x.lightMapTransform)}g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function l(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function u(x,g,w,C){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*w,x.scale.value=C*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function f(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function a(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function o(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function h(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),e.get(g).envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function d(x,g,w){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Xi&&x.clearcoatNormalScale.value.negate())),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=w.texture,x.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function p(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const w=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(w.matrixWorld),x.nearDistance.value=w.shadow.camera.near,x.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function YO(n,e,t,i){let r={},s={},c=[];const l=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(w,C){const M=C.program;i.uniformBlockBinding(w,M)}function f(w,C){let M=r[w.id];M===void 0&&(p(w),M=a(w),r[w.id]=M,w.addEventListener("dispose",x));const _=C.program;i.updateUBOMapping(w,_);const E=e.render.frame;s[w.id]!==E&&(h(w),s[w.id]=E)}function a(w){const C=o();w.__bindingPointIndex=C;const M=n.createBuffer(),_=w.__size,E=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,_,E),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,M),M}function o(){for(let w=0;w<l;w++)if(c.indexOf(w)===-1)return c.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(w){const C=r[w.id],M=w.uniforms,_=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let E=0,R=M.length;E<R;E++){const A=Array.isArray(M[E])?M[E]:[M[E]];for(let T=0,S=A.length;T<S;T++){const I=A[T];if(d(I,E,T,_)===!0){const D=I.__offset,z=Array.isArray(I.value)?I.value:[I.value];let B=0;for(let W=0;W<z.length;W++){const H=z[W],J=y(H);typeof H=="number"||typeof H=="boolean"?(I.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,D+B,I.__data)):H.isMatrix3?(I.__data[0]=H.elements[0],I.__data[1]=H.elements[1],I.__data[2]=H.elements[2],I.__data[3]=0,I.__data[4]=H.elements[3],I.__data[5]=H.elements[4],I.__data[6]=H.elements[5],I.__data[7]=0,I.__data[8]=H.elements[6],I.__data[9]=H.elements[7],I.__data[10]=H.elements[8],I.__data[11]=0):(H.toArray(I.__data,B),B+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(w,C,M,_){const E=w.value,R=C+"_"+M;if(_[R]===void 0)return typeof E=="number"||typeof E=="boolean"?_[R]=E:_[R]=E.clone(),!0;{const A=_[R];if(typeof E=="number"||typeof E=="boolean"){if(A!==E)return _[R]=E,!0}else if(A.equals(E)===!1)return A.copy(E),!0}return!1}function p(w){const C=w.uniforms;let M=0;const _=16;for(let R=0,A=C.length;R<A;R++){const T=Array.isArray(C[R])?C[R]:[C[R]];for(let S=0,I=T.length;S<I;S++){const D=T[S],z=Array.isArray(D.value)?D.value:[D.value];for(let B=0,W=z.length;B<W;B++){const H=z[B],J=y(H),G=M%_;G!==0&&_-G<J.boundary&&(M+=_-G),D.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=M,M+=J.storage}}}const E=M%_;return E>0&&(M+=_-E),w.__size=M,w.__cache={},this}function y(w){const C={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(C.boundary=4,C.storage=4):w.isVector2?(C.boundary=8,C.storage=8):w.isVector3||w.isColor?(C.boundary=16,C.storage=12):w.isVector4?(C.boundary=16,C.storage=16):w.isMatrix3?(C.boundary=48,C.storage=48):w.isMatrix4?(C.boundary=64,C.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),C}function x(w){const C=w.target;C.removeEventListener("dispose",x);const M=c.indexOf(C.__bindingPointIndex);c.splice(M,1),n.deleteBuffer(r[C.id]),delete r[C.id],delete s[C.id]}function g(){for(const w in r)n.deleteBuffer(r[w]);c=[],r={},s={}}return{bind:u,update:f,dispose:g}}class s_{constructor(e={}){const{canvas:t=gA(),context:i=null,depth:r=!0,stencil:s=!0,alpha:c=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:a="default",failIfMajorPerformanceCaveat:o=!1}=e;this.isWebGLRenderer=!0;let h;i!==null?h=i.getContextAttributes().alpha:h=c;const d=new Uint32Array(4),p=new Int32Array(4);let y=null,x=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ui,this._useLegacyLights=!1,this.toneMapping=Ms,this.toneMappingExposure=1;const C=this;let M=!1,_=0,E=0,R=null,A=-1,T=null;const S=new ln,I=new ln;let D=null;const z=new gt(0);let B=0,W=t.width,H=t.height,J=1,G=null,K=null;const Y=new ln(0,0,W,H),ne=new ln(0,0,W,H);let le=!1;const j=new qh;let re=!1,fe=!1,ve=null;const ye=new Bt,ze=new Ge,Xe=new se,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function je(){return R===null?J:1}let oe=i;function Ve(ie,we){for(let Pe=0;Pe<ie.length;Pe++){const Oe=ie[Pe],be=t.getContext(Oe,we);if(be!==null)return be}return null}try{const ie={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:a,failIfMajorPerformanceCaveat:o};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ym}`),t.addEventListener("webglcontextlost",Ke,!1),t.addEventListener("webglcontextrestored",pe,!1),t.addEventListener("webglcontextcreationerror",lt,!1),oe===null){const we=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&we.shift(),oe=Ve(we,ie),oe===null)throw Ve(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&oe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),oe.getShaderPrecisionFormat===void 0&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ie){throw console.error("THREE.WebGLRenderer: "+ie.message),ie}let Te,$e,Ne,ht,Ze,q,Z,ae,Ee,me,ke,Qe,Ye,Je,ge,Me,_e,et,ot,Ue,We,rt,he,De;function tt(){Te=new cN(oe),$e=new iN(oe,Te,e),Te.init($e),rt=new RA(oe,Te,$e),Ne=new VO(oe,Te,$e),ht=new fN(oe),Ze=new PO,q=new GO(oe,Te,Ne,Ze,$e,rt,ht),Z=new sN(C),ae=new lN(C),Ee=new _P(oe,$e),he=new tN(oe,Te,Ee,$e),me=new uN(oe,Ee,ht,he),ke=new gN(oe,me,Ee,ht),ot=new mN(oe,$e,q),Me=new rN(Ze),Qe=new kO(C,Z,ae,Te,$e,he,Me),Ye=new XO(C,Ze),Je=new NO,ge=new $O(Te,$e),et=new eN(C,Z,ae,Ne,ke,h,u),_e=new WO(C,ke,$e),De=new YO(oe,ht,$e,Ne),Ue=new nN(oe,Te,ht,$e),We=new hN(oe,Te,ht,$e),ht.programs=Qe.programs,C.capabilities=$e,C.extensions=Te,C.properties=Ze,C.renderLists=Je,C.shadowMap=_e,C.state=Ne,C.info=ht}tt();const at=new KO(C,oe);this.xr=at,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ie=Te.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=Te.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(ie){ie!==void 0&&(J=ie,this.setSize(W,H,!1))},this.getSize=function(ie){return ie.set(W,H)},this.setSize=function(ie,we,Pe=!0){if(at.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=ie,H=we,t.width=Math.floor(ie*J),t.height=Math.floor(we*J),Pe===!0&&(t.style.width=ie+"px",t.style.height=we+"px"),this.setViewport(0,0,ie,we)},this.getDrawingBufferSize=function(ie){return ie.set(W*J,H*J).floor()},this.setDrawingBufferSize=function(ie,we,Pe){W=ie,H=we,J=Pe,t.width=Math.floor(ie*Pe),t.height=Math.floor(we*Pe),this.setViewport(0,0,ie,we)},this.getCurrentViewport=function(ie){return ie.copy(S)},this.getViewport=function(ie){return ie.copy(Y)},this.setViewport=function(ie,we,Pe,Oe){ie.isVector4?Y.set(ie.x,ie.y,ie.z,ie.w):Y.set(ie,we,Pe,Oe),Ne.viewport(S.copy(Y).multiplyScalar(J).floor())},this.getScissor=function(ie){return ie.copy(ne)},this.setScissor=function(ie,we,Pe,Oe){ie.isVector4?ne.set(ie.x,ie.y,ie.z,ie.w):ne.set(ie,we,Pe,Oe),Ne.scissor(I.copy(ne).multiplyScalar(J).floor())},this.getScissorTest=function(){return le},this.setScissorTest=function(ie){Ne.setScissorTest(le=ie)},this.setOpaqueSort=function(ie){G=ie},this.setTransparentSort=function(ie){K=ie},this.getClearColor=function(ie){return ie.copy(et.getClearColor())},this.setClearColor=function(){et.setClearColor.apply(et,arguments)},this.getClearAlpha=function(){return et.getClearAlpha()},this.setClearAlpha=function(){et.setClearAlpha.apply(et,arguments)},this.clear=function(ie=!0,we=!0,Pe=!0){let Oe=0;if(ie){let be=!1;if(R!==null){const pt=R.texture.format;be=pt===jx||pt===Gx||pt===Vx}if(be){const pt=R.texture.type,Ct=pt===Cs||pt===Vs||pt===Sm||pt===Bo||pt===Hx||pt===Wx,wt=et.getClearColor(),Rt=et.getClearAlpha(),Ft=wt.r,Ot=wt.g,Ut=wt.b;Ct?(d[0]=Ft,d[1]=Ot,d[2]=Ut,d[3]=Rt,oe.clearBufferuiv(oe.COLOR,0,d)):(p[0]=Ft,p[1]=Ot,p[2]=Ut,p[3]=Rt,oe.clearBufferiv(oe.COLOR,0,p))}else Oe|=oe.COLOR_BUFFER_BIT}we&&(Oe|=oe.DEPTH_BUFFER_BIT),Pe&&(Oe|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ke,!1),t.removeEventListener("webglcontextrestored",pe,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Je.dispose(),ge.dispose(),Ze.dispose(),Z.dispose(),ae.dispose(),ke.dispose(),he.dispose(),De.dispose(),Qe.dispose(),at.dispose(),at.removeEventListener("sessionstart",tn),at.removeEventListener("sessionend",At),ve&&(ve.dispose(),ve=null),cn.stop()};function Ke(ie){ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const ie=ht.autoReset,we=_e.enabled,Pe=_e.autoUpdate,Oe=_e.needsUpdate,be=_e.type;tt(),ht.autoReset=ie,_e.enabled=we,_e.autoUpdate=Pe,_e.needsUpdate=Oe,_e.type=be}function lt(ie){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ie.statusMessage)}function nt(ie){const we=ie.target;we.removeEventListener("dispose",nt),Tt(we)}function Tt(ie){_t(ie),Ze.remove(ie)}function _t(ie){const we=Ze.get(ie).programs;we!==void 0&&(we.forEach(function(Pe){Qe.releaseProgram(Pe)}),ie.isShaderMaterial&&Qe.releaseShaderCache(ie))}this.renderBufferDirect=function(ie,we,Pe,Oe,be,pt){we===null&&(we=Ae);const Ct=be.isMesh&&be.matrixWorld.determinant()<0,wt=jc(ie,we,Pe,Oe,be);Ne.setMaterial(Oe,Ct);let Rt=Pe.index,Ft=1;if(Oe.wireframe===!0){if(Rt=me.getWireframeAttribute(Pe),Rt===void 0)return;Ft=2}const Ot=Pe.drawRange,Ut=Pe.attributes.position;let yn=Ot.start*Ft,si=(Ot.start+Ot.count)*Ft;pt!==null&&(yn=Math.max(yn,pt.start*Ft),si=Math.min(si,(pt.start+pt.count)*Ft)),Rt!==null?(yn=Math.max(yn,0),si=Math.min(si,Rt.count)):Ut!=null&&(yn=Math.max(yn,0),si=Math.min(si,Ut.count));const mn=si-yn;if(mn<0||mn===1/0)return;he.setup(be,Oe,wt,Pe,Rt);let Jn,Lt=Ue;if(Rt!==null&&(Jn=Ee.get(Rt),Lt=We,Lt.setIndex(Jn)),be.isMesh)Oe.wireframe===!0?(Ne.setLineWidth(Oe.wireframeLinewidth*je()),Lt.setMode(oe.LINES)):Lt.setMode(oe.TRIANGLES);else if(be.isLine){let vt=Oe.linewidth;vt===void 0&&(vt=1),Ne.setLineWidth(vt*je()),be.isLineSegments?Lt.setMode(oe.LINES):be.isLineLoop?Lt.setMode(oe.LINE_LOOP):Lt.setMode(oe.LINE_STRIP)}else be.isPoints?Lt.setMode(oe.POINTS):be.isSprite&&Lt.setMode(oe.TRIANGLES);if(be.isBatchedMesh)Lt.renderMultiDraw(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount);else if(be.isInstancedMesh)Lt.renderInstances(yn,mn,be.count);else if(Pe.isInstancedBufferGeometry){const vt=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Bn=Math.min(Pe.instanceCount,vt);Lt.renderInstances(yn,mn,Bn)}else Lt.render(yn,mn)};function Xt(ie,we,Pe){ie.transparent===!0&&ie.side===rs&&ie.forceSinglePass===!1?(ie.side=Xi,ie.needsUpdate=!0,ro(ie,we,Pe),ie.side=Js,ie.needsUpdate=!0,ro(ie,we,Pe),ie.side=rs):ro(ie,we,Pe)}this.compile=function(ie,we,Pe=null){Pe===null&&(Pe=ie),x=ge.get(Pe),x.init(),w.push(x),Pe.traverseVisible(function(be){be.isLight&&be.layers.test(we.layers)&&(x.pushLight(be),be.castShadow&&x.pushShadow(be))}),ie!==Pe&&ie.traverseVisible(function(be){be.isLight&&be.layers.test(we.layers)&&(x.pushLight(be),be.castShadow&&x.pushShadow(be))}),x.setupLights(C._useLegacyLights);const Oe=new Set;return ie.traverse(function(be){const pt=be.material;if(pt)if(Array.isArray(pt))for(let Ct=0;Ct<pt.length;Ct++){const wt=pt[Ct];Xt(wt,Pe,be),Oe.add(wt)}else Xt(pt,Pe,be),Oe.add(pt)}),w.pop(),x=null,Oe},this.compileAsync=function(ie,we,Pe=null){const Oe=this.compile(ie,we,Pe);return new Promise(be=>{function pt(){if(Oe.forEach(function(Ct){Ze.get(Ct).currentProgram.isReady()&&Oe.delete(Ct)}),Oe.size===0){be(ie);return}setTimeout(pt,10)}Te.get("KHR_parallel_shader_compile")!==null?pt():setTimeout(pt,10)})};let Jt=null;function Pt(ie){Jt&&Jt(ie)}function tn(){cn.stop()}function At(){cn.start()}const cn=new MA;cn.setAnimationLoop(Pt),typeof self<"u"&&cn.setContext(self),this.setAnimationLoop=function(ie){Jt=ie,at.setAnimationLoop(ie),ie===null?cn.stop():cn.start()},at.addEventListener("sessionstart",tn),at.addEventListener("sessionend",At),this.render=function(ie,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(at.cameraAutoUpdate===!0&&at.updateCamera(we),we=at.getCamera()),ie.isScene===!0&&ie.onBeforeRender(C,ie,we,R),x=ge.get(ie,w.length),x.init(),w.push(x),ye.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),j.setFromProjectionMatrix(ye),fe=this.localClippingEnabled,re=Me.init(this.clippingPlanes,fe),y=Je.get(ie,g.length),y.init(),g.push(y),Qn(ie,we,0,C.sortObjects),y.finish(),C.sortObjects===!0&&y.sort(G,K),this.info.render.frame++,re===!0&&Me.beginShadows();const Pe=x.state.shadowsArray;if(_e.render(Pe,ie,we),re===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset(),et.render(y,ie),x.setupLights(C._useLegacyLights),we.isArrayCamera){const Oe=we.cameras;for(let be=0,pt=Oe.length;be<pt;be++){const Ct=Oe[be];io(y,ie,Ct,Ct.viewport)}}else io(y,ie,we);R!==null&&(q.updateMultisampleRenderTarget(R),q.updateRenderTargetMipmap(R)),ie.isScene===!0&&ie.onAfterRender(C,ie,we),he.resetDefaultState(),A=-1,T=null,w.pop(),w.length>0?x=w[w.length-1]:x=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function Qn(ie,we,Pe,Oe){if(ie.visible===!1)return;if(ie.layers.test(we.layers)){if(ie.isGroup)Pe=ie.renderOrder;else if(ie.isLOD)ie.autoUpdate===!0&&ie.update(we);else if(ie.isLight)x.pushLight(ie),ie.castShadow&&x.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||j.intersectsSprite(ie)){Oe&&Xe.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(ye);const Ct=ke.update(ie),wt=ie.material;wt.visible&&y.push(ie,Ct,wt,Pe,Xe.z,null)}}else if((ie.isMesh||ie.isLine||ie.isPoints)&&(!ie.frustumCulled||j.intersectsObject(ie))){const Ct=ke.update(ie),wt=ie.material;if(Oe&&(ie.boundingSphere!==void 0?(ie.boundingSphere===null&&ie.computeBoundingSphere(),Xe.copy(ie.boundingSphere.center)):(Ct.boundingSphere===null&&Ct.computeBoundingSphere(),Xe.copy(Ct.boundingSphere.center)),Xe.applyMatrix4(ie.matrixWorld).applyMatrix4(ye)),Array.isArray(wt)){const Rt=Ct.groups;for(let Ft=0,Ot=Rt.length;Ft<Ot;Ft++){const Ut=Rt[Ft],yn=wt[Ut.materialIndex];yn&&yn.visible&&y.push(ie,Ct,yn,Pe,Xe.z,Ut)}}else wt.visible&&y.push(ie,Ct,wt,Pe,Xe.z,null)}}const pt=ie.children;for(let Ct=0,wt=pt.length;Ct<wt;Ct++)Qn(pt[Ct],we,Pe,Oe)}function io(ie,we,Pe,Oe){const be=ie.opaque,pt=ie.transmissive,Ct=ie.transparent;x.setupLightsView(Pe),re===!0&&Me.setGlobalState(C.clippingPlanes,Pe),pt.length>0&&Sn(be,pt,we,Pe),Oe&&Ne.viewport(S.copy(Oe)),be.length>0&&fs(be,we,Pe),pt.length>0&&fs(pt,we,Pe),Ct.length>0&&fs(Ct,we,Pe),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Sn(ie,we,Pe,Oe){if((Pe.isScene===!0?Pe.overrideMaterial:null)!==null)return;const pt=$e.isWebGL2;ve===null&&(ve=new jr(1,1,{generateMipmaps:!0,type:Te.has("EXT_color_buffer_half_float")?nl:Cs,minFilter:jo,samples:pt?4:0})),C.getDrawingBufferSize(ze),pt?ve.setSize(ze.x,ze.y):ve.setSize(Qp(ze.x),Qp(ze.y));const Ct=C.getRenderTarget();C.setRenderTarget(ve),C.getClearColor(z),B=C.getClearAlpha(),B<1&&C.setClearColor(16777215,.5),C.clear();const wt=C.toneMapping;C.toneMapping=Ms,fs(ie,Pe,Oe),q.updateMultisampleRenderTarget(ve),q.updateRenderTargetMipmap(ve);let Rt=!1;for(let Ft=0,Ot=we.length;Ft<Ot;Ft++){const Ut=we[Ft],yn=Ut.object,si=Ut.geometry,mn=Ut.material,Jn=Ut.group;if(mn.side===rs&&yn.layers.test(Oe.layers)){const Lt=mn.side;mn.side=Xi,mn.needsUpdate=!0,ds(yn,Pe,Oe,si,mn,Jn),mn.side=Lt,mn.needsUpdate=!0,Rt=!0}}Rt===!0&&(q.updateMultisampleRenderTarget(ve),q.updateRenderTargetMipmap(ve)),C.setRenderTarget(Ct),C.setClearColor(z,B),C.toneMapping=wt}function fs(ie,we,Pe){const Oe=we.isScene===!0?we.overrideMaterial:null;for(let be=0,pt=ie.length;be<pt;be++){const Ct=ie[be],wt=Ct.object,Rt=Ct.geometry,Ft=Oe===null?Ct.material:Oe,Ot=Ct.group;wt.layers.test(Pe.layers)&&ds(wt,we,Pe,Rt,Ft,Ot)}}function ds(ie,we,Pe,Oe,be,pt){ie.onBeforeRender(C,we,Pe,Oe,be,pt),ie.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),be.onBeforeRender(C,we,Pe,Oe,ie,pt),be.transparent===!0&&be.side===rs&&be.forceSinglePass===!1?(be.side=Xi,be.needsUpdate=!0,C.renderBufferDirect(Pe,we,Oe,be,ie,pt),be.side=Js,be.needsUpdate=!0,C.renderBufferDirect(Pe,we,Oe,be,ie,pt),be.side=rs):C.renderBufferDirect(Pe,we,Oe,be,ie,pt),ie.onAfterRender(C,we,Pe,Oe,be,pt)}function ro(ie,we,Pe){we.isScene!==!0&&(we=Ae);const Oe=Ze.get(ie),be=x.state.lights,pt=x.state.shadowsArray,Ct=be.state.version,wt=Qe.getParameters(ie,be.state,pt,we,Pe),Rt=Qe.getProgramCacheKey(wt);let Ft=Oe.programs;Oe.environment=ie.isMeshStandardMaterial?we.environment:null,Oe.fog=we.fog,Oe.envMap=(ie.isMeshStandardMaterial?ae:Z).get(ie.envMap||Oe.environment),Ft===void 0&&(ie.addEventListener("dispose",nt),Ft=new Map,Oe.programs=Ft);let Ot=Ft.get(Rt);if(Ot!==void 0){if(Oe.currentProgram===Ot&&Oe.lightsStateVersion===Ct)return na(ie,wt),Ot}else wt.uniforms=Qe.getUniforms(ie),ie.onBuild(Pe,wt,C),ie.onBeforeCompile(wt,C),Ot=Qe.acquireProgram(wt,Rt),Ft.set(Rt,Ot),Oe.uniforms=wt.uniforms;const Ut=Oe.uniforms;return(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||ie.clipping===!0)&&(Ut.clippingPlanes=Me.uniform),na(ie,wt),Oe.needsLights=dl(ie),Oe.lightsStateVersion=Ct,Oe.needsLights&&(Ut.ambientLightColor.value=be.state.ambient,Ut.lightProbe.value=be.state.probe,Ut.directionalLights.value=be.state.directional,Ut.directionalLightShadows.value=be.state.directionalShadow,Ut.spotLights.value=be.state.spot,Ut.spotLightShadows.value=be.state.spotShadow,Ut.rectAreaLights.value=be.state.rectArea,Ut.ltc_1.value=be.state.rectAreaLTC1,Ut.ltc_2.value=be.state.rectAreaLTC2,Ut.pointLights.value=be.state.point,Ut.pointLightShadows.value=be.state.pointShadow,Ut.hemisphereLights.value=be.state.hemi,Ut.directionalShadowMap.value=be.state.directionalShadowMap,Ut.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Ut.spotShadowMap.value=be.state.spotShadowMap,Ut.spotLightMatrix.value=be.state.spotLightMatrix,Ut.spotLightMap.value=be.state.spotLightMap,Ut.pointShadowMap.value=be.state.pointShadowMap,Ut.pointShadowMatrix.value=be.state.pointShadowMatrix),Oe.currentProgram=Ot,Oe.uniformsList=null,Ot}function ta(ie){if(ie.uniformsList===null){const we=ie.currentProgram.getUniforms();ie.uniformsList=wp.seqWithValue(we.seq,ie.uniforms)}return ie.uniformsList}function na(ie,we){const Pe=Ze.get(ie);Pe.outputColorSpace=we.outputColorSpace,Pe.batching=we.batching,Pe.instancing=we.instancing,Pe.instancingColor=we.instancingColor,Pe.skinning=we.skinning,Pe.morphTargets=we.morphTargets,Pe.morphNormals=we.morphNormals,Pe.morphColors=we.morphColors,Pe.morphTargetsCount=we.morphTargetsCount,Pe.numClippingPlanes=we.numClippingPlanes,Pe.numIntersection=we.numClipIntersection,Pe.vertexAlphas=we.vertexAlphas,Pe.vertexTangents=we.vertexTangents,Pe.toneMapping=we.toneMapping}function jc(ie,we,Pe,Oe,be){we.isScene!==!0&&(we=Ae),q.resetTextureUnits();const pt=we.fog,Ct=Oe.isMeshStandardMaterial?we.environment:null,wt=R===null?C.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:bs,Rt=(Oe.isMeshStandardMaterial?ae:Z).get(Oe.envMap||Ct),Ft=Oe.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,Ot=!!Pe.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),Ut=!!Pe.morphAttributes.position,yn=!!Pe.morphAttributes.normal,si=!!Pe.morphAttributes.color;let mn=Ms;Oe.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(mn=C.toneMapping);const Jn=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,Lt=Jn!==void 0?Jn.length:0,vt=Ze.get(Oe),Bn=x.state.lights;if(re===!0&&(fe===!0||ie!==T)){const oi=ie===T&&Oe.id===A;Me.setState(Oe,ie,oi)}let Vt=!1;Oe.version===vt.__version?(vt.needsLights&&vt.lightsStateVersion!==Bn.state.version||vt.outputColorSpace!==wt||be.isBatchedMesh&&vt.batching===!1||!be.isBatchedMesh&&vt.batching===!0||be.isInstancedMesh&&vt.instancing===!1||!be.isInstancedMesh&&vt.instancing===!0||be.isSkinnedMesh&&vt.skinning===!1||!be.isSkinnedMesh&&vt.skinning===!0||be.isInstancedMesh&&vt.instancingColor===!0&&be.instanceColor===null||be.isInstancedMesh&&vt.instancingColor===!1&&be.instanceColor!==null||vt.envMap!==Rt||Oe.fog===!0&&vt.fog!==pt||vt.numClippingPlanes!==void 0&&(vt.numClippingPlanes!==Me.numPlanes||vt.numIntersection!==Me.numIntersection)||vt.vertexAlphas!==Ft||vt.vertexTangents!==Ot||vt.morphTargets!==Ut||vt.morphNormals!==yn||vt.morphColors!==si||vt.toneMapping!==mn||$e.isWebGL2===!0&&vt.morphTargetsCount!==Lt)&&(Vt=!0):(Vt=!0,vt.__version=Oe.version);let wn=vt.currentProgram;Vt===!0&&(wn=ro(Oe,we,be));let kr=!1,qi=!1,qn=!1;const Tn=wn.getUniforms(),Vn=vt.uniforms;if(Ne.useProgram(wn.program)&&(kr=!0,qi=!0,qn=!0),Oe.id!==A&&(A=Oe.id,qi=!0),kr||T!==ie){Tn.setValue(oe,"projectionMatrix",ie.projectionMatrix),Tn.setValue(oe,"viewMatrix",ie.matrixWorldInverse);const oi=Tn.map.cameraPosition;oi!==void 0&&oi.setValue(oe,Xe.setFromMatrixPosition(ie.matrixWorld)),$e.logarithmicDepthBuffer&&Tn.setValue(oe,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&Tn.setValue(oe,"isOrthographic",ie.isOrthographicCamera===!0),T!==ie&&(T=ie,qi=!0,qn=!0)}if(be.isSkinnedMesh){Tn.setOptional(oe,be,"bindMatrix"),Tn.setOptional(oe,be,"bindMatrixInverse");const oi=be.skeleton;oi&&($e.floatVertexTextures?(oi.boneTexture===null&&oi.computeBoneTexture(),Tn.setValue(oe,"boneTexture",oi.boneTexture,q)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}be.isBatchedMesh&&(Tn.setOptional(oe,be,"batchingTexture"),Tn.setValue(oe,"batchingTexture",be._matricesTexture,q));const so=Pe.morphAttributes;if((so.position!==void 0||so.normal!==void 0||so.color!==void 0&&$e.isWebGL2===!0)&&ot.update(be,Pe,wn),(qi||vt.receiveShadow!==be.receiveShadow)&&(vt.receiveShadow=be.receiveShadow,Tn.setValue(oe,"receiveShadow",be.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(Vn.envMap.value=Rt,Vn.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1),qi&&(Tn.setValue(oe,"toneMappingExposure",C.toneMappingExposure),vt.needsLights&&Kc(Vn,qn),pt&&Oe.fog===!0&&Ye.refreshFogUniforms(Vn,pt),Ye.refreshMaterialUniforms(Vn,Oe,J,H,ve),wp.upload(oe,ta(vt),Vn,q)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(wp.upload(oe,ta(vt),Vn,q),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&Tn.setValue(oe,"center",be.center),Tn.setValue(oe,"modelViewMatrix",be.modelViewMatrix),Tn.setValue(oe,"normalMatrix",be.normalMatrix),Tn.setValue(oe,"modelMatrix",be.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const oi=Oe.uniformsGroups;for(let oo=0,Ei=oi.length;oo<Ei;oo++)if($e.isWebGL2){const ia=oi[oo];De.update(ia,wn),De.bind(ia,wn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wn}function Kc(ie,we){ie.ambientLightColor.needsUpdate=we,ie.lightProbe.needsUpdate=we,ie.directionalLights.needsUpdate=we,ie.directionalLightShadows.needsUpdate=we,ie.pointLights.needsUpdate=we,ie.pointLightShadows.needsUpdate=we,ie.spotLights.needsUpdate=we,ie.spotLightShadows.needsUpdate=we,ie.rectAreaLights.needsUpdate=we,ie.hemisphereLights.needsUpdate=we}function dl(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&ie.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(ie,we,Pe){Ze.get(ie.texture).__webglTexture=we,Ze.get(ie.depthTexture).__webglTexture=Pe;const Oe=Ze.get(ie);Oe.__hasExternalTextures=!0,Oe.__hasExternalTextures&&(Oe.__autoAllocateDepthBuffer=Pe===void 0,Oe.__autoAllocateDepthBuffer||Te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ie,we){const Pe=Ze.get(ie);Pe.__webglFramebuffer=we,Pe.__useDefaultFramebuffer=we===void 0},this.setRenderTarget=function(ie,we=0,Pe=0){R=ie,_=we,E=Pe;let Oe=!0,be=null,pt=!1,Ct=!1;if(ie){const Rt=Ze.get(ie);Rt.__useDefaultFramebuffer!==void 0?(Ne.bindFramebuffer(oe.FRAMEBUFFER,null),Oe=!1):Rt.__webglFramebuffer===void 0?q.setupRenderTarget(ie):Rt.__hasExternalTextures&&q.rebindTextures(ie,Ze.get(ie.texture).__webglTexture,Ze.get(ie.depthTexture).__webglTexture);const Ft=ie.texture;(Ft.isData3DTexture||Ft.isDataArrayTexture||Ft.isCompressedArrayTexture)&&(Ct=!0);const Ot=Ze.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(Array.isArray(Ot[we])?be=Ot[we][Pe]:be=Ot[we],pt=!0):$e.isWebGL2&&ie.samples>0&&q.useMultisampledRTT(ie)===!1?be=Ze.get(ie).__webglMultisampledFramebuffer:Array.isArray(Ot)?be=Ot[Pe]:be=Ot,S.copy(ie.viewport),I.copy(ie.scissor),D=ie.scissorTest}else S.copy(Y).multiplyScalar(J).floor(),I.copy(ne).multiplyScalar(J).floor(),D=le;if(Ne.bindFramebuffer(oe.FRAMEBUFFER,be)&&$e.drawBuffers&&Oe&&Ne.drawBuffers(ie,be),Ne.viewport(S),Ne.scissor(I),Ne.setScissorTest(D),pt){const Rt=Ze.get(ie.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+we,Rt.__webglTexture,Pe)}else if(Ct){const Rt=Ze.get(ie.texture),Ft=we||0;oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Rt.__webglTexture,Pe||0,Ft)}A=-1},this.readRenderTargetPixels=function(ie,we,Pe,Oe,be,pt,Ct){if(!(ie&&ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=Ze.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&Ct!==void 0&&(wt=wt[Ct]),wt){Ne.bindFramebuffer(oe.FRAMEBUFFER,wt);try{const Rt=ie.texture,Ft=Rt.format,Ot=Rt.type;if(Ft!==ji&&rt.convert(Ft)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ut=Ot===nl&&(Te.has("EXT_color_buffer_half_float")||$e.isWebGL2&&Te.has("EXT_color_buffer_float"));if(Ot!==Cs&&rt.convert(Ot)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ot===Hr&&($e.isWebGL2||Te.has("OES_texture_float")||Te.has("WEBGL_color_buffer_float")))&&!Ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=ie.width-Oe&&Pe>=0&&Pe<=ie.height-be&&oe.readPixels(we,Pe,Oe,be,rt.convert(Ft),rt.convert(Ot),pt)}finally{const Rt=R!==null?Ze.get(R).__webglFramebuffer:null;Ne.bindFramebuffer(oe.FRAMEBUFFER,Rt)}}},this.copyFramebufferToTexture=function(ie,we,Pe=0){const Oe=Math.pow(2,-Pe),be=Math.floor(we.image.width*Oe),pt=Math.floor(we.image.height*Oe);q.setTexture2D(we,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,Pe,0,0,ie.x,ie.y,be,pt),Ne.unbindTexture()},this.copyTextureToTexture=function(ie,we,Pe,Oe=0){const be=we.image.width,pt=we.image.height,Ct=rt.convert(Pe.format),wt=rt.convert(Pe.type);q.setTexture2D(Pe,0),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Pe.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Pe.unpackAlignment),we.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,Oe,ie.x,ie.y,be,pt,Ct,wt,we.image.data):we.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,Oe,ie.x,ie.y,we.mipmaps[0].width,we.mipmaps[0].height,Ct,we.mipmaps[0].data):oe.texSubImage2D(oe.TEXTURE_2D,Oe,ie.x,ie.y,Ct,wt,we.image),Oe===0&&Pe.generateMipmaps&&oe.generateMipmap(oe.TEXTURE_2D),Ne.unbindTexture()},this.copyTextureToTexture3D=function(ie,we,Pe,Oe,be=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pt=ie.max.x-ie.min.x+1,Ct=ie.max.y-ie.min.y+1,wt=ie.max.z-ie.min.z+1,Rt=rt.convert(Oe.format),Ft=rt.convert(Oe.type);let Ot;if(Oe.isData3DTexture)q.setTexture3D(Oe,0),Ot=oe.TEXTURE_3D;else if(Oe.isDataArrayTexture||Oe.isCompressedArrayTexture)q.setTexture2DArray(Oe,0),Ot=oe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Oe.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Oe.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Oe.unpackAlignment);const Ut=oe.getParameter(oe.UNPACK_ROW_LENGTH),yn=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),si=oe.getParameter(oe.UNPACK_SKIP_PIXELS),mn=oe.getParameter(oe.UNPACK_SKIP_ROWS),Jn=oe.getParameter(oe.UNPACK_SKIP_IMAGES),Lt=Pe.isCompressedTexture?Pe.mipmaps[be]:Pe.image;oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Lt.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,Lt.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,ie.min.x),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,ie.min.y),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,ie.min.z),Pe.isDataTexture||Pe.isData3DTexture?oe.texSubImage3D(Ot,be,we.x,we.y,we.z,pt,Ct,wt,Rt,Ft,Lt.data):Pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),oe.compressedTexSubImage3D(Ot,be,we.x,we.y,we.z,pt,Ct,wt,Rt,Lt.data)):oe.texSubImage3D(Ot,be,we.x,we.y,we.z,pt,Ct,wt,Rt,Ft,Lt),oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Ut),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,yn),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,si),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,mn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Jn),be===0&&Oe.generateMipmaps&&oe.generateMipmap(Ot),Ne.unbindTexture()},this.initTexture=function(ie){ie.isCubeTexture?q.setTextureCube(ie,0):ie.isData3DTexture?q.setTexture3D(ie,0):ie.isDataArrayTexture||ie.isCompressedArrayTexture?q.setTexture2DArray(ie,0):q.setTexture2D(ie,0),Ne.unbindTexture()},this.resetState=function(){_=0,E=0,R=null,Ne.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ss}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Mm?"display-p3":"srgb",t.unpackColorSpace=hn.workingColorSpace===Yh?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ui?zo:Yx}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===zo?ui:bs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class kA extends s_{}kA.prototype.isWebGL1Renderer=!0;class Am{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new Am(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Tm{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=i}clone(){return new Tm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Jp extends an{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Rm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ih,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ar()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ar()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ar()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wi=new se;class rl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=lr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=lr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=lr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=lr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new dn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class o_ extends Ci{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Gl;const Lu=new se,jl=new se,Kl=new se,Xl=new Ge,ku=new Ge,PA=new Bt,kd=new se,Pu=new se,Pd=new se,z1=new Ge,Dv=new Ge,H1=new Ge;class IA extends an{constructor(e=new o_){if(super(),this.isSprite=!0,this.type="Sprite",Gl===void 0){Gl=new Kt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Rm(t,5);Gl.setIndex([0,1,2,0,2,3]),Gl.setAttribute("position",new rl(i,3,0,!1)),Gl.setAttribute("uv",new rl(i,2,3,!1))}this.geometry=Gl,this.material=e,this.center=new Ge(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jl.setFromMatrixScale(this.matrixWorld),PA.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&jl.multiplyScalar(-Kl.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const c=this.center;Id(kd.set(-.5,-.5,0),Kl,c,jl,r,s),Id(Pu.set(.5,-.5,0),Kl,c,jl,r,s),Id(Pd.set(.5,.5,0),Kl,c,jl,r,s),z1.set(0,0),Dv.set(1,0),H1.set(1,1);let l=e.ray.intersectTriangle(kd,Pu,Pd,!1,Lu);if(l===null&&(Id(Pu.set(-.5,.5,0),Kl,c,jl,r,s),Dv.set(0,1),l=e.ray.intersectTriangle(kd,Pd,Pu,!1,Lu),l===null))return;const u=e.ray.origin.distanceTo(Lu);u<e.near||u>e.far||t.push({distance:u,point:Lu.clone(),uv:ar.getInterpolation(Lu,kd,Pu,Pd,z1,Dv,H1,new Ge),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Id(n,e,t,i,r,s){Xl.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(ku.x=s*Xl.x-r*Xl.y,ku.y=r*Xl.x+s*Xl.y):ku.copy(Xl),n.copy(e),n.x+=ku.x,n.y+=ku.y,n.applyMatrix4(PA)}const Nd=new se,W1=new se;class NA extends an{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Nd.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Nd);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Nd.setFromMatrixPosition(e.matrixWorld),W1.setFromMatrixPosition(this.matrixWorld);const i=Nd.distanceTo(W1)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let c=t[r].distance;if(t[r].object.visible&&(c-=c*t[r].hysteresis),i>=c)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const c=i[r];t.object.levels.push({object:c.object.uuid,distance:c.distance,hysteresis:c.hysteresis})}return t}}const V1=new se,G1=new ln,j1=new ln,ZO=new se,K1=new Bt,Od=new se,Fv=new Ui,X1=new Bt,Uv=new ll;class OA extends fi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=iy,this.bindMatrix=new Bt,this.bindMatrixInverse=new Bt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Od),this.boundingBox.expandByPoint(Od)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ui),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Od),this.boundingSphere.expandByPoint(Od)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fv.copy(this.boundingSphere),Fv.applyMatrix4(r),e.ray.intersectsSphere(Fv)!==!1&&(X1.copy(r).invert(),Uv.copy(e.ray).applyMatrix4(X1),!(this.boundingBox!==null&&Uv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Uv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===iy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Kb?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;G1.fromBufferAttribute(r.attributes.skinIndex,e),j1.fromBufferAttribute(r.attributes.skinWeight,e),V1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const c=j1.getComponent(s);if(c!==0){const l=G1.getComponent(s);K1.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(ZO.copy(V1).applyMatrix4(K1),c)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class a_ extends an{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ya extends An{constructor(e=null,t=1,i=1,r,s,c,l,u,f=Xn,a=Xn,o,h){super(null,c,l,u,f,a,r,s,o,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Y1=new Bt,QO=new Bt;class Lm{constructor(e=[],t=[]){this.uuid=Ar(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Bt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Bt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,c=e.length;s<c;s++){const l=e[s]?e[s].matrixWorld:QO;Y1.multiplyMatrices(l,t[s]),Y1.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Lm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ya(t,e,e,ji,Hr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let c=t[s];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),c=new a_),this.bones.push(c),this.boneInverses.push(new Bt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const c=t[r];e.bones.push(c.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Dc extends dn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Yl=new Bt,Z1=new Bt,Dd=[],Q1=new Yi,JO=new Bt,Iu=new fi,Nu=new Ui;class DA extends fi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Dc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,JO)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yl),Q1.copy(e.boundingBox).applyMatrix4(Yl),this.boundingBox.union(Q1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ui),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yl),Nu.copy(e.boundingSphere).applyMatrix4(Yl),this.boundingSphere.union(Nu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Iu.geometry=this.geometry,Iu.material=this.material,Iu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Nu.copy(this.boundingSphere),Nu.applyMatrix4(i),e.ray.intersectsSphere(Nu)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Yl),Z1.multiplyMatrices(i,Yl),Iu.matrixWorld=Z1,Iu.raycast(e,Dd);for(let c=0,l=Dd.length;c<l;c++){const u=Dd[c];u.instanceId=s,u.object=this,t.push(u)}Dd.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Dc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function qO(n,e){return n.z-e.z}function eD(n,e){return e.z-n.z}class tD{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Zl="batchId",wo=new Bt,J1=new Bt,nD=new Bt,q1=new Bt,Bv=new qh,Fd=new Yi,Ca=new Ui,Ou=new se,$v=new tD,Ni=new fi,Ud=[];function iD(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let c=0;c<i;c++)e.setComponent(s+t,c,n.getComponent(s,c))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class FA extends fi{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Kt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ya(t,e,e,ji,Hr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const u=e.getAttribute(l),{array:f,itemSize:a,normalized:o}=u,h=new f.constructor(i*a),d=new u.constructor(h,a,o);d.setUsage(u.usage),t.setAttribute(l,d)}if(e.getIndex()!==null){const l=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new dn(l,1))}const c=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Zl,new dn(c,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Zl))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Zl}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Zl)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,wo),this.getBoundingBoxAt(r,Fd).applyMatrix4(wo),t.union(Fd))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ui);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,wo),this.getBoundingSphereAt(r,Ca).applyMatrix4(wo),t.union(Ca))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const c=this._reservedRanges,l=this._drawRanges,u=this._bounds;this._geometryCount!==0&&(s=c[c.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),a=f!==null;if(a&&(i===-1?r.indexCount=f.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const o=this._visibility,h=this._active,d=this._matricesTexture,p=this._matricesTexture.image.data;o.push(!0),h.push(!0);const y=this._geometryCount;this._geometryCount++,nD.toArray(p,y*16),d.needsUpdate=!0,c.push(r),l.push({start:a?r.indexStart:r.vertexStart,count:-1}),u.push({boxInitialized:!1,box:new Yi,sphereInitialized:!1,sphere:new Ui});const x=this.geometry.getAttribute(Zl);for(let g=0;g<r.vertexCount;g++)x.setX(r.vertexStart+g,y);return x.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),c=t.getIndex(),l=this._reservedRanges[e];if(r&&c.count>l.indexCount||t.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.vertexCount;for(const d in i.attributes){if(d===Zl)continue;const p=t.getAttribute(d),y=i.getAttribute(d);iD(p,y,u);const x=p.itemSize;for(let g=p.count,w=f;g<w;g++){const C=u+g;for(let M=0;M<x;M++)y.setComponent(C,M,0)}y.needsUpdate=!0}if(r){const d=l.indexStart;for(let p=0;p<c.count;p++)s.setX(d+p,u+c.getX(p));for(let p=c.count,y=l.indexCount;p<y;p++)s.setX(d+p,u);s.needsUpdate=!0}const a=this._bounds[e];t.boundingBox!==null?(a.box.copy(t.boundingBox),a.boxInitialized=!0):a.boxInitialized=!1,t.boundingSphere!==null?(a.sphere.copy(t.boundingSphere),a.sphereInitialized=!0):a.sphereInitialized=!1;const o=this._drawRanges[e],h=t.getAttribute("position");return o.count=r?c.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,c=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const l=c.index,u=c.attributes.position,f=this._drawRanges[e];for(let a=f.start,o=f.start+f.count;a<o;a++){let h=a;l&&(h=l.getX(h)),s.expandByPoint(Ou.fromBufferAttribute(u,h))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,c=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Fd),Fd.getCenter(s.center);const l=c.index,u=c.attributes.position,f=this._drawRanges[e];let a=0;for(let o=f.start,h=f.start+f.count;o<h;o++){let d=o;l&&(d=l.getX(d)),Ou.fromBufferAttribute(u,d),a=Math.max(a,s.center.distanceToSquared(Ou))}s.radius=Math.sqrt(a),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,c=this._geometryCount;return e>=c||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,c=this._geometryCount,l=this.matrixWorld,u=this.geometry;Ni.material=this.material,Ni.geometry.index=u.index,Ni.geometry.attributes=u.attributes,Ni.geometry.boundingBox===null&&(Ni.geometry.boundingBox=new Yi),Ni.geometry.boundingSphere===null&&(Ni.geometry.boundingSphere=new Ui);for(let f=0;f<c;f++){if(!i[f]||!r[f])continue;const a=s[f];Ni.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(f,Ni.matrixWorld).premultiply(l),this.getBoundingBoxAt(f,Ni.geometry.boundingBox),this.getBoundingSphereAt(f,Ni.geometry.boundingSphere),Ni.raycast(e,Ud);for(let o=0,h=Ud.length;o<h;o++){const d=Ud[o];d.object=this,d.batchId=f,t.push(d)}Ud.length=0}Ni.material=null,Ni.geometry.index=null,Ni.geometry.attributes={},Ni.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const c=r.getIndex(),l=c===null?1:c.array.BYTES_PER_ELEMENT,u=this._visibility,f=this._multiDrawStarts,a=this._multiDrawCounts,o=this._drawRanges,h=this.perObjectFrustumCulled;h&&(q1.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Bv.setFromProjectionMatrix(q1,e.isWebGPURenderer?Ic:ss));let d=0;if(this.sortObjects){J1.copy(this.matrixWorld).invert(),Ou.setFromMatrixPosition(i.matrixWorld).applyMatrix4(J1);for(let x=0,g=u.length;x<g;x++)if(u[x]){this.getMatrixAt(x,wo),this.getBoundingSphereAt(x,Ca).applyMatrix4(wo);let w=!1;if(h&&(w=!Bv.intersectsSphere(Ca)),!w){const C=Ou.distanceTo(Ca.center);$v.push(o[x],C)}}const p=$v.list,y=this.customSort;y===null?p.sort(s.transparent?eD:qO):y.call(this,p,i);for(let x=0,g=p.length;x<g;x++){const w=p[x];f[d]=w.start*l,a[d]=w.count,d++}$v.reset()}else for(let p=0,y=u.length;p<y;p++)if(u[p]){let x=!1;if(h&&(this.getMatrixAt(p,wo),this.getBoundingSphereAt(p,Ca).applyMatrix4(wo),x=!Bv.intersectsSphere(Ca)),!x){const g=o[p];f[d]=g.start*l,a[d]=g.count,d++}}this._multiDrawCount=d,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,c){this.onBeforeRender(e,null,r,s,c)}}class Ji extends Ci{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eM=new se,tM=new se,nM=new Bt,zv=new ll,Bd=new Ui;class Ko extends an{constructor(e=new Kt,t=new Ji){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)eM.fromBufferAttribute(t,r-1),tM.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=eM.distanceTo(tM);e.setAttribute("lineDistance",new Mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Bd.copy(i.boundingSphere),Bd.applyMatrix4(r),Bd.radius+=s,e.ray.intersectsSphere(Bd)===!1)return;nM.copy(r).invert(),zv.copy(e.ray).applyMatrix4(nM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=new se,a=new se,o=new se,h=new se,d=this.isLineSegments?2:1,p=i.index,x=i.attributes.position;if(p!==null){const g=Math.max(0,c.start),w=Math.min(p.count,c.start+c.count);for(let C=g,M=w-1;C<M;C+=d){const _=p.getX(C),E=p.getX(C+1);if(f.fromBufferAttribute(x,_),a.fromBufferAttribute(x,E),zv.distanceSqToSegment(f,a,h,o)>u)continue;h.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:o.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,c.start),w=Math.min(x.count,c.start+c.count);for(let C=g,M=w-1;C<M;C+=d){if(f.fromBufferAttribute(x,C),a.fromBufferAttribute(x,C+1),zv.distanceSqToSegment(f,a,h,o)>u)continue;h.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(h);E<e.near||E>e.far||t.push({distance:E,point:o.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,c=r.length;s<c;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const iM=new se,rM=new se;class As extends Ko{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)iM.fromBufferAttribute(t,r),rM.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+iM.distanceTo(rM);e.setAttribute("lineDistance",new Mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class UA extends Ko{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class l_ extends Ci{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const sM=new Bt,Ny=new ll,$d=new Ui,zd=new se;class BA extends an{constructor(e=new Kt,t=new l_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$d.copy(i.boundingSphere),$d.applyMatrix4(r),$d.radius+=s,e.ray.intersectsSphere($d)===!1)return;sM.copy(r).invert(),Ny.copy(e.ray).applyMatrix4(sM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=i.index,o=i.attributes.position;if(f!==null){const h=Math.max(0,c.start),d=Math.min(f.count,c.start+c.count);for(let p=h,y=d;p<y;p++){const x=f.getX(p);zd.fromBufferAttribute(o,x),oM(zd,x,u,r,e,t,this)}}else{const h=Math.max(0,c.start),d=Math.min(o.count,c.start+c.count);for(let p=h,y=d;p<y;p++)zd.fromBufferAttribute(o,p),oM(zd,p,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,c=r.length;s<c;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function oM(n,e,t,i,r,s,c){const l=Ny.distanceSqToPoint(n);if(l<t){const u=new se;Ny.closestPointToPoint(n,u),u.applyMatrix4(i);const f=r.ray.origin.distanceTo(u);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,object:c})}}class rD extends An{constructor(e,t,i,r,s,c,l,u,f){super(e,t,i,r,s,c,l,u,f),this.isVideoTexture=!0,this.minFilter=c!==void 0?c:On,this.magFilter=s!==void 0?s:On,this.generateMipmaps=!1;const a=this;function o(){a.needsUpdate=!0,e.requestVideoFrameCallback(o)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(o)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sD extends An{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Xn,this.minFilter=Xn,this.generateMipmaps=!1,this.needsUpdate=!0}}class km extends An{constructor(e,t,i,r,s,c,l,u,f,a,o,h){super(null,c,l,u,f,a,r,s,o,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class oD extends km{constructor(e,t,i,r,s,c){super(e,t,i,s,c),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Di}}class aD extends km{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,qs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class lD extends An{constructor(e,t,i,r,s,c,l,u,f){super(e,t,i,r,s,c,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class us{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let c=1;c<=e;c++)i=this.getPoint(c/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let c;t?c=t:c=e*i[s-1];let l=0,u=s-1,f;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),f=i[r]-c,f<0)l=r+1;else if(f>0)u=r-1;else{u=r;break}if(r=u,i[r]===c)return r/(s-1);const a=i[r],h=i[r+1]-a,d=(c-a)/h;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const c=this.getPoint(r),l=this.getPoint(s),u=t||(c.isVector2?new Ge:new se);return u.copy(l).sub(c).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new se,r=[],s=[],c=[],l=new se,u=new Bt;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new se)}s[0]=new se,c[0]=new se;let f=Number.MAX_VALUE;const a=Math.abs(r[0].x),o=Math.abs(r[0].y),h=Math.abs(r[0].z);a<=f&&(f=a,i.set(1,0,0)),o<=f&&(f=o,i.set(0,1,0)),h<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),c[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),c[d]=c[d-1].clone(),l.crossVectors(r[d-1],r[d]),l.length()>Number.EPSILON){l.normalize();const p=Math.acos(Wn(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(u.makeRotationAxis(l,p))}c[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(Wn(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(u.makeRotationAxis(r[p],d*p)),c[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Pm extends us{constructor(e=0,t=0,i=1,r=1,s=0,c=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=c,this.aClockwise=l,this.aRotation=u}getPoint(e,t){const i=t||new Ge,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const c=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(c?s=0:s=r),this.aClockwise===!0&&!c&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const a=Math.cos(this.aRotation),o=Math.sin(this.aRotation),h=u-this.aX,d=f-this.aY;u=h*a-d*o+this.aX,f=h*o+d*a+this.aY}return i.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class $A extends Pm{constructor(e,t,i,r,s,c){super(e,t,i,i,r,s,c),this.isArcCurve=!0,this.type="ArcCurve"}}function c_(){let n=0,e=0,t=0,i=0;function r(s,c,l,u){n=s,e=l,t=-3*s+3*c-2*l-u,i=2*s-2*c+l+u}return{initCatmullRom:function(s,c,l,u,f){r(c,l,f*(l-s),f*(u-c))},initNonuniformCatmullRom:function(s,c,l,u,f,a,o){let h=(c-s)/f-(l-s)/(f+a)+(l-c)/a,d=(l-c)/a-(u-c)/(a+o)+(u-l)/o;h*=a,d*=a,r(c,l,h,d)},calc:function(s){const c=s*s,l=c*s;return n+e*s+t*c+i*l}}}const Hd=new se,Hv=new c_,Wv=new c_,Vv=new c_;class zA extends us{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new se){const i=t,r=this.points,s=r.length,c=(s-(this.closed?0:1))*e;let l=Math.floor(c),u=c-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let f,a;this.closed||l>0?f=r[(l-1)%s]:(Hd.subVectors(r[0],r[1]).add(r[0]),f=Hd);const o=r[l%s],h=r[(l+1)%s];if(this.closed||l+2<s?a=r[(l+2)%s]:(Hd.subVectors(r[s-1],r[s-2]).add(r[s-1]),a=Hd),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(f.distanceToSquared(o),d),y=Math.pow(o.distanceToSquared(h),d),x=Math.pow(h.distanceToSquared(a),d);y<1e-4&&(y=1),p<1e-4&&(p=y),x<1e-4&&(x=y),Hv.initNonuniformCatmullRom(f.x,o.x,h.x,a.x,p,y,x),Wv.initNonuniformCatmullRom(f.y,o.y,h.y,a.y,p,y,x),Vv.initNonuniformCatmullRom(f.z,o.z,h.z,a.z,p,y,x)}else this.curveType==="catmullrom"&&(Hv.initCatmullRom(f.x,o.x,h.x,a.x,this.tension),Wv.initCatmullRom(f.y,o.y,h.y,a.y,this.tension),Vv.initCatmullRom(f.z,o.z,h.z,a.z,this.tension));return i.set(Hv.calc(u),Wv.calc(u),Vv.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new se().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aM(n,e,t,i,r){const s=(i-e)*.5,c=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+c)*u+(-3*t+3*i-2*s-c)*l+s*n+t}function cD(n,e){const t=1-n;return t*t*e}function uD(n,e){return 2*(1-n)*n*e}function hD(n,e){return n*n*e}function ih(n,e,t,i){return cD(n,e)+uD(n,t)+hD(n,i)}function fD(n,e){const t=1-n;return t*t*t*e}function dD(n,e){const t=1-n;return 3*t*t*n*e}function pD(n,e){return 3*(1-n)*n*n*e}function mD(n,e){return n*n*n*e}function rh(n,e,t,i,r){return fD(n,e)+dD(n,t)+pD(n,i)+mD(n,r)}class u_ extends us{constructor(e=new Ge,t=new Ge,i=new Ge,r=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ge){const i=t,r=this.v0,s=this.v1,c=this.v2,l=this.v3;return i.set(rh(e,r.x,s.x,c.x,l.x),rh(e,r.y,s.y,c.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HA extends us{constructor(e=new se,t=new se,i=new se,r=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,c=this.v2,l=this.v3;return i.set(rh(e,r.x,s.x,c.x,l.x),rh(e,r.y,s.y,c.y,l.y),rh(e,r.z,s.z,c.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class h_ extends us{constructor(e=new Ge,t=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ge){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WA extends us{constructor(e=new se,t=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new se){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f_ extends us{constructor(e=new Ge,t=new Ge,i=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ge){const i=t,r=this.v0,s=this.v1,c=this.v2;return i.set(ih(e,r.x,s.x,c.x),ih(e,r.y,s.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d_ extends us{constructor(e=new se,t=new se,i=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,c=this.v2;return i.set(ih(e,r.x,s.x,c.x),ih(e,r.y,s.y,c.y),ih(e,r.z,s.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p_ extends us{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ge){const i=t,r=this.points,s=(r.length-1)*e,c=Math.floor(s),l=s-c,u=r[c===0?c:c-1],f=r[c],a=r[c>r.length-2?r.length-1:c+1],o=r[c>r.length-3?r.length-1:c+2];return i.set(aM(l,u.x,f.x,a.x,o.x),aM(l,u.y,f.y,a.y,o.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ge().fromArray(r))}return this}}var qp=Object.freeze({__proto__:null,ArcCurve:$A,CatmullRomCurve3:zA,CubicBezierCurve:u_,CubicBezierCurve3:HA,EllipseCurve:Pm,LineCurve:h_,LineCurve3:WA,QuadraticBezierCurve:f_,QuadraticBezierCurve3:d_,SplineCurve:p_});class VA extends us{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new qp[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const c=r[s]-i,l=this.curves[s],u=l.getLength(),f=u===0?0:1-c/u;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const c=s[r],l=c.isEllipseCurve?e*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?e*c.points.length:e,u=c.getPoints(l);for(let f=0;f<u.length;f++){const a=u[f];i&&i.equals(a)||(t.push(a),i=a)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new qp[r.type]().fromJSON(r))}return this}}class Oh extends VA{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new h_(this.currentPoint.clone(),new Ge(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new f_(this.currentPoint.clone(),new Ge(e,t),new Ge(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,c){const l=new u_(this.currentPoint.clone(),new Ge(e,t),new Ge(i,r),new Ge(s,c));return this.curves.push(l),this.currentPoint.set(s,c),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new p_(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,c){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,c),this}absarc(e,t,i,r,s,c){return this.absellipse(e,t,i,i,r,s,c),this}ellipse(e,t,i,r,s,c,l,u){const f=this.currentPoint.x,a=this.currentPoint.y;return this.absellipse(e+f,t+a,i,r,s,c,l,u),this}absellipse(e,t,i,r,s,c,l,u){const f=new Pm(e,t,i,r,s,c,l,u);if(this.curves.length>0){const o=f.getPoint(0);o.equals(this.currentPoint)||this.lineTo(o.x,o.y)}this.curves.push(f);const a=f.getPoint(1);return this.currentPoint.copy(a),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tf extends Kt{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Wn(r,0,Math.PI*2);const s=[],c=[],l=[],u=[],f=[],a=1/t,o=new se,h=new Ge,d=new se,p=new se,y=new se;let x=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:x=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,d.x=g*1,d.y=-x,d.z=g*0,y.copy(d),d.normalize(),u.push(d.x,d.y,d.z);break;case e.length-1:u.push(y.x,y.y,y.z);break;default:x=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,d.x=g*1,d.y=-x,d.z=g*0,p.copy(d),d.x+=y.x,d.y+=y.y,d.z+=y.z,d.normalize(),u.push(d.x,d.y,d.z),y.copy(p)}for(let w=0;w<=t;w++){const C=i+w*a*r,M=Math.sin(C),_=Math.cos(C);for(let E=0;E<=e.length-1;E++){o.x=e[E].x*M,o.y=e[E].y,o.z=e[E].x*_,c.push(o.x,o.y,o.z),h.x=w/t,h.y=E/(e.length-1),l.push(h.x,h.y);const R=u[3*E+0]*M,A=u[3*E+1],T=u[3*E+0]*_;f.push(R,A,T)}}for(let w=0;w<t;w++)for(let C=0;C<e.length-1;C++){const M=C+w*e.length,_=M,E=M+e.length,R=M+e.length+1,A=M+1;s.push(_,E,A),s.push(R,A,E)}this.setIndex(s),this.setAttribute("position",new Mt(c,3)),this.setAttribute("uv",new Mt(l,2)),this.setAttribute("normal",new Mt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tf(e.points,e.segments,e.phiStart,e.phiLength)}}class Im extends tf{constructor(e=1,t=1,i=4,r=8){const s=new Oh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Im(e.radius,e.length,e.capSegments,e.radialSegments)}}class Nm extends Kt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],c=[],l=[],u=[],f=new se,a=new Ge;c.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let o=0,h=3;o<=t;o++,h+=3){const d=i+o/t*r;f.x=e*Math.cos(d),f.y=e*Math.sin(d),c.push(f.x,f.y,f.z),l.push(0,0,1),a.x=(c[h]/e+1)/2,a.y=(c[h+1]/e+1)/2,u.push(a.x,a.y)}for(let o=1;o<=t;o++)s.push(o,o+1,0);this.setIndex(s),this.setAttribute("position",new Mt(c,3)),this.setAttribute("normal",new Mt(l,3)),this.setAttribute("uv",new Mt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vc extends Kt{constructor(e=1,t=1,i=1,r=32,s=1,c=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:c,thetaStart:l,thetaLength:u};const f=this;r=Math.floor(r),s=Math.floor(s);const a=[],o=[],h=[],d=[];let p=0;const y=[],x=i/2;let g=0;w(),c===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(a),this.setAttribute("position",new Mt(o,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(d,2));function w(){const M=new se,_=new se;let E=0;const R=(t-e)/i;for(let A=0;A<=s;A++){const T=[],S=A/s,I=S*(t-e)+e;for(let D=0;D<=r;D++){const z=D/r,B=z*u+l,W=Math.sin(B),H=Math.cos(B);_.x=I*W,_.y=-S*i+x,_.z=I*H,o.push(_.x,_.y,_.z),M.set(W,R,H).normalize(),h.push(M.x,M.y,M.z),d.push(z,1-S),T.push(p++)}y.push(T)}for(let A=0;A<r;A++)for(let T=0;T<s;T++){const S=y[T][A],I=y[T+1][A],D=y[T+1][A+1],z=y[T][A+1];a.push(S,I,z),a.push(I,D,z),E+=6}f.addGroup(g,E,0),g+=E}function C(M){const _=p,E=new Ge,R=new se;let A=0;const T=M===!0?e:t,S=M===!0?1:-1;for(let D=1;D<=r;D++)o.push(0,x*S,0),h.push(0,S,0),d.push(.5,.5),p++;const I=p;for(let D=0;D<=r;D++){const B=D/r*u+l,W=Math.cos(B),H=Math.sin(B);R.x=T*H,R.y=x*S,R.z=T*W,o.push(R.x,R.y,R.z),h.push(0,S,0),E.x=W*.5+.5,E.y=H*.5*S+.5,d.push(E.x,E.y),p++}for(let D=0;D<r;D++){const z=_+D,B=I+D;M===!0?a.push(B,B+1,z):a.push(B+1,B,z),A+=3}f.addGroup(g,A,M===!0?1:2),g+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Om extends Vc{constructor(e=1,t=1,i=32,r=1,s=!1,c=0,l=Math.PI*2){super(0,e,t,i,r,s,c,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:c,thetaLength:l}}static fromJSON(e){return new Om(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qo extends Kt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],c=[];l(r),f(i),a(),this.setAttribute("position",new Mt(s,3)),this.setAttribute("normal",new Mt(s.slice(),3)),this.setAttribute("uv",new Mt(c,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(w){const C=new se,M=new se,_=new se;for(let E=0;E<t.length;E+=3)d(t[E+0],C),d(t[E+1],M),d(t[E+2],_),u(C,M,_,w)}function u(w,C,M,_){const E=_+1,R=[];for(let A=0;A<=E;A++){R[A]=[];const T=w.clone().lerp(M,A/E),S=C.clone().lerp(M,A/E),I=E-A;for(let D=0;D<=I;D++)D===0&&A===E?R[A][D]=T:R[A][D]=T.clone().lerp(S,D/I)}for(let A=0;A<E;A++)for(let T=0;T<2*(E-A)-1;T++){const S=Math.floor(T/2);T%2===0?(h(R[A][S+1]),h(R[A+1][S]),h(R[A][S])):(h(R[A][S+1]),h(R[A+1][S+1]),h(R[A+1][S]))}}function f(w){const C=new se;for(let M=0;M<s.length;M+=3)C.x=s[M+0],C.y=s[M+1],C.z=s[M+2],C.normalize().multiplyScalar(w),s[M+0]=C.x,s[M+1]=C.y,s[M+2]=C.z}function a(){const w=new se;for(let C=0;C<s.length;C+=3){w.x=s[C+0],w.y=s[C+1],w.z=s[C+2];const M=x(w)/2/Math.PI+.5,_=g(w)/Math.PI+.5;c.push(M,1-_)}p(),o()}function o(){for(let w=0;w<c.length;w+=6){const C=c[w+0],M=c[w+2],_=c[w+4],E=Math.max(C,M,_),R=Math.min(C,M,_);E>.9&&R<.1&&(C<.2&&(c[w+0]+=1),M<.2&&(c[w+2]+=1),_<.2&&(c[w+4]+=1))}}function h(w){s.push(w.x,w.y,w.z)}function d(w,C){const M=w*3;C.x=e[M+0],C.y=e[M+1],C.z=e[M+2]}function p(){const w=new se,C=new se,M=new se,_=new se,E=new Ge,R=new Ge,A=new Ge;for(let T=0,S=0;T<s.length;T+=9,S+=6){w.set(s[T+0],s[T+1],s[T+2]),C.set(s[T+3],s[T+4],s[T+5]),M.set(s[T+6],s[T+7],s[T+8]),E.set(c[S+0],c[S+1]),R.set(c[S+2],c[S+3]),A.set(c[S+4],c[S+5]),_.copy(w).add(C).add(M).divideScalar(3);const I=x(_);y(E,S+0,w,I),y(R,S+2,C,I),y(A,S+4,M,I)}}function y(w,C,M,_){_<0&&w.x===1&&(c[C]=w.x-1),M.x===0&&M.z===0&&(c[C]=_/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qo(e.vertices,e.indices,e.radius,e.details)}}class Dm extends qo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,c,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Dm(e.radius,e.detail)}}const Wd=new se,Vd=new se,Gv=new se,Gd=new ar;class GA extends Kt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ka*t),c=e.getIndex(),l=e.getAttribute("position"),u=c?c.count:l.count,f=[0,0,0],a=["a","b","c"],o=new Array(3),h={},d=[];for(let p=0;p<u;p+=3){c?(f[0]=c.getX(p),f[1]=c.getX(p+1),f[2]=c.getX(p+2)):(f[0]=p,f[1]=p+1,f[2]=p+2);const{a:y,b:x,c:g}=Gd;if(y.fromBufferAttribute(l,f[0]),x.fromBufferAttribute(l,f[1]),g.fromBufferAttribute(l,f[2]),Gd.getNormal(Gv),o[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,o[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,o[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(o[0]===o[1]||o[1]===o[2]||o[2]===o[0]))for(let w=0;w<3;w++){const C=(w+1)%3,M=o[w],_=o[C],E=Gd[a[w]],R=Gd[a[C]],A=`${M}_${_}`,T=`${_}_${M}`;T in h&&h[T]?(Gv.dot(h[T].normal)<=s&&(d.push(E.x,E.y,E.z),d.push(R.x,R.y,R.z)),h[T]=null):A in h||(h[A]={index0:f[w],index1:f[C],normal:Gv.clone()})}}for(const p in h)if(h[p]){const{index0:y,index1:x}=h[p];Wd.fromBufferAttribute(l,y),Vd.fromBufferAttribute(l,x),d.push(Wd.x,Wd.y,Wd.z),d.push(Vd.x,Vd.y,Vd.z)}this.setAttribute("position",new Mt(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Za extends Oh{constructor(e){super(e),this.uuid=Ar(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Oh().fromJSON(r))}return this}}const gD={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=jA(n,0,r,t,!0);const c=[];if(!s||s.next===s.prev)return c;let l,u,f,a,o,h,d;if(i&&(s=SD(n,e,s,t)),n.length>80*t){l=f=n[0],u=a=n[1];for(let p=t;p<r;p+=t)o=n[p],h=n[p+1],o<l&&(l=o),h<u&&(u=h),o>f&&(f=o),h>a&&(a=h);d=Math.max(f-l,a-u),d=d!==0?32767/d:0}return Dh(s,c,t,l,u,d,0),c}};function jA(n,e,t,i,r){let s,c;if(r===PD(n,e,t,i)>0)for(s=e;s<t;s+=i)c=lM(s,n[s],n[s+1],c);else for(s=t-i;s>=e;s-=i)c=lM(s,n[s],n[s+1],c);return c&&Fm(c,c.next)&&(Uh(c),c=c.next),c}function sl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Fm(t,t.next)||Dn(t.prev,t,t.next)===0)){if(Uh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Dh(n,e,t,i,r,s,c){if(!n)return;!c&&s&&bD(n,i,r,s);let l=n,u,f;for(;n.prev!==n.next;){if(u=n.prev,f=n.next,s?yD(n,i,r,s):vD(n)){e.push(u.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Uh(n),n=f.next,l=f.next;continue}if(n=f,n===l){c?c===1?(n=xD(sl(n),e,t),Dh(n,e,t,i,r,s,2)):c===2&&_D(n,e,t,i,r,s):Dh(sl(n),e,t,i,r,s,1);break}}}function vD(n){const e=n.prev,t=n,i=n.next;if(Dn(e,t,i)>=0)return!1;const r=e.x,s=t.x,c=i.x,l=e.y,u=t.y,f=i.y,a=r<s?r<c?r:c:s<c?s:c,o=l<u?l<f?l:f:u<f?u:f,h=r>s?r>c?r:c:s>c?s:c,d=l>u?l>f?l:f:u>f?u:f;let p=i.next;for(;p!==e;){if(p.x>=a&&p.x<=h&&p.y>=o&&p.y<=d&&vc(r,l,s,u,c,f,p.x,p.y)&&Dn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function yD(n,e,t,i){const r=n.prev,s=n,c=n.next;if(Dn(r,s,c)>=0)return!1;const l=r.x,u=s.x,f=c.x,a=r.y,o=s.y,h=c.y,d=l<u?l<f?l:f:u<f?u:f,p=a<o?a<h?a:h:o<h?o:h,y=l>u?l>f?l:f:u>f?u:f,x=a>o?a>h?a:h:o>h?o:h,g=Oy(d,p,e,t,i),w=Oy(y,x,e,t,i);let C=n.prevZ,M=n.nextZ;for(;C&&C.z>=g&&M&&M.z<=w;){if(C.x>=d&&C.x<=y&&C.y>=p&&C.y<=x&&C!==r&&C!==c&&vc(l,a,u,o,f,h,C.x,C.y)&&Dn(C.prev,C,C.next)>=0||(C=C.prevZ,M.x>=d&&M.x<=y&&M.y>=p&&M.y<=x&&M!==r&&M!==c&&vc(l,a,u,o,f,h,M.x,M.y)&&Dn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;C&&C.z>=g;){if(C.x>=d&&C.x<=y&&C.y>=p&&C.y<=x&&C!==r&&C!==c&&vc(l,a,u,o,f,h,C.x,C.y)&&Dn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;M&&M.z<=w;){if(M.x>=d&&M.x<=y&&M.y>=p&&M.y<=x&&M!==r&&M!==c&&vc(l,a,u,o,f,h,M.x,M.y)&&Dn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function xD(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Fm(r,s)&&KA(r,i,i.next,s)&&Fh(r,s)&&Fh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Uh(i),Uh(i.next),i=n=s),i=i.next}while(i!==n);return sl(i)}function _D(n,e,t,i,r,s){let c=n;do{let l=c.next.next;for(;l!==c.prev;){if(c.i!==l.i&&RD(c,l)){let u=XA(c,l);c=sl(c,c.next),u=sl(u,u.next),Dh(c,e,t,i,r,s,0),Dh(u,e,t,i,r,s,0);return}l=l.next}c=c.next}while(c!==n)}function SD(n,e,t,i){const r=[];let s,c,l,u,f;for(s=0,c=e.length;s<c;s++)l=e[s]*i,u=s<c-1?e[s+1]*i:n.length,f=jA(n,l,u,i,!1),f===f.next&&(f.steiner=!0),r.push(TD(f));for(r.sort(wD),s=0;s<r.length;s++)t=MD(r[s],t);return t}function wD(n,e){return n.x-e.x}function MD(n,e){const t=CD(n,e);if(!t)return e;const i=XA(t,n);return sl(i,i.next),sl(t,t.next)}function CD(n,e){let t=e,i=-1/0,r;const s=n.x,c=n.y;do{if(c<=t.y&&c>=t.next.y&&t.next.y!==t.y){const h=t.x+(c-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,u=r.x,f=r.y;let a=1/0,o;t=r;do s>=t.x&&t.x>=u&&s!==t.x&&vc(c<f?s:i,c,u,f,c<f?i:s,c,t.x,t.y)&&(o=Math.abs(c-t.y)/(s-t.x),Fh(t,n)&&(o<a||o===a&&(t.x>r.x||t.x===r.x&&ED(r,t)))&&(r=t,a=o)),t=t.next;while(t!==l);return r}function ED(n,e){return Dn(n.prev,n,e.prev)<0&&Dn(e.next,n,n.next)<0}function bD(n,e,t,i){let r=n;do r.z===0&&(r.z=Oy(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,AD(r)}function AD(n){let e,t,i,r,s,c,l,u,f=1;do{for(t=n,n=null,s=null,c=0;t;){for(c++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(u=f;l>0||u>0&&i;)l!==0&&(u===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(c>1);return n}function Oy(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function vc(n,e,t,i,r,s,c,l){return(r-c)*(e-l)>=(n-c)*(s-l)&&(n-c)*(i-l)>=(t-c)*(e-l)&&(t-c)*(s-l)>=(r-c)*(i-l)}function RD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!LD(n,e)&&(Fh(n,e)&&Fh(e,n)&&kD(n,e)&&(Dn(n.prev,n,e.prev)||Dn(n,e.prev,e))||Fm(n,e)&&Dn(n.prev,n,n.next)>0&&Dn(e.prev,e,e.next)>0)}function Dn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Fm(n,e){return n.x===e.x&&n.y===e.y}function KA(n,e,t,i){const r=Kd(Dn(n,e,t)),s=Kd(Dn(n,e,i)),c=Kd(Dn(t,i,n)),l=Kd(Dn(t,i,e));return!!(r!==s&&c!==l||r===0&&jd(n,t,e)||s===0&&jd(n,i,e)||c===0&&jd(t,n,i)||l===0&&jd(t,e,i))}function jd(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Kd(n){return n>0?1:n<0?-1:0}function LD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&KA(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Fh(n,e){return Dn(n.prev,n,n.next)<0?Dn(n,e,n.next)>=0&&Dn(n,n.prev,e)>=0:Dn(n,e,n.prev)<0||Dn(n,n.next,e)<0}function kD(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function XA(n,e){const t=new Dy(n.i,n.x,n.y),i=new Dy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function lM(n,e,t,i){const r=new Dy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Uh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Dy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function PD(n,e,t,i){let r=0;for(let s=e,c=t-i;s<t;s+=i)r+=(n[c]-n[s])*(n[s+1]+n[c+1]),c=s;return r}class Es{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Es.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];cM(e),uM(i,e);let c=e.length;t.forEach(cM);for(let u=0;u<t.length;u++)r.push(c),c+=t[u].length,uM(i,t[u]);const l=gD.triangulate(i,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function cM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function uM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Um extends Kt{constructor(e=new Za([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];c(f)}this.setAttribute("position",new Mt(r,3)),this.setAttribute("uv",new Mt(s,2)),this.computeVertexNormals();function c(l){const u=[],f=t.curveSegments!==void 0?t.curveSegments:12,a=t.steps!==void 0?t.steps:1,o=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:d-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:ID;let C,M=!1,_,E,R,A;g&&(C=g.getSpacedPoints(a),M=!0,h=!1,_=g.computeFrenetFrames(a,!1),E=new se,R=new se,A=new se),h||(x=0,d=0,p=0,y=0);const T=l.extractPoints(f);let S=T.shape;const I=T.holes;if(!Es.isClockWise(S)){S=S.reverse();for(let oe=0,Ve=I.length;oe<Ve;oe++){const Te=I[oe];Es.isClockWise(Te)&&(I[oe]=Te.reverse())}}const z=Es.triangulateShape(S,I),B=S;for(let oe=0,Ve=I.length;oe<Ve;oe++){const Te=I[oe];S=S.concat(Te)}function W(oe,Ve,Te){return Ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().addScaledVector(Ve,Te)}const H=S.length,J=z.length;function G(oe,Ve,Te){let $e,Ne,ht;const Ze=oe.x-Ve.x,q=oe.y-Ve.y,Z=Te.x-oe.x,ae=Te.y-oe.y,Ee=Ze*Ze+q*q,me=Ze*ae-q*Z;if(Math.abs(me)>Number.EPSILON){const ke=Math.sqrt(Ee),Qe=Math.sqrt(Z*Z+ae*ae),Ye=Ve.x-q/ke,Je=Ve.y+Ze/ke,ge=Te.x-ae/Qe,Me=Te.y+Z/Qe,_e=((ge-Ye)*ae-(Me-Je)*Z)/(Ze*ae-q*Z);$e=Ye+Ze*_e-oe.x,Ne=Je+q*_e-oe.y;const et=$e*$e+Ne*Ne;if(et<=2)return new Ge($e,Ne);ht=Math.sqrt(et/2)}else{let ke=!1;Ze>Number.EPSILON?Z>Number.EPSILON&&(ke=!0):Ze<-Number.EPSILON?Z<-Number.EPSILON&&(ke=!0):Math.sign(q)===Math.sign(ae)&&(ke=!0),ke?($e=-q,Ne=Ze,ht=Math.sqrt(Ee)):($e=Ze,Ne=q,ht=Math.sqrt(Ee/2))}return new Ge($e/ht,Ne/ht)}const K=[];for(let oe=0,Ve=B.length,Te=Ve-1,$e=oe+1;oe<Ve;oe++,Te++,$e++)Te===Ve&&(Te=0),$e===Ve&&($e=0),K[oe]=G(B[oe],B[Te],B[$e]);const Y=[];let ne,le=K.concat();for(let oe=0,Ve=I.length;oe<Ve;oe++){const Te=I[oe];ne=[];for(let $e=0,Ne=Te.length,ht=Ne-1,Ze=$e+1;$e<Ne;$e++,ht++,Ze++)ht===Ne&&(ht=0),Ze===Ne&&(Ze=0),ne[$e]=G(Te[$e],Te[ht],Te[Ze]);Y.push(ne),le=le.concat(ne)}for(let oe=0;oe<x;oe++){const Ve=oe/x,Te=d*Math.cos(Ve*Math.PI/2),$e=p*Math.sin(Ve*Math.PI/2)+y;for(let Ne=0,ht=B.length;Ne<ht;Ne++){const Ze=W(B[Ne],K[Ne],$e);ye(Ze.x,Ze.y,-Te)}for(let Ne=0,ht=I.length;Ne<ht;Ne++){const Ze=I[Ne];ne=Y[Ne];for(let q=0,Z=Ze.length;q<Z;q++){const ae=W(Ze[q],ne[q],$e);ye(ae.x,ae.y,-Te)}}}const j=p+y;for(let oe=0;oe<H;oe++){const Ve=h?W(S[oe],le[oe],j):S[oe];M?(R.copy(_.normals[0]).multiplyScalar(Ve.x),E.copy(_.binormals[0]).multiplyScalar(Ve.y),A.copy(C[0]).add(R).add(E),ye(A.x,A.y,A.z)):ye(Ve.x,Ve.y,0)}for(let oe=1;oe<=a;oe++)for(let Ve=0;Ve<H;Ve++){const Te=h?W(S[Ve],le[Ve],j):S[Ve];M?(R.copy(_.normals[oe]).multiplyScalar(Te.x),E.copy(_.binormals[oe]).multiplyScalar(Te.y),A.copy(C[oe]).add(R).add(E),ye(A.x,A.y,A.z)):ye(Te.x,Te.y,o/a*oe)}for(let oe=x-1;oe>=0;oe--){const Ve=oe/x,Te=d*Math.cos(Ve*Math.PI/2),$e=p*Math.sin(Ve*Math.PI/2)+y;for(let Ne=0,ht=B.length;Ne<ht;Ne++){const Ze=W(B[Ne],K[Ne],$e);ye(Ze.x,Ze.y,o+Te)}for(let Ne=0,ht=I.length;Ne<ht;Ne++){const Ze=I[Ne];ne=Y[Ne];for(let q=0,Z=Ze.length;q<Z;q++){const ae=W(Ze[q],ne[q],$e);M?ye(ae.x,ae.y+C[a-1].y,C[a-1].x+Te):ye(ae.x,ae.y,o+Te)}}}re(),fe();function re(){const oe=r.length/3;if(h){let Ve=0,Te=H*Ve;for(let $e=0;$e<J;$e++){const Ne=z[$e];ze(Ne[2]+Te,Ne[1]+Te,Ne[0]+Te)}Ve=a+x*2,Te=H*Ve;for(let $e=0;$e<J;$e++){const Ne=z[$e];ze(Ne[0]+Te,Ne[1]+Te,Ne[2]+Te)}}else{for(let Ve=0;Ve<J;Ve++){const Te=z[Ve];ze(Te[2],Te[1],Te[0])}for(let Ve=0;Ve<J;Ve++){const Te=z[Ve];ze(Te[0]+H*a,Te[1]+H*a,Te[2]+H*a)}}i.addGroup(oe,r.length/3-oe,0)}function fe(){const oe=r.length/3;let Ve=0;ve(B,Ve),Ve+=B.length;for(let Te=0,$e=I.length;Te<$e;Te++){const Ne=I[Te];ve(Ne,Ve),Ve+=Ne.length}i.addGroup(oe,r.length/3-oe,1)}function ve(oe,Ve){let Te=oe.length;for(;--Te>=0;){const $e=Te;let Ne=Te-1;Ne<0&&(Ne=oe.length-1);for(let ht=0,Ze=a+x*2;ht<Ze;ht++){const q=H*ht,Z=H*(ht+1),ae=Ve+$e+q,Ee=Ve+Ne+q,me=Ve+Ne+Z,ke=Ve+$e+Z;Xe(ae,Ee,me,ke)}}}function ye(oe,Ve,Te){u.push(oe),u.push(Ve),u.push(Te)}function ze(oe,Ve,Te){Ae(oe),Ae(Ve),Ae(Te);const $e=r.length/3,Ne=w.generateTopUV(i,r,$e-3,$e-2,$e-1);je(Ne[0]),je(Ne[1]),je(Ne[2])}function Xe(oe,Ve,Te,$e){Ae(oe),Ae(Ve),Ae($e),Ae(Ve),Ae(Te),Ae($e);const Ne=r.length/3,ht=w.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);je(ht[0]),je(ht[1]),je(ht[3]),je(ht[1]),je(ht[2]),je(ht[3])}function Ae(oe){r.push(u[oe*3+0]),r.push(u[oe*3+1]),r.push(u[oe*3+2])}function je(oe){s.push(oe.x),s.push(oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return ND(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,c=e.shapes.length;s<c;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new qp[r.type]().fromJSON(r)),new Um(i,e.options)}}const ID={generateTopUV:function(n,e,t,i,r){const s=e[t*3],c=e[t*3+1],l=e[i*3],u=e[i*3+1],f=e[r*3],a=e[r*3+1];return[new Ge(s,c),new Ge(l,u),new Ge(f,a)]},generateSideWallUV:function(n,e,t,i,r,s){const c=e[t*3],l=e[t*3+1],u=e[t*3+2],f=e[i*3],a=e[i*3+1],o=e[i*3+2],h=e[r*3],d=e[r*3+1],p=e[r*3+2],y=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(l-a)<Math.abs(c-f)?[new Ge(c,1-u),new Ge(f,1-o),new Ge(h,1-p),new Ge(y,1-g)]:[new Ge(l,1-u),new Ge(a,1-o),new Ge(d,1-p),new Ge(x,1-g)]}};function ND(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Bm extends qo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bm(e.radius,e.detail)}}class nf extends qo{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nf(e.radius,e.detail)}}class $m extends Kt{constructor(e=.5,t=1,i=32,r=1,s=0,c=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:c},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],f=[],a=[];let o=e;const h=(t-e)/r,d=new se,p=new Ge;for(let y=0;y<=r;y++){for(let x=0;x<=i;x++){const g=s+x/i*c;d.x=o*Math.cos(g),d.y=o*Math.sin(g),u.push(d.x,d.y,d.z),f.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,a.push(p.x,p.y)}o+=h}for(let y=0;y<r;y++){const x=y*(i+1);for(let g=0;g<i;g++){const w=g+x,C=w,M=w+i+1,_=w+i+2,E=w+1;l.push(C,M,E),l.push(M,_,E)}}this.setIndex(l),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(f,3)),this.setAttribute("uv",new Mt(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $m(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zm extends Kt{constructor(e=new Za([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],c=[];let l=0,u=0;if(Array.isArray(e)===!1)f(e);else for(let a=0;a<e.length;a++)f(e[a]),this.addGroup(l,u,a),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new Mt(r,3)),this.setAttribute("normal",new Mt(s,3)),this.setAttribute("uv",new Mt(c,2));function f(a){const o=r.length/3,h=a.extractPoints(t);let d=h.shape;const p=h.holes;Es.isClockWise(d)===!1&&(d=d.reverse());for(let x=0,g=p.length;x<g;x++){const w=p[x];Es.isClockWise(w)===!0&&(p[x]=w.reverse())}const y=Es.triangulateShape(d,p);for(let x=0,g=p.length;x<g;x++){const w=p[x];d=d.concat(w)}for(let x=0,g=d.length;x<g;x++){const w=d[x];r.push(w.x,w.y,0),s.push(0,0,1),c.push(w.x,w.y)}for(let x=0,g=y.length;x<g;x++){const w=y[x],C=w[0]+o,M=w[1]+o,_=w[2]+o;i.push(C,M,_),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return OD(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const c=t[e.shapes[r]];i.push(c)}return new zm(i,e.curveSegments)}}function OD(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class rf extends Kt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,c=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:c,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(c+l,Math.PI);let f=0;const a=[],o=new se,h=new se,d=[],p=[],y=[],x=[];for(let g=0;g<=i;g++){const w=[],C=g/i;let M=0;g===0&&c===0?M=.5/t:g===i&&u===Math.PI&&(M=-.5/t);for(let _=0;_<=t;_++){const E=_/t;o.x=-e*Math.cos(r+E*s)*Math.sin(c+C*l),o.y=e*Math.cos(c+C*l),o.z=e*Math.sin(r+E*s)*Math.sin(c+C*l),p.push(o.x,o.y,o.z),h.copy(o).normalize(),y.push(h.x,h.y,h.z),x.push(E+M,1-C),w.push(f++)}a.push(w)}for(let g=0;g<i;g++)for(let w=0;w<t;w++){const C=a[g][w+1],M=a[g][w],_=a[g+1][w],E=a[g+1][w+1];(g!==0||c>0)&&d.push(C,M,E),(g!==i-1||u<Math.PI)&&d.push(M,_,E)}this.setIndex(d),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(y,3)),this.setAttribute("uv",new Mt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Hm extends qo{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hm(e.radius,e.detail)}}class Wm extends Kt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const c=[],l=[],u=[],f=[],a=new se,o=new se,h=new se;for(let d=0;d<=i;d++)for(let p=0;p<=r;p++){const y=p/r*s,x=d/i*Math.PI*2;o.x=(e+t*Math.cos(x))*Math.cos(y),o.y=(e+t*Math.cos(x))*Math.sin(y),o.z=t*Math.sin(x),l.push(o.x,o.y,o.z),a.x=e*Math.cos(y),a.y=e*Math.sin(y),h.subVectors(o,a).normalize(),u.push(h.x,h.y,h.z),f.push(p/r),f.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=r;p++){const y=(r+1)*d+p-1,x=(r+1)*(d-1)+p-1,g=(r+1)*(d-1)+p,w=(r+1)*d+p;c.push(y,x,w),c.push(x,g,w)}this.setIndex(c),this.setAttribute("position",new Mt(l,3)),this.setAttribute("normal",new Mt(u,3)),this.setAttribute("uv",new Mt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Vm extends Kt{constructor(e=1,t=.4,i=64,r=8,s=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:c},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],f=[],a=[],o=new se,h=new se,d=new se,p=new se,y=new se,x=new se,g=new se;for(let C=0;C<=i;++C){const M=C/i*s*Math.PI*2;w(M,s,c,e,d),w(M+.01,s,c,e,p),x.subVectors(p,d),g.addVectors(p,d),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let _=0;_<=r;++_){const E=_/r*Math.PI*2,R=-t*Math.cos(E),A=t*Math.sin(E);o.x=d.x+(R*g.x+A*y.x),o.y=d.y+(R*g.y+A*y.y),o.z=d.z+(R*g.z+A*y.z),u.push(o.x,o.y,o.z),h.subVectors(o,d).normalize(),f.push(h.x,h.y,h.z),a.push(C/i),a.push(_/r)}}for(let C=1;C<=i;C++)for(let M=1;M<=r;M++){const _=(r+1)*(C-1)+(M-1),E=(r+1)*C+(M-1),R=(r+1)*C+M,A=(r+1)*(C-1)+M;l.push(_,E,A),l.push(E,R,A)}this.setIndex(l),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(f,3)),this.setAttribute("uv",new Mt(a,2));function w(C,M,_,E,R){const A=Math.cos(C),T=Math.sin(C),S=_/M*C,I=Math.cos(S);R.x=E*(2+I)*.5*A,R.y=E*(2+I)*T*.5,R.z=E*Math.sin(S)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gm extends Kt{constructor(e=new d_(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const c=e.computeFrenetFrames(t,s);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const l=new se,u=new se,f=new Ge;let a=new se;const o=[],h=[],d=[],p=[];y(),this.setIndex(p),this.setAttribute("position",new Mt(o,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(d,2));function y(){for(let C=0;C<t;C++)x(C);x(s===!1?t:0),w(),g()}function x(C){a=e.getPointAt(C/t,a);const M=c.normals[C],_=c.binormals[C];for(let E=0;E<=r;E++){const R=E/r*Math.PI*2,A=Math.sin(R),T=-Math.cos(R);u.x=T*M.x+A*_.x,u.y=T*M.y+A*_.y,u.z=T*M.z+A*_.z,u.normalize(),h.push(u.x,u.y,u.z),l.x=a.x+i*u.x,l.y=a.y+i*u.y,l.z=a.z+i*u.z,o.push(l.x,l.y,l.z)}}function g(){for(let C=1;C<=t;C++)for(let M=1;M<=r;M++){const _=(r+1)*(C-1)+(M-1),E=(r+1)*C+(M-1),R=(r+1)*C+M,A=(r+1)*(C-1)+M;p.push(_,E,A),p.push(E,R,A)}}function w(){for(let C=0;C<=t;C++)for(let M=0;M<=r;M++)f.x=C/t,f.y=M/r,d.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gm(new qp[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class YA extends Kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new se,s=new se;if(e.index!==null){const c=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,a=u.length;f<a;++f){const o=u[f],h=o.start,d=o.count;for(let p=h,y=h+d;p<y;p+=3)for(let x=0;x<3;x++){const g=l.getX(p+x),w=l.getX(p+(x+1)%3);r.fromBufferAttribute(c,g),s.fromBufferAttribute(c,w),hM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const c=e.attributes.position;for(let l=0,u=c.count/3;l<u;l++)for(let f=0;f<3;f++){const a=3*l+f,o=3*l+(f+1)%3;r.fromBufferAttribute(c,a),s.fromBufferAttribute(c,o),hM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function hM(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var fM=Object.freeze({__proto__:null,BoxGeometry:cl,CapsuleGeometry:Im,CircleGeometry:Nm,ConeGeometry:Om,CylinderGeometry:Vc,DodecahedronGeometry:Dm,EdgesGeometry:GA,ExtrudeGeometry:Um,IcosahedronGeometry:Bm,LatheGeometry:tf,OctahedronGeometry:nf,PlaneGeometry:ef,PolyhedronGeometry:qo,RingGeometry:$m,ShapeGeometry:zm,SphereGeometry:rf,TetrahedronGeometry:Hm,TorusGeometry:Wm,TorusKnotGeometry:Vm,TubeGeometry:Gm,WireframeGeometry:YA});class ZA extends Ci{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class QA extends cs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class m_ extends Ci{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JA extends m_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qA extends Ci{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eT extends Ci{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class tT extends Ci{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nT extends Ci{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iT extends Ci{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rT extends Ji{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wa(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function sT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function oT(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Fy(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,c=0;c!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[c++]=n[l+u]}return r}function g_(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let c=s[i];if(c!==void 0)if(Array.isArray(c))do c=s[i],c!==void 0&&(e.push(s.time),t.push.apply(t,c)),s=n[r++];while(s!==void 0);else if(c.toArray!==void 0)do c=s[i],c!==void 0&&(e.push(s.time),c.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do c=s[i],c!==void 0&&(e.push(s.time),t.push(c)),s=n[r++];while(s!==void 0)}function DD(n,e,t,i,r=30){const s=n.clone();s.name=e;const c=[];for(let u=0;u<s.tracks.length;++u){const f=s.tracks[u],a=f.getValueSize(),o=[],h=[];for(let d=0;d<f.times.length;++d){const p=f.times[d]*r;if(!(p<t||p>=i)){o.push(f.times[d]);for(let y=0;y<a;++y)h.push(f.values[d*a+y])}}o.length!==0&&(f.times=Wa(o,f.times.constructor),f.values=Wa(h,f.values.constructor),c.push(f))}s.tracks=c;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function FD(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let c=0;c<r;++c){const l=t.tracks[c],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=n.tracks.find(function(g){return g.name===l.name&&g.ValueTypeName===u});if(f===void 0)continue;let a=0;const o=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=o/3);let h=0;const d=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=l.times.length-1;let y;if(s<=l.times[0]){const g=a,w=o-a;y=l.values.slice(g,w)}else if(s>=l.times[p]){const g=p*o+a,w=g+o-a;y=l.values.slice(g,w)}else{const g=l.createInterpolant(),w=a,C=o-a;g.evaluate(s),y=g.resultBuffer.slice(w,C)}u==="quaternion"&&new Fi().fromArray(y).normalize().conjugate().toArray(y);const x=f.times.length;for(let g=0;g<x;++g){const w=g*d+h;if(u==="quaternion")Fi.multiplyQuaternionsFlat(f.values,w,y,0,f.values,w);else{const C=d-h*2;for(let M=0;M<C;++M)f.values[w+M]-=y[M]}}}return n.blendMode=Xx,n}const UD={convertArray:Wa,isTypedArray:sT,getKeyframeOrder:oT,sortedArray:Fy,flattenJSON:g_,subclip:DD,makeClipAdditive:FD};class sf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let c;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}c=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e>=s)break t}c=i,i=0;break n}break e}for(;i<c;){const l=i+c>>>1;e<t[l]?c=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let c=0;c!==r;++c)t[c]=i[s+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class aT extends sf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$a,endingEnd:$a}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,c=e+1,l=r[s],u=r[c];if(l===void 0)switch(this.getSettings_().endingStart){case za:s=e,l=2*t-i;break;case Rh:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case za:c=e,u=2*i-t;break;case Rh:c=1,u=i+r[1]-r[0];break;default:c=e-1,u=t}const f=(i-t)*.5,a=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(u-i),this._offsetPrev=s*a,this._offsetNext=c*a}interpolate_(e,t,i,r){const s=this.resultBuffer,c=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,a=this._offsetPrev,o=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(r-t),y=p*p,x=y*p,g=-h*x+2*h*y-h*p,w=(1+h)*x+(-1.5-2*h)*y+(-.5+h)*p+1,C=(-1-d)*x+(1.5+d)*y+.5*p,M=d*x-d*y;for(let _=0;_!==l;++_)s[_]=g*c[a+_]+w*c[f+_]+C*c[u+_]+M*c[o+_];return s}}class v_ extends sf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,c=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,a=(i-t)/(r-t),o=1-a;for(let h=0;h!==l;++h)s[h]=c[f+h]*o+c[u+h]*a;return s}}class lT extends sf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class hs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wa(t,this.TimeBufferType),this.values=Wa(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Wa(e.times,Array),values:Wa(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new v_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new aT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ah:t=this.InterpolantFactoryMethodDiscrete;break;case Th:t=this.InterpolantFactoryMethodLinear;break;case Sp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ah;case this.InterpolantFactoryMethodLinear:return Th;case this.InterpolantFactoryMethodSmooth:return Sp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,c=r-1;for(;s!==r&&i[s]<e;)++s;for(;c!==-1&&i[c]>t;)--c;if(++c,s!==0||c!==r){s>=c&&(c=Math.max(c,1),s=c-1);const l=this.getValueSize();this.times=i.slice(s,c),this.values=this.values.slice(s*l,c*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(c!==null&&c>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,c),e=!1;break}c=u}if(r!==void 0&&sT(r))for(let l=0,u=r.length;l!==u;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Sp,s=e.length-1;let c=1;for(let l=1;l<s;++l){let u=!1;const f=e[l],a=e[l+1];if(f!==a&&(l!==1||f!==e[0]))if(r)u=!0;else{const o=l*i,h=o-i,d=o+i;for(let p=0;p!==i;++p){const y=t[o+p];if(y!==t[h+p]||y!==t[d+p]){u=!0;break}}}if(u){if(l!==c){e[c]=e[l];const o=l*i,h=c*i;for(let d=0;d!==i;++d)t[h+d]=t[o+d]}++c}}if(s>0){e[c]=e[s];for(let l=s*i,u=c*i,f=0;f!==i;++f)t[u+f]=t[l+f];++c}return c!==e.length?(this.times=e.slice(0,c),this.values=t.slice(0,c*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}hs.prototype.TimeBufferType=Float32Array;hs.prototype.ValueBufferType=Float32Array;hs.prototype.DefaultInterpolation=Th;class ul extends hs{}ul.prototype.ValueTypeName="bool";ul.prototype.ValueBufferType=Array;ul.prototype.DefaultInterpolation=Ah;ul.prototype.InterpolantFactoryMethodLinear=void 0;ul.prototype.InterpolantFactoryMethodSmooth=void 0;class y_ extends hs{}y_.prototype.ValueTypeName="color";class Bh extends hs{}Bh.prototype.ValueTypeName="number";class cT extends sf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,c=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let f=e*l;for(let a=f+l;f!==a;f+=4)Fi.slerpFlat(s,0,c,f-l,c,f,u);return s}}class Gc extends hs{InterpolantFactoryMethodLinear(e){return new cT(this.times,this.values,this.getValueSize(),e)}}Gc.prototype.ValueTypeName="quaternion";Gc.prototype.DefaultInterpolation=Th;Gc.prototype.InterpolantFactoryMethodSmooth=void 0;class hl extends hs{}hl.prototype.ValueTypeName="string";hl.prototype.ValueBufferType=Array;hl.prototype.DefaultInterpolation=Ah;hl.prototype.InterpolantFactoryMethodLinear=void 0;hl.prototype.InterpolantFactoryMethodSmooth=void 0;class $h extends hs{}$h.prototype.ValueTypeName="vector";class zh{constructor(e,t=-1,i,r=wm){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ar(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let c=0,l=i.length;c!==l;++c)t.push($D(i[c]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,c=i.length;s!==c;++s)t.push(hs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,c=[];for(let l=0;l<s;l++){let u=[],f=[];u.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const a=oT(u);u=Fy(u,1,a),f=Fy(f,1,a),!r&&u[0]===0&&(u.push(s),f.push(f[0])),c.push(new Bh(".morphTargetInfluences["+t[l].name+"]",u,f).scale(1/i))}return new this(e,-1,c)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const f=e[l],a=f.name.match(s);if(a&&a.length>1){const o=a[1];let h=r[o];h||(r[o]=h=[]),h.push(f)}}const c=[];for(const l in r)c.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return c}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(o,h,d,p,y){if(d.length!==0){const x=[],g=[];g_(d,x,g,p),x.length!==0&&y.push(new o(h,x,g))}},r=[],s=e.name||"default",c=e.fps||30,l=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let o=0;o<f.length;o++){const h=f[o].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let y=0;y<h[p].morphTargets.length;y++)d[h[p].morphTargets[y]]=-1;for(const y in d){const x=[],g=[];for(let w=0;w!==h[p].morphTargets.length;++w){const C=h[p];x.push(C.time),g.push(C.morphTarget===y?1:0)}r.push(new Bh(".morphTargetInfluence["+y+"]",x,g))}u=d.length*c}else{const d=".bones["+t[o].name+"]";i($h,d+".position",h,"pos",r),i(Gc,d+".quaternion",h,"rot",r),i($h,d+".scale",h,"scl",r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function BD(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bh;case"vector":case"vector2":case"vector3":case"vector4":return $h;case"color":return y_;case"quaternion":return Gc;case"bool":case"boolean":return ul;case"string":return hl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function $D(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=BD(n.type);if(n.times===void 0){const t=[],i=[];g_(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Gs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class x_{constructor(e,t,i){const r=this;let s=!1,c=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(a){l++,s===!1&&r.onStart!==void 0&&r.onStart(a,c,l),s=!0},this.itemEnd=function(a){c++,r.onProgress!==void 0&&r.onProgress(a,c,l),c===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(a){r.onError!==void 0&&r.onError(a)},this.resolveURL=function(a){return u?u(a):a},this.setURLModifier=function(a){return u=a,this},this.addHandler=function(a,o){return f.push(a,o),this},this.removeHandler=function(a){const o=f.indexOf(a);return o!==-1&&f.splice(o,2),this},this.getHandler=function(a){for(let o=0,h=f.length;o<h;o+=2){const d=f[o],p=f[o+1];if(d.global&&(d.lastIndex=0),d.test(a))return p}return null}}}const uT=new x_;class dr{constructor(e){this.manager=e!==void 0?e:uT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}dr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Fs={};class zD extends Error{constructor(e,t){super(e),this.response=t}}class eo extends dr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Gs.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fs[e]!==void 0){Fs[e].push({onLoad:t,onProgress:i,onError:r});return}Fs[e]=[],Fs[e].push({onLoad:t,onProgress:i,onError:r});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(c).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const a=Fs[e],o=f.body.getReader(),h=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),d=h?parseInt(h):0,p=d!==0;let y=0;const x=new ReadableStream({start(g){w();function w(){o.read().then(({done:C,value:M})=>{if(C)g.close();else{y+=M.byteLength;const _=new ProgressEvent("progress",{lengthComputable:p,loaded:y,total:d});for(let E=0,R=a.length;E<R;E++){const A=a[E];A.onProgress&&A.onProgress(_)}g.enqueue(M),w()}})}}});return new Response(x)}else throw new zD(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(a=>new DOMParser().parseFromString(a,l));case"json":return f.json();default:if(l===void 0)return f.text();{const o=/charset="?([^;"\s]*)"?/i.exec(l),h=o&&o[1]?o[1].toLowerCase():void 0,d=new TextDecoder(h);return f.arrayBuffer().then(p=>d.decode(p))}}}).then(f=>{Gs.add(e,f);const a=Fs[e];delete Fs[e];for(let o=0,h=a.length;o<h;o++){const d=a[o];d.onLoad&&d.onLoad(f)}}).catch(f=>{const a=Fs[e];if(a===void 0)throw this.manager.itemError(e),f;delete Fs[e];for(let o=0,h=a.length;o<h;o++){const d=a[o];d.onError&&d.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class HD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=new eo(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=zh.parse(e[i]);t.push(r)}return t}}class WD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=[],l=new km,u=new eo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let f=0;function a(o){u.load(e[o],function(h){const d=s.parse(h,!0);c[o]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},f+=1,f===6&&(d.mipmapCount===1&&(l.minFilter=On),l.image=c,l.format=d.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let o=0,h=e.length;o<h;++o)a(o);else u.load(e,function(o){const h=s.parse(o,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let p=0;p<d;p++){c[p]={mipmaps:[]};for(let y=0;y<h.mipmapCount;y++)c[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+y]),c[p].format=h.format,c[p].width=h.width,c[p].height=h.height}l.image=c}else l.image.width=h.width,l.image.height=h.height,l.mipmaps=h.mipmaps;h.mipmapCount===1&&(l.minFilter=On),l.format=h.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class Hh extends dr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,c=Gs.get(e);if(c!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(c),s.manager.itemEnd(e)},0),c;const l=Nh("img");function u(){a(),Gs.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(o){a(),r&&r(o),s.manager.itemError(e),s.manager.itemEnd(e)}function a(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class VD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=new Jh;s.colorSpace=ui;const c=new Hh(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let l=0;function u(f){c.load(e[f],function(a){s.images[f]=a,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)u(f);return s}}class GD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=new Ya,l=new eo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let f;try{f=s.parse(u)}catch(a){if(r!==void 0)r(a);else{console.error(a);return}}f.image!==void 0?c.image=f.image:f.data!==void 0&&(c.image.width=f.width,c.image.height=f.height,c.image.data=f.data),c.wrapS=f.wrapS!==void 0?f.wrapS:Di,c.wrapT=f.wrapT!==void 0?f.wrapT:Di,c.magFilter=f.magFilter!==void 0?f.magFilter:On,c.minFilter=f.minFilter!==void 0?f.minFilter:On,c.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?c.colorSpace=f.colorSpace:f.encoding!==void 0&&(c.encoding=f.encoding),f.flipY!==void 0&&(c.flipY=f.flipY),f.format!==void 0&&(c.format=f.format),f.type!==void 0&&(c.type=f.type),f.mipmaps!==void 0&&(c.mipmaps=f.mipmaps,c.minFilter=jo),f.mipmapCount===1&&(c.minFilter=On),f.generateMipmaps!==void 0&&(c.generateMipmaps=f.generateMipmaps),c.needsUpdate=!0,t&&t(c,f)},i,r),c}}class jD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=new An,c=new Hh(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ea extends an{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class hT extends ea{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const jv=new Bt,dM=new se,pM=new se;class __{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new Bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new qh,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;dM.setFromMatrixPosition(e.matrixWorld),t.position.copy(dM),pM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pM),t.updateMatrixWorld(),jv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jv),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(jv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KD extends __{constructor(){super(new Zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Nc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fT extends ea{constructor(e,t,i=0,r=Math.PI/3,s=0,c=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.distance=i,this.angle=r,this.penumbra=s,this.decay=c,this.map=null,this.shadow=new KD}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const mM=new Bt,Du=new se,Kv=new se;class XD extends __{constructor(){super(new Zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new se(1,0,0),new se(-1,0,0),new se(0,0,1),new se(0,0,-1),new se(0,1,0),new se(0,-1,0)],this._cubeUps=[new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,0,1),new se(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Du.setFromMatrixPosition(e.matrixWorld),i.position.copy(Du),Kv.copy(i.position),Kv.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Kv),i.updateMatrixWorld(),r.makeTranslation(-Du.x,-Du.y,-Du.z),mM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mM)}}class dT extends ea{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new XD}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class YD extends __{constructor(){super(new Ho(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pT extends ea{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.shadow=new YD}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mT extends ea{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gT extends ea{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.282095),t.addScaledVector(c[1],.488603*r),t.addScaledVector(c[2],.488603*s),t.addScaledVector(c[3],.488603*i),t.addScaledVector(c[4],1.092548*(i*r)),t.addScaledVector(c[5],1.092548*(r*s)),t.addScaledVector(c[6],.315392*(3*s*s-1)),t.addScaledVector(c[7],1.092548*(i*s)),t.addScaledVector(c[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.886227),t.addScaledVector(c[1],2*.511664*r),t.addScaledVector(c[2],2*.511664*s),t.addScaledVector(c[3],2*.511664*i),t.addScaledVector(c[4],2*.429043*i*r),t.addScaledVector(c[5],2*.429043*r*s),t.addScaledVector(c[6],.743125*s*s-.247708),t.addScaledVector(c[7],2*.429043*i*s),t.addScaledVector(c[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class yT extends ea{constructor(e=new vT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jm extends dr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,c=new eo(s.manager);c.setPath(s.path),c.setRequestHeader(s.requestHeader),c.setWithCredentials(s.withCredentials),c.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=jm.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const c=e.uniforms[s];switch(r.uniforms[s]={},c.type){case"t":r.uniforms[s].value=i(c.value);break;case"c":r.uniforms[s].value=new gt().setHex(c.value);break;case"v2":r.uniforms[s].value=new Ge().fromArray(c.value);break;case"v3":r.uniforms[s].value=new se().fromArray(c.value);break;case"v4":r.uniforms[s].value=new ln().fromArray(c.value);break;case"m3":r.uniforms[s].value=new Zt().fromArray(c.value);break;case"m4":r.uniforms[s].value=new Bt().fromArray(c.value);break;default:r.uniforms[s].value=c.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ge().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:ZA,SpriteMaterial:o_,RawShaderMaterial:QA,ShaderMaterial:cs,PointsMaterial:l_,MeshPhysicalMaterial:JA,MeshStandardMaterial:m_,MeshPhongMaterial:qA,MeshToonMaterial:eT,MeshNormalMaterial:tT,MeshLambertMaterial:nT,MeshDepthMaterial:i_,MeshDistanceMaterial:r_,MeshBasicMaterial:Jo,MeshMatcapMaterial:iT,LineDashedMaterial:rT,LineBasicMaterial:Ji,Material:Ci};return new t[e]}}class Uy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xT extends Kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _T extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=new eo(s.manager);c.setPath(s.path),c.setRequestHeader(s.requestHeader),c.setWithCredentials(s.withCredentials),c.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(d,p){if(t[p]!==void 0)return t[p];const x=d.interleavedBuffers[p],g=s(d,x.buffer),w=dc(x.type,g),C=new Rm(w,x.stride);return C.uuid=x.uuid,t[p]=C,C}function s(d,p){if(i[p]!==void 0)return i[p];const x=d.arrayBuffers[p],g=new Uint32Array(x).buffer;return i[p]=g,g}const c=e.isInstancedBufferGeometry?new xT:new Kt,l=e.data.index;if(l!==void 0){const d=dc(l.type,l.array);c.setIndex(new dn(d,1))}const u=e.data.attributes;for(const d in u){const p=u[d];let y;if(p.isInterleavedBufferAttribute){const x=r(e.data,p.data);y=new rl(x,p.itemSize,p.offset,p.normalized)}else{const x=dc(p.type,p.array),g=p.isInstancedBufferAttribute?Dc:dn;y=new g(x,p.itemSize,p.normalized)}p.name!==void 0&&(y.name=p.name),p.usage!==void 0&&y.setUsage(p.usage),c.setAttribute(d,y)}const f=e.data.morphAttributes;if(f)for(const d in f){const p=f[d],y=[];for(let x=0,g=p.length;x<g;x++){const w=p[x];let C;if(w.isInterleavedBufferAttribute){const M=r(e.data,w.data);C=new rl(M,w.itemSize,w.offset,w.normalized)}else{const M=dc(w.type,w.array);C=new dn(M,w.itemSize,w.normalized)}w.name!==void 0&&(C.name=w.name),y.push(C)}c.morphAttributes[d]=y}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const o=e.data.groups||e.data.drawcalls||e.data.offsets;if(o!==void 0)for(let d=0,p=o.length;d!==p;++d){const y=o[d];c.addGroup(y.start,y.count,y.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new se;h.center!==void 0&&d.fromArray(h.center),c.boundingSphere=new Ui(d,h.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}}class ZD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=this.path===""?Uy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const l=new eo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let f=null;try{f=JSON.parse(u)}catch(o){r!==void 0&&r(o),console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message);return}const a=f.metadata;if(a===void 0||a.type===void 0||a.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Uy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new eo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const c=await s.loadAsync(e,t),l=JSON.parse(c),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),c=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,c),u=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,u,l,i),a=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,a),t!==void 0){let o=!1;for(const h in c)if(c[h].data instanceof HTMLImageElement){o=!0;break}o===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),c=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,c),u=this.parseObject(e.object,r,l,c,t),f=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,f),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Za().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,c=e.length;s<c;s++){const l=new Lm().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new _T;for(let s=0,c=e.length;s<c;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in fM?l=fM[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new jm;s.setTextures(t);for(let c=0,l=e.length;c<l;c++){const u=e[c];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=zh.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function c(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return c(a)}else return u.data?{data:dc(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new x_(t);s=new Hh(u),s.setCrossOrigin(this.crossOrigin);for(let f=0,a=e.length;f<a;f++){const o=e[f],h=o.url;if(Array.isArray(h)){const d=[];for(let p=0,y=h.length;p<y;p++){const x=h[p],g=l(x);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new Ya(g.data,g.width,g.height)))}r[o.uuid]=new Ha(d)}else{const d=l(o.url);r[o.uuid]=new Ha(d)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(c){if(typeof c=="string"){const l=c,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return c.data?{data:dc(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){r=new Hh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let c=0,l=e.length;c<l;c++){const u=e[c],f=u.url;if(Array.isArray(f)){const a=[];for(let o=0,h=f.length;o<h;o++){const d=f[o],p=await s(d);p!==null&&(p instanceof HTMLImageElement?a.push(p):a.push(new Ya(p.data,p.width,p.height)))}i[u.uuid]=new Ha(a)}else{const a=await s(u.url);i[u.uuid]=new Ha(a)}}}return i}parseTextures(e,t){function i(s,c){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),c[s])}const r={};if(e!==void 0)for(let s=0,c=e.length;s<c;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],f=u.data;let a;Array.isArray(f)?(a=new Jh,f.length===6&&(a.needsUpdate=!0)):(f&&f.data?a=new Ya:a=new An,f&&(a.needsUpdate=!0)),a.source=u,a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.mapping!==void 0&&(a.mapping=i(l.mapping,QD)),l.channel!==void 0&&(a.channel=l.channel),l.offset!==void 0&&a.offset.fromArray(l.offset),l.repeat!==void 0&&a.repeat.fromArray(l.repeat),l.center!==void 0&&a.center.fromArray(l.center),l.rotation!==void 0&&(a.rotation=l.rotation),l.wrap!==void 0&&(a.wrapS=i(l.wrap[0],gM),a.wrapT=i(l.wrap[1],gM)),l.format!==void 0&&(a.format=l.format),l.internalFormat!==void 0&&(a.internalFormat=l.internalFormat),l.type!==void 0&&(a.type=l.type),l.colorSpace!==void 0&&(a.colorSpace=l.colorSpace),l.encoding!==void 0&&(a.encoding=l.encoding),l.minFilter!==void 0&&(a.minFilter=i(l.minFilter,vM)),l.magFilter!==void 0&&(a.magFilter=i(l.magFilter,vM)),l.anisotropy!==void 0&&(a.anisotropy=l.anisotropy),l.flipY!==void 0&&(a.flipY=l.flipY),l.generateMipmaps!==void 0&&(a.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(a.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(a.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(a.compareFunction=l.compareFunction),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}return r}parseObject(e,t,i,r,s){let c;function l(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function u(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let p=0,y=h.length;p<y;p++){const x=h[p];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),d.push(i[x])}return d}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function f(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let a,o;switch(e.type){case"Scene":c=new Jp,e.background!==void 0&&(Number.isInteger(e.background)?c.background=new gt(e.background):c.background=f(e.background)),e.environment!==void 0&&(c.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?c.fog=new Tm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(c.fog=new Am(e.fog.color,e.fog.density)),e.fog.name!==""&&(c.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(c.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(c.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":c=new Zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(c.focus=e.focus),e.zoom!==void 0&&(c.zoom=e.zoom),e.filmGauge!==void 0&&(c.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(c.filmOffset=e.filmOffset),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"OrthographicCamera":c=new Ho(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(c.zoom=e.zoom),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"AmbientLight":c=new mT(e.color,e.intensity);break;case"DirectionalLight":c=new pT(e.color,e.intensity);break;case"PointLight":c=new dT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":c=new gT(e.color,e.intensity,e.width,e.height);break;case"SpotLight":c=new fT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":c=new hT(e.color,e.groundColor,e.intensity);break;case"LightProbe":c=new yT().fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=u(e.material),c=new OA(a,o),e.bindMode!==void 0&&(c.bindMode=e.bindMode),e.bindMatrix!==void 0&&c.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(c.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=u(e.material),c=new fi(a,o);break;case"InstancedMesh":a=l(e.geometry),o=u(e.material);const h=e.count,d=e.instanceMatrix,p=e.instanceColor;c=new DA(a,o,h),c.instanceMatrix=new Dc(new Float32Array(d.array),16),p!==void 0&&(c.instanceColor=new Dc(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":a=l(e.geometry),o=u(e.material),c=new FA(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,o),c.geometry=a,c.perObjectFrustumCulled=e.perObjectFrustumCulled,c.sortObjects=e.sortObjects,c._drawRanges=e.drawRanges,c._reservedRanges=e.reservedRanges,c._visibility=e.visibility,c._active=e.active,c._bounds=e.bounds.map(y=>{const x=new Yi;x.min.fromArray(y.boxMin),x.max.fromArray(y.boxMax);const g=new Ui;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:x,sphereInitialized:y.sphereInitialized,sphere:g}}),c._maxGeometryCount=e.maxGeometryCount,c._maxVertexCount=e.maxVertexCount,c._maxIndexCount=e.maxIndexCount,c._geometryInitialized=e.geometryInitialized,c._geometryCount=e.geometryCount,c._matricesTexture=f(e.matricesTexture.uuid);break;case"LOD":c=new NA;break;case"Line":c=new Ko(l(e.geometry),u(e.material));break;case"LineLoop":c=new UA(l(e.geometry),u(e.material));break;case"LineSegments":c=new As(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":c=new BA(l(e.geometry),u(e.material));break;case"Sprite":c=new IA(u(e.material));break;case"Group":c=new gc;break;case"Bone":c=new a_;break;default:c=new an}if(c.uuid=e.uuid,e.name!==void 0&&(c.name=e.name),e.matrix!==void 0?(c.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=e.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(e.position!==void 0&&c.position.fromArray(e.position),e.rotation!==void 0&&c.rotation.fromArray(e.rotation),e.quaternion!==void 0&&c.quaternion.fromArray(e.quaternion),e.scale!==void 0&&c.scale.fromArray(e.scale)),e.up!==void 0&&c.up.fromArray(e.up),e.castShadow!==void 0&&(c.castShadow=e.castShadow),e.receiveShadow!==void 0&&(c.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(c.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(c.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(c.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(c.visible=e.visible),e.frustumCulled!==void 0&&(c.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(c.renderOrder=e.renderOrder),e.userData!==void 0&&(c.userData=e.userData),e.layers!==void 0&&(c.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)c.add(this.parseObject(h[d],t,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const p=h[d];c.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(c.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const p=h[d],y=c.getObjectByProperty("uuid",p.object);y!==void 0&&c.addLevel(y,p.distance,p.hysteresis)}}return c}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const QD={UVMapping:_m,CubeReflectionMapping:qs,CubeRefractionMapping:Go,EquirectangularReflectionMapping:Mh,EquirectangularRefractionMapping:Ch,CubeUVReflectionMapping:Hc},gM={RepeatWrapping:Eh,ClampToEdgeWrapping:Di,MirroredRepeatWrapping:bh},vM={NearestFilter:Xn,NearestMipmapNearestFilter:Yp,NearestMipmapLinearFilter:eh,LinearFilter:On,LinearMipmapNearestFilter:$x,LinearMipmapLinearFilter:jo};class JD extends dr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,c=Gs.get(e);if(c!==void 0){if(s.manager.itemStart(e),c.then){c.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){t&&t(c),s.manager.itemEnd(e)},0),c}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Gs.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){r&&r(f),Gs.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Gs.add(e,u),s.manager.itemStart(e)}}let Xd;class S_{static getContext(){return Xd===void 0&&(Xd=new(window.AudioContext||window.webkitAudioContext)),Xd}static setContext(e){Xd=e}}class qD extends dr{constructor(e){super(e)}load(e,t,i,r){const s=this,c=new eo(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{const f=u.slice(0);S_.getContext().decodeAudioData(f,function(o){t(o)}).catch(l)}catch(f){l(f)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const yM=new Bt,xM=new Bt,Ea=new Bt;class eF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ea.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,c=t.near*Math.tan(Ka*t.fov*.5)/t.zoom;let l,u;xM.elements[12]=-r,yM.elements[12]=r,l=-c*t.aspect+s,u=c*t.aspect+s,Ea.elements[0]=2*t.near/(u-l),Ea.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Ea),l=-c*t.aspect-s,u=c*t.aspect-s,Ea.elements[0]=2*t.near/(u-l),Ea.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Ea)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(xM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yM)}}class w_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_M(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_M();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _M(){return(typeof performance>"u"?Date:performance).now()}const ba=new se,SM=new Fi,tF=new se,Aa=new se;class nF extends an{constructor(){super(),this.type="AudioListener",this.context=S_.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new w_}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ba,SM,tF),Aa.set(0,0,-1).applyQuaternion(SM),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ba.x,r),t.positionY.linearRampToValueAtTime(ba.y,r),t.positionZ.linearRampToValueAtTime(ba.z,r),t.forwardX.linearRampToValueAtTime(Aa.x,r),t.forwardY.linearRampToValueAtTime(Aa.y,r),t.forwardZ.linearRampToValueAtTime(Aa.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ba.x,ba.y,ba.z),t.setOrientation(Aa.x,Aa.y,Aa.z,i.x,i.y,i.z)}}class ST extends an{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ta=new se,wM=new Fi,iF=new se,Ra=new se;class rF extends ST{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ta,wM,iF),Ra.set(0,0,1).applyQuaternion(wM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ta.x,i),t.positionY.linearRampToValueAtTime(Ta.y,i),t.positionZ.linearRampToValueAtTime(Ta.z,i),t.orientationX.linearRampToValueAtTime(Ra.x,i),t.orientationY.linearRampToValueAtTime(Ra.y,i),t.orientationZ.linearRampToValueAtTime(Ra.z,i)}else t.setPosition(Ta.x,Ta.y,Ta.z),t.setOrientation(Ra.x,Ra.y,Ra.z)}}class sF{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class wT{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,c;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let c=this.cumulativeWeight;if(c===0){for(let l=0;l!==r;++l)i[s+l]=i[l];c=t}else{c+=t;const l=t/c;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,c=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}c>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,f=t+t;u!==f;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,c=r;s!==c;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let c=0;c!==s;++c)e[t+c]=e[i+c]}_slerp(e,t,i,r){Fi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const c=this._workIndex*s;Fi.multiplyQuaternionsFlat(e,c,e,t,e,i),Fi.slerpFlat(e,t,e,t,e,c,r)}_lerp(e,t,i,r,s){const c=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*c+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let c=0;c!==s;++c){const l=t+c;e[l]=e[l]+e[i+c]*r}}}const M_="\\[\\]\\.:\\/",oF=new RegExp("["+M_+"]","g"),C_="[^"+M_+"]",aF="[^"+M_.replace("\\.","")+"]",lF=/((?:WC+[\/:])*)/.source.replace("WC",C_),cF=/(WCOD+)?/.source.replace("WCOD",aF),uF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",C_),hF=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",C_),fF=new RegExp("^"+lF+cF+uF+hF+"$"),dF=["material","materials","bones","map"];class pF{constructor(e,t,i){const r=i||nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class nn{constructor(e,t,i){this.path=t,this.parsedPath=i||nn.parseTrackName(t),this.node=nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new nn.Composite(e,t,i):new nn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oF,"")}static parseTrackName(e){const t=fF.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);dF.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let c=0;c<s.length;c++){const l=s[c];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let a=0;a<e.length;a++)if(e[a].name===f){f=a;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const c=e[r];if(c===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=s}else c.fromArray!==void 0&&c.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(u=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nn.Composite=pF;nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nn.prototype.GetterByBindingType=[nn.prototype._getValue_direct,nn.prototype._getValue_array,nn.prototype._getValue_arrayElement,nn.prototype._getValue_toArray];nn.prototype.SetterByBindingTypeAndVersioning=[[nn.prototype._setValue_direct,nn.prototype._setValue_direct_setNeedsUpdate,nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_array,nn.prototype._setValue_array_setNeedsUpdate,nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_arrayElement,nn.prototype._setValue_arrayElement_setNeedsUpdate,nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_fromArray,nn.prototype._setValue_fromArray_setNeedsUpdate,nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mF{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ar(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,c=s.length;let l,u=e.length,f=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const h=arguments[a],d=h.uuid;let p=t[d];if(p===void 0){p=u++,t[d]=p,e.push(h);for(let y=0,x=c;y!==x;++y)s[y].push(new nn(h,i[y],r[y]))}else if(p<f){l=e[p];const y=--f,x=e[y];t[x.uuid]=p,e[p]=x,t[d]=y,e[y]=h;for(let g=0,w=c;g!==w;++g){const C=s[g],M=C[y];let _=C[p];C[p]=M,_===void 0&&(_=new nn(h,i[g],r[g])),C[y]=_}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const u=arguments[c],f=u.uuid,a=t[f];if(a!==void 0&&a>=s){const o=s++,h=e[o];t[h.uuid]=a,e[a]=h,t[f]=o,e[o]=u;for(let d=0,p=r;d!==p;++d){const y=i[d],x=y[o],g=y[a];y[a]=x,y[o]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,c=e.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],a=f.uuid,o=t[a];if(o!==void 0)if(delete t[a],o<s){const h=--s,d=e[h],p=--c,y=e[p];t[d.uuid]=o,e[o]=d,t[y.uuid]=h,e[h]=y,e.pop();for(let x=0,g=r;x!==g;++x){const w=i[x],C=w[h],M=w[p];w[o]=C,w[h]=M,w.pop()}}else{const h=--c,d=e[h];h>0&&(t[d.uuid]=o),e[o]=d,e.pop();for(let p=0,y=r;p!==y;++p){const x=i[p];x[o]=x[h],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const c=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,a=this.nCachedObjects_,o=new Array(f);r=s.length,i[e]=r,c.push(e),l.push(t),s.push(o);for(let h=a,d=u.length;h!==d;++h){const p=u[h];o[h]=new nn(p,e,t)}return o}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,c=this._bindings,l=c.length-1,u=c[l],f=e[l];t[f]=i,c[i]=u,c.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class MT{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,c=s.length,l=new Array(c),u={endingStart:$a,endingEnd:$a};for(let f=0;f!==c;++f){const a=s[f].createInterpolant(null);l[f]=a,a.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,c=s/r,l=r/s;e.warp(1,c,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,c=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=s,u[1]=s+i,f[0]=e/c,f[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const c=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Xx:for(let a=0,o=u.length;a!==o;++a)u[a].evaluate(c),f[a].accumulateAdditive(l);break;case wm:default:for(let a=0,o=u.length;a!==o;++a)u[a].evaluate(c),f[a].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const c=i===rA;if(e===0)return s===-1?r:c&&(s&1)===1?t-r:r;if(i===nA){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const f=e<0;this._setEndings(f,!f,c)}else this._setEndings(!1,!1,c);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(c&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=za,r.endingEnd=za):(e?r.endingStart=this.zeroSlopeAtStart?za:$a:r.endingStart=Rh,t?r.endingEnd=this.zeroSlopeAtEnd?za:$a:r.endingEnd=Rh)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let c=this._weightInterpolant;c===null&&(c=r._lendControlInterpolant(),this._weightInterpolant=c);const l=c.parameterPositions,u=c.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const gF=new Float32Array(1);class vF extends no{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,c=e._propertyBindings,l=e._interpolants,u=i.uuid,f=this._bindingsByRootAndName;let a=f[u];a===void 0&&(a={},f[u]=a);for(let o=0;o!==s;++o){const h=r[o],d=h.name;let p=a[d];if(p!==void 0)++p.referenceCount,c[o]=p;else{if(p=c[o],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,u,d));continue}const y=t&&t._propertyBindings[o].binding.parsedPath;p=new wT(nn.create(i,d,y),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,u,d),c[o]=p}l[o].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let c=s[t];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=c;else{const l=c.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),c.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,c=this._actionsByClip,l=c[s],u=l.knownActions,f=u[u.length-1],a=e._byClipCacheIndex;f._byClipCacheIndex=a,u[a]=f,u.pop(),e._byClipCacheIndex=null;const o=l.actionByRoot,h=(e._localRoot||this._root).uuid;delete o[h],u.length===0&&delete c[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let c=r[t];c===void 0&&(c={},r[t]=c),c[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,c=this._bindingsByRootAndName,l=c[r],u=t[t.length-1],f=e._cacheIndex;u._cacheIndex=f,t[f]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete c[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new v_(new Float32Array(2),new Float32Array(2),1,gF),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let c=typeof e=="string"?zh.findByName(r,e):e;const l=c!==null?c.uuid:e,u=this._actionsByClip[l];let f=null;if(i===void 0&&(c!==null?i=c.blendMode:i=wm),u!==void 0){const o=u.actionByRoot[s];if(o!==void 0&&o.blendMode===i)return o;f=u.knownActions[0],c===null&&(c=f._clip)}if(c===null)return null;const a=new MT(this,c,t,i);return this._bindAction(a,f),this._addInactiveAction(a,l,s),a}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?zh.findByName(i,e):e,c=s?s.uuid:e,l=this._actionsByClip[c];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),c=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,c);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const c=s.knownActions;for(let l=0,u=c.length;l!==u;++l){const f=c[l];this._deactivateAction(f);const a=f._cacheIndex,o=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,o._cacheIndex=a,t[a]=o,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const c in i){const l=i[c].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const c in s){const l=s[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class E_{constructor(e){this.value=e}clone(){return new E_(this.value.clone===void 0?this.value:this.value.clone())}}let yF=0;class xF extends no{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:yF++}),this.name="",this.usage=Ih,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let c=0;c<s.length;c++)this.uniforms.push(s[c].clone())}return this}clone(){return new this.constructor().copy(this)}}class _F extends Rm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class SF{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class CT{constructor(e,t,i=0,r=1/0){this.ray=new ll(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Xa,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return By(e,this,i,t),i.sort(MM),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)By(e[r],this,i,t);return i.sort(MM),i}}function MM(n,e){return n.distance-e.distance}function By(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,c=r.length;s<c;s++)By(r[s],e,t,!0)}}class $y{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Wn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wF{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const CM=new Ge;class MF{constructor(e=new Ge(1/0,1/0),t=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=CM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,CM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const EM=new se,Yd=new se;class CF{constructor(e=new se,t=new se){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){EM.subVectors(e,this.start),Yd.subVectors(this.end,this.start);const i=Yd.dot(Yd);let s=Yd.dot(EM)/i;return t&&(s=Wn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const bM=new se;class EF extends an{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Kt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,l=1,u=32;c<u;c++,l++){const f=c/u*Math.PI*2,a=l/u*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Mt(r,3));const s=new Ji({fog:!1,toneMapped:!1});this.cone=new As(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),bM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Mo=new se,Zd=new Bt,Xv=new Bt;class bF extends As{constructor(e){const t=ET(e),i=new Kt,r=[],s=[],c=new gt(0,0,1),l=new gt(0,1,0);for(let f=0;f<t.length;f++){const a=t[f];a.parent&&a.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(c.r,c.g,c.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new Mt(r,3)),i.setAttribute("color",new Mt(s,3));const u=new Ji({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Xv.copy(this.root.matrixWorld).invert();for(let s=0,c=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Zd.multiplyMatrices(Xv,l.matrixWorld),Mo.setFromMatrixPosition(Zd),r.setXYZ(c,Mo.x,Mo.y,Mo.z),Zd.multiplyMatrices(Xv,l.parent.matrixWorld),Mo.setFromMatrixPosition(Zd),r.setXYZ(c+1,Mo.x,Mo.y,Mo.z),c+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ET(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,ET(n.children[t]));return e}class AF extends fi{constructor(e,t,i){const r=new rf(t,4,2),s=new Jo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const TF=new se,AM=new gt,TM=new gt;class RF extends an{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new nf(t);r.rotateY(Math.PI*.5),this.material=new Jo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),c=new Float32Array(s.count*3);r.setAttribute("color",new dn(c,3)),this.add(new fi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");AM.copy(this.light.color),TM.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?AM:TM;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(TF.setFromMatrixPosition(this.light.matrixWorld).negate())}}class LF extends As{constructor(e=10,t=10,i=4473924,r=8947848){i=new gt(i),r=new gt(r);const s=t/2,c=e/t,l=e/2,u=[],f=[];for(let h=0,d=0,p=-l;h<=t;h++,p+=c){u.push(-l,0,p,l,0,p),u.push(p,0,-l,p,0,l);const y=h===s?i:r;y.toArray(f,d),d+=3,y.toArray(f,d),d+=3,y.toArray(f,d),d+=3,y.toArray(f,d),d+=3}const a=new Kt;a.setAttribute("position",new Mt(u,3)),a.setAttribute("color",new Mt(f,3));const o=new Ji({vertexColors:!0,toneMapped:!1});super(a,o),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kF extends As{constructor(e=10,t=16,i=8,r=64,s=4473924,c=8947848){s=new gt(s),c=new gt(c);const l=[],u=[];if(t>1)for(let o=0;o<t;o++){const h=o/t*(Math.PI*2),d=Math.sin(h)*e,p=Math.cos(h)*e;l.push(0,0,0),l.push(d,0,p);const y=o&1?s:c;u.push(y.r,y.g,y.b),u.push(y.r,y.g,y.b)}for(let o=0;o<i;o++){const h=o&1?s:c,d=e-e/i*o;for(let p=0;p<r;p++){let y=p/r*(Math.PI*2),x=Math.sin(y)*d,g=Math.cos(y)*d;l.push(x,0,g),u.push(h.r,h.g,h.b),y=(p+1)/r*(Math.PI*2),x=Math.sin(y)*d,g=Math.cos(y)*d,l.push(x,0,g),u.push(h.r,h.g,h.b)}}const f=new Kt;f.setAttribute("position",new Mt(l,3)),f.setAttribute("color",new Mt(u,3));const a=new Ji({vertexColors:!0,toneMapped:!1});super(f,a),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const RM=new se,Qd=new se,LM=new se;class PF extends an{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Kt;r.setAttribute("position",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ji({fog:!1,toneMapped:!1});this.lightPlane=new Ko(r,s),this.add(this.lightPlane),r=new Kt,r.setAttribute("position",new Mt([0,0,0,0,0,1],3)),this.targetLine=new Ko(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),RM.setFromMatrixPosition(this.light.matrixWorld),Qd.setFromMatrixPosition(this.light.target.matrixWorld),LM.subVectors(Qd,RM),this.lightPlane.lookAt(Qd),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qd),this.targetLine.scale.z=LM.length()}}const Jd=new se,zn=new Qh;class IF extends As{constructor(e){const t=new Kt,i=new Ji({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],c={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(p,y){u(p),u(y)}function u(p){r.push(0,0,0),s.push(0,0,0),c[p]===void 0&&(c[p]=[]),c[p].push(r.length/3-1)}t.setAttribute("position",new Mt(r,3)),t.setAttribute("color",new Mt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();const f=new gt(16755200),a=new gt(16711680),o=new gt(43775),h=new gt(16777215),d=new gt(3355443);this.setColors(f,a,o,h,d)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Kn("c",t,e,zn,0,0,-1),Kn("t",t,e,zn,0,0,1),Kn("n1",t,e,zn,-i,-r,-1),Kn("n2",t,e,zn,i,-r,-1),Kn("n3",t,e,zn,-i,r,-1),Kn("n4",t,e,zn,i,r,-1),Kn("f1",t,e,zn,-i,-r,1),Kn("f2",t,e,zn,i,-r,1),Kn("f3",t,e,zn,-i,r,1),Kn("f4",t,e,zn,i,r,1),Kn("u1",t,e,zn,i*.7,r*1.1,-1),Kn("u2",t,e,zn,-i*.7,r*1.1,-1),Kn("u3",t,e,zn,0,r*2,-1),Kn("cf1",t,e,zn,-i,0,1),Kn("cf2",t,e,zn,i,0,1),Kn("cf3",t,e,zn,0,-r,1),Kn("cf4",t,e,zn,0,r,1),Kn("cn1",t,e,zn,-i,0,-1),Kn("cn2",t,e,zn,i,0,-1),Kn("cn3",t,e,zn,0,-r,-1),Kn("cn4",t,e,zn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kn(n,e,t,i,r,s,c){Jd.set(r,s,c).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute("position");for(let f=0,a=l.length;f<a;f++)u.setXYZ(l[f],Jd.x,Jd.y,Jd.z)}}const qd=new Yi;class NF extends As{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Kt;s.setIndex(new dn(i,1)),s.setAttribute("position",new dn(r,3)),super(s,new Ji({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&qd.setFromObject(this.object),qd.isEmpty())return;const t=qd.min,i=qd.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class OF extends As{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Kt;s.setIndex(new dn(i,1)),s.setAttribute("position",new Mt(r,3)),super(s,new Ji({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class DF extends Ko{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],c=new Kt;c.setAttribute("position",new Mt(s,3)),c.computeBoundingSphere(),super(c,new Ji({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Kt;u.setAttribute("position",new Mt(l,3)),u.computeBoundingSphere(),this.add(new fi(u,new Jo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const kM=new se;let ep,Yv;class FF extends an{constructor(e=new se(0,0,1),t=new se(0,0,0),i=1,r=16776960,s=i*.2,c=s*.2){super(),this.type="ArrowHelper",ep===void 0&&(ep=new Kt,ep.setAttribute("position",new Mt([0,0,0,0,1,0],3)),Yv=new Vc(0,.5,1,5,1),Yv.translate(0,-.5,0)),this.position.copy(t),this.line=new Ko(ep,new Ji({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fi(Yv,new Jo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,c)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(kM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class UF extends As{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Kt;r.setAttribute("position",new Mt(t,3)),r.setAttribute("color",new Mt(i,3));const s=new Ji({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new gt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BF{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Oh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,c){return this.currentPath.bezierCurveTo(e,t,i,r,s,c),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let C=0,M=g.length;C<M;C++){const _=g[C],E=new Za;E.curves=_.curves,w.push(E)}return w}function i(g,w){const C=w.length;let M=!1;for(let _=C-1,E=0;E<C;_=E++){let R=w[_],A=w[E],T=A.x-R.x,S=A.y-R.y;if(Math.abs(S)>Number.EPSILON){if(S<0&&(R=w[E],T=-T,A=w[_],S=-S),g.y<R.y||g.y>A.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const I=S*(g.x-R.x)-T*(g.y-R.y);if(I===0)return!0;if(I<0)continue;M=!M}}else{if(g.y!==R.y)continue;if(A.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=A.x)return!0}}return M}const r=Es.isClockWise,s=this.subPaths;if(s.length===0)return[];let c,l,u;const f=[];if(s.length===1)return l=s[0],u=new Za,u.curves=l.curves,f.push(u),f;let a=!r(s[0].getPoints());a=e?!a:a;const o=[],h=[];let d=[],p=0,y;h[p]=void 0,d[p]=[];for(let g=0,w=s.length;g<w;g++)l=s[g],y=l.getPoints(),c=r(y),c=e?!c:c,c?(!a&&h[p]&&p++,h[p]={s:new Za,p:y},h[p].s.curves=l.curves,a&&p++,d[p]=[]):d[p].push({h:l,p:y[0]});if(!h[0])return t(s);if(h.length>1){let g=!1,w=0;for(let C=0,M=h.length;C<M;C++)o[C]=[];for(let C=0,M=h.length;C<M;C++){const _=d[C];for(let E=0;E<_.length;E++){const R=_[E];let A=!0;for(let T=0;T<h.length;T++)i(R.p,h[T].p)&&(C!==T&&w++,A?(A=!1,o[T].push(R)):g=!0);A&&o[C].push(R)}}w>0&&g===!1&&(d=o)}let x;for(let g=0,w=h.length;g<w;g++){u=h[g].s,f.push(u),x=d[g];for(let C=0,M=x.length;C<M;C++)u.holes.push(x[C].h)}return f}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ym}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ym);const $F=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Bx,AddEquation:To,AddOperation:zb,AdditiveAnimationBlendMode:Xx,AdditiveBlending:J0,AgXToneMapping:jb,AlphaFormat:Zb,AlwaysCompare:pA,AlwaysDepth:Nb,AlwaysStencilFunc:Ry,AmbientLight:mT,AnimationAction:MT,AnimationClip:zh,AnimationLoader:HD,AnimationMixer:vF,AnimationObjectGroup:mF,AnimationUtils:UD,ArcCurve:$A,ArrayCamera:LA,ArrowHelper:FF,AttachedBindMode:iy,Audio:ST,AudioAnalyser:sF,AudioContext:S_,AudioListener:nF,AudioLoader:qD,AxesHelper:UF,BackSide:Xi,BasicDepthPacking:sA,BasicShadowMap:gb,BatchedMesh:FA,Bone:a_,BooleanKeyframeTrack:ul,Box2:MF,Box3:Yi,Box3Helper:OF,BoxGeometry:cl,BoxHelper:NF,BufferAttribute:dn,BufferGeometry:Kt,BufferGeometryLoader:_T,ByteType:Xb,Cache:Gs,Camera:Qh,CameraHelper:IF,CanvasTexture:lD,CapsuleGeometry:Im,CatmullRomCurve3:zA,CineonToneMapping:Vb,CircleGeometry:Nm,ClampToEdgeWrapping:Di,Clock:w_,Color:gt,ColorKeyframeTrack:y_,ColorManagement:hn,CompressedArrayTexture:oD,CompressedCubeTexture:aD,CompressedTexture:km,CompressedTextureLoader:WD,ConeGeometry:Om,ConstantAlphaFactor:kb,ConstantColorFactor:Rb,CubeCamera:SA,CubeReflectionMapping:qs,CubeRefractionMapping:Go,CubeTexture:Jh,CubeTextureLoader:VD,CubeUVReflectionMapping:Hc,CubicBezierCurve:u_,CubicBezierCurve3:HA,CubicInterpolant:aT,CullFaceBack:Q0,CullFaceFront:mb,CullFaceFrontBack:Y2,CullFaceNone:pb,Curve:us,CurvePath:VA,CustomBlending:vb,CustomToneMapping:Gb,CylinderGeometry:Vc,Cylindrical:wF,Data3DTexture:qx,DataArrayTexture:Cm,DataTexture:Ya,DataTextureLoader:GD,DataUtils:sP,DecrementStencilOp:ak,DecrementWrapStencilOp:ck,DefaultLoadingManager:uT,DepthFormat:$o,DepthStencilFormat:il,DepthTexture:Em,DetachedBindMode:Kb,DirectionalLight:pT,DirectionalLightHelper:PF,DiscreteInterpolant:lT,DisplayP3ColorSpace:Mm,DodecahedronGeometry:Dm,DoubleSide:rs,DstAlphaFactor:Cb,DstColorFactor:bb,DynamicCopyUsage:Ck,DynamicDrawUsage:yk,DynamicReadUsage:Sk,EdgesGeometry:GA,EllipseCurve:Pm,EqualCompare:uA,EqualDepth:Db,EqualStencilFunc:dk,EquirectangularReflectionMapping:Mh,EquirectangularRefractionMapping:Ch,Euler:Zh,EventDispatcher:no,ExtrudeGeometry:Um,FileLoader:eo,Float16BufferAttribute:hP,Float32BufferAttribute:Mt,Float64BufferAttribute:fP,FloatType:Hr,Fog:Tm,FogExp2:Am,FramebufferTexture:sD,FrontSide:Js,Frustum:qh,GLBufferAttribute:SF,GLSL1:bk,GLSL3:Ly,GreaterCompare:hA,GreaterDepth:Ub,GreaterEqualCompare:dA,GreaterEqualDepth:Fb,GreaterEqualStencilFunc:vk,GreaterStencilFunc:mk,GridHelper:LF,Group:gc,HalfFloatType:nl,HemisphereLight:hT,HemisphereLightHelper:RF,IcosahedronGeometry:Bm,ImageBitmapLoader:JD,ImageLoader:Hh,ImageUtils:Jx,IncrementStencilOp:ok,IncrementWrapStencilOp:lk,InstancedBufferAttribute:Dc,InstancedBufferGeometry:xT,InstancedInterleavedBuffer:_F,InstancedMesh:DA,Int16BufferAttribute:cP,Int32BufferAttribute:uP,Int8BufferAttribute:oP,IntType:zx,InterleavedBuffer:Rm,InterleavedBufferAttribute:rl,Interpolant:sf,InterpolateDiscrete:Ah,InterpolateLinear:Th,InterpolateSmooth:Sp,InvertStencilOp:uk,KeepStencilOp:Na,KeyframeTrack:hs,LOD:NA,LatheGeometry:tf,Layers:Xa,LessCompare:cA,LessDepth:Ob,LessEqualCompare:Zx,LessEqualDepth:wh,LessEqualStencilFunc:pk,LessStencilFunc:fk,Light:ea,LightProbe:yT,Line:Ko,Line3:CF,LineBasicMaterial:Ji,LineCurve:h_,LineCurve3:WA,LineDashedMaterial:rT,LineLoop:UA,LineSegments:As,LinearDisplayP3ColorSpace:Yh,LinearEncoding:Yx,LinearFilter:On,LinearInterpolant:v_,LinearMipMapLinearFilter:ek,LinearMipMapNearestFilter:q2,LinearMipmapLinearFilter:jo,LinearMipmapNearestFilter:$x,LinearSRGBColorSpace:bs,LinearToneMapping:Hb,LinearTransfer:Lh,Loader:dr,LoaderUtils:Uy,LoadingManager:x_,LoopOnce:nA,LoopPingPong:rA,LoopRepeat:iA,LuminanceAlphaFormat:Jb,LuminanceFormat:Qb,MOUSE:Pa,Material:Ci,MaterialLoader:jm,MathUtils:zk,Matrix3:Zt,Matrix4:Bt,MaxEquation:ny,Mesh:fi,MeshBasicMaterial:Jo,MeshDepthMaterial:i_,MeshDistanceMaterial:r_,MeshLambertMaterial:nT,MeshMatcapMaterial:iT,MeshNormalMaterial:tT,MeshPhongMaterial:qA,MeshPhysicalMaterial:JA,MeshStandardMaterial:m_,MeshToonMaterial:eT,MinEquation:ty,MirroredRepeatWrapping:bh,MixOperation:$b,MultiplyBlending:ey,MultiplyOperation:Xh,NearestFilter:Xn,NearestMipMapLinearFilter:J2,NearestMipMapNearestFilter:Q2,NearestMipmapLinearFilter:eh,NearestMipmapNearestFilter:Yp,NeverCompare:lA,NeverDepth:Ib,NeverStencilFunc:hk,NoBlending:Ks,NoColorSpace:Cr,NoToneMapping:Ms,NormalAnimationBlendMode:wm,NormalBlending:ja,NotEqualCompare:fA,NotEqualDepth:Bb,NotEqualStencilFunc:gk,NumberKeyframeTrack:Bh,Object3D:an,ObjectLoader:ZD,ObjectSpaceNormalMap:aA,OctahedronGeometry:nf,OneFactor:Sb,OneMinusConstantAlphaFactor:Pb,OneMinusConstantColorFactor:Lb,OneMinusDstAlphaFactor:Eb,OneMinusDstColorFactor:Ab,OneMinusSrcAlphaFactor:Xp,OneMinusSrcColorFactor:Mb,OrthographicCamera:Ho,P3Primaries:Ph,PCFShadowMap:xm,PCFSoftShadowMap:qu,PMREMGenerator:Py,Path:Oh,PerspectiveCamera:Zn,Plane:$s,PlaneGeometry:ef,PlaneHelper:DF,PointLight:dT,PointLightHelper:AF,Points:BA,PointsMaterial:l_,PolarGridHelper:kF,PolyhedronGeometry:qo,PositionalAudio:rF,PropertyBinding:nn,PropertyMixer:wT,QuadraticBezierCurve:f_,QuadraticBezierCurve3:d_,Quaternion:Fi,QuaternionKeyframeTrack:Gc,QuaternionLinearInterpolant:cT,RED_GREEN_RGTC2_Format:Ay,RED_RGTC1_Format:tA,REVISION:ym,RGBADepthPacking:oA,RGBAFormat:ji,RGBAIntegerFormat:jx,RGBA_ASTC_10x10_Format:Sy,RGBA_ASTC_10x5_Format:yy,RGBA_ASTC_10x6_Format:xy,RGBA_ASTC_10x8_Format:_y,RGBA_ASTC_12x10_Format:wy,RGBA_ASTC_12x12_Format:My,RGBA_ASTC_4x4_Format:uy,RGBA_ASTC_5x4_Format:hy,RGBA_ASTC_5x5_Format:fy,RGBA_ASTC_6x5_Format:dy,RGBA_ASTC_6x6_Format:py,RGBA_ASTC_8x5_Format:my,RGBA_ASTC_8x6_Format:gy,RGBA_ASTC_8x8_Format:vy,RGBA_BPTC_Format:_p,RGBA_ETC2_EAC_Format:cy,RGBA_PVRTC_2BPPV1_Format:ay,RGBA_PVRTC_4BPPV1_Format:oy,RGBA_S3TC_DXT1_Format:vp,RGBA_S3TC_DXT3_Format:yp,RGBA_S3TC_DXT5_Format:xp,RGB_BPTC_SIGNED_Format:Cy,RGB_BPTC_UNSIGNED_Format:Ey,RGB_ETC1_Format:Kx,RGB_ETC2_Format:ly,RGB_PVRTC_2BPPV1_Format:sy,RGB_PVRTC_4BPPV1_Format:ry,RGB_S3TC_DXT1_Format:gp,RGFormat:eA,RGIntegerFormat:Gx,RawShaderMaterial:QA,Ray:ll,Raycaster:CT,Rec709Primaries:kh,RectAreaLight:gT,RedFormat:qb,RedIntegerFormat:Vx,ReinhardToneMapping:Wb,RenderTarget:vA,RepeatWrapping:Eh,ReplaceStencilOp:sk,ReverseSubtractEquation:xb,RingGeometry:$m,SIGNED_RED_GREEN_RGTC2_Format:Ty,SIGNED_RED_RGTC1_Format:by,SRGBColorSpace:ui,SRGBTransfer:xn,Scene:Jp,ShaderChunk:Gt,ShaderLib:is,ShaderMaterial:cs,ShadowMaterial:ZA,Shape:Za,ShapeGeometry:zm,ShapePath:BF,ShapeUtils:Es,ShortType:Yb,Skeleton:Lm,SkeletonHelper:bF,SkinnedMesh:OA,Source:Ha,Sphere:Ui,SphereGeometry:rf,Spherical:$y,SphericalHarmonics3:vT,SplineCurve:p_,SpotLight:fT,SpotLightHelper:EF,Sprite:IA,SpriteMaterial:o_,SrcAlphaFactor:Kp,SrcAlphaSaturateFactor:Tb,SrcColorFactor:wb,StaticCopyUsage:Mk,StaticDrawUsage:Ih,StaticReadUsage:_k,StereoCamera:eF,StreamCopyUsage:Ek,StreamDrawUsage:xk,StreamReadUsage:wk,StringKeyframeTrack:hl,SubtractEquation:yb,SubtractiveBlending:q0,TOUCH:Ia,TangentSpaceNormalMap:Qo,TetrahedronGeometry:Hm,Texture:An,TextureLoader:jD,TorusGeometry:Wm,TorusKnotGeometry:Vm,Triangle:ar,TriangleFanDrawMode:ik,TriangleStripDrawMode:nk,TrianglesDrawMode:tk,TubeGeometry:Gm,TwoPassDoubleSide:Z2,UVMapping:_m,Uint16BufferAttribute:e_,Uint32BufferAttribute:t_,Uint8BufferAttribute:aP,Uint8ClampedBufferAttribute:lP,Uniform:E_,UniformsGroup:xF,UniformsLib:ut,UniformsUtils:_A,UnsignedByteType:Cs,UnsignedInt248Type:Bo,UnsignedIntType:Vs,UnsignedShort4444Type:Hx,UnsignedShort5551Type:Wx,UnsignedShortType:Sm,VSMShadowMap:es,Vector2:Ge,Vector3:se,Vector4:ln,VectorKeyframeTrack:$h,VideoTexture:rD,WebGL1Renderer:kA,WebGL3DRenderTarget:Kk,WebGLArrayRenderTarget:jk,WebGLCoordinateSystem:ss,WebGLCubeRenderTarget:wA,WebGLMultipleRenderTargets:Xk,WebGLRenderTarget:jr,WebGLRenderer:s_,WebGLUtils:RA,WebGPUCoordinateSystem:Ic,WireframeGeometry:YA,WrapAroundEnding:Rh,ZeroCurvatureEnding:$a,ZeroFactor:_b,ZeroSlopeEnding:za,ZeroStencilOp:rk,_SRGBAFormat:Zp,createCanvasElement:gA,sRGBEncoding:zo},Symbol.toStringTag,{value:"Module"}));var bT={exports:{}},fl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */fl.ConcurrentRoot=1;fl.ContinuousEventPriority=4;fl.DefaultEventPriority=16;fl.DiscreteEventPriority=1;fl.IdleEventPriority=536870912;fl.LegacyRoot=0;bT.exports=fl;var yc=bT.exports;function zF(n){let e;const t=new Set,i=(f,a)=>{const o=typeof f=="function"?f(e):f;if(o!==e){const h=e;e=a?o:Object.assign({},e,o),t.forEach(d=>d(e,h))}},r=()=>e,s=(f,a=r,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=a(e);function d(){const p=a(e);if(!o(h,p)){const y=h;f(h=p,y)}}return t.add(d),()=>t.delete(d)},u={setState:i,getState:r,subscribe:(f,a,o)=>a||o?s(f,a,o):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,u),u}const HF=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),PM=HF?Ce.useEffect:Ce.useLayoutEffect;function WF(n){const e=typeof n=="function"?zF(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=Ce.useReducer(x=>x+1,0),c=e.getState(),l=Ce.useRef(c),u=Ce.useRef(i),f=Ce.useRef(r),a=Ce.useRef(!1),o=Ce.useRef();o.current===void 0&&(o.current=i(c));let h,d=!1;(l.current!==c||u.current!==i||f.current!==r||a.current)&&(h=i(c),d=!r(o.current,h)),PM(()=>{d&&(o.current=h),l.current=c,u.current=i,f.current=r,a.current=!1});const p=Ce.useRef(c);PM(()=>{const x=()=>{try{const w=e.getState(),C=u.current(w);f.current(o.current,C)||(l.current=w,o.current=C,s())}catch{a.current=!0,s()}},g=e.subscribe(x);return e.getState()!==p.current&&x(),g},[]);const y=d?h:o.current;return Ce.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var AT={exports:{}},TT={exports:{}},RT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,K){var Y=G.length;G.push(K);e:for(;0<Y;){var ne=Y-1>>>1,le=G[ne];if(0<r(le,K))G[ne]=K,G[Y]=le,Y=ne;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var K=G[0],Y=G.pop();if(Y!==K){G[0]=Y;e:for(var ne=0,le=G.length,j=le>>>1;ne<j;){var re=2*(ne+1)-1,fe=G[re],ve=re+1,ye=G[ve];if(0>r(fe,Y))ve<le&&0>r(ye,fe)?(G[ne]=ye,G[ve]=Y,ne=ve):(G[ne]=fe,G[re]=Y,ne=re);else if(ve<le&&0>r(ye,Y))G[ne]=ye,G[ve]=Y,ne=ve;else break e}}return K}function r(G,K){var Y=G.sortIndex-K.sortIndex;return Y!==0?Y:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var c=Date,l=c.now();n.unstable_now=function(){return c.now()-l}}var u=[],f=[],a=1,o=null,h=3,d=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var K=t(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=G)i(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(f)}}function M(G){if(y=!1,C(G),!p)if(t(u)!==null)p=!0,H(_);else{var K=t(f);K!==null&&J(M,K.startTime-G)}}function _(G,K){p=!1,y&&(y=!1,g(A),A=-1),d=!0;var Y=h;try{for(C(K),o=t(u);o!==null&&(!(o.expirationTime>K)||G&&!I());){var ne=o.callback;if(typeof ne=="function"){o.callback=null,h=o.priorityLevel;var le=ne(o.expirationTime<=K);K=n.unstable_now(),typeof le=="function"?o.callback=le:o===t(u)&&i(u),C(K)}else i(u);o=t(u)}if(o!==null)var j=!0;else{var re=t(f);re!==null&&J(M,re.startTime-K),j=!1}return j}finally{o=null,h=Y,d=!1}}var E=!1,R=null,A=-1,T=5,S=-1;function I(){return!(n.unstable_now()-S<T)}function D(){if(R!==null){var G=n.unstable_now();S=G;var K=!0;try{K=R(!0,G)}finally{K?z():(E=!1,R=null)}}else E=!1}var z;if(typeof w=="function")z=function(){w(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=D,z=function(){W.postMessage(null)}}else z=function(){x(D,0)};function H(G){R=G,E||(E=!0,z())}function J(G,K){A=x(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){p||d||(p=!0,H(_))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var Y=h;h=K;try{return G()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=h;h=G;try{return K()}finally{h=Y}},n.unstable_scheduleCallback=function(G,K,Y){var ne=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,G){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Y+le,G={id:a++,callback:K,priorityLevel:G,startTime:Y,expirationTime:le,sortIndex:-1},Y>ne?(G.sortIndex=Y,e(f,G),t(u)===null&&G===t(f)&&(y?(g(A),A=-1):y=!0,J(M,Y-ne))):(G.sortIndex=le,e(u,G),p||d||(p=!0,H(_))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var K=h;return function(){var Y=h;h=K;try{return G.apply(this,arguments)}finally{h=Y}}}})(RT);TT.exports=RT;var zy=TT.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VF=function(e){var t={},i=Ce,r=zy,s=Object.assign;function c(m){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+m,L=1;L<arguments.length;L++)v+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),f=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),_=Symbol.iterator;function E(m){return m===null||typeof m!="object"?null:(m=_&&m[_]||m["@@iterator"],typeof m=="function"?m:null)}function R(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case a:return"Fragment";case f:return"Portal";case h:return"Profiler";case o:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case p:return(m.displayName||"Context")+".Consumer";case d:return(m._context.displayName||"Context")+".Provider";case y:var v=m.render;return m=m.displayName,m||(m=v.displayName||v.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case w:return v=m.displayName||null,v!==null?v:R(m.type)||"Memo";case C:v=m._payload,m=m._init;try{return R(m(v))}catch{}}return null}function A(m){var v=m.type;switch(m.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=v.render,m=m.displayName||m.name||"",v.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(v);case 8:return v===o?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function T(m){var v=m,L=m;if(m.alternate)for(;v.return;)v=v.return;else{m=v;do v=m,v.flags&4098&&(L=v.return),m=v.return;while(m)}return v.tag===3?L:null}function S(m){if(T(m)!==m)throw Error(c(188))}function I(m){var v=m.alternate;if(!v){if(v=T(m),v===null)throw Error(c(188));return v!==m?null:m}for(var L=m,N=v;;){var U=L.return;if(U===null)break;var V=U.alternate;if(V===null){if(N=U.return,N!==null){L=N;continue}break}if(U.child===V.child){for(V=U.child;V;){if(V===L)return S(U),m;if(V===N)return S(U),v;V=V.sibling}throw Error(c(188))}if(L.return!==N.return)L=U,N=V;else{for(var ce=!1,xe=U.child;xe;){if(xe===L){ce=!0,L=U,N=V;break}if(xe===N){ce=!0,N=U,L=V;break}xe=xe.sibling}if(!ce){for(xe=V.child;xe;){if(xe===L){ce=!0,L=V,N=U;break}if(xe===N){ce=!0,N=V,L=U;break}xe=xe.sibling}if(!ce)throw Error(c(189))}}if(L.alternate!==N)throw Error(c(190))}if(L.tag!==3)throw Error(c(188));return L.stateNode.current===L?m:v}function D(m){return m=I(m),m!==null?z(m):null}function z(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var v=z(m);if(v!==null)return v;m=m.sibling}return null}function B(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var v=B(m);if(v!==null)return v}m=m.sibling}return null}var W=Array.isArray,H=e.getPublicInstance,J=e.getRootHostContext,G=e.getChildHostContext,K=e.prepareForCommit,Y=e.resetAfterCommit,ne=e.createInstance,le=e.appendInitialChild,j=e.finalizeInitialChildren,re=e.prepareUpdate,fe=e.shouldSetTextContent,ve=e.createTextInstance,ye=e.scheduleTimeout,ze=e.cancelTimeout,Xe=e.noTimeout,Ae=e.isPrimaryRenderer,je=e.supportsMutation,oe=e.supportsPersistence,Ve=e.supportsHydration,Te=e.getInstanceFromNode,$e=e.preparePortalMount,Ne=e.getCurrentEventPriority,ht=e.detachDeletedInstance,Ze=e.supportsMicrotasks,q=e.scheduleMicrotask,Z=e.supportsTestSelectors,ae=e.findFiberRoot,Ee=e.getBoundingRect,me=e.getTextContent,ke=e.isHiddenSubtree,Qe=e.matchAccessibilityRole,Ye=e.setFocusIfFocusable,Je=e.setupIntersectionObserver,ge=e.appendChild,Me=e.appendChildToContainer,_e=e.commitTextUpdate,et=e.commitMount,ot=e.commitUpdate,Ue=e.insertBefore,We=e.insertInContainerBefore,rt=e.removeChild,he=e.removeChildFromContainer,De=e.resetTextContent,tt=e.hideInstance,at=e.hideTextInstance,Ke=e.unhideInstance,pe=e.unhideTextInstance,lt=e.clearContainer,nt=e.cloneInstance,Tt=e.createContainerChildSet,_t=e.appendChildToContainerChildSet,Xt=e.finalizeContainerChildren,Jt=e.replaceContainerChildren,Pt=e.cloneHiddenInstance,tn=e.cloneHiddenTextInstance,At=e.canHydrateInstance,cn=e.canHydrateTextInstance,Qn=e.canHydrateSuspenseInstance,io=e.isSuspenseInstancePending,Sn=e.isSuspenseInstanceFallback,fs=e.registerSuspenseInstanceRetry,ds=e.getNextHydratableSibling,ro=e.getFirstHydratableChild,ta=e.getFirstHydratableChildWithinContainer,na=e.getFirstHydratableChildWithinSuspenseInstance,jc=e.hydrateInstance,Kc=e.hydrateTextInstance,dl=e.hydrateSuspenseInstance,ie=e.getNextHydratableInstanceAfterSuspenseInstance,we=e.commitHydratedContainer,Pe=e.commitHydratedSuspenseInstance,Oe=e.clearSuspenseBoundary,be=e.clearSuspenseBoundaryFromContainer,pt=e.shouldDeleteUnhydratedTailInstances,Ct=e.didNotMatchHydratedContainerTextInstance,wt=e.didNotMatchHydratedTextInstance,Rt;function Ft(m){if(Rt===void 0)try{throw Error()}catch(L){var v=L.stack.trim().match(/\n( *(at )?)/);Rt=v&&v[1]||""}return`
`+Rt+m}var Ot=!1;function Ut(m,v){if(!m||Ot)return"";Ot=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(ct){var N=ct}Reflect.construct(m,[],v)}else{try{v.call()}catch(ct){N=ct}m.call(v.prototype)}else{try{throw Error()}catch(ct){N=ct}m()}}catch(ct){if(ct&&N&&typeof ct.stack=="string"){for(var U=ct.stack.split(`
`),V=N.stack.split(`
`),ce=U.length-1,xe=V.length-1;1<=ce&&0<=xe&&U[ce]!==V[xe];)xe--;for(;1<=ce&&0<=xe;ce--,xe--)if(U[ce]!==V[xe]){if(ce!==1||xe!==1)do if(ce--,xe--,0>xe||U[ce]!==V[xe]){var He=`
`+U[ce].replace(" at new "," at ");return m.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",m.displayName)),He}while(1<=ce&&0<=xe);break}}}finally{Ot=!1,Error.prepareStackTrace=L}return(m=m?m.displayName||m.name:"")?Ft(m):""}var yn=Object.prototype.hasOwnProperty,si=[],mn=-1;function Jn(m){return{current:m}}function Lt(m){0>mn||(m.current=si[mn],si[mn]=null,mn--)}function vt(m,v){mn++,si[mn]=m.current,m.current=v}var Bn={},Vt=Jn(Bn),wn=Jn(!1),kr=Bn;function qi(m,v){var L=m.type.contextTypes;if(!L)return Bn;var N=m.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===v)return N.__reactInternalMemoizedMaskedChildContext;var U={},V;for(V in L)U[V]=v[V];return N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=v,m.__reactInternalMemoizedMaskedChildContext=U),U}function qn(m){return m=m.childContextTypes,m!=null}function Tn(){Lt(wn),Lt(Vt)}function Vn(m,v,L){if(Vt.current!==Bn)throw Error(c(168));vt(Vt,v),vt(wn,L)}function so(m,v,L){var N=m.stateNode;if(v=v.childContextTypes,typeof N.getChildContext!="function")return L;N=N.getChildContext();for(var U in N)if(!(U in v))throw Error(c(108,A(m)||"Unknown",U));return s({},L,N)}function oi(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Bn,kr=Vt.current,vt(Vt,m),vt(wn,wn.current),!0}function oo(m,v,L){var N=m.stateNode;if(!N)throw Error(c(169));L?(m=so(m,v,kr),N.__reactInternalMemoizedMergedChildContext=m,Lt(wn),Lt(Vt),vt(Vt,m)):Lt(wn),vt(wn,L)}var Ei=Math.clz32?Math.clz32:af,ia=Math.log,Km=Math.LN2;function af(m){return m>>>=0,m===0?32:31-(ia(m)/Km|0)|0}var pl=64,ra=4194304;function sa(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ml(m,v){var L=m.pendingLanes;if(L===0)return 0;var N=0,U=m.suspendedLanes,V=m.pingedLanes,ce=L&268435455;if(ce!==0){var xe=ce&~U;xe!==0?N=sa(xe):(V&=ce,V!==0&&(N=sa(V)))}else ce=L&~U,ce!==0?N=sa(ce):V!==0&&(N=sa(V));if(N===0)return 0;if(v!==0&&v!==N&&!(v&U)&&(U=N&-N,V=v&-v,U>=V||U===16&&(V&4194240)!==0))return v;if(N&4&&(N|=L&16),v=m.entangledLanes,v!==0)for(m=m.entanglements,v&=N;0<v;)L=31-Ei(v),U=1<<L,N|=m[L],v&=~U;return N}function pn(m,v){switch(m){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(m,v){for(var L=m.suspendedLanes,N=m.pingedLanes,U=m.expirationTimes,V=m.pendingLanes;0<V;){var ce=31-Ei(V),xe=1<<ce,He=U[ce];He===-1?(!(xe&L)||xe&N)&&(U[ce]=pn(xe,v)):He<=v&&(m.expiredLanes|=xe),V&=~xe}}function Xc(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function ao(m){for(var v=[],L=0;31>L;L++)v.push(m);return v}function oa(m,v,L){m.pendingLanes|=v,v!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,v=31-Ei(v),m[v]=L}function aa(m,v){var L=m.pendingLanes&~v;m.pendingLanes=v,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=v,m.mutableReadLanes&=v,m.entangledLanes&=v,v=m.entanglements;var N=m.eventTimes;for(m=m.expirationTimes;0<L;){var U=31-Ei(L),V=1<<U;v[U]=0,N[U]=-1,m[U]=-1,L&=~V}}function Yc(m,v){var L=m.entangledLanes|=v;for(m=m.entanglements;L;){var N=31-Ei(L),U=1<<N;U&v|m[N]&v&&(m[N]|=v),L&=~U}}var en=0;function Zc(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var la=r.unstable_scheduleCallback,lf=r.unstable_cancelCallback,Qc=r.unstable_shouldYield,cf=r.unstable_requestPaint,Gn=r.unstable_now,gl=r.unstable_ImmediatePriority,uf=r.unstable_UserBlockingPriority,er=r.unstable_NormalPriority,Ym=r.unstable_IdlePriority,ps=null,pr=null;function Zm(m){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(ps,m,void 0,(m.current.flags&128)===128)}catch{}}function Qm(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var Pr=typeof Object.is=="function"?Object.is:Qm,Kr=null,vl=!1,yl=!1;function Jc(m){Kr===null?Kr=[m]:Kr.push(m)}function hf(m){vl=!0,Jc(m)}function mr(){if(!yl&&Kr!==null){yl=!0;var m=0,v=en;try{var L=Kr;for(en=1;m<L.length;m++){var N=L[m];do N=N(!0);while(N!==null)}Kr=null,vl=!1}catch(U){throw Kr!==null&&(Kr=Kr.slice(m+1)),la(gl,mr),U}finally{en=v,yl=!1}}return null}var qc=l.ReactCurrentBatchConfig;function ca(m,v){if(Pr(m,v))return!0;if(typeof m!="object"||m===null||typeof v!="object"||v===null)return!1;var L=Object.keys(m),N=Object.keys(v);if(L.length!==N.length)return!1;for(N=0;N<L.length;N++){var U=L[N];if(!yn.call(v,U)||!Pr(m[U],v[U]))return!1}return!0}function ff(m){switch(m.tag){case 5:return Ft(m.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 2:case 15:return m=Ut(m.type,!1),m;case 11:return m=Ut(m.type.render,!1),m;case 1:return m=Ut(m.type,!0),m;default:return""}}function tr(m,v){if(m&&m.defaultProps){v=s({},v),m=m.defaultProps;for(var L in m)v[L]===void 0&&(v[L]=m[L]);return v}return v}var xl=Jn(null),_l=null,Ts=null,ua=null;function eu(){ua=Ts=_l=null}function Rs(m,v,L){Ae?(vt(xl,v._currentValue),v._currentValue=L):(vt(xl,v._currentValue2),v._currentValue2=L)}function ha(m){var v=xl.current;Lt(xl),Ae?m._currentValue=v:m._currentValue2=v}function b(m,v,L){for(;m!==null;){var N=m.alternate;if((m.childLanes&v)!==v?(m.childLanes|=v,N!==null&&(N.childLanes|=v)):N!==null&&(N.childLanes&v)!==v&&(N.childLanes|=v),m===L)break;m=m.return}}function P(m,v){_l=m,ua=Ts=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&v&&(yr=!0),m.firstContext=null)}function k(m){var v=Ae?m._currentValue:m._currentValue2;if(ua!==m)if(m={context:m,memoizedValue:v,next:null},Ts===null){if(_l===null)throw Error(c(308));Ts=m,_l.dependencies={lanes:0,firstContext:m}}else Ts=Ts.next=m;return v}var O=null,F=!1;function $(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X(m,v){m=m.updateQueue,v.updateQueue===m&&(v.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function ee(m,v){return{eventTime:m,lane:v,tag:0,payload:null,callback:null,next:null}}function te(m,v){var L=m.updateQueue;L!==null&&(L=L.shared,ti!==null&&m.mode&1&&!(Qt&2)?(m=L.interleaved,m===null?(v.next=v,O===null?O=[L]:O.push(L)):(v.next=m.next,m.next=v),L.interleaved=v):(m=L.pending,m===null?v.next=v:(v.next=m.next,m.next=v),L.pending=v))}function ue(m,v,L){if(v=v.updateQueue,v!==null&&(v=v.shared,(L&4194240)!==0)){var N=v.lanes;N&=m.pendingLanes,L|=N,v.lanes=L,Yc(m,L)}}function de(m,v){var L=m.updateQueue,N=m.alternate;if(N!==null&&(N=N.updateQueue,L===N)){var U=null,V=null;if(L=L.firstBaseUpdate,L!==null){do{var ce={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};V===null?U=V=ce:V=V.next=ce,L=L.next}while(L!==null);V===null?U=V=v:V=V.next=v}else U=V=v;L={baseState:N.baseState,firstBaseUpdate:U,lastBaseUpdate:V,shared:N.shared,effects:N.effects},m.updateQueue=L;return}m=L.lastBaseUpdate,m===null?L.firstBaseUpdate=v:m.next=v,L.lastBaseUpdate=v}function Le(m,v,L,N){var U=m.updateQueue;F=!1;var V=U.firstBaseUpdate,ce=U.lastBaseUpdate,xe=U.shared.pending;if(xe!==null){U.shared.pending=null;var He=xe,ct=He.next;He.next=null,ce===null?V=ct:ce.next=ct,ce=He;var xt=m.alternate;xt!==null&&(xt=xt.updateQueue,xe=xt.lastBaseUpdate,xe!==ce&&(xe===null?xt.firstBaseUpdate=ct:xe.next=ct,xt.lastBaseUpdate=He))}if(V!==null){var zt=U.baseState;ce=0,xt=ct=He=null,xe=V;do{var It=xe.lane,vn=xe.eventTime;if((N&It)===It){xt!==null&&(xt=xt.next={eventTime:vn,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var bt=m,Ri=xe;switch(It=v,vn=L,Ri.tag){case 1:if(bt=Ri.payload,typeof bt=="function"){zt=bt.call(vn,zt,It);break e}zt=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ri.payload,It=typeof bt=="function"?bt.call(vn,zt,It):bt,It==null)break e;zt=s({},zt,It);break e;case 2:F=!0}}xe.callback!==null&&xe.lane!==0&&(m.flags|=64,It=U.effects,It===null?U.effects=[xe]:It.push(xe))}else vn={eventTime:vn,lane:It,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},xt===null?(ct=xt=vn,He=zt):xt=xt.next=vn,ce|=It;if(xe=xe.next,xe===null){if(xe=U.shared.pending,xe===null)break;It=xe,xe=It.next,It.next=null,U.lastBaseUpdate=It,U.shared.pending=null}}while(1);if(xt===null&&(He=zt),U.baseState=He,U.firstBaseUpdate=ct,U.lastBaseUpdate=xt,v=U.shared.interleaved,v!==null){U=v;do ce|=U.lane,U=U.next;while(U!==v)}else V===null&&(U.shared.lanes=0);Al|=ce,m.lanes=ce,m.memoizedState=zt}}function Be(m,v,L){if(m=v.effects,v.effects=null,m!==null)for(v=0;v<m.length;v++){var N=m[v],U=N.callback;if(U!==null){if(N.callback=null,N=L,typeof U!="function")throw Error(c(191,U));U.call(N)}}}var Ie=new i.Component().refs;function it(m,v,L,N){v=m.memoizedState,L=L(N,v),L=L==null?v:s({},v,L),m.memoizedState=L,m.lanes===0&&(m.updateQueue.baseState=L)}var mt={isMounted:function(m){return(m=m._reactInternals)?T(m)===m:!1},enqueueSetState:function(m,v,L){m=m._reactInternals;var N=Hi(),U=ho(m),V=ee(N,U);V.payload=v,L!=null&&(V.callback=L),te(m,V),v=Or(m,U,N),v!==null&&ue(v,m,U)},enqueueReplaceState:function(m,v,L){m=m._reactInternals;var N=Hi(),U=ho(m),V=ee(N,U);V.tag=1,V.payload=v,L!=null&&(V.callback=L),te(m,V),v=Or(m,U,N),v!==null&&ue(v,m,U)},enqueueForceUpdate:function(m,v){m=m._reactInternals;var L=Hi(),N=ho(m),U=ee(L,N);U.tag=2,v!=null&&(U.callback=v),te(m,U),v=Or(m,N,L),v!==null&&ue(v,m,N)}};function qe(m,v,L,N,U,V,ce){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(N,V,ce):v.prototype&&v.prototype.isPureReactComponent?!ca(L,N)||!ca(U,V):!0}function St(m,v,L){var N=!1,U=Bn,V=v.contextType;return typeof V=="object"&&V!==null?V=k(V):(U=qn(v)?kr:Vt.current,N=v.contextTypes,V=(N=N!=null)?qi(m,U):Bn),v=new v(L,V),m.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=mt,m.stateNode=v,v._reactInternals=m,N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=U,m.__reactInternalMemoizedMaskedChildContext=V),v}function kt(m,v,L,N){m=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(L,N),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(L,N),v.state!==m&&mt.enqueueReplaceState(v,v.state,null)}function $t(m,v,L,N){var U=m.stateNode;U.props=L,U.state=m.memoizedState,U.refs=Ie,$(m);var V=v.contextType;typeof V=="object"&&V!==null?U.context=k(V):(V=qn(v)?kr:Vt.current,U.context=qi(m,V)),U.state=m.memoizedState,V=v.getDerivedStateFromProps,typeof V=="function"&&(it(m,v,V,L),U.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(v=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),v!==U.state&&mt.enqueueReplaceState(U,U.state,null),Le(m,L,U,N),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308)}var un=[],ai=0,Mn=null,ei=0,Wt=[],Dt=0,Cn=null,Rn=1,gn="";function $i(m,v){un[ai++]=ei,un[ai++]=Mn,Mn=m,ei=v}function lo(m,v,L){Wt[Dt++]=Rn,Wt[Dt++]=gn,Wt[Dt++]=Cn,Cn=m;var N=Rn;m=gn;var U=32-Ei(N)-1;N&=~(1<<U),L+=1;var V=32-Ei(v)+U;if(30<V){var ce=U-U%5;V=(N&(1<<ce)-1).toString(32),N>>=ce,U-=ce,Rn=1<<32-Ei(v)+U|L<<U|N,gn=V+m}else Rn=1<<V|L<<U|N,gn=m}function fa(m){m.return!==null&&($i(m,1),lo(m,1,0))}function Jm(m){for(;m===Mn;)Mn=un[--ai],un[ai]=null,ei=un[--ai],un[ai]=null;for(;m===Cn;)Cn=Wt[--Dt],Wt[Dt]=null,gn=Wt[--Dt],Wt[Dt]=null,Rn=Wt[--Dt],Wt[Dt]=null}var gr=null,vr=null,Ln=!1,tu=!1,Xr=null;function R_(m,v){var L=Dr(5,null,null,0);L.elementType="DELETED",L.stateNode=v,L.return=m,v=m.deletions,v===null?(m.deletions=[L],m.flags|=16):v.push(L)}function L_(m,v){switch(m.tag){case 5:return v=At(v,m.type,m.pendingProps),v!==null?(m.stateNode=v,gr=m,vr=ro(v),!0):!1;case 6:return v=cn(v,m.pendingProps),v!==null?(m.stateNode=v,gr=m,vr=null,!0):!1;case 13:if(v=Qn(v),v!==null){var L=Cn!==null?{id:Rn,overflow:gn}:null;return m.memoizedState={dehydrated:v,treeContext:L,retryLane:1073741824},L=Dr(18,null,null,0),L.stateNode=v,L.return=m,m.child=L,gr=m,vr=null,!0}return!1;default:return!1}}function qm(m){return(m.mode&1)!==0&&(m.flags&128)===0}function eg(m){if(Ln){var v=vr;if(v){var L=v;if(!L_(m,v)){if(qm(m))throw Error(c(418));v=ds(L);var N=gr;v&&L_(m,v)?R_(N,L):(m.flags=m.flags&-4097|2,Ln=!1,gr=m)}}else{if(qm(m))throw Error(c(418));m.flags=m.flags&-4097|2,Ln=!1,gr=m}}}function k_(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;gr=m}function nu(m){if(!Ve||m!==gr)return!1;if(!Ln)return k_(m),Ln=!0,!1;if(m.tag!==3&&(m.tag!==5||pt(m.type)&&!fe(m.type,m.memoizedProps))){var v=vr;if(v){if(qm(m)){for(m=vr;m;)m=ds(m);throw Error(c(418))}for(;v;)R_(m,v),v=ds(v)}}if(k_(m),m.tag===13){if(!Ve)throw Error(c(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(c(317));vr=ie(m)}else vr=gr?ds(m.stateNode):null;return!0}function Sl(){Ve&&(vr=gr=null,tu=Ln=!1)}function tg(m){Xr===null?Xr=[m]:Xr.push(m)}function iu(m,v,L){if(m=L.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(c(309));var N=L.stateNode}if(!N)throw Error(c(147,m));var U=N,V=""+m;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===V?v.ref:(v=function(ce){var xe=U.refs;xe===Ie&&(xe=U.refs={}),ce===null?delete xe[V]:xe[V]=ce},v._stringRef=V,v)}if(typeof m!="string")throw Error(c(284));if(!L._owner)throw Error(c(290,m))}return m}function df(m,v){throw m=Object.prototype.toString.call(v),Error(c(31,m==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":m))}function P_(m){var v=m._init;return v(m._payload)}function I_(m){function v(Re,Se){if(m){var Fe=Re.deletions;Fe===null?(Re.deletions=[Se],Re.flags|=16):Fe.push(Se)}}function L(Re,Se){if(!m)return null;for(;Se!==null;)v(Re,Se),Se=Se.sibling;return null}function N(Re,Se){for(Re=new Map;Se!==null;)Se.key!==null?Re.set(Se.key,Se):Re.set(Se.index,Se),Se=Se.sibling;return Re}function U(Re,Se){return Re=po(Re,Se),Re.index=0,Re.sibling=null,Re}function V(Re,Se,Fe){return Re.index=Fe,m?(Fe=Re.alternate,Fe!==null?(Fe=Fe.index,Fe<Se?(Re.flags|=2,Se):Fe):(Re.flags|=2,Se)):(Re.flags|=1048576,Se)}function ce(Re){return m&&Re.alternate===null&&(Re.flags|=2),Re}function xe(Re,Se,Fe,dt){return Se===null||Se.tag!==6?(Se=Ug(Fe,Re.mode,dt),Se.return=Re,Se):(Se=U(Se,Fe),Se.return=Re,Se)}function He(Re,Se,Fe,dt){var Et=Fe.type;return Et===a?xt(Re,Se,Fe.props.children,dt,Fe.key):Se!==null&&(Se.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===C&&P_(Et)===Se.type)?(dt=U(Se,Fe.props),dt.ref=iu(Re,Se,Fe),dt.return=Re,dt):(dt=Vf(Fe.type,Fe.key,Fe.props,null,Re.mode,dt),dt.ref=iu(Re,Se,Fe),dt.return=Re,dt)}function ct(Re,Se,Fe,dt){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Fe.containerInfo||Se.stateNode.implementation!==Fe.implementation?(Se=Bg(Fe,Re.mode,dt),Se.return=Re,Se):(Se=U(Se,Fe.children||[]),Se.return=Re,Se)}function xt(Re,Se,Fe,dt,Et){return Se===null||Se.tag!==7?(Se=xa(Fe,Re.mode,dt,Et),Se.return=Re,Se):(Se=U(Se,Fe),Se.return=Re,Se)}function zt(Re,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=Ug(""+Se,Re.mode,Fe),Se.return=Re,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case u:return Fe=Vf(Se.type,Se.key,Se.props,null,Re.mode,Fe),Fe.ref=iu(Re,null,Se),Fe.return=Re,Fe;case f:return Se=Bg(Se,Re.mode,Fe),Se.return=Re,Se;case C:var dt=Se._init;return zt(Re,dt(Se._payload),Fe)}if(W(Se)||E(Se))return Se=xa(Se,Re.mode,Fe,null),Se.return=Re,Se;df(Re,Se)}return null}function It(Re,Se,Fe,dt){var Et=Se!==null?Se.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Et!==null?null:xe(Re,Se,""+Fe,dt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case u:return Fe.key===Et?He(Re,Se,Fe,dt):null;case f:return Fe.key===Et?ct(Re,Se,Fe,dt):null;case C:return Et=Fe._init,It(Re,Se,Et(Fe._payload),dt)}if(W(Fe)||E(Fe))return Et!==null?null:xt(Re,Se,Fe,dt,null);df(Re,Fe)}return null}function vn(Re,Se,Fe,dt,Et){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Re=Re.get(Fe)||null,xe(Se,Re,""+dt,Et);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case u:return Re=Re.get(dt.key===null?Fe:dt.key)||null,He(Se,Re,dt,Et);case f:return Re=Re.get(dt.key===null?Fe:dt.key)||null,ct(Se,Re,dt,Et);case C:var Yt=dt._init;return vn(Re,Se,Fe,Yt(dt._payload),Et)}if(W(dt)||E(dt))return Re=Re.get(Fe)||null,xt(Se,Re,dt,Et,null);df(Se,dt)}return null}function bt(Re,Se,Fe,dt){for(var Et=null,Yt=null,Ht=Se,sn=Se=0,gi=null;Ht!==null&&sn<Fe.length;sn++){Ht.index>sn?(gi=Ht,Ht=null):gi=Ht.sibling;var on=It(Re,Ht,Fe[sn],dt);if(on===null){Ht===null&&(Ht=gi);break}m&&Ht&&on.alternate===null&&v(Re,Ht),Se=V(on,Se,sn),Yt===null?Et=on:Yt.sibling=on,Yt=on,Ht=gi}if(sn===Fe.length)return L(Re,Ht),Ln&&$i(Re,sn),Et;if(Ht===null){for(;sn<Fe.length;sn++)Ht=zt(Re,Fe[sn],dt),Ht!==null&&(Se=V(Ht,Se,sn),Yt===null?Et=Ht:Yt.sibling=Ht,Yt=Ht);return Ln&&$i(Re,sn),Et}for(Ht=N(Re,Ht);sn<Fe.length;sn++)gi=vn(Ht,Re,sn,Fe[sn],dt),gi!==null&&(m&&gi.alternate!==null&&Ht.delete(gi.key===null?sn:gi.key),Se=V(gi,Se,sn),Yt===null?Et=gi:Yt.sibling=gi,Yt=gi);return m&&Ht.forEach(function(mo){return v(Re,mo)}),Ln&&$i(Re,sn),Et}function Ri(Re,Se,Fe,dt){var Et=E(Fe);if(typeof Et!="function")throw Error(c(150));if(Fe=Et.call(Fe),Fe==null)throw Error(c(151));for(var Yt=Et=null,Ht=Se,sn=Se=0,gi=null,on=Fe.next();Ht!==null&&!on.done;sn++,on=Fe.next()){Ht.index>sn?(gi=Ht,Ht=null):gi=Ht.sibling;var mo=It(Re,Ht,on.value,dt);if(mo===null){Ht===null&&(Ht=gi);break}m&&Ht&&mo.alternate===null&&v(Re,Ht),Se=V(mo,Se,sn),Yt===null?Et=mo:Yt.sibling=mo,Yt=mo,Ht=gi}if(on.done)return L(Re,Ht),Ln&&$i(Re,sn),Et;if(Ht===null){for(;!on.done;sn++,on=Fe.next())on=zt(Re,on.value,dt),on!==null&&(Se=V(on,Se,sn),Yt===null?Et=on:Yt.sibling=on,Yt=on);return Ln&&$i(Re,sn),Et}for(Ht=N(Re,Ht);!on.done;sn++,on=Fe.next())on=vn(Ht,Re,sn,on.value,dt),on!==null&&(m&&on.alternate!==null&&Ht.delete(on.key===null?sn:on.key),Se=V(on,Se,sn),Yt===null?Et=on:Yt.sibling=on,Yt=on);return m&&Ht.forEach(function(MR){return v(Re,MR)}),Ln&&$i(Re,sn),Et}function Fr(Re,Se,Fe,dt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===a&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case u:e:{for(var Et=Fe.key,Yt=Se;Yt!==null;){if(Yt.key===Et){if(Et=Fe.type,Et===a){if(Yt.tag===7){L(Re,Yt.sibling),Se=U(Yt,Fe.props.children),Se.return=Re,Re=Se;break e}}else if(Yt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===C&&P_(Et)===Yt.type){L(Re,Yt.sibling),Se=U(Yt,Fe.props),Se.ref=iu(Re,Yt,Fe),Se.return=Re,Re=Se;break e}L(Re,Yt);break}else v(Re,Yt);Yt=Yt.sibling}Fe.type===a?(Se=xa(Fe.props.children,Re.mode,dt,Fe.key),Se.return=Re,Re=Se):(dt=Vf(Fe.type,Fe.key,Fe.props,null,Re.mode,dt),dt.ref=iu(Re,Se,Fe),dt.return=Re,Re=dt)}return ce(Re);case f:e:{for(Yt=Fe.key;Se!==null;){if(Se.key===Yt)if(Se.tag===4&&Se.stateNode.containerInfo===Fe.containerInfo&&Se.stateNode.implementation===Fe.implementation){L(Re,Se.sibling),Se=U(Se,Fe.children||[]),Se.return=Re,Re=Se;break e}else{L(Re,Se);break}else v(Re,Se);Se=Se.sibling}Se=Bg(Fe,Re.mode,dt),Se.return=Re,Re=Se}return ce(Re);case C:return Yt=Fe._init,Fr(Re,Se,Yt(Fe._payload),dt)}if(W(Fe))return bt(Re,Se,Fe,dt);if(E(Fe))return Ri(Re,Se,Fe,dt);df(Re,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Se!==null&&Se.tag===6?(L(Re,Se.sibling),Se=U(Se,Fe),Se.return=Re,Re=Se):(L(Re,Se),Se=Ug(Fe,Re.mode,dt),Se.return=Re,Re=Se),ce(Re)):L(Re,Se)}return Fr}var wl=I_(!0),N_=I_(!1),ru={},Ir=Jn(ru),su=Jn(ru),Ml=Jn(ru);function ms(m){if(m===ru)throw Error(c(174));return m}function ng(m,v){vt(Ml,v),vt(su,m),vt(Ir,ru),m=J(v),Lt(Ir),vt(Ir,m)}function Cl(){Lt(Ir),Lt(su),Lt(Ml)}function O_(m){var v=ms(Ml.current),L=ms(Ir.current);v=G(L,m.type,v),L!==v&&(vt(su,m),vt(Ir,v))}function ig(m){su.current===m&&(Lt(Ir),Lt(su))}var In=Jn(0);function pf(m){for(var v=m;v!==null;){if(v.tag===13){var L=v.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||io(L)||Sn(L)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(v.flags&128)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var rg=[];function sg(){for(var m=0;m<rg.length;m++){var v=rg[m];Ae?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}rg.length=0}var mf=l.ReactCurrentDispatcher,Nr=l.ReactCurrentBatchConfig,El=0,$n=null,bi=null,mi=null,gf=!1,ou=!1,au=0,XT=0;function Ai(){throw Error(c(321))}function og(m,v){if(v===null)return!1;for(var L=0;L<v.length&&L<m.length;L++)if(!Pr(m[L],v[L]))return!1;return!0}function ag(m,v,L,N,U,V){if(El=V,$n=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,mf.current=m===null||m.memoizedState===null?JT:qT,m=L(N,U),ou){V=0;do{if(ou=!1,au=0,25<=V)throw Error(c(301));V+=1,mi=bi=null,v.updateQueue=null,mf.current=eR,m=L(N,U)}while(ou)}if(mf.current=Sf,v=bi!==null&&bi.next!==null,El=0,mi=bi=$n=null,gf=!1,v)throw Error(c(300));return m}function lg(){var m=au!==0;return au=0,m}function Ls(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?$n.memoizedState=mi=m:mi=mi.next=m,mi}function gs(){if(bi===null){var m=$n.alternate;m=m!==null?m.memoizedState:null}else m=bi.next;var v=mi===null?$n.memoizedState:mi.next;if(v!==null)mi=v,bi=m;else{if(m===null)throw Error(c(310));bi=m,m={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},mi===null?$n.memoizedState=mi=m:mi=mi.next=m}return mi}function da(m,v){return typeof v=="function"?v(m):v}function vf(m){var v=gs(),L=v.queue;if(L===null)throw Error(c(311));L.lastRenderedReducer=m;var N=bi,U=N.baseQueue,V=L.pending;if(V!==null){if(U!==null){var ce=U.next;U.next=V.next,V.next=ce}N.baseQueue=U=V,L.pending=null}if(U!==null){V=U.next,N=N.baseState;var xe=ce=null,He=null,ct=V;do{var xt=ct.lane;if((El&xt)===xt)He!==null&&(He=He.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),N=ct.hasEagerState?ct.eagerState:m(N,ct.action);else{var zt={lane:xt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};He===null?(xe=He=zt,ce=N):He=He.next=zt,$n.lanes|=xt,Al|=xt}ct=ct.next}while(ct!==null&&ct!==V);He===null?ce=N:He.next=xe,Pr(N,v.memoizedState)||(yr=!0),v.memoizedState=N,v.baseState=ce,v.baseQueue=He,L.lastRenderedState=N}if(m=L.interleaved,m!==null){U=m;do V=U.lane,$n.lanes|=V,Al|=V,U=U.next;while(U!==m)}else U===null&&(L.lanes=0);return[v.memoizedState,L.dispatch]}function yf(m){var v=gs(),L=v.queue;if(L===null)throw Error(c(311));L.lastRenderedReducer=m;var N=L.dispatch,U=L.pending,V=v.memoizedState;if(U!==null){L.pending=null;var ce=U=U.next;do V=m(V,ce.action),ce=ce.next;while(ce!==U);Pr(V,v.memoizedState)||(yr=!0),v.memoizedState=V,v.baseQueue===null&&(v.baseState=V),L.lastRenderedState=V}return[V,N]}function D_(){}function F_(m,v){var L=$n,N=gs(),U=v(),V=!Pr(N.memoizedState,U);if(V&&(N.memoizedState=U,yr=!0),N=N.queue,cu($_.bind(null,L,N,m),[m]),N.getSnapshot!==v||V||mi!==null&&mi.memoizedState.tag&1){if(L.flags|=2048,lu(9,B_.bind(null,L,N,U,v),void 0,null),ti===null)throw Error(c(349));El&30||U_(L,v,U)}return U}function U_(m,v,L){m.flags|=16384,m={getSnapshot:v,value:L},v=$n.updateQueue,v===null?(v={lastEffect:null,stores:null},$n.updateQueue=v,v.stores=[m]):(L=v.stores,L===null?v.stores=[m]:L.push(m))}function B_(m,v,L,N){v.value=L,v.getSnapshot=N,z_(v)&&Or(m,1,-1)}function $_(m,v,L){return L(function(){z_(v)&&Or(m,1,-1)})}function z_(m){var v=m.getSnapshot;m=m.value;try{var L=v();return!Pr(m,L)}catch{return!0}}function cg(m){var v=Ls();return typeof m=="function"&&(m=m()),v.memoizedState=v.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:m},v.queue=m,m=m.dispatch=QT.bind(null,$n,m),[v.memoizedState,m]}function lu(m,v,L,N){return m={tag:m,create:v,destroy:L,deps:N,next:null},v=$n.updateQueue,v===null?(v={lastEffect:null,stores:null},$n.updateQueue=v,v.lastEffect=m.next=m):(L=v.lastEffect,L===null?v.lastEffect=m.next=m:(N=L.next,L.next=m,m.next=N,v.lastEffect=m)),m}function H_(){return gs().memoizedState}function xf(m,v,L,N){var U=Ls();$n.flags|=m,U.memoizedState=lu(1|v,L,void 0,N===void 0?null:N)}function _f(m,v,L,N){var U=gs();N=N===void 0?null:N;var V=void 0;if(bi!==null){var ce=bi.memoizedState;if(V=ce.destroy,N!==null&&og(N,ce.deps)){U.memoizedState=lu(v,L,V,N);return}}$n.flags|=m,U.memoizedState=lu(1|v,L,V,N)}function ug(m,v){return xf(8390656,8,m,v)}function cu(m,v){return _f(2048,8,m,v)}function W_(m,v){return _f(4,2,m,v)}function V_(m,v){return _f(4,4,m,v)}function G_(m,v){if(typeof v=="function")return m=m(),v(m),function(){v(null)};if(v!=null)return m=m(),v.current=m,function(){v.current=null}}function j_(m,v,L){return L=L!=null?L.concat([m]):null,_f(4,4,G_.bind(null,v,m),L)}function hg(){}function K_(m,v){var L=gs();v=v===void 0?null:v;var N=L.memoizedState;return N!==null&&v!==null&&og(v,N[1])?N[0]:(L.memoizedState=[m,v],m)}function X_(m,v){var L=gs();v=v===void 0?null:v;var N=L.memoizedState;return N!==null&&v!==null&&og(v,N[1])?N[0]:(m=m(),L.memoizedState=[m,v],m)}function YT(m,v){var L=en;en=L!==0&&4>L?L:4,m(!0);var N=Nr.transition;Nr.transition={};try{m(!1),v()}finally{en=L,Nr.transition=N}}function Y_(){return gs().memoizedState}function ZT(m,v,L){var N=ho(m);L={lane:N,action:L,hasEagerState:!1,eagerState:null,next:null},Z_(m)?Q_(v,L):(J_(m,v,L),L=Hi(),m=Or(m,N,L),m!==null&&q_(m,v,N))}function QT(m,v,L){var N=ho(m),U={lane:N,action:L,hasEagerState:!1,eagerState:null,next:null};if(Z_(m))Q_(v,U);else{J_(m,v,U);var V=m.alternate;if(m.lanes===0&&(V===null||V.lanes===0)&&(V=v.lastRenderedReducer,V!==null))try{var ce=v.lastRenderedState,xe=V(ce,L);if(U.hasEagerState=!0,U.eagerState=xe,Pr(xe,ce))return}catch{}finally{}L=Hi(),m=Or(m,N,L),m!==null&&q_(m,v,N)}}function Z_(m){var v=m.alternate;return m===$n||v!==null&&v===$n}function Q_(m,v){ou=gf=!0;var L=m.pending;L===null?v.next=v:(v.next=L.next,L.next=v),m.pending=v}function J_(m,v,L){ti!==null&&m.mode&1&&!(Qt&2)?(m=v.interleaved,m===null?(L.next=L,O===null?O=[v]:O.push(v)):(L.next=m.next,m.next=L),v.interleaved=L):(m=v.pending,m===null?L.next=L:(L.next=m.next,m.next=L),v.pending=L)}function q_(m,v,L){if(L&4194240){var N=v.lanes;N&=m.pendingLanes,L|=N,v.lanes=L,Yc(m,L)}}var Sf={readContext:k,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},JT={readContext:k,useCallback:function(m,v){return Ls().memoizedState=[m,v===void 0?null:v],m},useContext:k,useEffect:ug,useImperativeHandle:function(m,v,L){return L=L!=null?L.concat([m]):null,xf(4194308,4,G_.bind(null,v,m),L)},useLayoutEffect:function(m,v){return xf(4194308,4,m,v)},useInsertionEffect:function(m,v){return xf(4,2,m,v)},useMemo:function(m,v){var L=Ls();return v=v===void 0?null:v,m=m(),L.memoizedState=[m,v],m},useReducer:function(m,v,L){var N=Ls();return v=L!==void 0?L(v):v,N.memoizedState=N.baseState=v,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:v},N.queue=m,m=m.dispatch=ZT.bind(null,$n,m),[N.memoizedState,m]},useRef:function(m){var v=Ls();return m={current:m},v.memoizedState=m},useState:cg,useDebugValue:hg,useDeferredValue:function(m){var v=cg(m),L=v[0],N=v[1];return ug(function(){var U=Nr.transition;Nr.transition={};try{N(m)}finally{Nr.transition=U}},[m]),L},useTransition:function(){var m=cg(!1),v=m[0];return m=YT.bind(null,m[1]),Ls().memoizedState=m,[v,m]},useMutableSource:function(){},useSyncExternalStore:function(m,v,L){var N=$n,U=Ls();if(Ln){if(L===void 0)throw Error(c(407));L=L()}else{if(L=v(),ti===null)throw Error(c(349));El&30||U_(N,v,L)}U.memoizedState=L;var V={value:L,getSnapshot:v};return U.queue=V,ug($_.bind(null,N,V,m),[m]),N.flags|=2048,lu(9,B_.bind(null,N,V,L,v),void 0,null),L},useId:function(){var m=Ls(),v=ti.identifierPrefix;if(Ln){var L=gn,N=Rn;L=(N&~(1<<32-Ei(N)-1)).toString(32)+L,v=":"+v+"R"+L,L=au++,0<L&&(v+="H"+L.toString(32)),v+=":"}else L=XT++,v=":"+v+"r"+L.toString(32)+":";return m.memoizedState=v},unstable_isNewReconciler:!1},qT={readContext:k,useCallback:K_,useContext:k,useEffect:cu,useImperativeHandle:j_,useInsertionEffect:W_,useLayoutEffect:V_,useMemo:X_,useReducer:vf,useRef:H_,useState:function(){return vf(da)},useDebugValue:hg,useDeferredValue:function(m){var v=vf(da),L=v[0],N=v[1];return cu(function(){var U=Nr.transition;Nr.transition={};try{N(m)}finally{Nr.transition=U}},[m]),L},useTransition:function(){var m=vf(da)[0],v=gs().memoizedState;return[m,v]},useMutableSource:D_,useSyncExternalStore:F_,useId:Y_,unstable_isNewReconciler:!1},eR={readContext:k,useCallback:K_,useContext:k,useEffect:cu,useImperativeHandle:j_,useInsertionEffect:W_,useLayoutEffect:V_,useMemo:X_,useReducer:yf,useRef:H_,useState:function(){return yf(da)},useDebugValue:hg,useDeferredValue:function(m){var v=yf(da),L=v[0],N=v[1];return cu(function(){var U=Nr.transition;Nr.transition={};try{N(m)}finally{Nr.transition=U}},[m]),L},useTransition:function(){var m=yf(da)[0],v=gs().memoizedState;return[m,v]},useMutableSource:D_,useSyncExternalStore:F_,useId:Y_,unstable_isNewReconciler:!1};function fg(m,v){try{var L="",N=v;do L+=ff(N),N=N.return;while(N);var U=L}catch(V){U=`
Error generating stack: `+V.message+`
`+V.stack}return{value:m,source:v,stack:U}}function dg(m,v){try{console.error(v.value)}catch(L){setTimeout(function(){throw L})}}var tR=typeof WeakMap=="function"?WeakMap:Map;function eS(m,v,L){L=ee(-1,L),L.tag=3,L.payload={element:null};var N=v.value;return L.callback=function(){Ff||(Ff=!0,kg=N),dg(m,v)},L}function tS(m,v,L){L=ee(-1,L),L.tag=3;var N=m.type.getDerivedStateFromError;if(typeof N=="function"){var U=v.value;L.payload=function(){return N(U)},L.callback=function(){dg(m,v)}}var V=m.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(L.callback=function(){dg(m,v),typeof N!="function"&&(co===null?co=new Set([this]):co.add(this));var ce=v.stack;this.componentDidCatch(v.value,{componentStack:ce!==null?ce:""})}),L}function nS(m,v,L){var N=m.pingCache;if(N===null){N=m.pingCache=new tR;var U=new Set;N.set(v,U)}else U=N.get(v),U===void 0&&(U=new Set,N.set(v,U));U.has(L)||(U.add(L),m=mR.bind(null,m,v,L),v.then(m,m))}function iS(m){do{var v;if((v=m.tag===13)&&(v=m.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return m;m=m.return}while(m!==null);return null}function rS(m,v,L,N,U){return m.mode&1?(m.flags|=65536,m.lanes=U,m):(m===v?m.flags|=65536:(m.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(v=ee(-1,1),v.tag=2,te(L,v))),L.lanes|=1),m)}function vs(m){m.flags|=4}function sS(m,v){if(m!==null&&m.child===v.child)return!0;if(v.flags&16)return!1;for(m=v.child;m!==null;){if(m.flags&12854||m.subtreeFlags&12854)return!1;m=m.sibling}return!0}var uu,hu,wf,Mf;if(je)uu=function(m,v){for(var L=v.child;L!==null;){if(L.tag===5||L.tag===6)le(m,L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===v)break;for(;L.sibling===null;){if(L.return===null||L.return===v)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},hu=function(){},wf=function(m,v,L,N,U){if(m=m.memoizedProps,m!==N){var V=v.stateNode,ce=ms(Ir.current);L=re(V,L,m,N,U,ce),(v.updateQueue=L)&&vs(v)}},Mf=function(m,v,L,N){L!==N&&vs(v)};else if(oe){uu=function(m,v,L,N){for(var U=v.child;U!==null;){if(U.tag===5){var V=U.stateNode;L&&N&&(V=Pt(V,U.type,U.memoizedProps,U)),le(m,V)}else if(U.tag===6)V=U.stateNode,L&&N&&(V=tn(V,U.memoizedProps,U)),le(m,V);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)V=U.child,V!==null&&(V.return=U),uu(m,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===v)break;for(;U.sibling===null;){if(U.return===null||U.return===v)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var oS=function(m,v,L,N){for(var U=v.child;U!==null;){if(U.tag===5){var V=U.stateNode;L&&N&&(V=Pt(V,U.type,U.memoizedProps,U)),_t(m,V)}else if(U.tag===6)V=U.stateNode,L&&N&&(V=tn(V,U.memoizedProps,U)),_t(m,V);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)V=U.child,V!==null&&(V.return=U),oS(m,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===v)break;for(;U.sibling===null;){if(U.return===null||U.return===v)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};hu=function(m,v){var L=v.stateNode;if(!sS(m,v)){m=L.containerInfo;var N=Tt(m);oS(N,v,!1,!1),L.pendingChildren=N,vs(v),Xt(m,N)}},wf=function(m,v,L,N,U){var V=m.stateNode,ce=m.memoizedProps;if((m=sS(m,v))&&ce===N)v.stateNode=V;else{var xe=v.stateNode,He=ms(Ir.current),ct=null;ce!==N&&(ct=re(xe,L,ce,N,U,He)),m&&ct===null?v.stateNode=V:(V=nt(V,ct,L,ce,N,v,m,xe),j(V,L,N,U,He)&&vs(v),v.stateNode=V,m?vs(v):uu(V,v,!1,!1))}},Mf=function(m,v,L,N){L!==N?(m=ms(Ml.current),L=ms(Ir.current),v.stateNode=ve(N,m,L,v),vs(v)):v.stateNode=m.stateNode}}else hu=function(){},wf=function(){},Mf=function(){};function fu(m,v){if(!Ln)switch(m.tailMode){case"hidden":v=m.tail;for(var L=null;v!==null;)v.alternate!==null&&(L=v),v=v.sibling;L===null?m.tail=null:L.sibling=null;break;case"collapsed":L=m.tail;for(var N=null;L!==null;)L.alternate!==null&&(N=L),L=L.sibling;N===null?v||m.tail===null?m.tail=null:m.tail.sibling=null:N.sibling=null}}function Ti(m){var v=m.alternate!==null&&m.alternate.child===m.child,L=0,N=0;if(v)for(var U=m.child;U!==null;)L|=U.lanes|U.childLanes,N|=U.subtreeFlags&14680064,N|=U.flags&14680064,U.return=m,U=U.sibling;else for(U=m.child;U!==null;)L|=U.lanes|U.childLanes,N|=U.subtreeFlags,N|=U.flags,U.return=m,U=U.sibling;return m.subtreeFlags|=N,m.childLanes=L,v}function nR(m,v,L){var N=v.pendingProps;switch(Jm(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(v),null;case 1:return qn(v.type)&&Tn(),Ti(v),null;case 3:return N=v.stateNode,Cl(),Lt(wn),Lt(Vt),sg(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(m===null||m.child===null)&&(nu(v)?vs(v):m===null||m.memoizedState.isDehydrated&&!(v.flags&256)||(v.flags|=1024,Xr!==null&&(Ng(Xr),Xr=null))),hu(m,v),Ti(v),null;case 5:ig(v),L=ms(Ml.current);var U=v.type;if(m!==null&&v.stateNode!=null)wf(m,v,U,N,L),m.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!N){if(v.stateNode===null)throw Error(c(166));return Ti(v),null}if(m=ms(Ir.current),nu(v)){if(!Ve)throw Error(c(175));m=jc(v.stateNode,v.type,v.memoizedProps,L,m,v,!tu),v.updateQueue=m,m!==null&&vs(v)}else{var V=ne(U,N,L,m,v);uu(V,v,!1,!1),v.stateNode=V,j(V,U,N,L,m)&&vs(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return Ti(v),null;case 6:if(m&&v.stateNode!=null)Mf(m,v,m.memoizedProps,N);else{if(typeof N!="string"&&v.stateNode===null)throw Error(c(166));if(m=ms(Ml.current),L=ms(Ir.current),nu(v)){if(!Ve)throw Error(c(176));if(m=v.stateNode,N=v.memoizedProps,(L=Kc(m,N,v,!tu))&&(U=gr,U!==null))switch(V=(U.mode&1)!==0,U.tag){case 3:Ct(U.stateNode.containerInfo,m,N,V);break;case 5:wt(U.type,U.memoizedProps,U.stateNode,m,N,V)}L&&vs(v)}else v.stateNode=ve(N,m,L,v)}return Ti(v),null;case 13:if(Lt(In),N=v.memoizedState,Ln&&vr!==null&&v.mode&1&&!(v.flags&128)){for(m=vr;m;)m=ds(m);return Sl(),v.flags|=98560,v}if(N!==null&&N.dehydrated!==null){if(N=nu(v),m===null){if(!N)throw Error(c(318));if(!Ve)throw Error(c(344));if(m=v.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(c(317));dl(m,v)}else Sl(),!(v.flags&128)&&(v.memoizedState=null),v.flags|=4;return Ti(v),null}return Xr!==null&&(Ng(Xr),Xr=null),v.flags&128?(v.lanes=L,v):(N=N!==null,L=!1,m===null?nu(v):L=m.memoizedState!==null,N&&!L&&(v.child.flags|=8192,v.mode&1&&(m===null||In.current&1?li===0&&(li=3):Dg())),v.updateQueue!==null&&(v.flags|=4),Ti(v),null);case 4:return Cl(),hu(m,v),m===null&&$e(v.stateNode.containerInfo),Ti(v),null;case 10:return ha(v.type._context),Ti(v),null;case 17:return qn(v.type)&&Tn(),Ti(v),null;case 19:if(Lt(In),U=v.memoizedState,U===null)return Ti(v),null;if(N=(v.flags&128)!==0,V=U.rendering,V===null)if(N)fu(U,!1);else{if(li!==0||m!==null&&m.flags&128)for(m=v.child;m!==null;){if(V=pf(m),V!==null){for(v.flags|=128,fu(U,!1),m=V.updateQueue,m!==null&&(v.updateQueue=m,v.flags|=4),v.subtreeFlags=0,m=L,N=v.child;N!==null;)L=N,U=m,L.flags&=14680066,V=L.alternate,V===null?(L.childLanes=0,L.lanes=U,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=V.childLanes,L.lanes=V.lanes,L.child=V.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=V.memoizedProps,L.memoizedState=V.memoizedState,L.updateQueue=V.updateQueue,L.type=V.type,U=V.dependencies,L.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),N=N.sibling;return vt(In,In.current&1|2),v.child}m=m.sibling}U.tail!==null&&Gn()>Lg&&(v.flags|=128,N=!0,fu(U,!1),v.lanes=4194304)}else{if(!N)if(m=pf(V),m!==null){if(v.flags|=128,N=!0,m=m.updateQueue,m!==null&&(v.updateQueue=m,v.flags|=4),fu(U,!0),U.tail===null&&U.tailMode==="hidden"&&!V.alternate&&!Ln)return Ti(v),null}else 2*Gn()-U.renderingStartTime>Lg&&L!==1073741824&&(v.flags|=128,N=!0,fu(U,!1),v.lanes=4194304);U.isBackwards?(V.sibling=v.child,v.child=V):(m=U.last,m!==null?m.sibling=V:v.child=V,U.last=V)}return U.tail!==null?(v=U.tail,U.rendering=v,U.tail=v.sibling,U.renderingStartTime=Gn(),v.sibling=null,m=In.current,vt(In,N?m&1|2:m&1),v):(Ti(v),null);case 22:case 23:return Og(),N=v.memoizedState!==null,m!==null&&m.memoizedState!==null!==N&&(v.flags|=8192),N&&v.mode&1?xr&1073741824&&(Ti(v),je&&v.subtreeFlags&6&&(v.flags|=8192)):Ti(v),null;case 24:return null;case 25:return null}throw Error(c(156,v.tag))}var iR=l.ReactCurrentOwner,yr=!1;function zi(m,v,L,N){v.child=m===null?N_(v,null,L,N):wl(v,m.child,L,N)}function aS(m,v,L,N,U){L=L.render;var V=v.ref;return P(v,U),N=ag(m,v,L,N,V,U),L=lg(),m!==null&&!yr?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~U,ks(m,v,U)):(Ln&&L&&fa(v),v.flags|=1,zi(m,v,N,U),v.child)}function lS(m,v,L,N,U){if(m===null){var V=L.type;return typeof V=="function"&&!Fg(V)&&V.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(v.tag=15,v.type=V,cS(m,v,V,N,U)):(m=Vf(L.type,null,N,v,v.mode,U),m.ref=v.ref,m.return=v,v.child=m)}if(V=m.child,!(m.lanes&U)){var ce=V.memoizedProps;if(L=L.compare,L=L!==null?L:ca,L(ce,N)&&m.ref===v.ref)return ks(m,v,U)}return v.flags|=1,m=po(V,N),m.ref=v.ref,m.return=v,v.child=m}function cS(m,v,L,N,U){if(m!==null&&ca(m.memoizedProps,N)&&m.ref===v.ref)if(yr=!1,(m.lanes&U)!==0)m.flags&131072&&(yr=!0);else return v.lanes=m.lanes,ks(m,v,U);return pg(m,v,L,N,U)}function uS(m,v,L){var N=v.pendingProps,U=N.children,V=m!==null?m.memoizedState:null;if(N.mode==="hidden")if(!(v.mode&1))v.memoizedState={baseLanes:0,cachePool:null},vt(bl,xr),xr|=L;else if(L&1073741824)v.memoizedState={baseLanes:0,cachePool:null},N=V!==null?V.baseLanes:L,vt(bl,xr),xr|=N;else return m=V!==null?V.baseLanes|L:L,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:m,cachePool:null},v.updateQueue=null,vt(bl,xr),xr|=m,null;else V!==null?(N=V.baseLanes|L,v.memoizedState=null):N=L,vt(bl,xr),xr|=N;return zi(m,v,U,L),v.child}function hS(m,v){var L=v.ref;(m===null&&L!==null||m!==null&&m.ref!==L)&&(v.flags|=512,v.flags|=2097152)}function pg(m,v,L,N,U){var V=qn(L)?kr:Vt.current;return V=qi(v,V),P(v,U),L=ag(m,v,L,N,V,U),N=lg(),m!==null&&!yr?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~U,ks(m,v,U)):(Ln&&N&&fa(v),v.flags|=1,zi(m,v,L,U),v.child)}function fS(m,v,L,N,U){if(qn(L)){var V=!0;oi(v)}else V=!1;if(P(v,U),v.stateNode===null)m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2),St(v,L,N),$t(v,L,N,U),N=!0;else if(m===null){var ce=v.stateNode,xe=v.memoizedProps;ce.props=xe;var He=ce.context,ct=L.contextType;typeof ct=="object"&&ct!==null?ct=k(ct):(ct=qn(L)?kr:Vt.current,ct=qi(v,ct));var xt=L.getDerivedStateFromProps,zt=typeof xt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";zt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(xe!==N||He!==ct)&&kt(v,ce,N,ct),F=!1;var It=v.memoizedState;ce.state=It,Le(v,N,ce,U),He=v.memoizedState,xe!==N||It!==He||wn.current||F?(typeof xt=="function"&&(it(v,L,xt,N),He=v.memoizedState),(xe=F||qe(v,L,xe,N,It,He,ct))?(zt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(v.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=N,v.memoizedState=He),ce.props=N,ce.state=He,ce.context=ct,N=xe):(typeof ce.componentDidMount=="function"&&(v.flags|=4194308),N=!1)}else{ce=v.stateNode,X(m,v),xe=v.memoizedProps,ct=v.type===v.elementType?xe:tr(v.type,xe),ce.props=ct,zt=v.pendingProps,It=ce.context,He=L.contextType,typeof He=="object"&&He!==null?He=k(He):(He=qn(L)?kr:Vt.current,He=qi(v,He));var vn=L.getDerivedStateFromProps;(xt=typeof vn=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(xe!==zt||It!==He)&&kt(v,ce,N,He),F=!1,It=v.memoizedState,ce.state=It,Le(v,N,ce,U);var bt=v.memoizedState;xe!==zt||It!==bt||wn.current||F?(typeof vn=="function"&&(it(v,L,vn,N),bt=v.memoizedState),(ct=F||qe(v,L,ct,N,It,bt,He)||!1)?(xt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(N,bt,He),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(N,bt,He)),typeof ce.componentDidUpdate=="function"&&(v.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof ce.componentDidUpdate!="function"||xe===m.memoizedProps&&It===m.memoizedState||(v.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||xe===m.memoizedProps&&It===m.memoizedState||(v.flags|=1024),v.memoizedProps=N,v.memoizedState=bt),ce.props=N,ce.state=bt,ce.context=He,N=ct):(typeof ce.componentDidUpdate!="function"||xe===m.memoizedProps&&It===m.memoizedState||(v.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||xe===m.memoizedProps&&It===m.memoizedState||(v.flags|=1024),N=!1)}return mg(m,v,L,N,V,U)}function mg(m,v,L,N,U,V){hS(m,v);var ce=(v.flags&128)!==0;if(!N&&!ce)return U&&oo(v,L,!1),ks(m,v,V);N=v.stateNode,iR.current=v;var xe=ce&&typeof L.getDerivedStateFromError!="function"?null:N.render();return v.flags|=1,m!==null&&ce?(v.child=wl(v,m.child,null,V),v.child=wl(v,null,xe,V)):zi(m,v,xe,V),v.memoizedState=N.state,U&&oo(v,L,!0),v.child}function dS(m){var v=m.stateNode;v.pendingContext?Vn(m,v.pendingContext,v.pendingContext!==v.context):v.context&&Vn(m,v.context,!1),ng(m,v.containerInfo)}function pS(m,v,L,N,U){return Sl(),tg(U),v.flags|=256,zi(m,v,L,N),v.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function Ef(m){return{baseLanes:m,cachePool:null}}function mS(m,v,L){var N=v.pendingProps,U=In.current,V=!1,ce=(v.flags&128)!==0,xe;if((xe=ce)||(xe=m!==null&&m.memoizedState===null?!1:(U&2)!==0),xe?(V=!0,v.flags&=-129):(m===null||m.memoizedState!==null)&&(U|=1),vt(In,U&1),m===null)return eg(v),m=v.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(v.mode&1?Sn(m)?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(U=N.children,m=N.fallback,V?(N=v.mode,V=v.child,U={mode:"hidden",children:U},!(N&1)&&V!==null?(V.childLanes=0,V.pendingProps=U):V=Gf(U,N,0,null),m=xa(m,N,L,null),V.return=v,m.return=v,V.sibling=m,v.child=V,v.child.memoizedState=Ef(L),v.memoizedState=Cf,m):gg(v,U));if(U=m.memoizedState,U!==null){if(xe=U.dehydrated,xe!==null){if(ce)return v.flags&256?(v.flags&=-257,bf(m,v,L,Error(c(422)))):v.memoizedState!==null?(v.child=m.child,v.flags|=128,null):(V=N.fallback,U=v.mode,N=Gf({mode:"visible",children:N.children},U,0,null),V=xa(V,U,L,null),V.flags|=2,N.return=v,V.return=v,N.sibling=V,v.child=N,v.mode&1&&wl(v,m.child,null,L),v.child.memoizedState=Ef(L),v.memoizedState=Cf,V);if(!(v.mode&1))v=bf(m,v,L,null);else if(Sn(xe))v=bf(m,v,L,Error(c(419)));else if(N=(L&m.childLanes)!==0,yr||N){if(N=ti,N!==null){switch(L&-L){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}N=V&(N.suspendedLanes|L)?0:V,N!==0&&N!==U.retryLane&&(U.retryLane=N,Or(m,N,-1))}Dg(),v=bf(m,v,L,Error(c(421)))}else io(xe)?(v.flags|=128,v.child=m.child,v=gR.bind(null,m),fs(xe,v),v=null):(L=U.treeContext,Ve&&(vr=na(xe),gr=v,Ln=!0,Xr=null,tu=!1,L!==null&&(Wt[Dt++]=Rn,Wt[Dt++]=gn,Wt[Dt++]=Cn,Rn=L.id,gn=L.overflow,Cn=v)),v=gg(v,v.pendingProps.children),v.flags|=4096);return v}return V?(N=vS(m,v,N.children,N.fallback,L),V=v.child,U=m.child.memoizedState,V.memoizedState=U===null?Ef(L):{baseLanes:U.baseLanes|L,cachePool:null},V.childLanes=m.childLanes&~L,v.memoizedState=Cf,N):(L=gS(m,v,N.children,L),v.memoizedState=null,L)}return V?(N=vS(m,v,N.children,N.fallback,L),V=v.child,U=m.child.memoizedState,V.memoizedState=U===null?Ef(L):{baseLanes:U.baseLanes|L,cachePool:null},V.childLanes=m.childLanes&~L,v.memoizedState=Cf,N):(L=gS(m,v,N.children,L),v.memoizedState=null,L)}function gg(m,v){return v=Gf({mode:"visible",children:v},m.mode,0,null),v.return=m,m.child=v}function gS(m,v,L,N){var U=m.child;return m=U.sibling,L=po(U,{mode:"visible",children:L}),!(v.mode&1)&&(L.lanes=N),L.return=v,L.sibling=null,m!==null&&(N=v.deletions,N===null?(v.deletions=[m],v.flags|=16):N.push(m)),v.child=L}function vS(m,v,L,N,U){var V=v.mode;m=m.child;var ce=m.sibling,xe={mode:"hidden",children:L};return!(V&1)&&v.child!==m?(L=v.child,L.childLanes=0,L.pendingProps=xe,v.deletions=null):(L=po(m,xe),L.subtreeFlags=m.subtreeFlags&14680064),ce!==null?N=po(ce,N):(N=xa(N,V,U,null),N.flags|=2),N.return=v,L.return=v,L.sibling=N,v.child=L,N}function bf(m,v,L,N){return N!==null&&tg(N),wl(v,m.child,null,L),m=gg(v,v.pendingProps.children),m.flags|=2,v.memoizedState=null,m}function yS(m,v,L){m.lanes|=v;var N=m.alternate;N!==null&&(N.lanes|=v),b(m.return,v,L)}function vg(m,v,L,N,U){var V=m.memoizedState;V===null?m.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:N,tail:L,tailMode:U}:(V.isBackwards=v,V.rendering=null,V.renderingStartTime=0,V.last=N,V.tail=L,V.tailMode=U)}function xS(m,v,L){var N=v.pendingProps,U=N.revealOrder,V=N.tail;if(zi(m,v,N.children,L),N=In.current,N&2)N=N&1|2,v.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=v.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&yS(m,L,v);else if(m.tag===19)yS(m,L,v);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===v)break e;for(;m.sibling===null;){if(m.return===null||m.return===v)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}N&=1}if(vt(In,N),!(v.mode&1))v.memoizedState=null;else switch(U){case"forwards":for(L=v.child,U=null;L!==null;)m=L.alternate,m!==null&&pf(m)===null&&(U=L),L=L.sibling;L=U,L===null?(U=v.child,v.child=null):(U=L.sibling,L.sibling=null),vg(v,!1,U,L,V);break;case"backwards":for(L=null,U=v.child,v.child=null;U!==null;){if(m=U.alternate,m!==null&&pf(m)===null){v.child=U;break}m=U.sibling,U.sibling=L,L=U,U=m}vg(v,!0,L,null,V);break;case"together":vg(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function ks(m,v,L){if(m!==null&&(v.dependencies=m.dependencies),Al|=v.lanes,!(L&v.childLanes))return null;if(m!==null&&v.child!==m.child)throw Error(c(153));if(v.child!==null){for(m=v.child,L=po(m,m.pendingProps),v.child=L,L.return=v;m.sibling!==null;)m=m.sibling,L=L.sibling=po(m,m.pendingProps),L.return=v;L.sibling=null}return v.child}function rR(m,v,L){switch(v.tag){case 3:dS(v),Sl();break;case 5:O_(v);break;case 1:qn(v.type)&&oi(v);break;case 4:ng(v,v.stateNode.containerInfo);break;case 10:Rs(v,v.type._context,v.memoizedProps.value);break;case 13:var N=v.memoizedState;if(N!==null)return N.dehydrated!==null?(vt(In,In.current&1),v.flags|=128,null):L&v.child.childLanes?mS(m,v,L):(vt(In,In.current&1),m=ks(m,v,L),m!==null?m.sibling:null);vt(In,In.current&1);break;case 19:if(N=(L&v.childLanes)!==0,m.flags&128){if(N)return xS(m,v,L);v.flags|=128}var U=v.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),vt(In,In.current),N)break;return null;case 22:case 23:return v.lanes=0,uS(m,v,L)}return ks(m,v,L)}function sR(m,v){switch(Jm(v),v.tag){case 1:return qn(v.type)&&Tn(),m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 3:return Cl(),Lt(wn),Lt(Vt),sg(),m=v.flags,m&65536&&!(m&128)?(v.flags=m&-65537|128,v):null;case 5:return ig(v),null;case 13:if(Lt(In),m=v.memoizedState,m!==null&&m.dehydrated!==null){if(v.alternate===null)throw Error(c(340));Sl()}return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 19:return Lt(In),null;case 4:return Cl(),null;case 10:return ha(v.type._context),null;case 22:case 23:return Og(),null;case 24:return null;default:return null}}var Af=!1,pa=!1,oR=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Tf(m,v){var L=m.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(N){rr(m,v,N)}else L.current=null}function yg(m,v,L){try{L()}catch(N){rr(m,v,N)}}var _S=!1;function aR(m,v){for(K(m.containerInfo),ft=v;ft!==null;)if(m=ft,v=m.child,(m.subtreeFlags&1028)!==0&&v!==null)v.return=m,ft=v;else for(;ft!==null;){m=ft;try{var L=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var N=L.memoizedProps,U=L.memoizedState,V=m.stateNode,ce=V.getSnapshotBeforeUpdate(m.elementType===m.type?N:tr(m.type,N),U);V.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:je&&lt(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(xe){rr(m,m.return,xe)}if(v=m.sibling,v!==null){v.return=m.return,ft=v;break}ft=m.return}return L=_S,_S=!1,L}function ma(m,v,L){var N=v.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var U=N=N.next;do{if((U.tag&m)===m){var V=U.destroy;U.destroy=void 0,V!==void 0&&yg(v,L,V)}U=U.next}while(U!==N)}}function du(m,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var L=v=v.next;do{if((L.tag&m)===m){var N=L.create;L.destroy=N()}L=L.next}while(L!==v)}}function xg(m){var v=m.ref;if(v!==null){var L=m.stateNode;switch(m.tag){case 5:m=H(L);break;default:m=L}typeof v=="function"?v(m):v.current=m}}function SS(m,v,L){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(ps,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(m=v.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var N=m=m.next;do{var U=N,V=U.destroy;U=U.tag,V!==void 0&&(U&2||U&4)&&yg(v,L,V),N=N.next}while(N!==m)}break;case 1:if(Tf(v,L),m=v.stateNode,typeof m.componentWillUnmount=="function")try{m.props=v.memoizedProps,m.state=v.memoizedState,m.componentWillUnmount()}catch(ce){rr(v,L,ce)}break;case 5:Tf(v,L);break;case 4:je?AS(m,v,L):oe&&oe&&(v=v.stateNode.containerInfo,L=Tt(v),Jt(v,L))}}function wS(m,v,L){for(var N=v;;)if(SS(m,N,L),N.child===null||je&&N.tag===4){if(N===v)break;for(;N.sibling===null;){if(N.return===null||N.return===v)return;N=N.return}N.sibling.return=N.return,N=N.sibling}else N.child.return=N,N=N.child}function MS(m){var v=m.alternate;v!==null&&(m.alternate=null,MS(v)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(v=m.stateNode,v!==null&&ht(v)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function CS(m){return m.tag===5||m.tag===3||m.tag===4}function ES(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||CS(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function bS(m){if(je){e:{for(var v=m.return;v!==null;){if(CS(v))break e;v=v.return}throw Error(c(160))}var L=v;switch(L.tag){case 5:v=L.stateNode,L.flags&32&&(De(v),L.flags&=-33),L=ES(m),Sg(m,L,v);break;case 3:case 4:v=L.stateNode.containerInfo,L=ES(m),_g(m,L,v);break;default:throw Error(c(161))}}}function _g(m,v,L){var N=m.tag;if(N===5||N===6)m=m.stateNode,v?We(L,m,v):Me(L,m);else if(N!==4&&(m=m.child,m!==null))for(_g(m,v,L),m=m.sibling;m!==null;)_g(m,v,L),m=m.sibling}function Sg(m,v,L){var N=m.tag;if(N===5||N===6)m=m.stateNode,v?Ue(L,m,v):ge(L,m);else if(N!==4&&(m=m.child,m!==null))for(Sg(m,v,L),m=m.sibling;m!==null;)Sg(m,v,L),m=m.sibling}function AS(m,v,L){for(var N=v,U=!1,V,ce;;){if(!U){U=N.return;e:for(;;){if(U===null)throw Error(c(160));switch(V=U.stateNode,U.tag){case 5:ce=!1;break e;case 3:V=V.containerInfo,ce=!0;break e;case 4:V=V.containerInfo,ce=!0;break e}U=U.return}U=!0}if(N.tag===5||N.tag===6)wS(m,N,L),ce?he(V,N.stateNode):rt(V,N.stateNode);else if(N.tag===18)ce?be(V,N.stateNode):Oe(V,N.stateNode);else if(N.tag===4){if(N.child!==null){V=N.stateNode.containerInfo,ce=!0,N.child.return=N,N=N.child;continue}}else if(SS(m,N,L),N.child!==null){N.child.return=N,N=N.child;continue}if(N===v)break;for(;N.sibling===null;){if(N.return===null||N.return===v)return;N=N.return,N.tag===4&&(U=!1)}N.sibling.return=N.return,N=N.sibling}}function wg(m,v){if(je){switch(v.tag){case 0:case 11:case 14:case 15:ma(3,v,v.return),du(3,v),ma(5,v,v.return);return;case 1:return;case 5:var L=v.stateNode;if(L!=null){var N=v.memoizedProps;m=m!==null?m.memoizedProps:N;var U=v.type,V=v.updateQueue;v.updateQueue=null,V!==null&&ot(L,V,U,m,N,v)}return;case 6:if(v.stateNode===null)throw Error(c(162));L=v.memoizedProps,_e(v.stateNode,m!==null?m.memoizedProps:L,L);return;case 3:Ve&&m!==null&&m.memoizedState.isDehydrated&&we(v.stateNode.containerInfo);return;case 12:return;case 13:Rf(v);return;case 19:Rf(v);return;case 17:return}throw Error(c(163))}switch(v.tag){case 0:case 11:case 14:case 15:ma(3,v,v.return),du(3,v),ma(5,v,v.return);return;case 12:return;case 13:Rf(v);return;case 19:Rf(v);return;case 3:Ve&&m!==null&&m.memoizedState.isDehydrated&&we(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(oe){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,Jt(v.containerInfo,v.pendingChildren);break e}throw Error(c(163))}}function Rf(m){var v=m.updateQueue;if(v!==null){m.updateQueue=null;var L=m.stateNode;L===null&&(L=m.stateNode=new oR),v.forEach(function(N){var U=vR.bind(null,m,N);L.has(N)||(L.add(N),N.then(U,U))})}}function lR(m,v){for(ft=v;ft!==null;){v=ft;var L=v.deletions;if(L!==null)for(var N=0;N<L.length;N++){var U=L[N];try{var V=m;je?AS(V,U,v):wS(V,U,v);var ce=U.alternate;ce!==null&&(ce.return=null),U.return=null}catch(Et){rr(U,v,Et)}}if(L=v.child,v.subtreeFlags&12854&&L!==null)L.return=v,ft=L;else for(;ft!==null;){v=ft;try{var xe=v.flags;if(xe&32&&je&&De(v.stateNode),xe&512){var He=v.alternate;if(He!==null){var ct=He.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(xe&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var xt=v.alternate;(xt===null||xt.memoizedState===null)&&(Rg=Gn())}break;case 22:var zt=v.memoizedState!==null,It=v.alternate,vn=It!==null&&It.memoizedState!==null;if(L=v,je){e:if(N=L,U=zt,V=null,je)for(var bt=N;;){if(bt.tag===5){if(V===null){V=bt;var Ri=bt.stateNode;U?tt(Ri):Ke(bt.stateNode,bt.memoizedProps)}}else if(bt.tag===6){if(V===null){var Fr=bt.stateNode;U?at(Fr):pe(Fr,bt.memoizedProps)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===N)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===N)break;for(;bt.sibling===null;){if(bt.return===null||bt.return===N)break e;V===bt&&(V=null),bt=bt.return}V===bt&&(V=null),bt.sibling.return=bt.return,bt=bt.sibling}}if(zt&&!vn&&L.mode&1){ft=L;for(var Re=L.child;Re!==null;){for(L=ft=Re;ft!==null;){N=ft;var Se=N.child;switch(N.tag){case 0:case 11:case 14:case 15:ma(4,N,N.return);break;case 1:Tf(N,N.return);var Fe=N.stateNode;if(typeof Fe.componentWillUnmount=="function"){var dt=N.return;try{Fe.props=N.memoizedProps,Fe.state=N.memoizedState,Fe.componentWillUnmount()}catch(Et){rr(N,dt,Et)}}break;case 5:Tf(N,N.return);break;case 22:if(N.memoizedState!==null){LS(L);continue}}Se!==null?(Se.return=N,ft=Se):LS(L)}Re=Re.sibling}}}switch(xe&4102){case 2:bS(v),v.flags&=-3;break;case 6:bS(v),v.flags&=-3,wg(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,wg(v.alternate,v);break;case 4:wg(v.alternate,v)}}catch(Et){rr(v,v.return,Et)}if(L=v.sibling,L!==null){L.return=v.return,ft=L;break}ft=v.return}}}function cR(m,v,L){ft=m,TS(m)}function TS(m,v,L){for(var N=(m.mode&1)!==0;ft!==null;){var U=ft,V=U.child;if(U.tag===22&&N){var ce=U.memoizedState!==null||Af;if(!ce){var xe=U.alternate,He=xe!==null&&xe.memoizedState!==null||pa;xe=Af;var ct=pa;if(Af=ce,(pa=He)&&!ct)for(ft=U;ft!==null;)ce=ft,He=ce.child,ce.tag===22&&ce.memoizedState!==null?kS(U):He!==null?(He.return=ce,ft=He):kS(U);for(;V!==null;)ft=V,TS(V),V=V.sibling;ft=U,Af=xe,pa=ct}RS(m)}else U.subtreeFlags&8772&&V!==null?(V.return=U,ft=V):RS(m)}}function RS(m){for(;ft!==null;){var v=ft;if(v.flags&8772){var L=v.alternate;try{if(v.flags&8772)switch(v.tag){case 0:case 11:case 15:pa||du(5,v);break;case 1:var N=v.stateNode;if(v.flags&4&&!pa)if(L===null)N.componentDidMount();else{var U=v.elementType===v.type?L.memoizedProps:tr(v.type,L.memoizedProps);N.componentDidUpdate(U,L.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var V=v.updateQueue;V!==null&&Be(v,V,N);break;case 3:var ce=v.updateQueue;if(ce!==null){if(L=null,v.child!==null)switch(v.child.tag){case 5:L=H(v.child.stateNode);break;case 1:L=v.child.stateNode}Be(v,ce,L)}break;case 5:var xe=v.stateNode;L===null&&v.flags&4&&et(xe,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(Ve&&v.memoizedState===null){var He=v.alternate;if(He!==null){var ct=He.memoizedState;if(ct!==null){var xt=ct.dehydrated;xt!==null&&Pe(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(c(163))}pa||v.flags&512&&xg(v)}catch(zt){rr(v,v.return,zt)}}if(v===m){ft=null;break}if(L=v.sibling,L!==null){L.return=v.return,ft=L;break}ft=v.return}}function LS(m){for(;ft!==null;){var v=ft;if(v===m){ft=null;break}var L=v.sibling;if(L!==null){L.return=v.return,ft=L;break}ft=v.return}}function kS(m){for(;ft!==null;){var v=ft;try{switch(v.tag){case 0:case 11:case 15:var L=v.return;try{du(4,v)}catch(He){rr(v,L,He)}break;case 1:var N=v.stateNode;if(typeof N.componentDidMount=="function"){var U=v.return;try{N.componentDidMount()}catch(He){rr(v,U,He)}}var V=v.return;try{xg(v)}catch(He){rr(v,V,He)}break;case 5:var ce=v.return;try{xg(v)}catch(He){rr(v,ce,He)}}}catch(He){rr(v,v.return,He)}if(v===m){ft=null;break}var xe=v.sibling;if(xe!==null){xe.return=v.return,ft=xe;break}ft=v.return}}var Lf=0,kf=1,Pf=2,If=3,Nf=4;if(typeof Symbol=="function"&&Symbol.for){var pu=Symbol.for;Lf=pu("selector.component"),kf=pu("selector.has_pseudo_class"),Pf=pu("selector.role"),If=pu("selector.test_id"),Nf=pu("selector.text")}function Mg(m){var v=Te(m);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(c(364));return v}if(m=ae(m),m===null)throw Error(c(362));return m.stateNode.current}function Cg(m,v){switch(v.$$typeof){case Lf:if(m.type===v.value)return!0;break;case kf:e:{v=v.value,m=[m,0];for(var L=0;L<m.length;){var N=m[L++],U=m[L++],V=v[U];if(N.tag!==5||!ke(N)){for(;V!=null&&Cg(N,V);)U++,V=v[U];if(U===v.length){v=!0;break e}else for(N=N.child;N!==null;)m.push(N,U),N=N.sibling}}v=!1}return v;case Pf:if(m.tag===5&&Qe(m.stateNode,v.value))return!0;break;case Nf:if((m.tag===5||m.tag===6)&&(m=me(m),m!==null&&0<=m.indexOf(v.value)))return!0;break;case If:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Eg(m){switch(m.$$typeof){case Lf:return"<"+(R(m.value)||"Unknown")+">";case kf:return":has("+(Eg(m)||"")+")";case Pf:return'[role="'+m.value+'"]';case Nf:return'"'+m.value+'"';case If:return'[data-testname="'+m.value+'"]';default:throw Error(c(365))}}function PS(m,v){var L=[];m=[m,0];for(var N=0;N<m.length;){var U=m[N++],V=m[N++],ce=v[V];if(U.tag!==5||!ke(U)){for(;ce!=null&&Cg(U,ce);)V++,ce=v[V];if(V===v.length)L.push(U);else for(U=U.child;U!==null;)m.push(U,V),U=U.sibling}}return L}function bg(m,v){if(!Z)throw Error(c(363));m=Mg(m),m=PS(m,v),v=[],m=Array.from(m);for(var L=0;L<m.length;){var N=m[L++];if(N.tag===5)ke(N)||v.push(N.stateNode);else for(N=N.child;N!==null;)m.push(N),N=N.sibling}return v}var uR=Math.ceil,Of=l.ReactCurrentDispatcher,Ag=l.ReactCurrentOwner,jn=l.ReactCurrentBatchConfig,Qt=0,ti=null,ni=null,_i=0,xr=0,bl=Jn(0),li=0,mu=null,Al=0,Df=0,Tg=0,gu=null,nr=null,Rg=0,Lg=1/0;function Tl(){Lg=Gn()+500}var Ff=!1,kg=null,co=null,Uf=!1,uo=null,Bf=0,vu=0,Pg=null,$f=-1,zf=0;function Hi(){return Qt&6?Gn():$f!==-1?$f:$f=Gn()}function ho(m){return m.mode&1?Qt&2&&_i!==0?_i&-_i:qc.transition!==null?(zf===0&&(m=pl,pl<<=1,!(pl&4194240)&&(pl=64),zf=m),zf):(m=en,m!==0?m:Ne()):1}function Or(m,v,L){if(50<vu)throw vu=0,Pg=null,Error(c(185));var N=Hf(m,v);return N===null?null:(oa(N,v,L),(!(Qt&2)||N!==ti)&&(N===ti&&(!(Qt&2)&&(Df|=v),li===4&&fo(N,_i)),ir(N,L),v===1&&Qt===0&&!(m.mode&1)&&(Tl(),vl&&mr())),N)}function Hf(m,v){m.lanes|=v;var L=m.alternate;for(L!==null&&(L.lanes|=v),L=m,m=m.return;m!==null;)m.childLanes|=v,L=m.alternate,L!==null&&(L.childLanes|=v),L=m,m=m.return;return L.tag===3?L.stateNode:null}function ir(m,v){var L=m.callbackNode;Xm(m,v);var N=ml(m,m===ti?_i:0);if(N===0)L!==null&&lf(L),m.callbackNode=null,m.callbackPriority=0;else if(v=N&-N,m.callbackPriority!==v){if(L!=null&&lf(L),v===1)m.tag===0?hf(NS.bind(null,m)):Jc(NS.bind(null,m)),Ze?q(function(){Qt===0&&mr()}):la(gl,mr),L=null;else{switch(Zc(N)){case 1:L=gl;break;case 4:L=uf;break;case 16:L=er;break;case 536870912:L=Ym;break;default:L=er}L=WS(L,IS.bind(null,m))}m.callbackPriority=v,m.callbackNode=L}}function IS(m,v){if($f=-1,zf=0,Qt&6)throw Error(c(327));var L=m.callbackNode;if(ya()&&m.callbackNode!==L)return null;var N=ml(m,m===ti?_i:0);if(N===0)return null;if(N&30||N&m.expiredLanes||v)v=Wf(m,N);else{v=N;var U=Qt;Qt|=2;var V=FS();(ti!==m||_i!==v)&&(Tl(),ga(m,v));do try{dR();break}catch(xe){DS(m,xe)}while(1);eu(),Of.current=V,Qt=U,ni!==null?v=0:(ti=null,_i=0,v=li)}if(v!==0){if(v===2&&(U=Xc(m),U!==0&&(N=U,v=Ig(m,U))),v===1)throw L=mu,ga(m,0),fo(m,N),ir(m,Gn()),L;if(v===6)fo(m,N);else{if(U=m.current.alternate,!(N&30)&&!hR(U)&&(v=Wf(m,N),v===2&&(V=Xc(m),V!==0&&(N=V,v=Ig(m,V))),v===1))throw L=mu,ga(m,0),fo(m,N),ir(m,Gn()),L;switch(m.finishedWork=U,m.finishedLanes=N,v){case 0:case 1:throw Error(c(345));case 2:va(m,nr);break;case 3:if(fo(m,N),(N&130023424)===N&&(v=Rg+500-Gn(),10<v)){if(ml(m,0)!==0)break;if(U=m.suspendedLanes,(U&N)!==N){Hi(),m.pingedLanes|=m.suspendedLanes&U;break}m.timeoutHandle=ye(va.bind(null,m,nr),v);break}va(m,nr);break;case 4:if(fo(m,N),(N&4194240)===N)break;for(v=m.eventTimes,U=-1;0<N;){var ce=31-Ei(N);V=1<<ce,ce=v[ce],ce>U&&(U=ce),N&=~V}if(N=U,N=Gn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*uR(N/1960))-N,10<N){m.timeoutHandle=ye(va.bind(null,m,nr),N);break}va(m,nr);break;case 5:va(m,nr);break;default:throw Error(c(329))}}}return ir(m,Gn()),m.callbackNode===L?IS.bind(null,m):null}function Ig(m,v){var L=gu;return m.current.memoizedState.isDehydrated&&(ga(m,v).flags|=256),m=Wf(m,v),m!==2&&(v=nr,nr=L,v!==null&&Ng(v)),m}function Ng(m){nr===null?nr=m:nr.push.apply(nr,m)}function hR(m){for(var v=m;;){if(v.flags&16384){var L=v.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var N=0;N<L.length;N++){var U=L[N],V=U.getSnapshot;U=U.value;try{if(!Pr(V(),U))return!1}catch{return!1}}}if(L=v.child,v.subtreeFlags&16384&&L!==null)L.return=v,v=L;else{if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function fo(m,v){for(v&=~Tg,v&=~Df,m.suspendedLanes|=v,m.pingedLanes&=~v,m=m.expirationTimes;0<v;){var L=31-Ei(v),N=1<<L;m[L]=-1,v&=~N}}function NS(m){if(Qt&6)throw Error(c(327));ya();var v=ml(m,0);if(!(v&1))return ir(m,Gn()),null;var L=Wf(m,v);if(m.tag!==0&&L===2){var N=Xc(m);N!==0&&(v=N,L=Ig(m,N))}if(L===1)throw L=mu,ga(m,0),fo(m,v),ir(m,Gn()),L;if(L===6)throw Error(c(345));return m.finishedWork=m.current.alternate,m.finishedLanes=v,va(m,nr),ir(m,Gn()),null}function OS(m){uo!==null&&uo.tag===0&&!(Qt&6)&&ya();var v=Qt;Qt|=1;var L=jn.transition,N=en;try{if(jn.transition=null,en=1,m)return m()}finally{en=N,jn.transition=L,Qt=v,!(Qt&6)&&mr()}}function Og(){xr=bl.current,Lt(bl)}function ga(m,v){m.finishedWork=null,m.finishedLanes=0;var L=m.timeoutHandle;if(L!==Xe&&(m.timeoutHandle=Xe,ze(L)),ni!==null)for(L=ni.return;L!==null;){var N=L;switch(Jm(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Tn();break;case 3:Cl(),Lt(wn),Lt(Vt),sg();break;case 5:ig(N);break;case 4:Cl();break;case 13:Lt(In);break;case 19:Lt(In);break;case 10:ha(N.type._context);break;case 22:case 23:Og()}L=L.return}if(ti=m,ni=m=po(m.current,null),_i=xr=v,li=0,mu=null,Tg=Df=Al=0,nr=gu=null,O!==null){for(v=0;v<O.length;v++)if(L=O[v],N=L.interleaved,N!==null){L.interleaved=null;var U=N.next,V=L.pending;if(V!==null){var ce=V.next;V.next=U,N.next=ce}L.pending=N}O=null}return m}function DS(m,v){do{var L=ni;try{if(eu(),mf.current=Sf,gf){for(var N=$n.memoizedState;N!==null;){var U=N.queue;U!==null&&(U.pending=null),N=N.next}gf=!1}if(El=0,mi=bi=$n=null,ou=!1,au=0,Ag.current=null,L===null||L.return===null){li=1,mu=v,ni=null;break}e:{var V=m,ce=L.return,xe=L,He=v;if(v=_i,xe.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var ct=He,xt=xe,zt=xt.tag;if(!(xt.mode&1)&&(zt===0||zt===11||zt===15)){var It=xt.alternate;It?(xt.updateQueue=It.updateQueue,xt.memoizedState=It.memoizedState,xt.lanes=It.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var vn=iS(ce);if(vn!==null){vn.flags&=-257,rS(vn,ce,xe,V,v),vn.mode&1&&nS(V,ct,v),v=vn,He=ct;var bt=v.updateQueue;if(bt===null){var Ri=new Set;Ri.add(He),v.updateQueue=Ri}else bt.add(He);break e}else{if(!(v&1)){nS(V,ct,v),Dg();break e}He=Error(c(426))}}else if(Ln&&xe.mode&1){var Fr=iS(ce);if(Fr!==null){!(Fr.flags&65536)&&(Fr.flags|=256),rS(Fr,ce,xe,V,v),tg(He);break e}}V=He,li!==4&&(li=2),gu===null?gu=[V]:gu.push(V),He=fg(He,xe),xe=ce;do{switch(xe.tag){case 3:xe.flags|=65536,v&=-v,xe.lanes|=v;var Re=eS(xe,He,v);de(xe,Re);break e;case 1:V=He;var Se=xe.type,Fe=xe.stateNode;if(!(xe.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(co===null||!co.has(Fe)))){xe.flags|=65536,v&=-v,xe.lanes|=v;var dt=tS(xe,V,v);de(xe,dt);break e}}xe=xe.return}while(xe!==null)}BS(L)}catch(Et){v=Et,ni===L&&L!==null&&(ni=L=L.return);continue}break}while(1)}function FS(){var m=Of.current;return Of.current=Sf,m===null?Sf:m}function Dg(){(li===0||li===3||li===2)&&(li=4),ti===null||!(Al&268435455)&&!(Df&268435455)||fo(ti,_i)}function Wf(m,v){var L=Qt;Qt|=2;var N=FS();ti===m&&_i===v||ga(m,v);do try{fR();break}catch(U){DS(m,U)}while(1);if(eu(),Qt=L,Of.current=N,ni!==null)throw Error(c(261));return ti=null,_i=0,li}function fR(){for(;ni!==null;)US(ni)}function dR(){for(;ni!==null&&!Qc();)US(ni)}function US(m){var v=HS(m.alternate,m,xr);m.memoizedProps=m.pendingProps,v===null?BS(m):ni=v,Ag.current=null}function BS(m){var v=m;do{var L=v.alternate;if(m=v.return,v.flags&32768){if(L=sR(L,v),L!==null){L.flags&=32767,ni=L;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{li=6,ni=null;return}}else if(L=nR(L,v,xr),L!==null){ni=L;return}if(v=v.sibling,v!==null){ni=v;return}ni=v=m}while(v!==null);li===0&&(li=5)}function va(m,v){var L=en,N=jn.transition;try{jn.transition=null,en=1,pR(m,v,L)}finally{jn.transition=N,en=L}return null}function pR(m,v,L){do ya();while(uo!==null);if(Qt&6)throw Error(c(327));var N=m.finishedWork,U=m.finishedLanes;if(N===null)return null;if(m.finishedWork=null,m.finishedLanes=0,N===m.current)throw Error(c(177));m.callbackNode=null,m.callbackPriority=0;var V=N.lanes|N.childLanes;if(aa(m,V),m===ti&&(ni=ti=null,_i=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||Uf||(Uf=!0,WS(er,function(){return ya(),null})),V=(N.flags&15990)!==0,N.subtreeFlags&15990||V){V=jn.transition,jn.transition=null;var ce=en;en=1;var xe=Qt;Qt|=4,Ag.current=null,aR(m,N),lR(m,N),Y(m.containerInfo),m.current=N,cR(N),cf(),Qt=xe,en=ce,jn.transition=V}else m.current=N;if(Uf&&(Uf=!1,uo=m,Bf=U),V=m.pendingLanes,V===0&&(co=null),Zm(N.stateNode),ir(m,Gn()),v!==null)for(L=m.onRecoverableError,N=0;N<v.length;N++)L(v[N]);if(Ff)throw Ff=!1,m=kg,kg=null,m;return Bf&1&&m.tag!==0&&ya(),V=m.pendingLanes,V&1?m===Pg?vu++:(vu=0,Pg=m):vu=0,mr(),null}function ya(){if(uo!==null){var m=Zc(Bf),v=jn.transition,L=en;try{if(jn.transition=null,en=16>m?16:m,uo===null)var N=!1;else{if(m=uo,uo=null,Bf=0,Qt&6)throw Error(c(331));var U=Qt;for(Qt|=4,ft=m.current;ft!==null;){var V=ft,ce=V.child;if(ft.flags&16){var xe=V.deletions;if(xe!==null){for(var He=0;He<xe.length;He++){var ct=xe[He];for(ft=ct;ft!==null;){var xt=ft;switch(xt.tag){case 0:case 11:case 15:ma(8,xt,V)}var zt=xt.child;if(zt!==null)zt.return=xt,ft=zt;else for(;ft!==null;){xt=ft;var It=xt.sibling,vn=xt.return;if(MS(xt),xt===ct){ft=null;break}if(It!==null){It.return=vn,ft=It;break}ft=vn}}}var bt=V.alternate;if(bt!==null){var Ri=bt.child;if(Ri!==null){bt.child=null;do{var Fr=Ri.sibling;Ri.sibling=null,Ri=Fr}while(Ri!==null)}}ft=V}}if(V.subtreeFlags&2064&&ce!==null)ce.return=V,ft=ce;else e:for(;ft!==null;){if(V=ft,V.flags&2048)switch(V.tag){case 0:case 11:case 15:ma(9,V,V.return)}var Re=V.sibling;if(Re!==null){Re.return=V.return,ft=Re;break e}ft=V.return}}var Se=m.current;for(ft=Se;ft!==null;){ce=ft;var Fe=ce.child;if(ce.subtreeFlags&2064&&Fe!==null)Fe.return=ce,ft=Fe;else e:for(ce=Se;ft!==null;){if(xe=ft,xe.flags&2048)try{switch(xe.tag){case 0:case 11:case 15:du(9,xe)}}catch(Et){rr(xe,xe.return,Et)}if(xe===ce){ft=null;break e}var dt=xe.sibling;if(dt!==null){dt.return=xe.return,ft=dt;break e}ft=xe.return}}if(Qt=U,mr(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(ps,m)}catch{}N=!0}return N}finally{en=L,jn.transition=v}}return!1}function $S(m,v,L){v=fg(L,v),v=eS(m,v,1),te(m,v),v=Hi(),m=Hf(m,1),m!==null&&(oa(m,1,v),ir(m,v))}function rr(m,v,L){if(m.tag===3)$S(m,m,L);else for(;v!==null;){if(v.tag===3){$S(v,m,L);break}else if(v.tag===1){var N=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(co===null||!co.has(N))){m=fg(L,m),m=tS(v,m,1),te(v,m),m=Hi(),v=Hf(v,1),v!==null&&(oa(v,1,m),ir(v,m));break}}v=v.return}}function mR(m,v,L){var N=m.pingCache;N!==null&&N.delete(v),v=Hi(),m.pingedLanes|=m.suspendedLanes&L,ti===m&&(_i&L)===L&&(li===4||li===3&&(_i&130023424)===_i&&500>Gn()-Rg?ga(m,0):Tg|=L),ir(m,v)}function zS(m,v){v===0&&(m.mode&1?(v=ra,ra<<=1,!(ra&130023424)&&(ra=4194304)):v=1);var L=Hi();m=Hf(m,v),m!==null&&(oa(m,v,L),ir(m,L))}function gR(m){var v=m.memoizedState,L=0;v!==null&&(L=v.retryLane),zS(m,L)}function vR(m,v){var L=0;switch(m.tag){case 13:var N=m.stateNode,U=m.memoizedState;U!==null&&(L=U.retryLane);break;case 19:N=m.stateNode;break;default:throw Error(c(314))}N!==null&&N.delete(v),zS(m,L)}var HS;HS=function(m,v,L){if(m!==null)if(m.memoizedProps!==v.pendingProps||wn.current)yr=!0;else{if(!(m.lanes&L)&&!(v.flags&128))return yr=!1,rR(m,v,L);yr=!!(m.flags&131072)}else yr=!1,Ln&&v.flags&1048576&&lo(v,ei,v.index);switch(v.lanes=0,v.tag){case 2:var N=v.type;m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2),m=v.pendingProps;var U=qi(v,Vt.current);P(v,L),U=ag(null,v,N,m,U,L);var V=lg();return v.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,qn(N)?(V=!0,oi(v)):V=!1,v.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,$(v),U.updater=mt,v.stateNode=U,U._reactInternals=v,$t(v,N,m,L),v=mg(null,v,N,!0,V,L)):(v.tag=0,Ln&&V&&fa(v),zi(null,v,U,L),v=v.child),v;case 16:N=v.elementType;e:{switch(m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2),m=v.pendingProps,U=N._init,N=U(N._payload),v.type=N,U=v.tag=xR(N),m=tr(N,m),U){case 0:v=pg(null,v,N,m,L);break e;case 1:v=fS(null,v,N,m,L);break e;case 11:v=aS(null,v,N,m,L);break e;case 14:v=lS(null,v,N,tr(N.type,m),L);break e}throw Error(c(306,N,""))}return v;case 0:return N=v.type,U=v.pendingProps,U=v.elementType===N?U:tr(N,U),pg(m,v,N,U,L);case 1:return N=v.type,U=v.pendingProps,U=v.elementType===N?U:tr(N,U),fS(m,v,N,U,L);case 3:e:{if(dS(v),m===null)throw Error(c(387));N=v.pendingProps,V=v.memoizedState,U=V.element,X(m,v),Le(v,N,null,L);var ce=v.memoizedState;if(N=ce.element,Ve&&V.isDehydrated)if(V={element:N,isDehydrated:!1,cache:ce.cache,transitions:ce.transitions},v.updateQueue.baseState=V,v.memoizedState=V,v.flags&256){U=Error(c(423)),v=pS(m,v,N,L,U);break e}else if(N!==U){U=Error(c(424)),v=pS(m,v,N,L,U);break e}else for(Ve&&(vr=ta(v.stateNode.containerInfo),gr=v,Ln=!0,Xr=null,tu=!1),L=N_(v,null,N,L),v.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(Sl(),N===U){v=ks(m,v,L);break e}zi(m,v,N,L)}v=v.child}return v;case 5:return O_(v),m===null&&eg(v),N=v.type,U=v.pendingProps,V=m!==null?m.memoizedProps:null,ce=U.children,fe(N,U)?ce=null:V!==null&&fe(N,V)&&(v.flags|=32),hS(m,v),zi(m,v,ce,L),v.child;case 6:return m===null&&eg(v),null;case 13:return mS(m,v,L);case 4:return ng(v,v.stateNode.containerInfo),N=v.pendingProps,m===null?v.child=wl(v,null,N,L):zi(m,v,N,L),v.child;case 11:return N=v.type,U=v.pendingProps,U=v.elementType===N?U:tr(N,U),aS(m,v,N,U,L);case 7:return zi(m,v,v.pendingProps,L),v.child;case 8:return zi(m,v,v.pendingProps.children,L),v.child;case 12:return zi(m,v,v.pendingProps.children,L),v.child;case 10:e:{if(N=v.type._context,U=v.pendingProps,V=v.memoizedProps,ce=U.value,Rs(v,N,ce),V!==null)if(Pr(V.value,ce)){if(V.children===U.children&&!wn.current){v=ks(m,v,L);break e}}else for(V=v.child,V!==null&&(V.return=v);V!==null;){var xe=V.dependencies;if(xe!==null){ce=V.child;for(var He=xe.firstContext;He!==null;){if(He.context===N){if(V.tag===1){He=ee(-1,L&-L),He.tag=2;var ct=V.updateQueue;if(ct!==null){ct=ct.shared;var xt=ct.pending;xt===null?He.next=He:(He.next=xt.next,xt.next=He),ct.pending=He}}V.lanes|=L,He=V.alternate,He!==null&&(He.lanes|=L),b(V.return,L,v),xe.lanes|=L;break}He=He.next}}else if(V.tag===10)ce=V.type===v.type?null:V.child;else if(V.tag===18){if(ce=V.return,ce===null)throw Error(c(341));ce.lanes|=L,xe=ce.alternate,xe!==null&&(xe.lanes|=L),b(ce,L,v),ce=V.sibling}else ce=V.child;if(ce!==null)ce.return=V;else for(ce=V;ce!==null;){if(ce===v){ce=null;break}if(V=ce.sibling,V!==null){V.return=ce.return,ce=V;break}ce=ce.return}V=ce}zi(m,v,U.children,L),v=v.child}return v;case 9:return U=v.type,N=v.pendingProps.children,P(v,L),U=k(U),N=N(U),v.flags|=1,zi(m,v,N,L),v.child;case 14:return N=v.type,U=tr(N,v.pendingProps),U=tr(N.type,U),lS(m,v,N,U,L);case 15:return cS(m,v,v.type,v.pendingProps,L);case 17:return N=v.type,U=v.pendingProps,U=v.elementType===N?U:tr(N,U),m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,qn(N)?(m=!0,oi(v)):m=!1,P(v,L),St(v,N,U),$t(v,N,U,L),mg(null,v,N,!0,m,L);case 19:return xS(m,v,L);case 22:return uS(m,v,L)}throw Error(c(156,v.tag))};function WS(m,v){return la(m,v)}function yR(m,v,L,N){this.tag=m,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(m,v,L,N){return new yR(m,v,L,N)}function Fg(m){return m=m.prototype,!(!m||!m.isReactComponent)}function xR(m){if(typeof m=="function")return Fg(m)?1:0;if(m!=null){if(m=m.$$typeof,m===y)return 11;if(m===w)return 14}return 2}function po(m,v){var L=m.alternate;return L===null?(L=Dr(m.tag,v,m.key,m.mode),L.elementType=m.elementType,L.type=m.type,L.stateNode=m.stateNode,L.alternate=m,m.alternate=L):(L.pendingProps=v,L.type=m.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=m.flags&14680064,L.childLanes=m.childLanes,L.lanes=m.lanes,L.child=m.child,L.memoizedProps=m.memoizedProps,L.memoizedState=m.memoizedState,L.updateQueue=m.updateQueue,v=m.dependencies,L.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},L.sibling=m.sibling,L.index=m.index,L.ref=m.ref,L}function Vf(m,v,L,N,U,V){var ce=2;if(N=m,typeof m=="function")Fg(m)&&(ce=1);else if(typeof m=="string")ce=5;else e:switch(m){case a:return xa(L.children,U,V,v);case o:ce=8,U|=8;break;case h:return m=Dr(12,L,v,U|2),m.elementType=h,m.lanes=V,m;case x:return m=Dr(13,L,v,U),m.elementType=x,m.lanes=V,m;case g:return m=Dr(19,L,v,U),m.elementType=g,m.lanes=V,m;case M:return Gf(L,U,V,v);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case d:ce=10;break e;case p:ce=9;break e;case y:ce=11;break e;case w:ce=14;break e;case C:ce=16,N=null;break e}throw Error(c(130,m==null?m:typeof m,""))}return v=Dr(ce,L,v,U),v.elementType=m,v.type=N,v.lanes=V,v}function xa(m,v,L,N){return m=Dr(7,m,N,v),m.lanes=L,m}function Gf(m,v,L,N){return m=Dr(22,m,N,v),m.elementType=M,m.lanes=L,m.stateNode={},m}function Ug(m,v,L){return m=Dr(6,m,null,v),m.lanes=L,m}function Bg(m,v,L){return v=Dr(4,m.children!==null?m.children:[],m.key,v),v.lanes=L,v.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},v}function _R(m,v,L,N,U){this.tag=v,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=N,this.onRecoverableError=U,Ve&&(this.mutableSourceEagerHydrationData=null)}function VS(m,v,L,N,U,V,ce,xe,He){return m=new _R(m,v,L,xe,He),v===1?(v=1,V===!0&&(v|=8)):v=0,V=Dr(3,null,null,v),m.current=V,V.stateNode=m,V.memoizedState={element:N,isDehydrated:L,cache:null,transitions:null},$(V),m}function GS(m){if(!m)return Bn;m=m._reactInternals;e:{if(T(m)!==m||m.tag!==1)throw Error(c(170));var v=m;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(qn(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(c(171))}if(m.tag===1){var L=m.type;if(qn(L))return so(m,L,v)}return v}function jS(m){var v=m._reactInternals;if(v===void 0)throw typeof m.render=="function"?Error(c(188)):(m=Object.keys(m).join(","),Error(c(268,m)));return m=D(v),m===null?null:m.stateNode}function KS(m,v){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var L=m.retryLane;m.retryLane=L!==0&&L<v?L:v}}function $g(m,v){KS(m,v),(m=m.alternate)&&KS(m,v)}function SR(m){return m=D(m),m===null?null:m.stateNode}function wR(){return null}return t.attemptContinuousHydration=function(m){if(m.tag===13){var v=Hi();Or(m,134217728,v),$g(m,134217728)}},t.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var v=Hi(),L=ho(m);Or(m,L,v),$g(m,L)}},t.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var v=m.stateNode;if(v.current.memoizedState.isDehydrated){var L=sa(v.pendingLanes);L!==0&&(Yc(v,L|1),ir(v,Gn()),!(Qt&6)&&(Tl(),mr()))}break;case 13:var N=Hi();OS(function(){return Or(m,1,N)}),$g(m,1)}},t.batchedUpdates=function(m,v){var L=Qt;Qt|=1;try{return m(v)}finally{Qt=L,Qt===0&&(Tl(),vl&&mr())}},t.createComponentSelector=function(m){return{$$typeof:Lf,value:m}},t.createContainer=function(m,v,L,N,U,V,ce){return VS(m,v,!1,null,L,N,U,V,ce)},t.createHasPseudoClassSelector=function(m){return{$$typeof:kf,value:m}},t.createHydrationContainer=function(m,v,L,N,U,V,ce,xe,He){return m=VS(L,N,!0,m,U,V,ce,xe,He),m.context=GS(null),L=m.current,N=Hi(),U=ho(L),V=ee(N,U),V.callback=v??null,te(L,V),m.current.lanes=U,oa(m,U,N),ir(m,N),m},t.createPortal=function(m,v,L){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:N==null?null:""+N,children:m,containerInfo:v,implementation:L}},t.createRoleSelector=function(m){return{$$typeof:Pf,value:m}},t.createTestNameSelector=function(m){return{$$typeof:If,value:m}},t.createTextSelector=function(m){return{$$typeof:Nf,value:m}},t.deferredUpdates=function(m){var v=en,L=jn.transition;try{return jn.transition=null,en=16,m()}finally{en=v,jn.transition=L}},t.discreteUpdates=function(m,v,L,N,U){var V=en,ce=jn.transition;try{return jn.transition=null,en=1,m(v,L,N,U)}finally{en=V,jn.transition=ce,Qt===0&&Tl()}},t.findAllNodes=bg,t.findBoundingRects=function(m,v){if(!Z)throw Error(c(363));v=bg(m,v),m=[];for(var L=0;L<v.length;L++)m.push(Ee(v[L]));for(v=m.length-1;0<v;v--){L=m[v];for(var N=L.x,U=N+L.width,V=L.y,ce=V+L.height,xe=v-1;0<=xe;xe--)if(v!==xe){var He=m[xe],ct=He.x,xt=ct+He.width,zt=He.y,It=zt+He.height;if(N>=ct&&V>=zt&&U<=xt&&ce<=It){m.splice(v,1);break}else if(N!==ct||L.width!==He.width||It<V||zt>ce){if(!(V!==zt||L.height!==He.height||xt<N||ct>U)){ct>N&&(He.width+=ct-N,He.x=N),xt<U&&(He.width=U-ct),m.splice(v,1);break}}else{zt>V&&(He.height+=zt-V,He.y=V),It<ce&&(He.height=ce-zt),m.splice(v,1);break}}}return m},t.findHostInstance=jS,t.findHostInstanceWithNoPortals=function(m){return m=I(m),m=m!==null?B(m):null,m===null?null:m.stateNode},t.findHostInstanceWithWarning=function(m){return jS(m)},t.flushControlled=function(m){var v=Qt;Qt|=1;var L=jn.transition,N=en;try{jn.transition=null,en=1,m()}finally{en=N,jn.transition=L,Qt=v,Qt===0&&(Tl(),mr())}},t.flushPassiveEffects=ya,t.flushSync=OS,t.focusWithin=function(m,v){if(!Z)throw Error(c(363));for(m=Mg(m),v=PS(m,v),v=Array.from(v),m=0;m<v.length;){var L=v[m++];if(!ke(L)){if(L.tag===5&&Ye(L.stateNode))return!0;for(L=L.child;L!==null;)v.push(L),L=L.sibling}}return!1},t.getCurrentUpdatePriority=function(){return en},t.getFindAllNodesFailureDescription=function(m,v){if(!Z)throw Error(c(363));var L=0,N=[];m=[Mg(m),0];for(var U=0;U<m.length;){var V=m[U++],ce=m[U++],xe=v[ce];if((V.tag!==5||!ke(V))&&(Cg(V,xe)&&(N.push(Eg(xe)),ce++,ce>L&&(L=ce)),ce<v.length))for(V=V.child;V!==null;)m.push(V,ce),V=V.sibling}if(L<v.length){for(m=[];L<v.length;L++)m.push(Eg(v[L]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},t.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return H(m.child.stateNode);default:return m.child.stateNode}},t.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:SR,findFiberByHostInstance:m.findFiberByHostInstance||wR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)m=!0;else{try{ps=v.inject(m),pr=v}catch{}m=!!v.checkDCE}}return m},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(m,v,L,N){if(!Z)throw Error(c(363));m=bg(m,v);var U=Je(m,L,N).disconnect;return{disconnect:function(){U()}}},t.registerMutableSourceForHydration=function(m,v){var L=v._getVersion;L=L(v._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[v,L]:m.mutableSourceEagerHydrationData.push(v,L)},t.runWithPriority=function(m,v){var L=en;try{return en=m,v()}finally{en=L}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(m,v,L,N){var U=v.current,V=Hi(),ce=ho(U);return L=GS(L),v.context===null?v.context=L:v.pendingContext=L,v=ee(V,ce),v.payload={element:m},N=N===void 0?null:N,N!==null&&(v.callback=N),te(U,v),m=Or(U,ce,V),m!==null&&ue(m,U,ce),ce},t};AT.exports=VF;var GF=AT.exports;const jF=Vy(GF),b_={},KF=n=>void Object.assign(b_,n);function XF(n,e){function t(a,{args:o=[],attach:h,...d},p){let y=`${a[0].toUpperCase()}${a.slice(1)}`,x;if(a==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=d.object;x=ql(g,{type:a,root:p,attach:h,primitive:!0})}else{const g=b_[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(o))throw new Error("R3F: The args prop must be an array!");x=ql(new g(...o),{type:a,root:p,attach:h,memoizedProps:{args:o}})}return x.__r3f.attach===void 0&&(x instanceof Kt?x.__r3f.attach="geometry":x instanceof Ci&&(x.__r3f.attach="material")),y!=="inject"&&Jv(x,d),x}function i(a,o){let h=!1;if(o){var d,p;(d=o.__r3f)!=null&&d.attach?Qv(a,o,o.__r3f.attach):o.isObject3D&&a.isObject3D&&(a.add(o),h=!0),h||(p=a.__r3f)==null||p.objects.push(o),o.__r3f||ql(o,{}),o.__r3f.parent=a,Wy(o),ec(o)}}function r(a,o,h){let d=!1;if(o){var p,y;if((p=o.__r3f)!=null&&p.attach)Qv(a,o,o.__r3f.attach);else if(o.isObject3D&&a.isObject3D){o.parent=a,o.dispatchEvent({type:"added"});const x=a.children.filter(w=>w!==o),g=x.indexOf(h);a.children=[...x.slice(0,g),o,...x.slice(g)],d=!0}d||(y=a.__r3f)==null||y.objects.push(o),o.__r3f||ql(o,{}),o.__r3f.parent=a,Wy(o),ec(o)}}function s(a,o,h=!1){a&&[...a].forEach(d=>c(o,d,h))}function c(a,o,h){if(o){var d,p,y;if(o.__r3f&&(o.__r3f.parent=null),(d=a.__r3f)!=null&&d.objects&&(a.__r3f.objects=a.__r3f.objects.filter(M=>M!==o)),(p=o.__r3f)!=null&&p.attach)FM(a,o,o.__r3f.attach);else if(o.isObject3D&&a.isObject3D){var x;a.remove(o),(x=o.__r3f)!=null&&x.root&&nU(o.__r3f.root,o)}const w=(y=o.__r3f)==null?void 0:y.primitive,C=h===void 0?o.dispose!==null&&!w:h;if(!w){var g;s((g=o.__r3f)==null?void 0:g.objects,o,C),s(o.children,o,C)}delete o.__r3f,C&&o.dispose&&o.type!=="Scene"&&zy.unstable_scheduleCallback(zy.unstable_IdlePriority,()=>{try{o.dispose()}catch{}}),ec(a)}}function l(a,o,h,d){var p;const y=(p=a.__r3f)==null?void 0:p.parent;if(!y)return;const x=t(o,h,a.__r3f.root);if(a.children){for(const g of a.children)g.__r3f&&i(x,g);a.children=a.children.filter(g=>!g.__r3f)}a.__r3f.objects.forEach(g=>i(x,g)),a.__r3f.objects=[],a.__r3f.autoRemovedBeforeAppend||c(y,a),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[d,d.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const u=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:jF({createInstance:t,removeChild:c,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(a,o)=>{if(!o)return;const h=a.getState().scene;h.__r3f&&(h.__r3f.root=a,i(h,o))},removeChildFromContainer:(a,o)=>{o&&c(a.getState().scene,o)},insertInContainerBefore:(a,o,h)=>{if(!o||!h)return;const d=a.getState().scene;d.__r3f&&r(d,o,h)},getRootHostContext:()=>null,getChildHostContext:a=>a,finalizeInitialChildren(a){var o;return!!((o=a==null?void 0:a.__r3f)!=null?o:{}).handlers},prepareUpdate(a,o,h,d){var p;if(((p=a==null?void 0:a.__r3f)!=null?p:{}).primitive&&d.object&&d.object!==a)return[!0];{const{args:x=[],children:g,...w}=d,{args:C=[],children:M,..._}=h;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((R,A)=>R!==C[A]))return[!0];const E=DT(a,w,_,!0);return E.changes.length?[!1,E]:null}},commitUpdate(a,[o,h],d,p,y,x){o?l(a,d,y,x):Jv(a,h)},commitMount(a,o,h,d){var p;const y=(p=a.__r3f)!=null?p:{};a.raycast&&y.handlers&&y.eventCount&&a.__r3f.root.getState().internal.interaction.push(a)},getPublicInstance:a=>a,prepareForCommit:()=>null,preparePortalMount:a=>ql(a.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(a){var o;const{attach:h,parent:d}=(o=a.__r3f)!=null?o:{};h&&d&&FM(d,a,h),a.isObject3D&&(a.visible=!1),ec(a)},unhideInstance(a,o){var h;const{attach:d,parent:p}=(h=a.__r3f)!=null?h:{};d&&p&&Qv(p,a,d),(a.isObject3D&&o.visible==null||o.visible)&&(a.visible=!0),ec(a)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():yc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&kn.fun(performance.now)?performance.now:kn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:kn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:kn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Jv}}var IM,NM;const Zv=n=>"colorSpace"in n||"outputColorSpace"in n,LT=()=>{var n;return(n=b_.ColorManagement)!=null?n:null},kT=n=>n&&n.isOrthographicCamera,YF=n=>n&&n.hasOwnProperty("current"),of=typeof window<"u"&&((IM=window.document)!=null&&IM.createElement||((NM=window.navigator)==null?void 0:NM.product)==="ReactNative")?Ce.useLayoutEffect:Ce.useEffect;function PT(n){const e=Ce.useRef(n);return of(()=>void(e.current=n),[n]),e}function ZF({set:n}){return of(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class IT extends Ce.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}IT.getDerivedStateFromError=()=>({error:!0});const NT="__default",OM=new Map,QF=n=>n&&!!n.memoized&&!!n.changes;function OT(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Fu=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},kn={obj:n=>n===Object(n)&&!kn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(kn.str(n)||kn.num(n))return n===e;const s=kn.obj(n);if(s&&i==="reference")return n===e;const c=kn.arr(n);if(c&&t==="reference")return n===e;if((c||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!kn.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(kn.und(l)){if(c&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function JF(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ql(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Hy(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,c)=>s[c],n),{target:t,key:r}}else return{target:t,key:e}}const DM=/-\d+$/;function Qv(n,e,t){if(kn.str(t)){if(DM.test(t)){const s=t.replace(DM,""),{target:c,key:l}=Hy(n,s);Array.isArray(c[l])||(c[l]=[])}const{target:i,key:r}=Hy(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function FM(n,e,t){var i,r;if(kn.str(t)){const{target:s,key:c}=Hy(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[c]:s[c]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function DT(n,{children:e,key:t,ref:i,...r},{children:s,key:c,ref:l,...u}={},f=!1){var a;const o=(a=n==null?void 0:n.__r3f)!=null?a:{},h=Object.entries(r),d=[];if(f){const y=Object.keys(u);for(let x=0;x<y.length;x++)r.hasOwnProperty(y[x])||h.unshift([y[x],NT+"remove"])}h.forEach(([y,x])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&y==="object"||kn.equ(x,u[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return d.push([y,x,!0,[]]);let w=[];y.includes("-")&&(w=y.split("-")),d.push([y,x,!1,w]);for(const C in r){const M=r[C];C.startsWith(`${y}-`)&&d.push([C,M,!1,C.split("-")])}});const p={...r};return o.memoizedProps&&o.memoizedProps.args&&(p.args=o.memoizedProps.args),o.memoizedProps&&o.memoizedProps.attach&&(p.attach=o.memoizedProps.attach),{memoized:p,changes:d}}const qF=typeof process<"u"&&!1;function Jv(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},c=s.root,l=(i=c==null||c.getState==null?void 0:c.getState())!=null?i:{},{memoized:u,changes:f}=QF(e)?e:DT(n,e),a=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=u);for(let h=0;h<f.length;h++){let[d,p,y,x]=f[h];if(Zv(n)){const M="srgb",_="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?M:_):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?M:_)}let g=n,w=g[d];if(x.length&&(w=x.reduce((C,M)=>C[M],n),!(w&&w.set))){const[C,...M]=x.reverse();g=M.reverse().reduce((_,E)=>_[E],n),d=C}if(p===NT+"remove")if(g.constructor){let C=OM.get(g.constructor);C||(C=new g.constructor,OM.set(g.constructor,C)),p=C[d]}else p=0;if(y)p?s.handlers[d]=p:delete s.handlers[d],s.eventCount=Object.keys(s.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Xa)){if(Array.isArray(p))w.fromArray?w.fromArray(p):w.set(...p);else if(w.copy&&p&&p.constructor&&(qF?w.constructor.name===p.constructor.name:w.constructor===p.constructor))w.copy(p);else if(p!==void 0){const C=w instanceof gt;!C&&w.setScalar?w.setScalar(p):w instanceof Xa&&p instanceof Xa?w.mask=p.mask:w.set(p),!LT()&&!l.linear&&C&&w.convertSRGBToLinear()}}else if(g[d]=p,g[d]instanceof An&&g[d].format===ji&&g[d].type===Cs){const C=g[d];Zv(C)&&Zv(l.gl)?C.colorSpace=l.gl.outputColorSpace:C.encoding=l.gl.outputEncoding}ec(n)}if(s.parent&&l.internal&&n.raycast&&a!==s.eventCount){const h=l.internal.interaction.indexOf(n);h>-1&&l.internal.interaction.splice(h,1),s.eventCount&&l.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=n.__r3f)!=null&&r.parent&&Wy(n),n}function ec(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Wy(n){n.onUpdate==null||n.onUpdate(n)}function eU(n,e){n.manual||(kT(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function tp(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function tU(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return yc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return yc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return yc.ContinuousEventPriority;default:return yc.DefaultEventPriority}}function FT(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function nU(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{FT(t.capturedMap,e,i,r)})}function iU(n){function e(u){const{internal:f}=n.getState(),a=u.offsetX-f.initialClick[0],o=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(a*a+o*o))}function t(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(a=>{var o;return(o=f.__r3f)==null?void 0:o.handlers["onPointer"+a]}))}function i(u,f){const a=n.getState(),o=new Set,h=[],d=f?f(a.internal.interaction):a.internal.interaction;for(let g=0;g<d.length;g++){const w=Fu(d[g]);w&&(w.raycaster.camera=void 0)}a.previousRoot||a.events.compute==null||a.events.compute(u,a);function p(g){const w=Fu(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var C;w.events.compute==null||w.events.compute(u,w,(C=w.previousRoot)==null?void 0:C.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let y=d.flatMap(p).sort((g,w)=>{const C=Fu(g.object),M=Fu(w.object);return!C||!M?g.distance-w.distance:M.events.priority-C.events.priority||g.distance-w.distance}).filter(g=>{const w=tp(g);return o.has(w)?!1:(o.add(w),!0)});a.events.filter&&(y=a.events.filter(y,a));for(const g of y){let w=g.object;for(;w;){var x;(x=w.__r3f)!=null&&x.eventCount&&h.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in u&&a.internal.capturedMap.has(u.pointerId))for(let g of a.internal.capturedMap.get(u.pointerId).values())o.has(tp(g.intersection))||h.push(g.intersection);return h}function r(u,f,a,o){const h=n.getState();if(u.length){const d={stopped:!1};for(const p of u){const y=Fu(p.object)||h,{raycaster:x,pointer:g,camera:w,internal:C}=y,M=new se(g.x,g.y,0).unproject(w),_=S=>{var I,D;return(I=(D=C.capturedMap.get(S))==null?void 0:D.has(p.eventObject))!=null?I:!1},E=S=>{const I={intersection:p,target:f.target};C.capturedMap.has(S)?C.capturedMap.get(S).set(p.eventObject,I):C.capturedMap.set(S,new Map([[p.eventObject,I]])),f.target.setPointerCapture(S)},R=S=>{const I=C.capturedMap.get(S);I&&FT(C.capturedMap,p.eventObject,I,S)};let A={};for(let S in f){let I=f[S];typeof I!="function"&&(A[S]=I)}let T={...p,...A,pointer:g,intersections:u,stopped:d.stopped,delta:a,unprojectedPoint:M,ray:x.ray,camera:w,stopPropagation(){const S="pointerId"in f&&C.capturedMap.get(f.pointerId);if((!S||S.has(p.eventObject))&&(T.stopped=d.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(I=>I.eventObject===p.eventObject))){const I=u.slice(0,u.indexOf(p));s([...I,p])}},target:{hasPointerCapture:_,setPointerCapture:E,releasePointerCapture:R},currentTarget:{hasPointerCapture:_,setPointerCapture:E,releasePointerCapture:R},nativeEvent:f};if(o(T),d.stopped===!0)break}}return u}function s(u){const{internal:f}=n.getState();for(const a of f.hovered.values())if(!u.length||!u.find(o=>o.object===a.object&&o.index===a.index&&o.instanceId===a.instanceId)){const h=a.eventObject.__r3f,d=h==null?void 0:h.handlers;if(f.hovered.delete(tp(a)),h!=null&&h.eventCount){const p={...a,intersections:u};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function c(u,f){for(let a=0;a<f.length;a++){const o=f[a].__r3f;o==null||o.handlers.onPointerMissed==null||o.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:a}=n.getState();"pointerId"in f&&a.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{a.capturedMap.has(f.pointerId)&&(a.capturedMap.delete(f.pointerId),s([]))})}}return function(a){const{onPointerMissed:o,internal:h}=n.getState();h.lastEvent.current=a;const d=u==="onPointerMove",p=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",x=i(a,d?t:void 0),g=p?e(a):0;u==="onPointerDown"&&(h.initialClick=[a.offsetX,a.offsetY],h.initialHits=x.map(C=>C.eventObject)),p&&!x.length&&g<=2&&(c(a,h.interaction),o&&o(a)),d&&s(x);function w(C){const M=C.eventObject,_=M.__r3f,E=_==null?void 0:_.handlers;if(_!=null&&_.eventCount)if(d){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const R=tp(C),A=h.hovered.get(R);A?A.stopped&&C.stopPropagation():(h.hovered.set(R,C),E.onPointerOver==null||E.onPointerOver(C),E.onPointerEnter==null||E.onPointerEnter(C))}E.onPointerMove==null||E.onPointerMove(C)}else{const R=E[u];R?(!p||h.initialHits.includes(M))&&(c(a,h.interaction.filter(A=>!h.initialHits.includes(A))),R(C)):p&&h.initialHits.includes(M)&&c(a,h.interaction.filter(A=>!h.initialHits.includes(A)))}}r(x,a,g,w)}}return{handlePointer:l}}const UT=n=>!!(n!=null&&n.render),BT=Ce.createContext(null),rU=(n,e)=>{const t=WF((l,u)=>{const f=new se,a=new se,o=new se;function h(g=u().camera,w=a,C=u().size){const{width:M,height:_,top:E,left:R}=C,A=M/_;w instanceof se?o.copy(w):o.set(...w);const T=g.getWorldPosition(f).distanceTo(o);if(kT(g))return{width:M/g.zoom,height:_/g.zoom,top:E,left:R,factor:1,distance:T,aspect:A};{const S=g.fov*Math.PI/180,I=2*Math.tan(S/2)*T,D=I*(M/_);return{width:D,height:I,top:E,left:R,factor:M/D,distance:T,aspect:A}}}let d;const p=g=>l(w=>({performance:{...w.performance,current:g}})),y=new Ge;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(u(),g),advance:(g,w)=>e(g,w,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new w_,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=u();d&&clearTimeout(d),g.performance.current!==g.performance.min&&p(g.performance.min),d=setTimeout(()=>p(u().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:g=>l(w=>({...w,events:{...w.events,...g}})),setSize:(g,w,C,M,_)=>{const E=u().camera,R={width:g,height:w,top:M||0,left:_||0,updateStyle:C};l(A=>({size:R,viewport:{...A.viewport,...h(E,a,R)}}))},setDpr:g=>l(w=>{const C=OT(g);return{viewport:{...w.viewport,dpr:C,initialDpr:w.viewport.initialDpr||C}}}),setFrameloop:(g="always")=>{const w=u().clock;w.stop(),w.elapsedTime=0,g!=="never"&&(w.start(),w.elapsedTime=0),l(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ce.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,w,C)=>{const M=u().internal;return M.priority=M.priority+(w>0?1:0),M.subscribers.push({ref:g,priority:w,store:C}),M.subscribers=M.subscribers.sort((_,E)=>_.priority-E.priority),()=>{const _=u().internal;_!=null&&_.subscribers&&(_.priority=_.priority-(w>0?1:0),_.subscribers=_.subscribers.filter(E=>E.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,c=i.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:a,set:o}=t.getState();if(u!==r||f.dpr!==s){var h;r=u,s=f.dpr,eU(l,u),a.setPixelRatio(f.dpr);const d=(h=u.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&a.domElement instanceof HTMLCanvasElement;a.setSize(u.width,u.height,d)}l!==c&&(c=l,o(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let np,sU=new Set,oU=new Set,aU=new Set;function qv(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Uu(n,e){switch(n){case"before":return qv(sU,e);case"after":return qv(oU,e);case"tail":return qv(aU,e)}}let e0,t0;function n0(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),e0=e.internal.subscribers,np=0;np<e0.length;np++)t0=e0[np],t0.ref.current(t0.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function lU(n){let e=!1,t,i,r;function s(u){i=requestAnimationFrame(s),e=!0,t=0,Uu("before",u);for(const a of n.values()){var f;r=a.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=n0(u,r))}if(Uu("after",u),t===0)return Uu("tail",u),e=!1,cancelAnimationFrame(i)}function c(u,f=1){var a;if(!u)return n.forEach(o=>c(o.store.getState()),f);(a=u.gl.xr)!=null&&a.isPresenting||!u.internal.active||u.frameloop==="never"||(u.internal.frames=Math.min(60,u.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function l(u,f=!0,a,o){if(f&&Uu("before",u),a)n0(u,a,o);else for(const h of n.values())n0(u,h.store.getState());f&&Uu("after",u)}return{loop:s,invalidate:c,advance:l}}function $T(){const n=Ce.useContext(BT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Mr(n=t=>t,e){return $T()(n,e)}function A_(n,e=0){const t=$T(),i=t.getState().internal.subscribe,r=PT(n);return of(()=>i(r,e,t),[e,i,t]),null}const Fc=new Map,{invalidate:UM,advance:BM}=lU(Fc),{reconciler:em,applyProps:Ql}=XF(Fc,tU),Jl={objects:"shallow",strict:!1},cU=(n,e)=>{const t=typeof n=="function"?n(e):n;return UT(t)?t:new s_({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function uU(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function hU(n){const e=Fc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||rU(UM,BM),c=t||em.createContainer(s,yc.ConcurrentRoot,null,!1,null,"",r,null);e||Fc.set(n,{fiber:c,store:s});let l,u=!1,f;return{configure(a={}){let{gl:o,size:h,scene:d,events:p,onCreated:y,shadows:x=!1,linear:g=!1,flat:w=!1,legacy:C=!1,orthographic:M=!1,frameloop:_="always",dpr:E=[1,2],performance:R,raycaster:A,camera:T,onPointerMissed:S}=a,I=s.getState(),D=I.gl;I.gl||I.set({gl:D=cU(o,n)});let z=I.raycaster;z||I.set({raycaster:z=new CT});const{params:B,...W}=A||{};if(kn.equ(W,z,Jl)||Ql(z,{...W}),kn.equ(B,z.params,Jl)||Ql(z,{params:{...z.params,...B}}),!I.camera||I.camera===f&&!kn.equ(f,T,Jl)){f=T;const le=T instanceof Qh,j=le?T:M?new Ho(0,0,0,0,.1,1e3):new Zn(75,0,.1,1e3);le||(j.position.z=5,T&&Ql(j,T),!I.camera&&!(T!=null&&T.rotation)&&j.lookAt(0,0,0)),I.set({camera:j})}if(!I.scene){let le;d instanceof Jp?le=d:(le=new Jp,d&&Ql(le,d)),I.set({scene:ql(le)})}if(!I.xr){var H;const le=(fe,ve)=>{const ye=s.getState();ye.frameloop!=="never"&&BM(fe,!0,ye,ve)},j=()=>{const fe=s.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?le:null),fe.gl.xr.isPresenting||UM(fe)},re={connect(){const fe=s.getState().gl;fe.xr.addEventListener("sessionstart",j),fe.xr.addEventListener("sessionend",j)},disconnect(){const fe=s.getState().gl;fe.xr.removeEventListener("sessionstart",j),fe.xr.removeEventListener("sessionend",j)}};typeof((H=D.xr)==null?void 0:H.addEventListener)=="function"&&re.connect(),I.set({xr:re})}if(D.shadowMap){const le=D.shadowMap.enabled,j=D.shadowMap.type;if(D.shadowMap.enabled=!!x,kn.boo(x))D.shadowMap.type=qu;else if(kn.str(x)){var J;const re={basic:gb,percentage:xm,soft:qu,variance:es};D.shadowMap.type=(J=re[x])!=null?J:qu}else kn.obj(x)&&Object.assign(D.shadowMap,x);(le!==D.shadowMap.enabled||j!==D.shadowMap.type)&&(D.shadowMap.needsUpdate=!0)}const G=LT();G&&("enabled"in G?G.enabled=!C:"legacyMode"in G&&(G.legacyMode=C)),Ql(D,{outputEncoding:g?3e3:3001,toneMapping:w?Ms:Bx}),I.legacy!==C&&I.set(()=>({legacy:C})),I.linear!==g&&I.set(()=>({linear:g})),I.flat!==w&&I.set(()=>({flat:w})),o&&!kn.fun(o)&&!UT(o)&&!kn.equ(o,D,Jl)&&Ql(D,o),p&&!I.events.handlers&&I.set({events:p(s)});const ne=uU(n,h);return kn.equ(ne,I.size,Jl)||I.setSize(ne.width,ne.height,ne.updateStyle,ne.top,ne.left),E&&I.viewport.dpr!==OT(E)&&I.setDpr(E),I.frameloop!==_&&I.setFrameloop(_),I.onPointerMissed||I.set({onPointerMissed:S}),R&&!kn.equ(R,I.performance,Jl)&&I.set(le=>({performance:{...le.performance,...R}})),l=y,u=!0,this},render(a){return u||this.configure(),em.updateContainer(Ce.createElement(fU,{store:s,children:a,onCreated:l,rootElement:n}),c,null,()=>{}),s},unmount(){zT(n)}}}function fU({store:n,children:e,onCreated:t,rootElement:i}){return of(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Ce.createElement(BT.Provider,{value:n},e)}function zT(n,e){const t=Fc.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),em.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,c,l,u;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(c=s.renderLists)==null||c.dispose==null||c.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),JF(r),Fc.delete(n),e&&e(n)}catch{}},500)})}}em.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ce.version});function Uc(){return Uc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Uc.apply(null,arguments)}function $M(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function dU({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,c]=Ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,a=Ce.useRef(!1);Ce.useEffect(()=>(a.current=!0,()=>void(a.current=!1)));const[o,h,d]=Ce.useMemo(()=>{const g=()=>{if(!l.current.element)return;const{left:w,top:C,width:M,height:_,bottom:E,right:R,x:A,y:T}=l.current.element.getBoundingClientRect(),S={left:w,top:C,width:M,height:_,bottom:E,right:R,x:A,y:T};l.current.element instanceof HTMLElement&&i&&(S.height=l.current.element.offsetHeight,S.width=l.current.element.offsetWidth),Object.freeze(S),a.current&&!vU(l.current.lastBounds,S)&&c(l.current.lastBounds=S)};return[g,f?$M(g,f):g,u?$M(g,u):g]},[c,i,u,f]);function p(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",d,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function y(){l.current.element&&(l.current.resizeObserver=new r(d),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(g=>g.addEventListener("scroll",d,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const x=g=>{!g||g===l.current.element||(p(),l.current.element=g,l.current.scrollContainers=HT(g),y())};return mU(d,!!e),pU(h),Ce.useEffect(()=>{p(),y()},[e,d,h]),Ce.useEffect(()=>p,[]),[x,s,o]}function pU(n){Ce.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function mU(n,e){Ce.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function HT(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...HT(n.parentElement)]}const gU=["x","y","top","bottom","left","right","width","height"],vU=(n,e)=>gU.every(t=>n[t]===e[t]);var yU=Object.defineProperty,xU=Object.defineProperties,_U=Object.getOwnPropertyDescriptors,zM=Object.getOwnPropertySymbols,SU=Object.prototype.hasOwnProperty,wU=Object.prototype.propertyIsEnumerable,HM=(n,e,t)=>e in n?yU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,WM=(n,e)=>{for(var t in e||(e={}))SU.call(e,t)&&HM(n,t,e[t]);if(zM)for(var t of zM(e))wU.call(e,t)&&HM(n,t,e[t]);return n},MU=(n,e)=>xU(n,_U(e)),VM,GM;typeof window<"u"&&((VM=window.document)!=null&&VM.createElement||((GM=window.navigator)==null?void 0:GM.product)==="ReactNative")?Ce.useLayoutEffect:Ce.useEffect;function WT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=WT(i,e,t);if(r)return r;i=e?null:i.sibling}}function VT(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const jM=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=jM;return}return jM.apply(this,arguments)};const T_=VT(Ce.createContext(null));class GT extends Ce.Component{render(){return Ce.createElement(T_.Provider,{value:this._reactInternals},this.props.children)}}function CU(){const n=Ce.useContext(T_);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ce.useId();return Ce.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=WT(i,!1,s=>{let c=s.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(r)return r}},[n,e])}function EU(){const n=CU(),[e]=Ce.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==T_&&!e.has(r)&&e.set(r,Ce.useContext(VT(r)))}t=t.return}return e}function bU(){const n=EU();return Ce.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>Ce.createElement(e,null,Ce.createElement(t.Provider,MU(WM({},i),{value:n.get(t)}))),e=>Ce.createElement(GT,WM({},e))),[n])}const i0={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function AU(n){const{handlePointer:e}=iU(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(i0).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(c=>({events:{...c.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([c,l])=>{const[u,f]=i0[c];t.addEventListener(u,l,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,c])=>{if(i&&i.connected instanceof HTMLElement){const[l]=i0[s];i.connected.removeEventListener(l,c)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const TU=Ce.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:c=AU,eventSource:l,eventPrefix:u,shadows:f,linear:a,flat:o,legacy:h,orthographic:d,frameloop:p,dpr:y,performance:x,raycaster:g,camera:w,scene:C,onPointerMissed:M,onCreated:_,...E},R){Ce.useMemo(()=>KF($F),[]);const A=bU(),[T,S]=dU({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=Ce.useRef(null),D=Ce.useRef(null);Ce.useImperativeHandle(R,()=>I.current);const z=PT(M),[B,W]=Ce.useState(!1),[H,J]=Ce.useState(!1);if(B)throw B;if(H)throw H;const G=Ce.useRef(null);of(()=>{const Y=I.current;S.width>0&&S.height>0&&Y&&(G.current||(G.current=hU(Y)),G.current.configure({gl:s,events:c,shadows:f,linear:a,flat:o,legacy:h,orthographic:d,frameloop:p,dpr:y,performance:x,raycaster:g,camera:w,scene:C,size:S,onPointerMissed:(...ne)=>z.current==null?void 0:z.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(l?YF(l)?l.current:l:D.current),u&&ne.setEvents({compute:(le,j)=>{const re=le[u+"X"],fe=le[u+"Y"];j.pointer.set(re/j.size.width*2-1,-(fe/j.size.height)*2+1),j.raycaster.setFromCamera(j.pointer,j.camera)}}),_==null||_(ne)}}),G.current.render(Ce.createElement(A,null,Ce.createElement(IT,{set:J},Ce.createElement(Ce.Suspense,{fallback:Ce.createElement(ZF,{set:W})},e)))))}),Ce.useEffect(()=>{const Y=I.current;if(Y)return()=>zT(Y)},[]);const K=l?"none":"auto";return Ce.createElement("div",Uc({ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...r}},E),Ce.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},Ce.createElement("canvas",{ref:I,style:{display:"block"}},t)))}),RU=Ce.forwardRef(function(e,t){return Ce.createElement(GT,null,Ce.createElement(TU,Uc({},e,{ref:t})))});function LU(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kU=Object.defineProperty,PU=(n,e,t)=>e in n?kU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,IU=(n,e,t)=>(PU(n,typeof e!="symbol"?e+"":e,t),t);class NU{constructor(){IU(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,c=r.length;s<c;s++)r[s].call(this,e);e.target=null}}}var OU=Object.defineProperty,DU=(n,e,t)=>e in n?OU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nt=(n,e,t)=>(DU(n,typeof e!="symbol"?e+"":e,t),t);const ip=new ll,KM=new $s,FU=Math.cos(70*(Math.PI/180)),XM=(n,e)=>(n%e+e)%e;let UU=class extends NU{constructor(e,t){super(),Nt(this,"object"),Nt(this,"domElement"),Nt(this,"enabled",!0),Nt(this,"target",new se),Nt(this,"minDistance",0),Nt(this,"maxDistance",1/0),Nt(this,"minZoom",0),Nt(this,"maxZoom",1/0),Nt(this,"minPolarAngle",0),Nt(this,"maxPolarAngle",Math.PI),Nt(this,"minAzimuthAngle",-1/0),Nt(this,"maxAzimuthAngle",1/0),Nt(this,"enableDamping",!1),Nt(this,"dampingFactor",.05),Nt(this,"enableZoom",!0),Nt(this,"zoomSpeed",1),Nt(this,"enableRotate",!0),Nt(this,"rotateSpeed",1),Nt(this,"enablePan",!0),Nt(this,"panSpeed",1),Nt(this,"screenSpacePanning",!0),Nt(this,"keyPanSpeed",7),Nt(this,"zoomToCursor",!1),Nt(this,"autoRotate",!1),Nt(this,"autoRotateSpeed",2),Nt(this,"reverseOrbit",!1),Nt(this,"reverseHorizontalOrbit",!1),Nt(this,"reverseVerticalOrbit",!1),Nt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Nt(this,"mouseButtons",{LEFT:Pa.ROTATE,MIDDLE:Pa.DOLLY,RIGHT:Pa.PAN}),Nt(this,"touches",{ONE:Ia.ROTATE,TWO:Ia.DOLLY_PAN}),Nt(this,"target0"),Nt(this,"position0"),Nt(this,"zoom0"),Nt(this,"_domElementKeyEvents",null),Nt(this,"getPolarAngle"),Nt(this,"getAzimuthalAngle"),Nt(this,"setPolarAngle"),Nt(this,"setAzimuthalAngle"),Nt(this,"getDistance"),Nt(this,"getZoomScale"),Nt(this,"listenToKeyEvents"),Nt(this,"stopListenToKeyEvents"),Nt(this,"saveState"),Nt(this,"reset"),Nt(this,"update"),Nt(this,"connect"),Nt(this,"dispose"),Nt(this,"dollyIn"),Nt(this,"dollyOut"),Nt(this,"getScale"),Nt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>a.phi,this.getAzimuthalAngle=()=>a.theta,this.setPolarAngle=he=>{let De=XM(he,2*Math.PI),tt=a.phi;tt<0&&(tt+=2*Math.PI),De<0&&(De+=2*Math.PI);let at=Math.abs(De-tt);2*Math.PI-at<at&&(De<tt?De+=2*Math.PI:tt+=2*Math.PI),o.phi=De-tt,i.update()},this.setAzimuthalAngle=he=>{let De=XM(he,2*Math.PI),tt=a.theta;tt<0&&(tt+=2*Math.PI),De<0&&(De+=2*Math.PI);let at=Math.abs(De-tt);2*Math.PI-at<at&&(De<tt?De+=2*Math.PI:tt+=2*Math.PI),o.theta=De-tt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",ge),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ge),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=l.NONE},this.update=(()=>{const he=new se,De=new se(0,1,0),tt=new Fi().setFromUnitVectors(e.up,De),at=tt.clone().invert(),Ke=new se,pe=new Fi,lt=2*Math.PI;return function(){const Tt=i.object.position;tt.setFromUnitVectors(e.up,De),at.copy(tt).invert(),he.copy(Tt).sub(i.target),he.applyQuaternion(tt),a.setFromVector3(he),i.autoRotate&&u===l.NONE&&B(D()),i.enableDamping?(a.theta+=o.theta*i.dampingFactor,a.phi+=o.phi*i.dampingFactor):(a.theta+=o.theta,a.phi+=o.phi);let _t=i.minAzimuthAngle,Xt=i.maxAzimuthAngle;isFinite(_t)&&isFinite(Xt)&&(_t<-Math.PI?_t+=lt:_t>Math.PI&&(_t-=lt),Xt<-Math.PI?Xt+=lt:Xt>Math.PI&&(Xt-=lt),_t<=Xt?a.theta=Math.max(_t,Math.min(Xt,a.theta)):a.theta=a.theta>(_t+Xt)/2?Math.max(_t,a.theta):Math.min(Xt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),i.zoomToCursor&&T||i.object.isOrthographicCamera?a.radius=j(a.radius):a.radius=j(a.radius*h),he.setFromSpherical(a),he.applyQuaternion(at),Tt.copy(i.target).add(he),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(o.theta*=1-i.dampingFactor,o.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(o.set(0,0,0),d.set(0,0,0));let Jt=!1;if(i.zoomToCursor&&T){let Pt=null;if(i.object instanceof Zn&&i.object.isPerspectiveCamera){const tn=he.length();Pt=j(tn*h);const At=tn-Pt;i.object.position.addScaledVector(R,At),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const tn=new se(A.x,A.y,0);tn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),Jt=!0;const At=new se(A.x,A.y,0);At.unproject(i.object),i.object.position.sub(At).add(tn),i.object.updateMatrixWorld(),Pt=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Pt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Pt).add(i.object.position):(ip.origin.copy(i.object.position),ip.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ip.direction))<FU?e.lookAt(i.target):(KM.setFromNormalAndCoplanarPoint(i.object.up,i.target),ip.intersectPlane(KM,i.target))))}else i.object instanceof Ho&&i.object.isOrthographicCamera&&(Jt=h!==1,Jt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,T=!1,Jt||Ke.distanceToSquared(i.object.position)>f||8*(1-pe.dot(i.object.quaternion))>f?(i.dispatchEvent(r),Ke.copy(i.object.position),pe.copy(i.object.quaternion),Jt=!1,!0):!1}})(),this.connect=he=>{i.domElement=he,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",et),i.domElement.addEventListener("pointerdown",Ee),i.domElement.addEventListener("pointercancel",ke),i.domElement.addEventListener("wheel",Je)},this.dispose=()=>{var he,De,tt,at,Ke,pe;i.domElement&&(i.domElement.style.touchAction="auto"),(he=i.domElement)==null||he.removeEventListener("contextmenu",et),(De=i.domElement)==null||De.removeEventListener("pointerdown",Ee),(tt=i.domElement)==null||tt.removeEventListener("pointercancel",ke),(at=i.domElement)==null||at.removeEventListener("wheel",Je),(Ke=i.domElement)==null||Ke.ownerDocument.removeEventListener("pointermove",me),(pe=i.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",ke),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ge)};const i=this,r={type:"change"},s={type:"start"},c={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const f=1e-6,a=new $y,o=new $y;let h=1;const d=new se,p=new Ge,y=new Ge,x=new Ge,g=new Ge,w=new Ge,C=new Ge,M=new Ge,_=new Ge,E=new Ge,R=new se,A=new Ge;let T=!1;const S=[],I={};function D(){return 2*Math.PI/60/60*i.autoRotateSpeed}function z(){return Math.pow(.95,i.zoomSpeed)}function B(he){i.reverseOrbit||i.reverseHorizontalOrbit?o.theta+=he:o.theta-=he}function W(he){i.reverseOrbit||i.reverseVerticalOrbit?o.phi+=he:o.phi-=he}const H=(()=>{const he=new se;return function(tt,at){he.setFromMatrixColumn(at,0),he.multiplyScalar(-tt),d.add(he)}})(),J=(()=>{const he=new se;return function(tt,at){i.screenSpacePanning===!0?he.setFromMatrixColumn(at,1):(he.setFromMatrixColumn(at,0),he.crossVectors(i.object.up,he)),he.multiplyScalar(tt),d.add(he)}})(),G=(()=>{const he=new se;return function(tt,at){const Ke=i.domElement;if(Ke&&i.object instanceof Zn&&i.object.isPerspectiveCamera){const pe=i.object.position;he.copy(pe).sub(i.target);let lt=he.length();lt*=Math.tan(i.object.fov/2*Math.PI/180),H(2*tt*lt/Ke.clientHeight,i.object.matrix),J(2*at*lt/Ke.clientHeight,i.object.matrix)}else Ke&&i.object instanceof Ho&&i.object.isOrthographicCamera?(H(tt*(i.object.right-i.object.left)/i.object.zoom/Ke.clientWidth,i.object.matrix),J(at*(i.object.top-i.object.bottom)/i.object.zoom/Ke.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function K(he){i.object instanceof Zn&&i.object.isPerspectiveCamera||i.object instanceof Ho&&i.object.isOrthographicCamera?h=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(he){K(h/he)}function ne(he){K(h*he)}function le(he){if(!i.zoomToCursor||!i.domElement)return;T=!0;const De=i.domElement.getBoundingClientRect(),tt=he.clientX-De.left,at=he.clientY-De.top,Ke=De.width,pe=De.height;A.x=tt/Ke*2-1,A.y=-(at/pe)*2+1,R.set(A.x,A.y,1).unproject(i.object).sub(i.object.position).normalize()}function j(he){return Math.max(i.minDistance,Math.min(i.maxDistance,he))}function re(he){p.set(he.clientX,he.clientY)}function fe(he){le(he),M.set(he.clientX,he.clientY)}function ve(he){g.set(he.clientX,he.clientY)}function ye(he){y.set(he.clientX,he.clientY),x.subVectors(y,p).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(B(2*Math.PI*x.x/De.clientHeight),W(2*Math.PI*x.y/De.clientHeight)),p.copy(y),i.update()}function ze(he){_.set(he.clientX,he.clientY),E.subVectors(_,M),E.y>0?Y(z()):E.y<0&&ne(z()),M.copy(_),i.update()}function Xe(he){w.set(he.clientX,he.clientY),C.subVectors(w,g).multiplyScalar(i.panSpeed),G(C.x,C.y),g.copy(w),i.update()}function Ae(he){le(he),he.deltaY<0?ne(z()):he.deltaY>0&&Y(z()),i.update()}function je(he){let De=!1;switch(he.code){case i.keys.UP:G(0,i.keyPanSpeed),De=!0;break;case i.keys.BOTTOM:G(0,-i.keyPanSpeed),De=!0;break;case i.keys.LEFT:G(i.keyPanSpeed,0),De=!0;break;case i.keys.RIGHT:G(-i.keyPanSpeed,0),De=!0;break}De&&(he.preventDefault(),i.update())}function oe(){if(S.length==1)p.set(S[0].pageX,S[0].pageY);else{const he=.5*(S[0].pageX+S[1].pageX),De=.5*(S[0].pageY+S[1].pageY);p.set(he,De)}}function Ve(){if(S.length==1)g.set(S[0].pageX,S[0].pageY);else{const he=.5*(S[0].pageX+S[1].pageX),De=.5*(S[0].pageY+S[1].pageY);g.set(he,De)}}function Te(){const he=S[0].pageX-S[1].pageX,De=S[0].pageY-S[1].pageY,tt=Math.sqrt(he*he+De*De);M.set(0,tt)}function $e(){i.enableZoom&&Te(),i.enablePan&&Ve()}function Ne(){i.enableZoom&&Te(),i.enableRotate&&oe()}function ht(he){if(S.length==1)y.set(he.pageX,he.pageY);else{const tt=rt(he),at=.5*(he.pageX+tt.x),Ke=.5*(he.pageY+tt.y);y.set(at,Ke)}x.subVectors(y,p).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(B(2*Math.PI*x.x/De.clientHeight),W(2*Math.PI*x.y/De.clientHeight)),p.copy(y)}function Ze(he){if(S.length==1)w.set(he.pageX,he.pageY);else{const De=rt(he),tt=.5*(he.pageX+De.x),at=.5*(he.pageY+De.y);w.set(tt,at)}C.subVectors(w,g).multiplyScalar(i.panSpeed),G(C.x,C.y),g.copy(w)}function q(he){const De=rt(he),tt=he.pageX-De.x,at=he.pageY-De.y,Ke=Math.sqrt(tt*tt+at*at);_.set(0,Ke),E.set(0,Math.pow(_.y/M.y,i.zoomSpeed)),Y(E.y),M.copy(_)}function Z(he){i.enableZoom&&q(he),i.enablePan&&Ze(he)}function ae(he){i.enableZoom&&q(he),i.enableRotate&&ht(he)}function Ee(he){var De,tt;i.enabled!==!1&&(S.length===0&&((De=i.domElement)==null||De.ownerDocument.addEventListener("pointermove",me),(tt=i.domElement)==null||tt.ownerDocument.addEventListener("pointerup",ke)),ot(he),he.pointerType==="touch"?Me(he):Qe(he))}function me(he){i.enabled!==!1&&(he.pointerType==="touch"?_e(he):Ye(he))}function ke(he){var De,tt,at;Ue(he),S.length===0&&((De=i.domElement)==null||De.releasePointerCapture(he.pointerId),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",me),(at=i.domElement)==null||at.ownerDocument.removeEventListener("pointerup",ke)),i.dispatchEvent(c),u=l.NONE}function Qe(he){let De;switch(he.button){case 0:De=i.mouseButtons.LEFT;break;case 1:De=i.mouseButtons.MIDDLE;break;case 2:De=i.mouseButtons.RIGHT;break;default:De=-1}switch(De){case Pa.DOLLY:if(i.enableZoom===!1)return;fe(he),u=l.DOLLY;break;case Pa.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enablePan===!1)return;ve(he),u=l.PAN}else{if(i.enableRotate===!1)return;re(he),u=l.ROTATE}break;case Pa.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enableRotate===!1)return;re(he),u=l.ROTATE}else{if(i.enablePan===!1)return;ve(he),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Ye(he){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;ye(he);break;case l.DOLLY:if(i.enableZoom===!1)return;ze(he);break;case l.PAN:if(i.enablePan===!1)return;Xe(he);break}}function Je(he){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(he.preventDefault(),i.dispatchEvent(s),Ae(he),i.dispatchEvent(c))}function ge(he){i.enabled===!1||i.enablePan===!1||je(he)}function Me(he){switch(We(he),S.length){case 1:switch(i.touches.ONE){case Ia.ROTATE:if(i.enableRotate===!1)return;oe(),u=l.TOUCH_ROTATE;break;case Ia.PAN:if(i.enablePan===!1)return;Ve(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case Ia.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;$e(),u=l.TOUCH_DOLLY_PAN;break;case Ia.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ne(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function _e(he){switch(We(he),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;ht(he),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;Ze(he),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Z(he),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ae(he),i.update();break;default:u=l.NONE}}function et(he){i.enabled!==!1&&he.preventDefault()}function ot(he){S.push(he)}function Ue(he){delete I[he.pointerId];for(let De=0;De<S.length;De++)if(S[De].pointerId==he.pointerId){S.splice(De,1);return}}function We(he){let De=I[he.pointerId];De===void 0&&(De=new Ge,I[he.pointerId]=De),De.set(he.pageX,he.pageY)}function rt(he){const De=he.pointerId===S[0].pointerId?S[1]:S[0];return I[De.pointerId]}this.dollyIn=(he=z())=>{ne(he),i.update()},this.dollyOut=(he=z())=>{Y(he),i.update()},this.getScale=()=>h,this.setScale=he=>{K(he),i.update()},this.getZoomScale=()=>z(),t!==void 0&&this.connect(t),this.update()}};function BU(n,e,t){const i=Mr(h=>h.size),r=Mr(h=>h.viewport),s=typeof n=="number"?n:i.width*r.dpr,c=typeof e=="number"?e:i.height*r.dpr,l=(typeof n=="number"?t:n)||{},{samples:u=0,depth:f,...a}=l,o=Ce.useMemo(()=>{const h=new jr(s,c,{minFilter:On,magFilter:On,type:nl,...a});return f&&(h.depthTexture=new Em(s,c,Hr)),h.samples=u,h},[]);return Ce.useLayoutEffect(()=>{o.setSize(s,c),u&&(o.samples=u)},[u,o,s,c]),Ce.useEffect(()=>()=>o.dispose(),[]),o}const $U=n=>typeof n=="function",zU=Ce.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},c)=>{const l=Mr(({set:x})=>x),u=Mr(({camera:x})=>x),f=Mr(({size:x})=>x),a=Ce.useRef(null),o=Ce.useRef(null),h=BU(e);Ce.useLayoutEffect(()=>{s.manual||(a.current.aspect=f.width/f.height)},[f,s]),Ce.useLayoutEffect(()=>{a.current.updateProjectionMatrix()});let d=0,p=null;const y=$U(r);return A_(x=>{y&&(t===1/0||d<t)&&(o.current.visible=!1,x.gl.setRenderTarget(h),p=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,a.current),x.scene.background=p,x.gl.setRenderTarget(null),o.current.visible=!0,d++)}),Ce.useLayoutEffect(()=>{if(i){const x=u;return l(()=>({camera:a.current})),()=>l(()=>({camera:x}))}},[a,i,l]),Ce.createElement(Ce.Fragment,null,Ce.createElement("perspectiveCamera",Uc({ref:LU([a,c])},s),!y&&r),Ce.createElement("group",{ref:o},y&&r(h.texture)))}),HU=Ce.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:c,onStart:l,onEnd:u,...f},a)=>{const o=Mr(E=>E.invalidate),h=Mr(E=>E.camera),d=Mr(E=>E.gl),p=Mr(E=>E.events),y=Mr(E=>E.setEvents),x=Mr(E=>E.set),g=Mr(E=>E.get),w=Mr(E=>E.performance),C=e||h,M=i||p.connected||d.domElement,_=Ce.useMemo(()=>new UU(C),[C]);return A_(()=>{_.enabled&&_.update()},-1),Ce.useEffect(()=>(s&&_.connect(s===!0?M:s),_.connect(M),()=>void _.dispose()),[s,M,t,_,o]),Ce.useEffect(()=>{const E=T=>{o(),t&&w.regress(),c&&c(T)},R=T=>{l&&l(T)},A=T=>{u&&u(T)};return _.addEventListener("change",E),_.addEventListener("start",R),_.addEventListener("end",A),()=>{_.removeEventListener("start",R),_.removeEventListener("end",A),_.removeEventListener("change",E)}},[c,l,u,_,o,y]),Ce.useEffect(()=>{if(n){const E=g().controls;return x({controls:_}),()=>x({controls:E})}},[n,_]),Ce.createElement("primitive",Uc({ref:a,object:_,enableDamping:r},f))}),WU=({onHistoryClick:n})=>Q.jsxs("nav",{className:"navigation-bar",children:[Q.jsx("div",{className:"nav-brand",children:Q.jsx("h1",{children:"ShaderChat"})}),Q.jsx("div",{className:"nav-links"}),Q.jsx("div",{className:"nav-actions",children:Q.jsx("button",{className:"nav-btn",onClick:n,title:"",children:Q.jsx("span",{className:"fas fa-history"})})})]}),VU=({isOpen:n,onClose:e,onAddModel:t})=>{const[i,r]=Ce.useState({name:"",address:"",model:"",apiKey:""});if(!n)return null;const s=c=>{if(c.preventDefault(),i.name&&i.address&&i.model&&i.apiKey){const l={id:Date.now().toString(),...i};t(l),r({name:"",address:"",model:"",apiKey:""}),e()}};return Q.jsx("div",{className:"settings-modal-overlay",onClick:e,children:Q.jsxs("div",{className:"settings-modal",onClick:c=>c.stopPropagation(),children:[Q.jsxs("div",{className:"settings-modal-header",children:[Q.jsx("h3",{children:""}),Q.jsx("button",{className:"settings-modal-close",onClick:e,children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsxs("form",{onSubmit:s,children:[Q.jsxs("div",{className:"settings-modal-content add-model-content",children:[Q.jsxs("div",{className:"setting-item add-model-item",children:[Q.jsxs("label",{children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z"}),Q.jsx("path",{d:"M2 17L12 22L22 17"}),Q.jsx("path",{d:"M2 12L12 17L22 12"})]}),""]}),Q.jsx("input",{type:"text",value:i.name,onChange:c=>r({...i,name:c.target.value}),placeholder:": GPT-4",required:!0,className:"add-model-input"})]}),Q.jsxs("div",{className:"setting-item add-model-item",children:[Q.jsxs("label",{children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),Q.jsx("path",{d:"M7.5 16.5L3 19"}),Q.jsx("path",{d:"M21 8.5L16.5 11"}),Q.jsx("path",{d:"M3 8.5L7.5 11"}),Q.jsx("path",{d:"M21 16.5L16.5 14"})]}),"API"]}),Q.jsx("input",{type:"text",value:i.address,onChange:c=>r({...i,address:c.target.value}),placeholder:"https://api.openai.com/v1",required:!0,className:"add-model-input"})]}),Q.jsxs("div",{className:"setting-item add-model-item",children:[Q.jsxs("label",{children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Q.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),Q.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),""]}),Q.jsx("input",{type:"text",value:i.model,onChange:c=>r({...i,model:c.target.value}),placeholder:"gpt-4",required:!0,className:"add-model-input"})]}),Q.jsxs("div",{className:"setting-item add-model-item",children:[Q.jsxs("label",{children:[Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),"API"]}),Q.jsx("input",{type:"password",value:i.apiKey,onChange:c=>r({...i,apiKey:c.target.value}),placeholder:"API",required:!0,className:"add-model-input"})]})]}),Q.jsxs("div",{className:"settings-modal-footer add-model-footer",children:[Q.jsxs("button",{type:"submit",className:"settings-modal-btn settings-modal-btn-primary add-model-submit",children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Q.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),""]}),Q.jsx("button",{type:"button",className:"settings-modal-btn settings-modal-btn-secondary",onClick:e,children:""})]})]})]})})},GU=({isOpen:n,onClose:e,models:t,onAddModel:i,onEditModel:r,onDeleteModel:s,onTestModel:c})=>{const[l,u]=Ce.useState(!1),[f,a]=Ce.useState({show:!1,model:null}),[o,h]=Ce.useState(null),[d,p]=Ce.useState(null),y=()=>{f.model&&(s(f.model.id),a({show:!1,model:null}))},x=()=>{a({show:!1,model:null})},g=async w=>{h(w.id),p(null);try{const C=await c(w);p({modelId:w.id,success:C,message:C?"":""})}catch(C){p({modelId:w.id,success:!1,message:`: ${C instanceof Error?C.message:""}`})}finally{h(null)}};return n?Q.jsxs("div",{className:"settings-modal-overlay",onClick:e,children:[Q.jsxs("div",{className:"settings-modal",onClick:w=>w.stopPropagation(),children:[Q.jsxs("div",{className:"settings-modal-header",children:[Q.jsx("h3",{children:""}),Q.jsx("button",{className:"settings-modal-close",onClick:e,children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsx("div",{className:"settings-modal-content",children:Q.jsxs("div",{className:"setting-item",children:[Q.jsx("label",{children:""}),Q.jsx("div",{className:"model-list",children:t.length===0?Q.jsx("div",{className:"model-list-empty",children:""}):t.map(w=>Q.jsxs("div",{className:"model-list-item",children:[Q.jsxs("div",{className:"model-info",children:[Q.jsx("div",{className:"model-name",children:w.name}),Q.jsxs("div",{className:"model-details",children:[w.model," - ",w.address]})]}),Q.jsxs("div",{style:{display:"flex",gap:"8px"},children:[Q.jsx("button",{className:"model-test-btn",onClick:()=>g(w),disabled:o===w.id,title:"",style:{backgroundColor:(d==null?void 0:d.modelId)===w.id?d.success?"#4CAF50":"#f44336":void 0},children:o===w.id?Q.jsx("span",{children:"..."}):(d==null?void 0:d.modelId)===w.id?d.success?"":"":Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("polygon",{points:"5,3 19,12 5,21"})})}),Q.jsx("button",{className:"model-edit-btn",onClick:()=>r(w),title:"",children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),Q.jsx("button",{className:"model-delete-btn",onClick:()=>a({show:!0,model:w}),title:"",children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M3 6h18"}),Q.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),Q.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),Q.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]},w.id))}),Q.jsxs("button",{className:"add-model-btn",onClick:()=>u(!0),children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Q.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),""]})]})}),Q.jsxs("div",{className:"settings-modal-footer",children:[Q.jsx("button",{className:"settings-modal-btn settings-modal-btn-primary",onClick:e,children:""}),Q.jsx("button",{className:"settings-modal-btn settings-modal-btn-secondary",onClick:e,children:""})]})]}),Q.jsx(VU,{isOpen:l,onClose:()=>u(!1),onAddModel:i}),f.show&&f.model&&Q.jsx("div",{className:"delete-confirm-overlay",children:Q.jsxs("div",{className:"delete-confirm-modal",children:[Q.jsxs("div",{className:"delete-confirm-header",children:[Q.jsx("h3",{children:""}),Q.jsx("button",{className:"settings-modal-close",onClick:x,children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsxs("div",{className:"delete-confirm-content",children:[Q.jsxs("p",{children:[" ",Q.jsx("strong",{children:f.model.name})," "]}),Q.jsx("p",{className:"delete-confirm-warning",children:""})]}),Q.jsxs("div",{className:"delete-confirm-footer",children:[Q.jsx("button",{className:"settings-modal-btn settings-modal-btn-secondary",onClick:x,children:""}),Q.jsx("button",{className:"settings-modal-btn settings-modal-btn-primary delete-confirm-btn",onClick:y,children:""})]})]})})]}):null},jU=({isOpen:n,onClose:e,onUpdateModel:t,model:i})=>{const[r,s]=Ce.useState(""),[c,l]=Ce.useState(""),[u,f]=Ce.useState(""),[a,o]=Ce.useState(""),[h,d]=Ce.useState(!1);Ce.useEffect(()=>{i&&(s(i.name),l(i.address),f(i.model),o(i.apiKey))},[i]);const p=y=>{y.preventDefault(),r&&c&&u&&a&&t({...i,name:r,address:c,model:u,apiKey:a})};return!n||!i?null:Q.jsx("div",{className:"settings-modal-overlay",onClick:e,children:Q.jsxs("div",{className:"settings-modal",onClick:y=>y.stopPropagation(),children:[Q.jsxs("div",{className:"settings-modal-header",children:[Q.jsx("h3",{children:""}),Q.jsx("button",{className:"settings-modal-close",onClick:e,children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsxs("form",{onSubmit:p,children:[Q.jsxs("div",{className:"settings-modal-content add-model-content",children:[Q.jsxs("div",{className:"setting-item",children:[Q.jsx("label",{children:""}),Q.jsx("input",{type:"text",value:r,onChange:y=>s(y.target.value),placeholder:"",required:!0})]}),Q.jsxs("div",{className:"setting-item",children:[Q.jsx("label",{children:""}),Q.jsx("input",{type:"text",value:c,onChange:y=>l(y.target.value),placeholder:"https://api.openai.com/v1",required:!0})]}),Q.jsxs("div",{className:"setting-item",children:[Q.jsx("label",{children:""}),Q.jsx("input",{type:"text",value:u,onChange:y=>f(y.target.value),placeholder:"gpt-3.5-turbo",required:!0})]}),Q.jsxs("div",{className:"setting-item",children:[Q.jsx("label",{children:"API"}),Q.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[Q.jsx("input",{type:h?"text":"password",value:a,onChange:y=>o(y.target.value),placeholder:"API",required:!0,style:{flex:1,paddingRight:"40px"}}),Q.jsx("button",{type:"button",onClick:()=>d(!h),style:{position:"absolute",right:"8px",background:"none",border:"none",color:"#999",cursor:"pointer",padding:"4px",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center"},title:h?"API":"API",children:h?"":""})]})]})]}),Q.jsxs("div",{className:"settings-modal-footer",children:[Q.jsx("button",{type:"submit",className:"settings-modal-btn settings-modal-btn-primary",children:""}),Q.jsx("button",{type:"button",className:"settings-modal-btn settings-modal-btn-secondary",onClick:e,children:""})]})]})]})})},KU=({isOpen:n,onToggle:e,messages:t,onSendMessage:i,inputMessage:r,setInputMessage:s,models:c,setModels:l,selectedModel:u,setSelectedModel:f,onTestModel:a,onApplyVertexShader:o,onApplyFragmentShader:h})=>{const[d,p]=Ce.useState(!1),[y,x]=Ce.useState(!1),[g,w]=Ce.useState({}),[C,M]=Ce.useState(null),[_,E]=Ce.useState(!1),[R,A]=Ce.useState(!1),T=Ce.useRef(null);Ce.useEffect(()=>{A(!0)},[]);const[S,I]=Ce.useState(null),D=(j,re="success")=>{I({message:j,type:re}),setTimeout(()=>I(null),3e3)},z=j=>{const re=[...c,j];l(re),f(j.name),D(` "${j.name}" `,"success")},B=j=>{l(c.map(re=>re.id===j.id?j:re)),D(` "${j.name}" `,"success")},W=j=>{const re=c.find(ve=>ve.id===j),fe=c.filter(ve=>ve.id!==j);l(fe),re&&u===re.name&&fe.length>0?f(fe[0].name):fe.length===0&&f(""),re&&D(` "${re.name}" `,"success")},H=j=>{M(j),E(!0)},J=async j=>{try{return await a(j)}catch(re){return console.error(":",re),D(`: ${re instanceof Error?re.message:""}`,"error"),!1}},G=()=>{var j;(j=T.current)==null||j.scrollIntoView({behavior:"smooth"})};Ce.useEffect(()=>{G()},[t]);const K=j=>{const re=j.includes("=== FORMAT START ===")&&j.includes("=== FORMAT END ==="),fe=j.includes("****")||j.includes("**Vertex Shader**");if(re||fe){const ve=j.match(/\*\*\*\*\s*\n?([^*]*?)(?=\*\*Vertex|$)/s)||j.match(/\*\*\*\*\s*\n?([^*]*?)(?=\*\*Vertex|$)/s),ye=j.match(/\*\*Vertex Shader\*\*\s*\n?```glsl\s*\n?([\s\S]*?)\s*\n?```/s)||j.match(/\*\*Vertex Shader\*\*\s*\n?([\s\S]*?)(?=\*\*Fragment|$)/s),ze=j.match(/\*\*Fragment Shader\*\*\s*\n?```glsl\s*\n?([\s\S]*?)\s*\n?```/s)||j.match(/\*\*Fragment Shader\*\*\s*\n?([\s\S]*?)(?=\*\*|$)/s)||j.match(/```glsl\s*\n?([\s\S]*?)\s*\n?```/s),Xe=j.match(/\*\*\*\*\s*\n?([\s\S]*?)(?=\*\*Vertex|$)/s)||j.match(/\*\*\*\*\s*\n?([\s\S]*?)$/s);return Q.jsxs("div",{className:"ai-response-formatted",children:[ve&&Q.jsxs("div",{className:"response-section",children:[Q.jsx("h4",{children:" "}),Q.jsx("p",{style:{whiteSpace:"pre-wrap"},children:ve[1].trim()})]}),ye&&ye[1].trim()!==""&&Q.jsxs("div",{className:"response-section",children:[Q.jsxs("div",{className:"code-section-header",children:[Q.jsx("h4",{children:" Vertex Shader"}),Q.jsx("button",{className:"chat-message-apply-btn",onClick:Ae=>{if(Ae.stopPropagation(),o){o(ye[1].trim());const je=Ae.target,oe=je.innerHTML;je.innerHTML="",je.style.color="#4CAF50",setTimeout(()=>{je.innerHTML=oe,je.style.color=""},2e3)}},title:"Vertex Shader",children:""})]}),Q.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"},children:Q.jsx("code",{className:"glsl-code",children:ye[1].trim()})})]}),ze&&ze[1].trim()!==""&&Q.jsxs("div",{className:"response-section",children:[Q.jsxs("div",{className:"code-section-header",children:[Q.jsx("h4",{children:" Fragment Shader"}),Q.jsx("button",{className:"chat-message-apply-btn",onClick:Ae=>{if(Ae.stopPropagation(),h){h(ze[1].trim());const je=Ae.target,oe=je.innerHTML;je.innerHTML="",je.style.color="#4CAF50",setTimeout(()=>{je.innerHTML=oe,je.style.color=""},2e3)}},title:"Fragment Shader",children:""})]}),Q.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"},children:Q.jsx("code",{className:"glsl-code",children:ze[1].trim()})})]}),Xe&&Q.jsxs("div",{className:"response-section",children:[Q.jsx("h4",{children:" "}),Q.jsx("div",{className:"changes-list",children:Xe[1].trim().split(`
`).map((Ae,je)=>{const oe=Ae.replace(/^-\s*/,"").replace(/^\s*/,"").replace(/=== FORMAT END ===/,"").trim();return oe?Q.jsxs("div",{className:"change-item",children:[" ",oe]},je):null})})]})]})}return Q.jsx(Q.Fragment,{children:j})},Y=()=>{if(r.trim()){p(!0),i(r),s("");const j=document.getElementById("chat-input");j&&(j.textContent=""),setTimeout(()=>{p(!1)},1500)}},ne=(j,re)=>{navigator.clipboard.writeText(j).then(()=>{w(fe=>({...fe,[re]:!0})),setTimeout(()=>{w(fe=>({...fe,[re]:!1}))},3e3),console.log("")}).catch(fe=>{console.error(":",fe)})},le=j=>{w(re=>({...re,[j]:!1}))};return Q.jsxs(Q.Fragment,{children:[S&&Q.jsx("div",{className:`notification notification-${S.type}`,children:Q.jsxs("div",{className:"notification-content",children:[Q.jsx("span",{className:"notification-message",children:S.message}),Q.jsx("button",{className:"notification-close",onClick:()=>D(null),title:"",children:Q.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),Q.jsxs("button",{className:`chat-toggle-btn ${n?"move-up":""}`,onClick:e,children:[Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Q.jsx("span",{children:"ShaderChat"})]}),Q.jsx("div",{id:"chat-drawer",className:R&&n?"open":"",style:R?{}:{display:"none"},children:Q.jsxs("div",{id:"chat-container",children:[Q.jsxs("div",{id:"chat-messages",children:[Q.jsxs("div",{className:"chat-messages-container",children:[t.map((j,re)=>{const fe=j.text.includes("=== FORMAT START ===")&&j.text.includes("=== FORMAT END ===");return Q.jsxs("div",{className:`chat-message-container ${j.sender}`,onMouseEnter:()=>le(re),children:[Q.jsx("div",{className:`chat-message ${j.sender} ${fe?"ai-response-message":""}`,children:K(j.text)}),Q.jsx("div",{className:"chat-message-actions",children:Q.jsx("button",{className:`chat-message-copy-btn ${g[re]?"copied":""}`,onClick:ve=>{ve.stopPropagation(),ne(j.text,re)},title:g[re]?"!":"",children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g[re]?Q.jsx("path",{d:"M20 6L9 17l-5-5",strokeLinecap:"round",strokeLinejoin:"round"}):Q.jsxs(Q.Fragment,{children:[Q.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),Q.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})})})]},re)}),d&&Q.jsx("div",{className:"chat-message-container assistant",children:Q.jsxs("div",{className:"chat-message assistant typing-indicator",children:[Q.jsx("span",{}),Q.jsx("span",{}),Q.jsx("span",{})]})})]}),Q.jsx("div",{ref:T})]}),Q.jsxs("div",{id:"chat-input-area",children:[Q.jsxs("div",{className:"model-selector",children:[Q.jsx("div",{className:"model-selector-info",children:Q.jsx("span",{className:"model-status-indicator"})}),Q.jsxs("div",{className:"model-selector-header",children:[Q.jsx("span",{className:"model-selector-label",children:"Chat with "}),c.length>0?Q.jsx("select",{className:"model-selector-select",value:u,onChange:j=>f(j.target.value),children:c.map(j=>Q.jsx("option",{value:j.name,children:j.name},j.id))}):Q.jsx("button",{className:"model-selector-config-btn",onClick:()=>x(!0),children:"+ "})]}),Q.jsx("button",{className:"model-selector-settings-btn",onClick:()=>x(!0),title:"",children:Q.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6750",width:"20",height:"20",children:[Q.jsx("path",{d:"M825.664646 407.014141c-27.280808 0-51.846465-14.092929-65.551515-37.882828-13.705051-23.660606-13.705051-51.975758 0-75.636364 11.377778-19.911111 4.654545-45.252525-15.256565-56.759595l-111.19192-64.387879c-19.911111-11.507071-45.252525-4.654545-56.759595 15.256565-13.705051 23.660606-38.141414 37.882828-65.551516 37.882829-27.280808 0-51.846465-14.092929-65.551515-37.882829-11.507071-19.911111-36.977778-26.634343-56.759596-15.127272l-111.450505 64.258586c-19.911111 11.377778-26.634343 36.977778-15.127273 56.759595 13.705051 23.660606 13.705051 51.975758 0 75.636364-13.705051 23.660606-38.270707 37.882828-65.551515 37.882828-22.884848 0-41.50303 18.618182-41.50303 41.503031v128.646464c0 22.884848 18.618182 41.50303 41.50303 41.503031 27.280808 0 51.846465 14.092929 65.551515 37.882828 13.705051 23.660606 13.705051 51.975758 0 75.636364-5.559596 9.567677-7.111111 20.816162-4.137373 31.547474 2.844444 10.731313 9.826263 19.652525 19.393939 25.212122l111.450505 64.258585c6.464646 3.749495 13.575758 5.559596 20.686869 5.559596 14.351515 0 28.315152-7.369697 36.072727-20.686868 13.705051-23.789899 38.270707-37.882828 65.551515-37.882829s51.846465 14.092929 65.551515 37.882829c11.507071 19.652525 36.977778 26.634343 56.759596 15.127272l111.19192-64.258585c19.911111-11.377778 26.634343-36.848485 15.256565-56.759596-13.705051-23.660606-13.705051-51.975758 0-75.636364 13.705051-23.660606 38.141414-37.882828 65.551515-37.882828 22.884848 0 41.50303-18.618182 41.503031-41.503031V448.646465c-0.129293-23.014141-18.747475-41.632323-41.632324-41.632324z m3.361617 170.149495c0 1.810101-1.551515 3.361616-3.361617 3.361617-41.115152 0-77.963636 21.333333-98.650505 57.018181-20.557576 35.555556-20.557576 78.222222 0 113.907071 0.775758 1.292929 0.129293 3.749495-1.292929 4.654546l-111.191919 64.258585c-1.551515 0.905051-3.749495 0.258586-4.654546-1.163636-20.557576-35.684848-57.406061-57.018182-98.521212-57.018182h-0.129293c-41.115152 0-77.963636 21.333333-98.650505 57.018182-0.905051 1.551515-2.973737 2.19798-4.654545 1.163636l-111.321212-64.258585-1.163637-4.525253c20.557576-35.684848 20.557576-78.222222 0-113.907071-20.557576-35.555556-57.406061-56.888889-98.650505-56.888889-1.810101 0-3.361616-1.551515-3.361616-3.361616V448.646465c0-1.810101 1.551515-3.361616 3.361616-3.361617 41.115152 0 77.963636-21.333333 98.650505-57.018181 20.557576-35.684848 20.557576-78.222222 0-113.907071-0.905051-1.551515-0.387879-3.620202 1.163637-4.654545l111.450505-64.258586c0.387879-0.258586 0.905051-0.258586 1.422222-0.258586 1.292929 0 2.585859 0.646465 3.232323 1.551515 20.557576 35.684848 57.406061 57.018182 98.650505 57.018182 41.115152 0 77.963636-21.333333 98.521212-56.888889 0.905051-1.680808 2.973737-2.327273 4.654546-1.292929l111.191919 64.258585c1.551515 0.905051 2.19798 2.973737 1.292929 4.654546-20.557576 35.684848-20.557576 78.222222 0 113.907071 20.557576 35.684848 57.406061 57.018182 98.650505 57.018181 1.810101 0 3.361616 1.551515 3.361617 3.361617v128.387878z m0 0",fill:"#e6e6e6","p-id":"6751"}),Q.jsx("path",{d:"M511.224242 364.735354c-81.713131 0-148.29899 66.456566-148.298989 148.298989 0 81.713131 66.456566 148.169697 148.298989 148.169697 81.713131 0 148.169697-66.456566 148.169697-148.169697 0.129293-81.842424-66.456566-148.29899-148.169697-148.298989z m0 258.197979c-60.638384 0-110.028283-49.389899-110.028282-110.028282 0-60.638384 49.389899-110.028283 110.028282-110.028283 60.638384 0 110.028283 49.389899 110.028283 110.028283 0 60.638384-49.260606 110.028283-110.028283 110.028282z m0 0",fill:"#e6e6e6","p-id":"6752"})]})})]}),Q.jsx("div",{className:"chat-input-container",children:Q.jsx("div",{id:"chat-input",className:"chat-input-div",contentEditable:!0,"data-placeholder":"... ( #vs  #fs )",onInput:j=>{var ve,ye;const re=j.currentTarget.textContent||"";s(re);const fe=window.getSelection();if(fe&&fe.rangeCount>0){const ze=fe.getRangeAt(0),Xe=ze.startOffset,Ae=ze.startContainer;let je=0;const oe=document.createTreeWalker(j.currentTarget,NodeFilter.SHOW_TEXT,null);let Ve;for(;Ve=oe.nextNode();){if(Ve===Ae){je+=Xe;break}je+=((ve=Ve.textContent)==null?void 0:ve.length)||0}const Te=re.replace(/#vs/g,'<span class="shader-ref">#vs</span>').replace(/#fs/g,'<span class="shader-ref">#fs</span>');if(Te!==j.currentTarget.innerHTML){j.currentTarget.innerHTML=Te;const $e=document.createRange(),Ne=document.createTreeWalker(j.currentTarget,NodeFilter.SHOW_TEXT,null);let ht,Ze=0;for(;ht=Ne.nextNode();){const q=((ye=ht.textContent)==null?void 0:ye.length)||0;if(Ze+q>=je){$e.setStart(ht,Math.min(je-Ze,q)),$e.collapse(!0);break}Ze+=q}fe.removeAllRanges(),fe.addRange($e)}}},onKeyPress:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),Y())},suppressContentEditableWarning:!0})}),Q.jsx("button",{id:"send-btn",onClick:Y,disabled:!r.trim(),children:""})]})]})}),Q.jsx(GU,{isOpen:y,onClose:()=>x(!1),models:c,onAddModel:z,onEditModel:H,onDeleteModel:W,onTestModel:J}),Q.jsx(jU,{isOpen:_,onClose:()=>E(!1),model:C,onUpdateModel:B})]})};var jT={exports:{}};(function(n,e){(function(){var t="ace",i=function(){return this}();!i&&typeof window<"u"&&(i=window);var r=function(a,o,h){if(typeof a!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=o),r.modules[a]||(r.payloads[a]=h,r.modules[a]=null)};r.modules={},r.payloads={};var s=function(a,o,h){if(typeof o=="string"){var d=u(a,o);if(d!=null)return h&&h(),d}else if(Object.prototype.toString.call(o)==="[object Array]"){for(var p=[],y=0,x=o.length;y<x;++y){var g=u(a,o[y]);if(g==null&&c.original)return;p.push(g)}return h&&h.apply(null,p)||!0}},c=function(a,o){var h=s("",a,o);return h==null&&c.original?c.original.apply(this,arguments):h},l=function(a,o){if(o.indexOf("!")!==-1){var h=o.split("!");return l(a,h[0])+"!"+l(a,h[1])}if(o.charAt(0)=="."){var d=a.split("/").slice(0,-1).join("/");for(o=d+"/"+o;o.indexOf(".")!==-1&&p!=o;){var p=o;o=o.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return o},u=function(a,o){o=l(a,o);var h=r.modules[o];if(!h){if(h=r.payloads[o],typeof h=="function"){var d={},p={id:o,uri:"",exports:d,packaged:!0},y=function(g,w){return s(o,g,w)},x=h(y,d,p);d=x||p.exports,r.modules[o]=d,delete r.payloads[o]}h=r.modules[o]=d||h}return h};function f(a){var o=i;a&&(i[a]||(i[a]={}),o=i[a]),(!o.define||!o.define.packaged)&&(r.original=o.define,o.define=r,o.define.packaged=!0),(!o.require||!o.require.packaged)&&(c.original=o.require,o.require=c,o.require.packaged=!0)}f(t)})(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],function(t,i,r){typeof Element<"u"&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,i,r){i.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},i.getOS=function(){return i.isMac?i.OS.MAC:i.isLinux?i.OS.LINUX:i.OS.WINDOWS};var s=typeof navigator=="object"?navigator:{},c=(/mac|win|linux/i.exec(s.platform)||["other"])[0].toLowerCase(),l=s.userAgent||"",u=s.appName||"";i.isWin=c=="win",i.isMac=c=="mac",i.isLinux=c=="linux",i.isIE=u=="Microsoft Internet Explorer"||u.indexOf("MSAppHost")>=0?parseFloat((l.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((l.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),i.isOldIE=i.isIE&&i.isIE<9,i.isGecko=i.isMozilla=l.match(/ Gecko\/\d+/),i.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",i.isWebKit=parseFloat(l.split("WebKit/")[1])||void 0,i.isChrome=parseFloat(l.split(" Chrome/")[1])||void 0,i.isEdge=parseFloat(l.split(" Edge/")[1])||void 0,i.isAIR=l.indexOf("AdobeAIR")>=0,i.isAndroid=l.indexOf("Android")>=0,i.isChromeOS=l.indexOf(" CrOS ")>=0,i.isIOS=/iPad|iPhone|iPod/.test(l)&&!window.MSStream,i.isIOS&&(i.isMac=!0),i.isMobile=i.isIOS||i.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(t,i,r){var s=t("./useragent"),c="http://www.w3.org/1999/xhtml";if(i.buildDom=function u(f,a,o){if(typeof f=="string"&&f){var h=document.createTextNode(f);return a&&a.appendChild(h),h}if(!Array.isArray(f))return f&&f.appendChild&&a&&a.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var d=[],p=0;p<f.length;p++){var y=u(f[p],a,o);y&&d.push(y)}return d}var x=document.createElement(f[0]),g=f[1],w=1;g&&typeof g=="object"&&!Array.isArray(g)&&(w=2);for(var p=w;p<f.length;p++)u(f[p],x,o);return w==2&&Object.keys(g).forEach(function(C){var M=g[C];C==="class"?x.className=Array.isArray(M)?M.join(" "):M:typeof M=="function"||C=="value"||C[0]=="$"?x[C]=M:C==="ref"?o&&(o[M]=x):M!=null&&x.setAttribute(C,M)}),a&&a.appendChild(x),x},i.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},i.createElement=function(u,f){return document.createElementNS?document.createElementNS(f||c,u):document.createElement(u)},i.removeChildren=function(u){u.innerHTML=""},i.createTextNode=function(u,f){var a=f?f.ownerDocument:document;return a.createTextNode(u)},i.createFragment=function(u){var f=u?u.ownerDocument:document;return f.createDocumentFragment()},i.hasCssClass=function(u,f){var a=(u.className+"").split(/\s+/g);return a.indexOf(f)!==-1},i.addCssClass=function(u,f){i.hasCssClass(u,f)||(u.className+=" "+f)},i.removeCssClass=function(u,f){for(var a=u.className.split(/\s+/g);;){var o=a.indexOf(f);if(o==-1)break;a.splice(o,1)}u.className=a.join(" ")},i.toggleCssClass=function(u,f){for(var a=u.className.split(/\s+/g),o=!0;;){var h=a.indexOf(f);if(h==-1)break;o=!1,a.splice(h,1)}return o&&a.push(f),u.className=a.join(" "),o},i.setCssClass=function(u,f,a){a?i.addCssClass(u,f):i.removeCssClass(u,f)},i.hasCssString=function(u,f){var a=0,o;if(f=f||document,o=f.querySelectorAll("style")){for(;a<o.length;)if(o[a++].id===u)return!0}},i.importCssString=function(f,a,o){var h=o;!o||!o.getRootNode?h=document:(h=o.getRootNode(),(!h||h==o)&&(h=document));var d=h.ownerDocument||h;if(a&&i.hasCssString(a,h))return null;a&&(f+=`
/*# sourceURL=ace/css/`+a+" */");var p=i.createElement("style");p.appendChild(d.createTextNode(f)),a&&(p.id=a),h==d&&(h=i.getDocumentHead(d)),h.insertBefore(p,h.firstChild)},i.importCssStylsheet=function(u,f){i.buildDom(["link",{rel:"stylesheet",href:u}],i.getDocumentHead(f))},i.scrollbarWidth=function(u){var f=i.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var a=i.createElement("ace_outer"),o=a.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",a.appendChild(f);var h=u.documentElement;h.appendChild(a);var d=f.offsetWidth;o.overflow="scroll";var p=f.offsetWidth;return d==p&&(p=a.clientWidth),h.removeChild(a),d-p},typeof document>"u"&&(i.importCssString=function(){}),i.computedStyle=function(u,f){return window.getComputedStyle(u,"")||{}},i.setStyle=function(u,f,a){u[f]!==a&&(u[f]=a)},i.HAS_CSS_ANIMATION=!1,i.HAS_CSS_TRANSFORMS=!1,i.HI_DPI=s.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,typeof document<"u"){var l=document.createElement("div");i.HI_DPI&&l.style.transform!==void 0&&(i.HAS_CSS_TRANSFORMS=!0),!s.isEdge&&typeof l.style.animationName<"u"&&(i.HAS_CSS_ANIMATION=!0),l=null}i.HAS_CSS_TRANSFORMS?i.translate=function(u,f,a){u.style.transform="translate("+Math.round(f)+"px, "+Math.round(a)+"px)"}:i.translate=function(u,f,a){u.style.top=Math.round(a)+"px",u.style.left=Math.round(f)+"px"}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,i,r){i.inherits=function(s,c){s.super_=c,s.prototype=Object.create(c.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(s,c){for(var l in c)s[l]=c[l];return s},i.implement=function(s,c){i.mixin(s,c)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(t,i,r){var s=t("./oop"),c=function(){var l={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},u,f;for(f in l.FUNCTION_KEYS)u=l.FUNCTION_KEYS[f].toLowerCase(),l[u]=parseInt(f,10);for(f in l.PRINTABLE_KEYS)u=l.PRINTABLE_KEYS[f].toLowerCase(),l[u]=parseInt(f,10);return s.mixin(l,l.MODIFIER_KEYS),s.mixin(l,l.PRINTABLE_KEYS),s.mixin(l,l.FUNCTION_KEYS),l.enter=l.return,l.escape=l.esc,l.del=l.delete,l[173]="-",function(){for(var a=["cmd","ctrl","alt","shift"],o=Math.pow(2,a.length);o--;)l.KEY_MODS[o]=a.filter(function(h){return o&l.KEY_MODS[h]}).join("-")+"-"}(),l.KEY_MODS[0]="",l.KEY_MODS[-1]="input-",l}();s.mixin(i,c),i.keyCodeToString=function(l){var u=c[l];return typeof u!="string"&&(u=String.fromCharCode(l)),u.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,i,r){var s=t("./keys"),c=t("./useragent"),l=null,u=0,f;function a(){f=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){f={passive:!1}}})}catch{}}function o(){return f==null&&a(),f}function h(C,M,_){this.elem=C,this.type=M,this.callback=_}h.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var d=i.addListener=function(C,M,_,E){C.addEventListener(M,_,o()),E&&E.$toDestroy.push(new h(C,M,_))},p=i.removeListener=function(C,M,_){C.removeEventListener(M,_,o())};i.stopEvent=function(C){return i.stopPropagation(C),i.preventDefault(C),!1},i.stopPropagation=function(C){C.stopPropagation&&C.stopPropagation()},i.preventDefault=function(C){C.preventDefault&&C.preventDefault()},i.getButton=function(C){return C.type=="dblclick"?0:C.type=="contextmenu"||c.isMac&&C.ctrlKey&&!C.altKey&&!C.shiftKey?2:C.button},i.capture=function(C,M,_){var E=C&&C.ownerDocument||document;function R(A){M&&M(A),_&&_(A),p(E,"mousemove",M),p(E,"mouseup",R),p(E,"dragstart",R)}return d(E,"mousemove",M),d(E,"mouseup",R),d(E,"dragstart",R),R},i.addMouseWheelListener=function(C,M,_){"onmousewheel"in C?d(C,"mousewheel",function(E){var R=8;E.wheelDeltaX!==void 0?(E.wheelX=-E.wheelDeltaX/R,E.wheelY=-E.wheelDeltaY/R):(E.wheelX=0,E.wheelY=-E.wheelDelta/R),M(E)},_):"onwheel"in C?d(C,"wheel",function(E){var R=.35;switch(E.deltaMode){case E.DOM_DELTA_PIXEL:E.wheelX=E.deltaX*R||0,E.wheelY=E.deltaY*R||0;break;case E.DOM_DELTA_LINE:case E.DOM_DELTA_PAGE:E.wheelX=(E.deltaX||0)*5,E.wheelY=(E.deltaY||0)*5;break}M(E)},_):d(C,"DOMMouseScroll",function(E){E.axis&&E.axis==E.HORIZONTAL_AXIS?(E.wheelX=(E.detail||0)*5,E.wheelY=0):(E.wheelX=0,E.wheelY=(E.detail||0)*5),M(E)},_)},i.addMultiMouseDownListener=function(C,M,_,E,R){var A=0,T,S,I,D={2:"dblclick",3:"tripleclick",4:"quadclick"};function z(B){if(i.getButton(B)!==0?A=0:B.detail>1?(A++,A>4&&(A=1)):A=1,c.isIE){var W=Math.abs(B.clientX-T)>5||Math.abs(B.clientY-S)>5;(!I||W)&&(A=1),I&&clearTimeout(I),I=setTimeout(function(){I=null},M[A-1]||600),A==1&&(T=B.clientX,S=B.clientY)}if(B._clicks=A,_[E]("mousedown",B),A>4)A=0;else if(A>1)return _[E](D[A],B)}Array.isArray(C)||(C=[C]),C.forEach(function(B){d(B,"mousedown",z,R)})};var y=function(C){return 0|(C.ctrlKey?1:0)|(C.altKey?2:0)|(C.shiftKey?4:0)|(C.metaKey?8:0)};i.getModifierString=function(C){return s.KEY_MODS[y(C)]};function x(C,M,_){var E=y(M);if(!c.isMac&&l){if(M.getModifierState&&(M.getModifierState("OS")||M.getModifierState("Win"))&&(E|=8),l.altGr)if((3&E)!=3)l.altGr=0;else return;if(_===18||_===17){var R="location"in M?M.location:M.keyLocation;if(_===17&&R===1)l[_]==1&&(u=M.timeStamp);else if(_===18&&E===3&&R===2){var A=M.timeStamp-u;A<50&&(l.altGr=!0)}}}if(_ in s.MODIFIER_KEYS&&(_=-1),!E&&_===13){var R="location"in M?M.location:M.keyLocation;if(R===3&&(C(M,E,-_),M.defaultPrevented))return}if(c.isChromeOS&&E&8){if(C(M,E,_),M.defaultPrevented)return;E&=-9}return!E&&!(_ in s.FUNCTION_KEYS)&&!(_ in s.PRINTABLE_KEYS)?!1:C(M,E,_)}i.addCommandKeyListener=function(C,M,_){if(c.isOldGecko||c.isOpera&&!("KeyboardEvent"in window)){var E=null;d(C,"keydown",function(A){E=A.keyCode},_),d(C,"keypress",function(A){return x(M,A,E)},_)}else{var R=null;d(C,"keydown",function(A){l[A.keyCode]=(l[A.keyCode]||0)+1;var T=x(M,A,A.keyCode);return R=A.defaultPrevented,T},_),d(C,"keypress",function(A){R&&(A.ctrlKey||A.altKey||A.shiftKey||A.metaKey)&&(i.stopEvent(A),R=null)},_),d(C,"keyup",function(A){l[A.keyCode]=null},_),l||(g(),d(window,"focus",g))}};function g(){l=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!c.isOldIE){var w=1;i.nextTick=function(C,M){M=M||window;var _="zero-timeout-message-"+w++,E=function(R){R.data==_&&(i.stopPropagation(R),p(M,"message",E),C())};d(M,"message",E),M.postMessage(_,"*")}}i.$idleBlocked=!1,i.onIdle=function(C,M){return setTimeout(function _(){i.$idleBlocked?setTimeout(_,100):C()},M)},i.$idleBlockId=null,i.blockIdle=function(C){i.$idleBlockId&&clearTimeout(i.$idleBlockId),i.$idleBlocked=!0,i.$idleBlockId=setTimeout(function(){i.$idleBlocked=!1},C||100)},i.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),i.nextFrame?i.nextFrame=i.nextFrame.bind(window):i.nextFrame=function(C){setTimeout(C,17)}}),ace.define("ace/range",["require","exports","module"],function(t,i,r){var s=function(l,u){return l.row-u.row||l.column-u.column},c=function(l,u,f,a){this.start={row:l,column:u},this.end={row:f,column:a}};(function(){this.isEqual=function(l){return this.start.row===l.start.row&&this.end.row===l.end.row&&this.start.column===l.start.column&&this.end.column===l.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(l,u){return this.compare(l,u)==0},this.compareRange=function(l){var u,f=l.end,a=l.start;return u=this.compare(f.row,f.column),u==1?(u=this.compare(a.row,a.column),u==1?2:u==0?1:0):u==-1?-2:(u=this.compare(a.row,a.column),u==-1?-1:u==1?42:0)},this.comparePoint=function(l){return this.compare(l.row,l.column)},this.containsRange=function(l){return this.comparePoint(l.start)==0&&this.comparePoint(l.end)==0},this.intersects=function(l){var u=this.compareRange(l);return u==-1||u==0||u==1},this.isEnd=function(l,u){return this.end.row==l&&this.end.column==u},this.isStart=function(l,u){return this.start.row==l&&this.start.column==u},this.setStart=function(l,u){typeof l=="object"?(this.start.column=l.column,this.start.row=l.row):(this.start.row=l,this.start.column=u)},this.setEnd=function(l,u){typeof l=="object"?(this.end.column=l.column,this.end.row=l.row):(this.end.row=l,this.end.column=u)},this.inside=function(l,u){return this.compare(l,u)==0?!(this.isEnd(l,u)||this.isStart(l,u)):!1},this.insideStart=function(l,u){return this.compare(l,u)==0?!this.isEnd(l,u):!1},this.insideEnd=function(l,u){return this.compare(l,u)==0?!this.isStart(l,u):!1},this.compare=function(l,u){return!this.isMultiLine()&&l===this.start.row?u<this.start.column?-1:u>this.end.column?1:0:l<this.start.row?-1:l>this.end.row?1:this.start.row===l?u>=this.start.column?0:-1:this.end.row===l?u<=this.end.column?0:1:0},this.compareStart=function(l,u){return this.start.row==l&&this.start.column==u?-1:this.compare(l,u)},this.compareEnd=function(l,u){return this.end.row==l&&this.end.column==u?1:this.compare(l,u)},this.compareInside=function(l,u){return this.end.row==l&&this.end.column==u?1:this.start.row==l&&this.start.column==u?-1:this.compare(l,u)},this.clipRows=function(l,u){if(this.end.row>u)var f={row:u+1,column:0};else if(this.end.row<l)var f={row:l,column:0};if(this.start.row>u)var a={row:u+1,column:0};else if(this.start.row<l)var a={row:l,column:0};return c.fromPoints(a||this.start,f||this.end)},this.extend=function(l,u){var f=this.compare(l,u);if(f==0)return this;if(f==-1)var a={row:l,column:u};else var o={row:l,column:u};return c.fromPoints(a||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return c.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new c(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new c(this.start.row,0,this.end.row,0)},this.toScreenRange=function(l){var u=l.documentToScreenPosition(this.start),f=l.documentToScreenPosition(this.end);return new c(u.row,u.column,f.row,f.column)},this.moveBy=function(l,u){this.start.row+=l,this.start.column+=u,this.end.row+=l,this.end.column+=u}}).call(c.prototype),c.fromPoints=function(l,u){return new c(l.row,l.column,u.row,u.column)},c.comparePoints=s,c.comparePoints=function(l,u){return l.row-u.row||l.column-u.column},i.Range=c}),ace.define("ace/lib/lang",["require","exports","module"],function(t,i,r){i.last=function(l){return l[l.length-1]},i.stringReverse=function(l){return l.split("").reverse().join("")},i.stringRepeat=function(l,u){for(var f="";u>0;)u&1&&(f+=l),(u>>=1)&&(l+=l);return f};var s=/^\s\s*/,c=/\s\s*$/;i.stringTrimLeft=function(l){return l.replace(s,"")},i.stringTrimRight=function(l){return l.replace(c,"")},i.copyObject=function(l){var u={};for(var f in l)u[f]=l[f];return u},i.copyArray=function(l){for(var u=[],f=0,a=l.length;f<a;f++)l[f]&&typeof l[f]=="object"?u[f]=this.copyObject(l[f]):u[f]=l[f];return u},i.deepCopy=function l(u){if(typeof u!="object"||!u)return u;var f;if(Array.isArray(u)){f=[];for(var a=0;a<u.length;a++)f[a]=l(u[a]);return f}if(Object.prototype.toString.call(u)!=="[object Object]")return u;f={};for(var a in u)f[a]=l(u[a]);return f},i.arrayToMap=function(l){for(var u={},f=0;f<l.length;f++)u[l[f]]=1;return u},i.createMap=function(l){var u=Object.create(null);for(var f in l)u[f]=l[f];return u},i.arrayRemove=function(l,u){for(var f=0;f<=l.length;f++)u===l[f]&&l.splice(f,1)},i.escapeRegExp=function(l){return l.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},i.escapeHTML=function(l){return(""+l).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},i.getMatchOffsets=function(l,u){var f=[];return l.replace(u,function(a){f.push({offset:arguments[arguments.length-2],length:a.length})}),f},i.deferredCall=function(l){var u=null,f=function(){u=null,l()},a=function(o){return a.cancel(),u=setTimeout(f,o||0),a};return a.schedule=a,a.call=function(){return this.cancel(),l(),a},a.cancel=function(){return clearTimeout(u),u=null,a},a.isPending=function(){return u},a},i.delayedCall=function(l,u){var f=null,a=function(){f=null,l()},o=function(h){f==null&&(f=setTimeout(a,h||u))};return o.delay=function(h){f&&clearTimeout(f),f=setTimeout(a,h||u)},o.schedule=o,o.call=function(){this.cancel(),l()},o.cancel=function(){f&&clearTimeout(f),f=null},o.isPending=function(){return f},o}}),ace.define("ace/clipboard",["require","exports","module"],function(t,i,r){var s;r.exports={lineMode:!1,pasteCancelled:function(){return s&&s>Date.now()-50?!0:s=!1},cancel:function(){s=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(t,i,r){var s=t("../lib/event"),c=t("../lib/useragent"),l=t("../lib/dom"),u=t("../lib/lang"),f=t("../clipboard"),a=c.isChrome<18,o=c.isIE,h=c.isChrome>63,d=400,p=t("../lib/keys"),y=p.KEY_MODS,x=c.isIOS,g=x?/\s/:/\n/,w=c.isMobile,C=function(M,_){var E=l.createElement("textarea");E.className="ace_text-input",E.setAttribute("wrap","off"),E.setAttribute("autocorrect","off"),E.setAttribute("autocapitalize","off"),E.setAttribute("spellcheck",!1),E.style.opacity="0",M.insertBefore(E,M.firstChild);var R=!1,A=!1,T=!1,S=!1,I="";w||(E.style.fontSize="1px");var D=!1,z=!1,B="",W=0,H=0,J=0;try{var G=document.activeElement===E}catch{}s.addListener(E,"blur",function(ae){z||(_.onBlur(ae),G=!1)},_),s.addListener(E,"focus",function(ae){if(!z){if(G=!0,c.isEdge)try{if(!document.hasFocus())return}catch{}_.onFocus(ae),c.isEdge?setTimeout(K):K()}},_),this.$focusScroll=!1,this.focus=function(){if(I||h||this.$focusScroll=="browser")return E.focus({preventScroll:!0});var ae=E.style.top;E.style.position="fixed",E.style.top="0px";try{var Ee=E.getBoundingClientRect().top!=0}catch{return}var me=[];if(Ee)for(var ke=E.parentElement;ke&&ke.nodeType==1;)me.push(ke),ke.setAttribute("ace_nocontext",!0),!ke.parentElement&&ke.getRootNode?ke=ke.getRootNode().host:ke=ke.parentElement;E.focus({preventScroll:!0}),Ee&&me.forEach(function(Qe){Qe.removeAttribute("ace_nocontext")}),setTimeout(function(){E.style.position="",E.style.top=="0px"&&(E.style.top=ae)},0)},this.blur=function(){E.blur()},this.isFocused=function(){return G},_.on("beforeEndOperation",function(){var ae=_.curOp,Ee=ae&&ae.command&&ae.command.name;if(Ee!="insertstring"){var me=Ee&&(ae.docChanged||ae.selectionChanged);T&&me&&(B=E.value="",Ve()),K()}});var K=x?function(ae){if(!(!G||R&&!ae||S)){ae||(ae="");var Ee=`
 ab`+ae+`cde fg
`;Ee!=E.value&&(E.value=B=Ee);var me=4,ke=4+(ae.length||(_.selection.isEmpty()?0:1));(W!=me||H!=ke)&&E.setSelectionRange(me,ke),W=me,H=ke}}:function(){if(!(T||S)&&!(!G&&!j)){T=!0;var ae=0,Ee=0,me="";if(_.session){var ke=_.selection,Qe=ke.getRange(),Ye=ke.cursor.row;if(ae=Qe.start.column,Ee=Qe.end.column,me=_.session.getLine(Ye),Qe.start.row!=Ye){var Je=_.session.getLine(Ye-1);ae=Qe.start.row<Ye-1?0:ae,Ee+=Je.length+1,me=Je+`
`+me}else if(Qe.end.row!=Ye){var ge=_.session.getLine(Ye+1);Ee=Qe.end.row>Ye+1?ge.length:Ee,Ee+=me.length+1,me=me+`
`+ge}else w&&Ye>0&&(me=`
`+me,Ee+=1,ae+=1);me.length>d&&(ae<d&&Ee<d?me=me.slice(0,d):(me=`
`,ae==Ee?ae=Ee=0:(ae=0,Ee=1)))}var Me=me+`

`;if(Me!=B&&(E.value=B=Me,W=H=Me.length),j&&(W=E.selectionStart,H=E.selectionEnd),H!=Ee||W!=ae||E.selectionEnd!=H)try{E.setSelectionRange(ae,Ee),W=ae,H=Ee}catch{}T=!1}};this.resetSelection=K,G&&_.onFocus();var Y=function(ae){return ae.selectionStart===0&&ae.selectionEnd>=B.length&&ae.value===B&&B&&ae.selectionEnd!==H},ne=function(ae){T||(R?R=!1:Y(E)?(_.selectAll(),K()):w&&E.selectionStart!=W&&K())},le=null;this.setInputHandler=function(ae){le=ae},this.getInputHandler=function(){return le};var j=!1,re=function(ae,Ee){if(j&&(j=!1),A)return K(),ae&&_.onPaste(ae),A=!1,"";for(var me=E.selectionStart,ke=E.selectionEnd,Qe=W,Ye=B.length-H,Je=ae,ge=ae.length-me,Me=ae.length-ke,_e=0;Qe>0&&B[_e]==ae[_e];)_e++,Qe--;for(Je=Je.slice(_e),_e=1;Ye>0&&B.length-_e>W-1&&B[B.length-_e]==ae[ae.length-_e];)_e++,Ye--;ge-=_e-1,Me-=_e-1;var et=Je.length-_e+1;if(et<0&&(Qe=-et,et=0),Je=Je.slice(0,et),!Ee&&!Je&&!ge&&!Qe&&!Ye&&!Me)return"";S=!0;var ot=!1;return c.isAndroid&&Je==". "&&(Je="  ",ot=!0),Je&&!Qe&&!Ye&&!ge&&!Me||D?_.onTextInput(Je):_.onTextInput(Je,{extendLeft:Qe,extendRight:Ye,restoreStart:ge,restoreEnd:Me}),S=!1,B=ae,W=me,H=ke,J=Me,ot?`
`:Je},fe=function(ae){if(T)return oe();if(ae&&ae.inputType){if(ae.inputType=="historyUndo")return _.execCommand("undo");if(ae.inputType=="historyRedo")return _.execCommand("redo")}var Ee=E.value,me=re(Ee,!0);(Ee.length>d+100||g.test(me)||w&&W<1&&W==H)&&K()},ve=function(ae,Ee,me){var ke=ae.clipboardData||window.clipboardData;if(!(!ke||a)){var Qe=o||me?"Text":"text/plain";try{return Ee?ke.setData(Qe,Ee)!==!1:ke.getData(Qe)}catch(Ye){if(!me)return ve(Ye,Ee,!0)}}},ye=function(ae,Ee){var me=_.getCopyText();if(!me)return s.preventDefault(ae);ve(ae,me)?(x&&(K(me),R=me,setTimeout(function(){R=!1},10)),Ee?_.onCut():_.onCopy(),s.preventDefault(ae)):(R=!0,E.value=me,E.select(),setTimeout(function(){R=!1,K(),Ee?_.onCut():_.onCopy()}))},ze=function(ae){ye(ae,!0)},Xe=function(ae){ye(ae,!1)},Ae=function(ae){var Ee=ve(ae);f.pasteCancelled()||(typeof Ee=="string"?(Ee&&_.onPaste(Ee,ae),c.isIE&&setTimeout(K),s.preventDefault(ae)):(E.value="",A=!0))};s.addCommandKeyListener(E,_.onCommandKey.bind(_),_),s.addListener(E,"select",ne,_),s.addListener(E,"input",fe,_),s.addListener(E,"cut",ze,_),s.addListener(E,"copy",Xe,_),s.addListener(E,"paste",Ae,_),(!("oncut"in E)||!("oncopy"in E)||!("onpaste"in E))&&s.addListener(M,"keydown",function(ae){if(!(c.isMac&&!ae.metaKey||!ae.ctrlKey))switch(ae.keyCode){case 67:Xe(ae);break;case 86:Ae(ae);break;case 88:ze(ae);break}},_);var je=function(ae){if(!(T||!_.onCompositionStart||_.$readOnly)&&(T={},!D)){ae.data&&(T.useTextareaForIME=!1),setTimeout(oe,0),_._signal("compositionStart"),_.on("mousedown",Te);var Ee=_.getSelectionRange();Ee.end.row=Ee.start.row,Ee.end.column=Ee.start.column,T.markerRange=Ee,T.selectionStart=W,_.onCompositionStart(T),T.useTextareaForIME?(B=E.value="",W=0,H=0):(E.msGetInputContext&&(T.context=E.msGetInputContext()),E.getInputContext&&(T.context=E.getInputContext()))}},oe=function(){if(!(!T||!_.onCompositionUpdate||_.$readOnly)){if(D)return Te();if(T.useTextareaForIME)_.onCompositionUpdate(E.value);else{var ae=E.value;re(ae),T.markerRange&&(T.context&&(T.markerRange.start.column=T.selectionStart=T.context.compositionStartOffset),T.markerRange.end.column=T.markerRange.start.column+H-T.selectionStart+J)}}},Ve=function(ae){!_.onCompositionEnd||_.$readOnly||(T=!1,_.onCompositionEnd(),_.off("mousedown",Te),ae&&fe())};function Te(){z=!0,E.blur(),E.focus(),z=!1}var $e=u.delayedCall(oe,50).schedule.bind(null,null);function Ne(ae){ae.keyCode==27&&E.value.length<E.selectionStart&&(T||(B=E.value),W=H=-1,K()),$e()}s.addListener(E,"compositionstart",je,_),s.addListener(E,"compositionupdate",oe,_),s.addListener(E,"keyup",Ne,_),s.addListener(E,"keydown",$e,_),s.addListener(E,"compositionend",Ve,_),this.getElement=function(){return E},this.setCommandMode=function(ae){D=ae,E.readOnly=!1},this.setReadOnly=function(ae){D||(E.readOnly=ae)},this.setCopyWithEmptySelection=function(ae){},this.onContextMenu=function(ae){j=!0,K(),_._emit("nativecontextmenu",{target:_,domEvent:ae}),this.moveToMouse(ae,!0)},this.moveToMouse=function(ae,Ee){I||(I=E.style.cssText),E.style.cssText=(Ee?"z-index:100000;":"")+(c.isIE?"opacity:0.1;":"")+"text-indent: -"+(W+H)*_.renderer.characterWidth*.5+"px;";var me=_.container.getBoundingClientRect(),ke=l.computedStyle(_.container),Qe=me.top+(parseInt(ke.borderTopWidth)||0),Ye=me.left+(parseInt(me.borderLeftWidth)||0),Je=me.bottom-Qe-E.clientHeight-2,ge=function(Me){l.translate(E,Me.clientX-Ye-2,Math.min(Me.clientY-Qe-2,Je))};ge(ae),ae.type=="mousedown"&&(_.renderer.$isMousePressed=!0,clearTimeout(ht),c.isWin&&s.capture(_.container,ge,Ze))},this.onContextMenuClose=Ze;var ht;function Ze(){clearTimeout(ht),ht=setTimeout(function(){I&&(E.style.cssText=I,I=""),_.renderer.$isMousePressed=!1,_.renderer.$keepTextAreaAtCursor&&_.renderer.$moveTextAreaToCursor()},0)}var q=function(ae){_.textInput.onContextMenu(ae),Ze()};s.addListener(E,"mouseup",q,_),s.addListener(E,"mousedown",function(ae){ae.preventDefault(),Ze()},_),s.addListener(_.renderer.scroller,"contextmenu",q,_),s.addListener(E,"contextmenu",q,_),x&&Z(M,_,E);function Z(ae,Ee,me){var ke=null,Qe=!1;me.addEventListener("keydown",function(Je){ke&&clearTimeout(ke),Qe=!0},!0),me.addEventListener("keyup",function(Je){ke=setTimeout(function(){Qe=!1},100)},!0);var Ye=function(Je){if(document.activeElement===me&&!(Qe||T||Ee.$mouseHandler.isMousePressed)&&!R){var ge=me.selectionStart,Me=me.selectionEnd,_e=null,et=0;if(ge==0?_e=p.up:ge==1?_e=p.home:Me>H&&B[Me]==`
`?_e=p.end:ge<W&&B[ge-1]==" "?(_e=p.left,et=y.option):ge<W||ge==W&&H!=W&&ge==Me?_e=p.left:Me>H&&B.slice(0,Me).split(`
`).length>2?_e=p.down:Me>H&&B[Me-1]==" "?(_e=p.right,et=y.option):(Me>H||Me==H&&H!=W&&ge==Me)&&(_e=p.right),ge!==Me&&(et|=y.shift),_e){var ot=Ee.onCommandKey({},et,_e);if(!ot&&Ee.commands){_e=p.keyCodeToString(_e);var Ue=Ee.commands.findKeyCommand(et,_e);Ue&&Ee.execCommand(Ue)}W=ge,H=Me,K("")}}};document.addEventListener("selectionchange",Ye),Ee.on("destroy",function(){document.removeEventListener("selectionchange",Ye)})}};i.TextInput=C,i.$setUserAgentForTests=function(M,_){w=M,x=_}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(t,i,r){var s=t("../lib/useragent"),c=0,l=550;function u(o){o.$clickSelection=null;var h=o.editor;h.setDefaultHandler("mousedown",this.onMouseDown.bind(o)),h.setDefaultHandler("dblclick",this.onDoubleClick.bind(o)),h.setDefaultHandler("tripleclick",this.onTripleClick.bind(o)),h.setDefaultHandler("quadclick",this.onQuadClick.bind(o)),h.setDefaultHandler("mousewheel",this.onMouseWheel.bind(o));var d=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];d.forEach(function(p){o[p]=this[p]},this),o.selectByLines=this.extendSelectionBy.bind(o,"getLineRange"),o.selectByWords=this.extendSelectionBy.bind(o,"getWordRange")}(function(){this.onMouseDown=function(o){var h=o.inSelection(),d=o.getDocumentPosition();this.mousedownEvent=o;var p=this.editor,y=o.getButton();if(y!==0){var x=p.getSelectionRange(),g=x.isEmpty();(g||y==1)&&p.selection.moveToPosition(d),y==2&&(p.textInput.onContextMenu(o.domEvent),s.isMozilla||o.preventDefault());return}if(this.mousedownEvent.time=Date.now(),h&&!p.isFocused()&&(p.focus(),this.$focusTimeout&&!this.$clickSelection&&!p.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(o);return}return this.captureMouse(o),this.startSelect(d,o.domEvent._clicks>1),o.preventDefault()},this.startSelect=function(o,h){o=o||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var d=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?d.selection.selectToPosition(o):h||d.selection.moveToPosition(o),h||this.select(),d.renderer.scroller.setCapture&&d.renderer.scroller.setCapture(),d.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var o,h=this.editor,d=h.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var p=this.$clickSelection.comparePoint(d);if(p==-1)o=this.$clickSelection.end;else if(p==1)o=this.$clickSelection.start;else{var y=a(this.$clickSelection,d);d=y.cursor,o=y.anchor}h.selection.setSelectionAnchor(o.row,o.column)}h.selection.selectToPosition(d),h.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(o){var h,d=this.editor,p=d.renderer.screenToTextCoordinates(this.x,this.y),y=d.selection[o](p.row,p.column);if(this.$clickSelection){var x=this.$clickSelection.comparePoint(y.start),g=this.$clickSelection.comparePoint(y.end);if(x==-1&&g<=0)h=this.$clickSelection.end,(y.end.row!=p.row||y.end.column!=p.column)&&(p=y.start);else if(g==1&&x>=0)h=this.$clickSelection.start,(y.start.row!=p.row||y.start.column!=p.column)&&(p=y.end);else if(x==-1&&g==1)p=y.end,h=y.start;else{var w=a(this.$clickSelection,p);p=w.cursor,h=w.anchor}d.selection.setSelectionAnchor(h.row,h.column)}d.selection.selectToPosition(p),d.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var o=f(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),h=Date.now();(o>c||h-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(o){var h=o.getDocumentPosition(),d=this.editor,p=d.session,y=p.getBracketRange(h);y?(y.isEmpty()&&(y.start.column--,y.end.column++),this.setState("select")):(y=d.selection.getWordRange(h.row,h.column),this.setState("selectByWords")),this.$clickSelection=y,this.select()},this.onTripleClick=function(o){var h=o.getDocumentPosition(),d=this.editor;this.setState("selectByLines");var p=d.getSelectionRange();p.isMultiLine()&&p.contains(h.row,h.column)?(this.$clickSelection=d.selection.getLineRange(p.start.row),this.$clickSelection.end=d.selection.getLineRange(p.end.row).end):this.$clickSelection=d.selection.getLineRange(h.row),this.select()},this.onQuadClick=function(o){var h=this.editor;h.selectAll(),this.$clickSelection=h.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(o){if(!o.getAccelKey()){o.getShiftKey()&&o.wheelY&&!o.wheelX&&(o.wheelX=o.wheelY,o.wheelY=0);var h=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var d=this.$lastScroll,p=o.domEvent.timeStamp,y=p-d.t,x=y?o.wheelX/y:d.vx,g=y?o.wheelY/y:d.vy;y<l&&(x=(x+d.vx)/2,g=(g+d.vy)/2);var w=Math.abs(x/g),C=!1;if(w>=1&&h.renderer.isScrollableBy(o.wheelX*o.speed,0)&&(C=!0),w<=1&&h.renderer.isScrollableBy(0,o.wheelY*o.speed)&&(C=!0),C)d.allowed=p;else if(p-d.allowed<l){var M=Math.abs(x)<=1.5*Math.abs(d.vx)&&Math.abs(g)<=1.5*Math.abs(d.vy);M?(C=!0,d.allowed=p):d.allowed=0}if(d.t=p,d.vx=x,d.vy=g,C)return h.renderer.scrollBy(o.wheelX*o.speed,o.wheelY*o.speed),o.stop()}}}).call(u.prototype),i.DefaultHandlers=u;function f(o,h,d,p){return Math.sqrt(Math.pow(d-o,2)+Math.pow(p-h,2))}function a(o,h){if(o.start.row==o.end.row)var d=2*h.column-o.start.column-o.end.column;else if(o.start.row==o.end.row-1&&!o.start.column&&!o.end.column)var d=h.column-4;else var d=2*h.row-o.start.row-o.end.row;return d<0?{cursor:o.start,anchor:o.end}:{cursor:o.end,anchor:o.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,i,r){t("./lib/oop");var s=t("./lib/dom");function c(l){this.isOpen=!1,this.$element=null,this.$parentNode=l}(function(){this.$init=function(){return this.$element=s.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(l){this.getElement().textContent=l},this.setHtml=function(l){this.getElement().innerHTML=l},this.setPosition=function(l,u){this.getElement().style.left=l+"px",this.getElement().style.top=u+"px"},this.setClassName=function(l){s.addCssClass(this.getElement(),l)},this.show=function(l,u,f){l!=null&&this.setText(l),u!=null&&f!=null&&this.setPosition(u,f),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(c.prototype),i.Tooltip=c}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,i,r){var s=t("../lib/dom"),c=t("../lib/oop"),l=t("../lib/event"),u=t("../tooltip").Tooltip;function f(o){var h=o.editor,d=h.renderer.$gutterLayer,p=new a(h.container);o.editor.setDefaultHandler("guttermousedown",function(_){if(!(!h.isFocused()||_.getButton()!=0)){var E=d.getRegion(_);if(E!="foldWidgets"){var R=_.getDocumentPosition().row,A=h.session.selection;if(_.getShiftKey())A.selectTo(R,0);else{if(_.domEvent.detail==2)return h.selectAll(),_.preventDefault();o.$clickSelection=h.selection.getLineRange(R)}return o.setState("selectByLines"),o.captureMouse(_),_.preventDefault()}}});var y,x,g;function w(){var _=x.getDocumentPosition().row,E=d.$annotations[_];if(!E)return C();var R=h.session.getLength();if(_==R){var A=h.renderer.pixelToScreenCoordinates(0,x.y).row,T=x.$pos;if(A>h.session.documentToScreenRow(T.row,T.column))return C()}if(g!=E)if(g=E.text.join("<br/>"),p.setHtml(g),p.show(),h._signal("showGutterTooltip",p),h.on("mousewheel",C),o.$tooltipFollowsMouse)M(x);else{var S=x.domEvent.target,I=S.getBoundingClientRect(),D=p.getElement().style;D.left=I.right+"px",D.top=I.bottom+"px"}}function C(){y&&(y=clearTimeout(y)),g&&(p.hide(),g=null,h._signal("hideGutterTooltip",p),h.off("mousewheel",C))}function M(_){p.setPosition(_.x,_.y)}o.editor.setDefaultHandler("guttermousemove",function(_){var E=_.domEvent.target||_.domEvent.srcElement;if(s.hasCssClass(E,"ace_fold-widget"))return C();g&&o.$tooltipFollowsMouse&&M(_),x=_,!y&&(y=setTimeout(function(){y=null,x&&!o.isMousePressed?w():C()},50))}),l.addListener(h.renderer.$gutter,"mouseout",function(_){x=null,!(!g||y)&&(y=setTimeout(function(){y=null,C()},50))},h),h.on("changeSession",C)}function a(o){u.call(this,o)}c.inherits(a,u),(function(){this.setPosition=function(o,h){var d=window.innerWidth||document.documentElement.clientWidth,p=window.innerHeight||document.documentElement.clientHeight,y=this.getWidth(),x=this.getHeight();o+=15,h+=15,o+y>d&&(o-=o+y-d),h+x>p&&(h-=20+x),u.prototype.setPosition.call(this,o,h)}}).call(a.prototype),i.GutterHandler=f}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,i,r){var s=t("../lib/event"),c=t("../lib/useragent"),l=i.MouseEvent=function(u,f){this.domEvent=u,this.editor=f,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){s.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){s.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,f=u.getSelectionRange();if(f.isEmpty())this.$inSelection=!1;else{var a=this.getDocumentPosition();this.$inSelection=f.contains(a.row,a.column)}return this.$inSelection},this.getButton=function(){return s.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=c.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(l.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,i,r){var s=t("../lib/dom"),c=t("../lib/event"),l=t("../lib/useragent"),u=200,f=200,a=5;function o(d){var p=d.editor,y=s.createElement("img");y.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",l.isOpera&&(y.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var x=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];x.forEach(function(j){d[j]=this[j]},this),p.on("mousedown",this.onMouseDown.bind(d));var g=p.container,w,C,M,_,E,R,A=0,T,S,I,D,z;this.onDragStart=function(j){if(this.cancelDrag||!g.draggable){var re=this;return setTimeout(function(){re.startSelect(),re.captureMouse(j)},0),j.preventDefault()}E=p.getSelectionRange();var fe=j.dataTransfer;fe.effectAllowed=p.getReadOnly()?"copy":"copyMove",l.isOpera&&(p.container.appendChild(y),y.scrollTop=0),fe.setDragImage&&fe.setDragImage(y,0,0),l.isOpera&&p.container.removeChild(y),fe.clearData(),fe.setData("Text",p.session.getTextRange()),S=!0,this.setState("drag")},this.onDragEnd=function(j){if(g.draggable=!1,S=!1,this.setState(null),!p.getReadOnly()){var re=j.dataTransfer.dropEffect;!T&&re=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(j){if(!(p.getReadOnly()||!ne(j.dataTransfer)))return C=j.clientX,M=j.clientY,w||J(),A++,j.dataTransfer.dropEffect=T=le(j),c.preventDefault(j)},this.onDragOver=function(j){if(!(p.getReadOnly()||!ne(j.dataTransfer)))return C=j.clientX,M=j.clientY,w||(J(),A++),K!==null&&(K=null),j.dataTransfer.dropEffect=T=le(j),c.preventDefault(j)},this.onDragLeave=function(j){if(A--,A<=0&&w)return G(),T=null,c.preventDefault(j)},this.onDrop=function(j){if(R){var re=j.dataTransfer;if(S)switch(T){case"move":E.contains(R.row,R.column)?E={start:R,end:R}:E=p.moveText(E,R);break;case"copy":E=p.moveText(E,R,!0);break}else{var fe=re.getData("Text");E={start:R,end:p.session.insert(R,fe)},p.focus(),T=null}return G(),c.preventDefault(j)}},c.addListener(g,"dragstart",this.onDragStart.bind(d),p),c.addListener(g,"dragend",this.onDragEnd.bind(d),p),c.addListener(g,"dragenter",this.onDragEnter.bind(d),p),c.addListener(g,"dragover",this.onDragOver.bind(d),p),c.addListener(g,"dragleave",this.onDragLeave.bind(d),p),c.addListener(g,"drop",this.onDrop.bind(d),p);function B(j,re){var fe=Date.now(),ve=!re||j.row!=re.row,ye=!re||j.column!=re.column;if(!D||ve||ye)p.moveCursorToPosition(j),D=fe,z={x:C,y:M};else{var ze=h(z.x,z.y,C,M);ze>a?D=null:fe-D>=f&&(p.renderer.scrollCursorIntoView(),D=null)}}function W(j,re){var fe=Date.now(),ve=p.renderer.layerConfig.lineHeight,ye=p.renderer.layerConfig.characterWidth,ze=p.renderer.scroller.getBoundingClientRect(),Xe={x:{left:C-ze.left,right:ze.right-C},y:{top:M-ze.top,bottom:ze.bottom-M}},Ae=Math.min(Xe.x.left,Xe.x.right),je=Math.min(Xe.y.top,Xe.y.bottom),oe={row:j.row,column:j.column};Ae/ye<=2&&(oe.column+=Xe.x.left<Xe.x.right?-3:2),je/ve<=1&&(oe.row+=Xe.y.top<Xe.y.bottom?-1:1);var Ve=j.row!=oe.row,Te=j.column!=oe.column,$e=!re||j.row!=re.row;Ve||Te&&!$e?I?fe-I>=u&&p.renderer.scrollCursorIntoView(oe):I=fe:I=null}function H(){var j=R;R=p.renderer.screenToTextCoordinates(C,M),B(R,j),W(R,j)}function J(){E=p.selection.toOrientedRange(),w=p.session.addMarker(E,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(_),H(),_=setInterval(H,20),A=0,c.addListener(document,"mousemove",Y)}function G(){clearInterval(_),p.session.removeMarker(w),w=null,p.selection.fromOrientedRange(E),p.isFocused()&&!S&&p.$resetCursorStyle(),E=null,R=null,A=0,I=null,D=null,c.removeListener(document,"mousemove",Y)}var K=null;function Y(){K==null&&(K=setTimeout(function(){K!=null&&w&&G()},20))}function ne(j){var re=j.types;return!re||Array.prototype.some.call(re,function(fe){return fe=="text/plain"||fe=="Text"})}function le(j){var re=["copy","copymove","all","uninitialized"],fe=["move","copymove","linkmove","all","uninitialized"],ve=l.isMac?j.altKey:j.ctrlKey,ye="uninitialized";try{ye=j.dataTransfer.effectAllowed.toLowerCase()}catch{}var ze="none";return ve&&re.indexOf(ye)>=0?ze="copy":fe.indexOf(ye)>=0?ze="move":re.indexOf(ye)>=0&&(ze="copy"),ze}}(function(){this.dragWait=function(){var d=Date.now()-this.mousedownEvent.time;d>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var d=this.editor.container;d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(d){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var d=this.editor,p=d.container;p.draggable=!0,d.renderer.$cursorLayer.setBlinking(!1),d.setStyle("ace_dragging");var y=l.isWin?"default":"move";d.renderer.setCursorStyle(y),this.setState("dragReady")},this.onMouseDrag=function(d){var p=this.editor.container;if(l.isIE&&this.state=="dragReady"){var y=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);y>3&&p.dragDrop()}if(this.state==="dragWait"){var y=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);y>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(d){if(this.$dragEnabled){this.mousedownEvent=d;var p=this.editor,y=d.inSelection(),x=d.getButton(),g=d.domEvent.detail||1;if(g===1&&x===0&&y){if(d.editor.inMultiSelectMode&&(d.getAccelKey()||d.getShiftKey()))return;this.mousedownEvent.time=Date.now();var w=d.domEvent.target||d.domEvent.srcElement;if("unselectable"in w&&(w.unselectable="on"),p.getDragDelay()){if(l.isWebKit){this.cancelDrag=!0;var C=p.container;C.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(d,this.onMouseDrag.bind(this)),d.defaultPrevented=!0}}}}).call(o.prototype);function h(d,p,y,x){return Math.sqrt(Math.pow(y-d,2)+Math.pow(x-p,2))}i.DragdropHandler=o}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(t,i,r){var s=t("./mouse_event").MouseEvent,c=t("../lib/event"),l=t("../lib/dom");i.addTouchListeners=function(u,f){var a="scroll",o,h,d,p,y,x,g=0,w,C=0,M=0,_=0,E,R;function A(){var B=window.navigator&&window.navigator.clipboard,W=!1,H=function(){var G=f.getCopyText(),K=f.session.getUndoManager().hasUndo();R.replaceChild(l.buildDom(W?["span",!G&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],G&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],G&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],B&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],K&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),R.firstChild)},J=function(G){var K=G.target.getAttribute("action");if(K=="more"||!W)return W=!W,H();K=="paste"?B.readText().then(function(Y){f.execCommand(K,Y)}):K&&((K=="cut"||K=="copy")&&(B?B.writeText(f.getCopyText()):document.execCommand("copy")),f.execCommand(K)),R.firstChild.style.display="none",W=!1,K!="openCommandPallete"&&f.focus()};R=l.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(G){a="menu",G.stopPropagation(),G.preventDefault(),f.textInput.focus()},ontouchend:function(G){G.stopPropagation(),G.preventDefault(),J(G)},onclick:J},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],f.container)}function T(){R||A();var B=f.selection.cursor,W=f.renderer.textToScreenCoordinates(B.row,B.column),H=f.renderer.textToScreenCoordinates(0,0).pageX,J=f.renderer.scrollLeft,G=f.container.getBoundingClientRect();R.style.top=W.pageY-G.top-3+"px",W.pageX-G.left<G.width-70?(R.style.left="",R.style.right="10px"):(R.style.right="",R.style.left=H+J-G.left+"px"),R.style.display="",R.firstChild.style.display="none",f.on("input",S)}function S(B){R&&(R.style.display="none"),f.off("input",S)}function I(){y=null,clearTimeout(y);var B=f.selection.getRange(),W=B.contains(w.row,w.column);(B.isEmpty()||!W)&&(f.selection.moveToPosition(w),f.selection.selectWord()),a="wait",T()}function D(){y=null,clearTimeout(y),f.selection.moveToPosition(w);var B=C>=2?f.selection.getLineRange(w.row):f.session.getBracketRange(w);B&&!B.isEmpty()?f.selection.setRange(B):f.selection.selectWord(),a="wait"}c.addListener(u,"contextmenu",function(B){if(E){var W=f.textInput.getElement();W.focus()}},f),c.addListener(u,"touchstart",function(B){var W=B.touches;if(y||W.length>1){clearTimeout(y),y=null,d=-1,a="zoom";return}E=f.$mouseHandler.isMousePressed=!0;var H=f.renderer.layerConfig.lineHeight,J=f.renderer.layerConfig.lineHeight,G=B.timeStamp;p=G;var K=W[0],Y=K.clientX,ne=K.clientY;Math.abs(o-Y)+Math.abs(h-ne)>H&&(d=-1),o=B.clientX=Y,h=B.clientY=ne,M=_=0;var le=new s(B,f);if(w=le.getDocumentPosition(),G-d<500&&W.length==1&&!g)C++,B.preventDefault(),B.button=0,D();else{C=0;var j=f.selection.cursor,re=f.selection.isEmpty()?j:f.selection.anchor,fe=f.renderer.$cursorLayer.getPixelPosition(j,!0),ve=f.renderer.$cursorLayer.getPixelPosition(re,!0),ye=f.renderer.scroller.getBoundingClientRect(),ze=f.renderer.layerConfig.offset,Xe=f.renderer.scrollLeft,Ae=function(Ve,Te){return Ve=Ve/J,Te=Te/H-.75,Ve*Ve+Te*Te};if(B.clientX<ye.left){a="zoom";return}var je=Ae(B.clientX-ye.left-fe.left+Xe,B.clientY-ye.top-fe.top+ze),oe=Ae(B.clientX-ye.left-ve.left+Xe,B.clientY-ye.top-ve.top+ze);je<3.5&&oe<3.5&&(a=je>oe?"cursor":"anchor"),oe<3.5?a="anchor":je<3.5?a="cursor":a="scroll",y=setTimeout(I,450)}d=G},f),c.addListener(u,"touchend",function(B){E=f.$mouseHandler.isMousePressed=!1,x&&clearInterval(x),a=="zoom"?(a="",g=0):y?(f.selection.moveToPosition(w),g=0,T()):a=="scroll"?(z(),S()):T(),clearTimeout(y),y=null},f),c.addListener(u,"touchmove",function(B){y&&(clearTimeout(y),y=null);var W=B.touches;if(!(W.length>1||a=="zoom")){var H=W[0],J=o-H.clientX,G=h-H.clientY;if(a=="wait")if(J*J+G*G>4)a="cursor";else return B.preventDefault();o=H.clientX,h=H.clientY,B.clientX=H.clientX,B.clientY=H.clientY;var K=B.timeStamp,Y=K-p;if(p=K,a=="scroll"){var ne=new s(B,f);ne.speed=1,ne.wheelX=J,ne.wheelY=G,10*Math.abs(J)<Math.abs(G)&&(J=0),10*Math.abs(G)<Math.abs(J)&&(G=0),Y!=0&&(M=J/Y,_=G/Y),f._emit("mousewheel",ne),ne.propagationStopped||(M=_=0)}else{var le=new s(B,f),j=le.getDocumentPosition();a=="cursor"?f.selection.moveCursorToPosition(j):a=="anchor"&&f.selection.setSelectionAnchor(j.row,j.column),f.renderer.scrollCursorIntoView(j),B.preventDefault()}}},f);function z(){g+=60,x=setInterval(function(){g--<=0&&(clearInterval(x),x=null),Math.abs(M)<.01&&(M=0),Math.abs(_)<.01&&(_=0),g<20&&(M=.9*M),g<20&&(_=.9*_);var B=f.session.getScrollTop();f.renderer.scrollBy(10*M,10*_),B==f.session.getScrollTop()&&(g=0)},10)}}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,i,r){var s=t("./dom");i.get=function(c,l){var u=new XMLHttpRequest;u.open("GET",c,!0),u.onreadystatechange=function(){u.readyState===4&&l(u.responseText)},u.send(null)},i.loadScript=function(c,l){var u=s.getDocumentHead(),f=document.createElement("script");f.src=c,u.appendChild(f),f.onload=f.onreadystatechange=function(a,o){(o||!f.readyState||f.readyState=="loaded"||f.readyState=="complete")&&(f=f.onload=f.onreadystatechange=null,o||l())}},i.qualifyURL=function(c){var l=document.createElement("a");return l.href=c,l.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,i,r){var s={},c=function(){this.propagationStopped=!0},l=function(){this.defaultPrevented=!0};s._emit=s._dispatchEvent=function(u,f){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var a=this._eventRegistry[u]||[],o=this._defaultHandlers[u];if(!(!a.length&&!o)){(typeof f!="object"||!f)&&(f={}),f.type||(f.type=u),f.stopPropagation||(f.stopPropagation=c),f.preventDefault||(f.preventDefault=l),a=a.slice();for(var h=0;h<a.length&&(a[h](f,this),!f.propagationStopped);h++);if(o&&!f.defaultPrevented)return o(f,this)}},s._signal=function(u,f){var a=(this._eventRegistry||{})[u];if(a){a=a.slice();for(var o=0;o<a.length;o++)a[o](f,this)}},s.once=function(u,f){var a=this;if(this.on(u,function o(){a.off(u,o),f.apply(null,arguments)}),!f)return new Promise(function(o){f=o})},s.setDefaultHandler=function(u,f){var a=this._defaultHandlers;if(a||(a=this._defaultHandlers={_disabled_:{}}),a[u]){var o=a[u],h=a._disabled_[u];h||(a._disabled_[u]=h=[]),h.push(o);var d=h.indexOf(f);d!=-1&&h.splice(d,1)}a[u]=f},s.removeDefaultHandler=function(u,f){var a=this._defaultHandlers;if(a){var o=a._disabled_[u];if(a[u]==f)o&&this.setDefaultHandler(u,o.pop());else if(o){var h=o.indexOf(f);h!=-1&&o.splice(h,1)}}},s.on=s.addEventListener=function(u,f,a){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[u];return o||(o=this._eventRegistry[u]=[]),o.indexOf(f)==-1&&o[a?"unshift":"push"](f),f},s.off=s.removeListener=s.removeEventListener=function(u,f){this._eventRegistry=this._eventRegistry||{};var a=this._eventRegistry[u];if(a){var o=a.indexOf(f);o!==-1&&a.splice(o,1)}},s.removeAllListeners=function(u){u||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[u]=void 0),this._defaultHandlers&&(this._defaultHandlers[u]=void 0)},i.EventEmitter=s}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,i,r){"no use strict";var s=t("./oop"),c=t("./event_emitter").EventEmitter,l={setOptions:function(o){Object.keys(o).forEach(function(h){this.setOption(h,o[h])},this)},getOptions:function(o){var h={};if(o)Array.isArray(o)||(h=o,o=Object.keys(h));else{var d=this.$options;o=Object.keys(d).filter(function(p){return!d[p].hidden})}return o.forEach(function(p){h[p]=this.getOption(p)},this),h},setOption:function(o,h){if(this["$"+o]!==h){var d=this.$options[o];if(!d)return u('misspelled option "'+o+'"');if(d.forwardTo)return this[d.forwardTo]&&this[d.forwardTo].setOption(o,h);d.handlesSet||(this["$"+o]=h),d&&d.set&&d.set.call(this,h)}},getOption:function(o){var h=this.$options[o];return h?h.forwardTo?this[h.forwardTo]&&this[h.forwardTo].getOption(o):h&&h.get?h.get.call(this):this["$"+o]:u('misspelled option "'+o+'"')}};function u(o){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function f(o,h){var d=new Error(o);d.data=h,typeof console=="object"&&console.error&&console.error(d),setTimeout(function(){throw d})}var a=function(){this.$defaultOptions={}};(function(){s.implement(this,c),this.defineOptions=function(o,h,d){return o.$options||(this.$defaultOptions[h]=o.$options={}),Object.keys(d).forEach(function(p){var y=d[p];typeof y=="string"&&(y={forwardTo:y}),y.name||(y.name=p),o.$options[y.name]=y,"initialValue"in y&&(o["$"+y.name]=y.initialValue)}),s.implement(o,l),this},this.resetOptions=function(o){Object.keys(o.$options).forEach(function(h){var d=o.$options[h];"value"in d&&o.setOption(h,d.value)})},this.setDefaultValue=function(o,h,d){if(!o){for(o in this.$defaultOptions)if(this.$defaultOptions[o][h])break;if(!this.$defaultOptions[o][h])return!1}var p=this.$defaultOptions[o]||(this.$defaultOptions[o]={});p[h]&&(p.forwardTo?this.setDefaultValue(p.forwardTo,h,d):p[h].value=d)},this.setDefaultValues=function(o,h){Object.keys(h).forEach(function(d){this.setDefaultValue(o,d,h[d])},this)},this.warn=u,this.reportError=f}).call(a.prototype),i.AppConfig=a}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(t,i,r){"no use strict";var s=t("./lib/lang");t("./lib/oop");var c=t("./lib/net"),l=t("./lib/app_config").AppConfig;r.exports=i=new l;var u=function(){return this||typeof window<"u"&&window}(),f={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};i.get=function(d){if(!f.hasOwnProperty(d))throw new Error("Unknown config key: "+d);return f[d]},i.set=function(d,p){if(f.hasOwnProperty(d))f[d]=p;else if(this.setDefaultValue("",d,p)==!1)throw new Error("Unknown config key: "+d)},i.all=function(){return s.copyObject(f)},i.$modes={},i.moduleUrl=function(d,p){if(f.$moduleUrls[d])return f.$moduleUrls[d];var y=d.split("/");p=p||y[y.length-2]||"";var x=p=="snippets"?"/":"-",g=y[y.length-1];if(p=="worker"&&x=="-"){var w=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");g=g.replace(w,"")}(!g||g==p)&&y.length>1&&(g=y[y.length-2]);var C=f[p+"Path"];return C==null?C=f.basePath:x=="/"&&(p=x=""),C&&C.slice(-1)!="/"&&(C+="/"),C+p+x+g+this.get("suffix")},i.setModuleUrl=function(d,p){return f.$moduleUrls[d]=p},i.$loading={},i.loadModule=function(d,p){var y,x;Array.isArray(d)&&(x=d[0],d=d[1]);try{y=t(d)}catch{}if(y&&!i.$loading[d])return p&&p(y);if(i.$loading[d]||(i.$loading[d]=[]),i.$loading[d].push(p),!(i.$loading[d].length>1)){var g=function(){t([d],function(w){i._emit("load.module",{name:d,module:w});var C=i.$loading[d];i.$loading[d]=null,C.forEach(function(M){M&&M(w)})})};if(!i.get("packaged"))return g();c.loadScript(i.moduleUrl(d,x),g),a()}};var a=function(){!f.basePath&&!f.workerPath&&!f.modePath&&!f.themePath&&!Object.keys(f.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),a=function(){})};o(!0);function o(d){if(!(!u||!u.document)){f.packaged=d||t.packaged||r.packaged||u.define&&(void 0).packaged;for(var p={},y="",x=document.currentScript||document._currentScript,g=x&&x.ownerDocument||document,w=g.getElementsByTagName("script"),C=0;C<w.length;C++){var M=w[C],_=M.src||M.getAttribute("src");if(_){for(var E=M.attributes,R=0,A=E.length;R<A;R++){var T=E[R];T.name.indexOf("data-ace-")===0&&(p[h(T.name.replace(/^data-ace-/,""))]=T.value)}var S=_.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);S&&(y=S[1])}}y&&(p.base=p.base||y,p.packaged=!0),p.basePath=p.base,p.workerPath=p.workerPath||p.base,p.modePath=p.modePath||p.base,p.themePath=p.themePath||p.base,delete p.base;for(var I in p)typeof p[I]<"u"&&i.set(I,p[I])}}i.init=o;function h(d){return d.replace(/-(.)/g,function(p,y){return y.toUpperCase()})}i.version="1.4.12"}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(t,i,r){var s=t("../lib/event"),c=t("../lib/useragent"),l=t("./default_handlers").DefaultHandlers,u=t("./default_gutter_handler").GutterHandler,f=t("./mouse_event").MouseEvent,a=t("./dragdrop_handler").DragdropHandler,o=t("./touch_handler").addTouchListeners,h=t("../config"),d=function(p){var y=this;this.editor=p,new l(this),new u(this),new a(this);var x=function(C){var M=!document.hasFocus||!document.hasFocus()||!p.isFocused()&&document.activeElement==(p.textInput&&p.textInput.getElement());M&&window.focus(),p.focus()},g=p.renderer.getMouseEventTarget();s.addListener(g,"click",this.onMouseEvent.bind(this,"click"),p),s.addListener(g,"mousemove",this.onMouseMove.bind(this,"mousemove"),p),s.addMultiMouseDownListener([g,p.renderer.scrollBarV&&p.renderer.scrollBarV.inner,p.renderer.scrollBarH&&p.renderer.scrollBarH.inner,p.textInput&&p.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",p),s.addMouseWheelListener(p.container,this.onMouseWheel.bind(this,"mousewheel"),p),o(p.container,p);var w=p.renderer.$gutter;s.addListener(w,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),p),s.addListener(w,"click",this.onMouseEvent.bind(this,"gutterclick"),p),s.addListener(w,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),p),s.addListener(w,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),p),s.addListener(g,"mousedown",x,p),s.addListener(w,"mousedown",x,p),c.isIE&&p.renderer.scrollBarV&&(s.addListener(p.renderer.scrollBarV.element,"mousedown",x,p),s.addListener(p.renderer.scrollBarH.element,"mousedown",x,p)),p.on("mousemove",function(C){if(!(y.state||y.$dragDelay||!y.$dragEnabled)){var M=p.renderer.screenToTextCoordinates(C.x,C.y),_=p.session.selection.getRange(),E=p.renderer;!_.isEmpty()&&_.insideStart(M.row,M.column)?E.setCursorStyle("default"):E.setCursorStyle("")}},p)};(function(){this.onMouseEvent=function(p,y){this.editor._emit(p,new f(y,this.editor))},this.onMouseMove=function(p,y){var x=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!x||!x.length||this.editor._emit(p,new f(y,this.editor))},this.onMouseWheel=function(p,y){var x=new f(y,this.editor);x.speed=this.$scrollSpeed*2,x.wheelX=y.wheelX,x.wheelY=y.wheelY,this.editor._emit(p,x)},this.setState=function(p){this.state=p},this.captureMouse=function(p,y){this.x=p.x,this.y=p.y,this.isMousePressed=!0;var x=this.editor,g=this.editor.renderer;g.$isMousePressed=!0;var w=this,C=function(A){if(A){if(c.isWebKit&&!A.which&&w.releaseMouse)return w.releaseMouse();w.x=A.clientX,w.y=A.clientY,y&&y(A),w.mouseEvent=new f(A,w.editor),w.$mouseMoved=!0}},M=function(A){x.off("beforeEndOperation",E),clearInterval(R),_(),w[w.state+"End"]&&w[w.state+"End"](A),w.state="",w.isMousePressed=g.$isMousePressed=!1,g.$keepTextAreaAtCursor&&g.$moveTextAreaToCursor(),w.$onCaptureMouseMove=w.releaseMouse=null,A&&w.onMouseEvent("mouseup",A),x.endOperation()},_=function(){w[w.state]&&w[w.state](),w.$mouseMoved=!1};if(c.isOldIE&&p.domEvent.type=="dblclick")return setTimeout(function(){M(p)});var E=function(A){w.releaseMouse&&x.curOp.command.name&&x.curOp.selectionChanged&&(w[w.state+"End"]&&w[w.state+"End"](),w.state="",w.releaseMouse())};x.on("beforeEndOperation",E),x.startOperation({command:{name:"mouse"}}),w.$onCaptureMouseMove=C,w.releaseMouse=s.capture(this.editor.container,C,M);var R=setInterval(_,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var p=(function(y){y&&y.domEvent&&y.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",p),y&&y.domEvent&&s.stopEvent(y.domEvent))}).bind(this);setTimeout(p,10),this.editor.on("nativecontextmenu",p)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(d.prototype),h.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:c.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),i.MouseHandler=d}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(t,i,r){var s=t("../lib/dom");function c(l){l.on("click",function(u){var f=u.getDocumentPosition(),a=l.session,o=a.getFoldAt(f.row,f.column,1);o&&(u.getAccelKey()?a.removeFold(o):a.expandFold(o),u.stop());var h=u.domEvent&&u.domEvent.target;h&&s.hasCssClass(h,"ace_inline_button")&&s.hasCssClass(h,"ace_toggle_wrap")&&(a.setOption("wrap",!a.getUseWrapMode()),l.renderer.scrollCursorIntoView())}),l.on("gutterclick",function(u){var f=l.renderer.$gutterLayer.getRegion(u);if(f=="foldWidgets"){var a=u.getDocumentPosition().row,o=l.session;o.foldWidgets&&o.foldWidgets[a]&&l.session.onFoldWidgetClick(a,u),l.isFocused()||l.focus(),u.stop()}}),l.on("gutterdblclick",function(u){var f=l.renderer.$gutterLayer.getRegion(u);if(f=="foldWidgets"){var a=u.getDocumentPosition().row,o=l.session,h=o.getParentFoldRangeData(a,!0),d=h.range||h.firstRange;if(d){a=d.start.row;var p=o.getFoldAt(a,o.getLine(a).length,1);p?o.removeFold(p):(o.addFold("...",d),l.renderer.scrollCursorIntoView({row:d.start.row,column:0}))}u.stop()}})}i.FoldHandler=c}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,i,r){var s=t("../lib/keys"),c=t("../lib/event"),l=function(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)};(function(){this.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},this.setKeyboardHandler=function(u){var f=this.$handlers;if(f[f.length-1]!=u){for(;f[f.length-1]&&f[f.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(f[f.length-1]);this.addKeyboardHandler(u,1)}},this.addKeyboardHandler=function(u,f){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var a=this.$handlers.indexOf(u);a!=-1&&this.$handlers.splice(a,1),f==null?this.$handlers.push(u):this.$handlers.splice(f,0,u),a==-1&&u.attach&&u.attach(this.$editor)}},this.removeKeyboardHandler=function(u){var f=this.$handlers.indexOf(u);return f==-1?!1:(this.$handlers.splice(f,1),u.detach&&u.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var u=this.$data,f=u.editor;return this.$handlers.map(function(a){return a.getStatusText&&a.getStatusText(f,u)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(u,f,a,o){for(var h,d=!1,p=this.$editor.commands,y=this.$handlers.length;y--&&(h=this.$handlers[y].handleKeyboard(this.$data,u,f,a,o),!(!(!h||!h.command)&&(h.command=="null"?d=!0:d=p.exec(h.command,this.$editor,h.args,o),d&&o&&u!=-1&&h.passEvent!=!0&&h.command.passEvent!=!0&&c.stopEvent(o),d))););return!d&&u==-1&&(h={command:"insertstring"},d=p.exec("insertstring",this.$editor,f)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",h),d},this.onCommandKey=function(u,f,a){var o=s.keyCodeToString(a);return this.$callKeyboardHandlers(f,o,a,u)},this.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)}}).call(l.prototype),i.KeyBinding=l}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,i,r){var s=0,c=0,l=!1,u=!1,f=!1,a=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,d=1,p=0,y=1,x=2,g=3,w=4,C=5,M=6,_=7,E=8,R=9,A=10,T=11,S=12,I=13,D=14,z=15,B=16,W=17,H=18,J=[H,H,H,H,H,H,H,H,H,M,C,M,E,C,H,H,H,H,H,H,H,H,H,H,H,H,H,H,C,C,C,M,E,w,w,T,T,T,w,w,w,w,w,A,R,A,R,R,x,x,x,x,x,x,x,x,x,x,R,w,w,w,w,w,w,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,w,w,w,w,w,w,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,w,w,w,w,H,H,H,H,H,H,C,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,R,w,T,T,T,T,w,w,w,w,p,w,w,H,w,w,T,T,x,x,w,p,w,w,w,x,p,w,w,w,w,w],G=[E,E,E,E,E,E,E,E,E,E,E,H,H,H,p,y,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E,C,I,D,z,B,W,R,T,T,T,T,T,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,R,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E];function K(j,re,fe,ve){var ye=s?o:a,ze=null,Xe=null,Ae=null,je=0,oe=null,Ve=null,Te=-1,$e=null,Ne=null,ht=[];if(!ve)for($e=0,ve=[];$e<fe;$e++)ve[$e]=le(j[$e]);for(c=s,l=!1,u=!1,f=!1,Ne=0;Ne<fe;Ne++){if(ze=je,ht[Ne]=Xe=ne(j,ve,ht,Ne),je=ye[ze][Xe],oe=je&240,je&=15,re[Ne]=Ae=ye[je][5],oe>0)if(oe==16){for($e=Te;$e<Ne;$e++)re[$e]=1;Te=-1}else Te=-1;if(Ve=ye[je][6],Ve)Te==-1&&(Te=Ne);else if(Te>-1){for($e=Te;$e<Ne;$e++)re[$e]=Ae;Te=-1}ve[Ne]==C&&(re[Ne]=0),c|=Ae}if(f){for($e=0;$e<fe;$e++)if(ve[$e]==M){re[$e]=s;for(var Ze=$e-1;Ze>=0&&ve[Ze]==E;Ze--)re[Ze]=s}}}function Y(j,re,fe){if(!(c<j)){if(j==1&&s==d&&!u){fe.reverse();return}for(var ve=fe.length,ye=0,ze,Xe,Ae,je;ye<ve;){if(re[ye]>=j){for(ze=ye+1;ze<ve&&re[ze]>=j;)ze++;for(Xe=ye,Ae=ze-1;Xe<Ae;Xe++,Ae--)je=fe[Xe],fe[Xe]=fe[Ae],fe[Ae]=je;ye=ze}ye++}}}function ne(j,re,fe,ve){var ye=re[ve],ze,Xe,Ae,je;switch(ye){case p:case y:l=!1;case w:case g:return ye;case x:return l?g:x;case _:return l=!0,y;case E:return w;case R:return ve<1||ve+1>=re.length||(ze=fe[ve-1])!=x&&ze!=g||(Xe=re[ve+1])!=x&&Xe!=g?w:(l&&(Xe=g),Xe==ze?Xe:w);case A:return ze=ve>0?fe[ve-1]:C,ze==x&&ve+1<re.length&&re[ve+1]==x?x:w;case T:if(ve>0&&fe[ve-1]==x)return x;if(l)return w;for(je=ve+1,Ae=re.length;je<Ae&&re[je]==T;)je++;return je<Ae&&re[je]==x?x:w;case S:for(Ae=re.length,je=ve+1;je<Ae&&re[je]==S;)je++;if(je<Ae){var oe=j[ve],Ve=oe>=1425&&oe<=2303||oe==64286;if(ze=re[je],Ve&&(ze==y||ze==_))return y}return ve<1||(ze=re[ve-1])==C?w:fe[ve-1];case C:return l=!1,u=!0,s;case M:return f=!0,w;case I:case D:case B:case W:case z:l=!1;case H:return w}}function le(j){var re=j.charCodeAt(0),fe=re>>8;return fe==0?re>191?p:J[re]:fe==5?/[\u0591-\u05f4]/.test(j)?y:p:fe==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(j)?S:/[\u0660-\u0669\u066b-\u066c]/.test(j)?g:re==1642?T:/[\u06f0-\u06f9]/.test(j)?x:_:fe==32&&re<=8287?G[re&255]:fe==254&&re>=65136?_:w}i.L=p,i.R=y,i.EN=x,i.ON_R=3,i.AN=4,i.R_H=5,i.B=6,i.RLE=7,i.DOT="",i.doBidiReorder=function(j,re,fe){if(j.length<2)return{};var ve=j.split(""),ye=new Array(ve.length),ze=new Array(ve.length),Xe=[];s=fe?d:h,K(ve,Xe,ve.length,re);for(var Ae=0;Ae<ye.length;ye[Ae]=Ae,Ae++);Y(2,Xe,ye),Y(1,Xe,ye);for(var Ae=0;Ae<ye.length-1;Ae++)re[Ae]===g?Xe[Ae]=i.AN:Xe[Ae]===y&&(re[Ae]>_&&re[Ae]<I||re[Ae]===w||re[Ae]===H)?Xe[Ae]=i.ON_R:Ae>0&&ve[Ae-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(ve[Ae])&&(Xe[Ae-1]=Xe[Ae]=i.R_H,Ae++);ve[ve.length-1]===i.DOT&&(Xe[ve.length-1]=i.B),ve[0]===""&&(Xe[0]=i.RLE);for(var Ae=0;Ae<ye.length;Ae++)ze[Ae]=Xe[ye[Ae]];return{logicalFromVisual:ye,bidiLevels:ze}},i.hasBidiCharacters=function(j,re){for(var fe=!1,ve=0;ve<j.length;ve++)re[ve]=le(j.charAt(ve)),!fe&&(re[ve]==y||re[ve]==_||re[ve]==g)&&(fe=!0);return fe},i.getVisualFromLogicalIdx=function(j,re){for(var fe=0;fe<re.logicalFromVisual.length;fe++)if(re.logicalFromVisual[fe]==j)return fe;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(t,i,r){var s=t("./lib/bidiutil"),c=t("./lib/lang"),l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,u=function(f){this.session=f,this.bidiMap={},this.currentRow=null,this.bidiUtil=s,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=l.test(f.getValue())};(function(){this.isBidiRow=function(f,a,o){return this.seenBidi?(f!==this.currentRow&&(this.currentRow=f,this.updateRowLine(a,o),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(f){this.seenBidi?this.currentRow=null:f.action=="insert"&&l.test(f.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var f=0,a=this.session.$screenRowCache;if(a.length){var o=this.session.$getRowCacheIndex(a,this.currentRow);o>=0&&(f=this.session.$docRowCache[o])}return f},this.getSplitIndex=function(){var f=0,a=this.session.$screenRowCache;if(a.length)for(var o,h=this.session.$getRowCacheIndex(a,this.currentRow);this.currentRow-f>0&&(o=this.session.$getRowCacheIndex(a,this.currentRow-f-1),o===h);)h=o,f++;else f=this.currentRow;return f},this.updateRowLine=function(f,a){f===void 0&&(f=this.getDocumentRow());var o=f===this.session.getLength()-1,h=o?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(f),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var d=this.session.$wrapData[f];d&&(a===void 0&&(a=this.getSplitIndex()),a>0&&d.length?(this.wrapIndent=d.indent,this.wrapOffset=this.wrapIndent*this.charWidths[s.L],this.line=a<d.length?this.line.substring(d[a-1],d[a]):this.line.substring(d[d.length-1])):this.line=this.line.substring(0,d[a])),a==d.length&&(this.line+=this.showInvisibles?h:s.DOT)}else this.line+=this.showInvisibles?h:s.DOT;var p=this.session,y=0,x;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(g,w){return g==="	"||p.isFullWidth(g.charCodeAt(0))?(x=g==="	"?p.getScreenTabSize(w+y):2,y+=x-1,c.stringRepeat(s.DOT,x)):g}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==s.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var f=[];s.hasBidiCharacters(this.line,f)||this.isRtlDir?this.bidiMap=s.doBidiReorder(this.line,f,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(f){if(this.characterWidth!==f.$characterSize.width){this.fontMetrics=f;var a=this.characterWidth=f.$characterSize.width,o=f.$measureCharWidth("");this.charWidths[s.L]=this.charWidths[s.EN]=this.charWidths[s.ON_R]=a,this.charWidths[s.R]=this.charWidths[s.AN]=o,this.charWidths[s.R_H]=o*.45,this.charWidths[s.B]=this.charWidths[s.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(f){this.showInvisibles=f,this.currentRow=null},this.setEolChar=function(f){this.EOL=f},this.setContentWidth=function(f){this.contentWidth=f},this.isRtlLine=function(f){return this.$isRtl?!0:f!=null?this.session.getLine(f).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(f,a){for(var o=f.getCursorPosition(),h=f.selection.getSelectionAnchor().row;h<=o.row;h++)!a&&f.session.getLine(h).charAt(0)===f.session.$bidiHandler.RLE?f.session.doc.removeInLine(h,0,1):a&&f.session.getLine(h).charAt(0)!==f.session.$bidiHandler.RLE&&f.session.doc.insert({column:0,row:h},f.session.$bidiHandler.RLE)},this.getPosLeft=function(f){f-=this.wrapIndent;var a=this.line.charAt(0)===this.RLE?1:0,o=f>a?this.session.getOverwrite()?f:f-1:a,h=s.getVisualFromLogicalIdx(o,this.bidiMap),d=this.bidiMap.bidiLevels,p=0;!this.session.getOverwrite()&&f<=a&&d[h]%2!==0&&h++;for(var y=0;y<h;y++)p+=this.charWidths[d[y]];return!this.session.getOverwrite()&&f>a&&d[h]%2===0&&(p+=this.charWidths[d[h]]),this.wrapIndent&&(p+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(p+=this.rtlLineOffset),p},this.getSelections=function(f,a){var o=this.bidiMap,h=o.bidiLevels,d,p=[],y=0,x=Math.min(f,a)-this.wrapIndent,g=Math.max(f,a)-this.wrapIndent,w=!1,C=!1,M=0;this.wrapIndent&&(y+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var _,E=0;E<h.length;E++)_=o.logicalFromVisual[E],d=h[E],w=_>=x&&_<g,w&&!C?M=y:!w&&C&&p.push({left:M,width:y-M}),y+=this.charWidths[d],C=w;if(w&&E===h.length&&p.push({left:M,width:y-M}),this.isRtlDir)for(var R=0;R<p.length;R++)p[R].left+=this.rtlLineOffset;return p},this.offsetToCol=function(o){this.isRtlDir&&(o-=this.rtlLineOffset);var a=0,o=Math.max(o,0),h=0,d=0,p=this.bidiMap.bidiLevels,y=this.charWidths[p[d]];for(this.wrapIndent&&(o-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);o>h+y/2;){if(h+=y,d===p.length-1){y=0;break}y=this.charWidths[p[++d]]}return d>0&&p[d-1]%2!==0&&p[d]%2===0?(o<h&&d--,a=this.bidiMap.logicalFromVisual[d]):d>0&&p[d-1]%2===0&&p[d]%2!==0?a=1+(o>h?this.bidiMap.logicalFromVisual[d]:this.bidiMap.logicalFromVisual[d-1]):this.isRtlDir&&d===p.length-1&&y===0&&p[d-1]%2===0||!this.isRtlDir&&d===0&&p[d]%2!==0?a=1+this.bidiMap.logicalFromVisual[d]:(d>0&&p[d-1]%2!==0&&y!==0&&d--,a=this.bidiMap.logicalFromVisual[d]),a===0&&this.isRtlDir&&a++,a+this.wrapIndent}}).call(u.prototype),i.BidiHandler=u}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/lang"),l=t("./lib/event_emitter").EventEmitter,u=t("./range").Range,f=function(a){this.session=a,this.doc=a.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var o=this;this.cursor.on("change",function(h){o.$cursorChanged=!0,o.$silent||o._emit("changeCursor"),!o.$isEmpty&&!o.$silent&&o._emit("changeSelection"),!o.$keepDesiredColumnOnChange&&h.old.column!=h.value.column&&(o.$desiredColumn=null)}),this.anchor.on("change",function(){o.$anchorChanged=!0,!o.$isEmpty&&!o.$silent&&o._emit("changeSelection")})};(function(){s.implement(this,l),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(a,o){this.$isEmpty=!1,this.anchor.setPosition(a,o)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var a=this.anchor,o=this.lead;return a.row>o.row||a.row==o.row&&a.column>o.column},this.getRange=function(){var a=this.anchor,o=this.lead;return this.$isEmpty?u.fromPoints(o,o):this.isBackwards()?u.fromPoints(o,a):u.fromPoints(a,o)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(a,o){var h=o?a.end:a.start,d=o?a.start:a.end;this.$setSelection(h.row,h.column,d.row,d.column)},this.$setSelection=function(a,o,h,d){if(!this.$silent){var p=this.$isEmpty,y=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(a,o),this.cursor.setPosition(h,d),this.$isEmpty=!u.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||p!=this.$isEmpty||y)&&this._emit("changeSelection")}},this.$moveSelection=function(a){var o=this.lead;this.$isEmpty&&this.setSelectionAnchor(o.row,o.column),a.call(this)},this.selectTo=function(a,o){this.$moveSelection(function(){this.moveCursorTo(a,o)})},this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})},this.moveTo=function(a,o){this.clearSelection(),this.moveCursorTo(a,o)},this.moveToPosition=function(a){this.clearSelection(),this.moveCursorToPosition(a)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(a,o){if(typeof o>"u"){var h=a||this.lead;a=h.row,o=h.column}return this.session.getWordRange(a,o)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var a=this.getCursor(),o=this.session.getAWordRange(a.row,a.column);this.setSelectionRange(o)},this.getLineRange=function(a,o){var h=typeof a=="number"?a:this.lead.row,d,p=this.session.getFoldLine(h);return p?(h=p.start.row,d=p.end.row):d=h,o===!0?new u(h,0,d,this.session.getLine(d).length):new u(h,0,d+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(a,o,h){var d=a.column,p=a.column+o;return h<0&&(d=a.column-o,p=a.column),this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(d,p).split(" ").length-1==o},this.moveCursorLeft=function(){var a=this.lead.getPosition(),o;if(o=this.session.getFoldAt(a.row,a.column,-1))this.moveCursorTo(o.start.row,o.start.column);else if(a.column===0)a.row>0&&this.moveCursorTo(a.row-1,this.doc.getLine(a.row-1).length);else{var h=this.session.getTabSize();this.wouldMoveIntoSoftTab(a,h,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-h):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var a=this.lead.getPosition(),o;if(o=this.session.getFoldAt(a.row,a.column,1))this.moveCursorTo(o.end.row,o.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var h=this.session.getTabSize(),a=this.lead;this.wouldMoveIntoSoftTab(a,h,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,h):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,o=this.lead.column,h=this.session.documentToScreenRow(a,o),d=this.session.screenToDocumentPosition(h,0),p=this.session.getDisplayLine(a,null,d.row,d.column),y=p.match(/^\s*/);y[0].length!=o&&!this.session.$useEmacsStyleLineStart&&(d.column+=y[0].length),this.moveCursorToPosition(d)},this.moveCursorLineEnd=function(){var a=this.lead,o=this.session.getDocumentLastRowColumnPosition(a.row,a.column);if(this.lead.column==o.column){var h=this.session.getLine(o.row);if(o.column==h.length){var d=h.search(/\s+$/);d>0&&(o.column=d)}}this.moveCursorTo(o.row,o.column)},this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,o=this.doc.getLine(a).length;this.moveCursorTo(a,o)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var a=this.lead.row,o=this.lead.column,h=this.doc.getLine(a),d=h.substring(o);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var p=this.session.getFoldAt(a,o,1);if(p){this.moveCursorTo(p.end.row,p.end.column);return}if(this.session.nonTokenRe.exec(d)&&(o+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=h.substring(o)),o>=h.length){this.moveCursorTo(a,h.length),this.moveCursorRight(),a<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(d)&&(o+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,o)},this.moveCursorLongWordLeft=function(){var a=this.lead.row,o=this.lead.column,h;if(h=this.session.getFoldAt(a,o,-1)){this.moveCursorTo(h.start.row,h.start.column);return}var d=this.session.getFoldStringAt(a,o,-1);d==null&&(d=this.doc.getLine(a).substring(0,o));var p=c.stringReverse(d);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(p)&&(o-=this.session.nonTokenRe.lastIndex,p=p.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),o<=0){this.moveCursorTo(a,0),this.moveCursorLeft(),a>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(p)&&(o-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,o)},this.$shortWordEndIndex=function(a){var o=0,h,d=/\s/,p=this.session.tokenRe;if(p.lastIndex=0,this.session.tokenRe.exec(a))o=this.session.tokenRe.lastIndex;else{for(;(h=a[o])&&d.test(h);)o++;if(o<1){for(p.lastIndex=0;(h=a[o])&&!p.test(h);)if(p.lastIndex=0,o++,d.test(h))if(o>2){o--;break}else{for(;(h=a[o])&&d.test(h);)o++;if(o>2)break}}}return p.lastIndex=0,o},this.moveCursorShortWordRight=function(){var a=this.lead.row,o=this.lead.column,h=this.doc.getLine(a),d=h.substring(o),p=this.session.getFoldAt(a,o,1);if(p)return this.moveCursorTo(p.end.row,p.end.column);if(o==h.length){var y=this.doc.getLength();do a++,d=this.doc.getLine(a);while(a<y&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),o=0}var x=this.$shortWordEndIndex(d);this.moveCursorTo(a,o+x)},this.moveCursorShortWordLeft=function(){var a=this.lead.row,o=this.lead.column,h;if(h=this.session.getFoldAt(a,o,-1))return this.moveCursorTo(h.start.row,h.start.column);var d=this.session.getLine(a).substring(0,o);if(o===0){do a--,d=this.doc.getLine(a);while(a>0&&/^\s*$/.test(d));o=d.length,/\s+$/.test(d)||(d="")}var p=c.stringReverse(d),y=this.$shortWordEndIndex(p);return this.moveCursorTo(a,o-y)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(a,o){var h=this.session.documentToScreenPosition(this.lead.row,this.lead.column),d;if(o===0&&(a!==0&&(this.session.$bidiHandler.isBidiRow(h.row,this.lead.row)?(d=this.session.$bidiHandler.getPosLeft(h.column),h.column=Math.round(d/this.session.$bidiHandler.charWidths[0])):d=h.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?h.column=this.$desiredColumn:this.$desiredColumn=h.column),a!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var p=this.session.lineWidgets[this.lead.row];a<0?a-=p.rowsAbove||0:a>0&&(a+=p.rowCount-(p.rowsAbove||0))}var y=this.session.screenToDocumentPosition(h.row+a,h.column,d);a!==0&&o===0&&y.row===this.lead.row&&(y.column,this.lead.column),this.moveCursorTo(y.row,y.column+o,o===0)},this.moveCursorToPosition=function(a){this.moveCursorTo(a.row,a.column)},this.moveCursorTo=function(a,o,h){var d=this.session.getFoldAt(a,o,1);d&&(a=d.start.row,o=d.start.column),this.$keepDesiredColumnOnChange=!0;var p=this.session.getLine(a);/[\uDC00-\uDFFF]/.test(p.charAt(o))&&p.charAt(o-1)&&(this.lead.row==a&&this.lead.column==o+1?o=o-1:o=o+1),this.lead.setPosition(a,o),this.$keepDesiredColumnOnChange=!1,h||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,o,h){var d=this.session.screenToDocumentPosition(a,o);this.moveCursorTo(d.row,d.column,h)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start),this.$desiredColumn=a.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(a){var o=this.getRange();return a?(a.start.column=o.start.column,a.start.row=o.start.row,a.end.column=o.end.column,a.end.row=o.end.row):a=o,a.cursor=this.isBackwards()?a.start:a.end,a.desiredColumn=this.$desiredColumn,a},this.getRangeOfMovements=function(a){var o=this.getCursor();try{a(this);var h=this.getCursor();return u.fromPoints(o,h)}catch{return u.fromPoints(o,o)}finally{this.moveCursorToPosition(o)}},this.toJSON=function(){if(this.rangeCount)var a=this.ranges.map(function(o){var h=o.clone();return h.isBackwards=o.cursor==o.start,h});else{var a=this.getRange();a.isBackwards=this.isBackwards()}return a},this.fromJSON=function(a){if(a.start==null)if(this.rangeList&&a.length>1){this.toSingleRange(a[0]);for(var o=a.length;o--;){var h=u.fromPoints(a[o].start,a[o].end);a[o].isBackwards&&(h.cursor=h.start),this.addRange(h,!0)}return}else a=a[0];this.rangeList&&this.toSingleRange(a),this.setSelectionRange(a,a.isBackwards)},this.isEqual=function(a){if((a.length||this.rangeCount)&&a.length!=this.rangeCount)return!1;if(!a.length||!this.ranges)return this.getRange().isEqual(a);for(var o=this.ranges.length;o--;)if(!this.ranges[o].isEqual(a[o]))return!1;return!0}}).call(f.prototype),i.Selection=f}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,i,r){var s=t("./config"),c=2e3,l=function(u){this.states=u,this.regExps={},this.matchMappings={};for(var f in this.states){for(var a=this.states[f],o=[],h=0,d=this.matchMappings[f]={defaultToken:"text"},p="g",y=[],x=0;x<a.length;x++){var g=a[x];if(g.defaultToken&&(d.defaultToken=g.defaultToken),g.caseInsensitive&&(p="gi"),g.regex!=null){g.regex instanceof RegExp&&(g.regex=g.regex.toString().slice(1,-1));var w=g.regex,C=new RegExp("(?:("+w+")|(.))").exec("a").length-2;Array.isArray(g.token)?g.token.length==1||C==1?g.token=g.token[0]:C-1!=g.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:g,groupCount:C-1}),g.token=g.token[0]):(g.tokenArray=g.token,g.token=null,g.onMatch=this.$arrayTokens):typeof g.token=="function"&&!g.onMatch&&(C>1?g.onMatch=this.$applyToken:g.onMatch=g.token),C>1&&(/\\\d/.test(g.regex)?w=g.regex.replace(/\\([0-9]+)/g,function(M,_){return"\\"+(parseInt(_,10)+h+1)}):(C=1,w=this.removeCapturingGroups(g.regex)),!g.splitRegex&&typeof g.token!="string"&&y.push(g)),d[h]=x,h+=C,o.push(w),g.onMatch||(g.onMatch=null)}}o.length||(d[0]=0,o.push("$")),y.forEach(function(M){M.splitRegex=this.createSplitterRegexp(M.regex,p)},this),this.regExps[f]=new RegExp("("+o.join(")|(")+")|($)",p)}};(function(){this.$setMaxTokenCount=function(u){c=u|0},this.$applyToken=function(u){var f=this.splitRegex.exec(u).slice(1),a=this.token.apply(this,f);if(typeof a=="string")return[{type:a,value:u}];for(var o=[],h=0,d=a.length;h<d;h++)f[h]&&(o[o.length]={type:a[h],value:f[h]});return o},this.$arrayTokens=function(u){if(!u)return[];var f=this.splitRegex.exec(u);if(!f)return"text";for(var a=[],o=this.tokenArray,h=0,d=o.length;h<d;h++)f[h+1]&&(a[a.length]={type:o[h],value:f[h+1]});return a},this.removeCapturingGroups=function(u){var f=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,function(a,o){return o?"(?:":a});return f},this.createSplitterRegexp=function(u,f){if(u.indexOf("(?=")!=-1){var a=0,o=!1,h={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(d,p,y,x,g,w){return o?o=g!="]":g?o=!0:x?(a==h.stack&&(h.end=w+1,h.stack=-1),a--):y&&(a++,y.length!=1&&(h.stack=a,h.start=w)),d}),h.end!=null&&/^\)*$/.test(u.substr(h.end))&&(u=u.substring(0,h.start)+u.substr(h.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(f||"").replace("g",""))},this.getLineTokens=function(u,f){if(f&&typeof f!="string"){var a=f.slice(0);f=a[0],f==="#tmp"&&(a.shift(),f=a.shift())}else var a=[];var o=f||"start",h=this.states[o];h||(o="start",h=this.states[o]);var d=this.matchMappings[o],p=this.regExps[o];p.lastIndex=0;for(var y,x=[],g=0,w=0,C={type:null,value:""};y=p.exec(u);){var M=d.defaultToken,_=null,E=y[0],R=p.lastIndex;if(R-E.length>g){var A=u.substring(g,R-E.length);C.type==M?C.value+=A:(C.type&&x.push(C),C={type:M,value:A})}for(var T=0;T<y.length-2;T++)if(y[T+1]!==void 0){_=h[d[T]],_.onMatch?M=_.onMatch(E,o,a,u):M=_.token,_.next&&(typeof _.next=="string"?o=_.next:o=_.next(o,a),h=this.states[o],h||(this.reportError("state doesn't exist",o),o="start",h=this.states[o]),d=this.matchMappings[o],g=R,p=this.regExps[o],p.lastIndex=R),_.consumeLineEnd&&(g=R);break}if(E){if(typeof M=="string")(!_||_.merge!==!1)&&C.type===M?C.value+=E:(C.type&&x.push(C),C={type:M,value:E});else if(M){C.type&&x.push(C),C={type:null,value:""};for(var T=0;T<M.length;T++)x.push(M[T])}}if(g==u.length)break;if(g=R,w++>c){for(w>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:f,line:u});g<u.length;)C.type&&x.push(C),C={value:u.substring(g,g+=500),type:"overflow"};o="start",a=[];break}}return C.type&&x.push(C),a.length>1&&a[0]!==o&&a.unshift("#tmp",o),{tokens:x,state:a.length?a:o}},this.reportError=s.reportError}).call(l.prototype),i.Tokenizer=l}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,i,r){var s=t("../lib/lang"),c=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(f,a){if(!a){for(var o in f)this.$rules[o]=f[o];return}for(var o in f){for(var h=f[o],d=0;d<h.length;d++){var p=h[d];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(a)!==0&&(p.next=a+p.next),p.nextState&&p.nextState.indexOf(a)!==0&&(p.nextState=a+p.nextState))}this.$rules[a+o]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(f,a,o,h,d){var p=typeof f=="function"?new f().getRules():f;if(h)for(var y=0;y<h.length;y++)h[y]=a+h[y];else{h=[];for(var x in p)h.push(a+x)}if(this.addRules(p,a),o)for(var g=Array.prototype[d?"push":"unshift"],y=0;y<h.length;y++)g.apply(this.$rules[h[y]],s.deepCopy(o));this.$embeds||(this.$embeds=[]),this.$embeds.push(a)},this.getEmbeds=function(){return this.$embeds};var l=function(f,a){return(f!="start"||a.length)&&a.unshift(this.nextState,f),this.nextState},u=function(f,a){return a.shift(),a.shift()||"start"};this.normalizeRules=function(){var f=0,a=this.$rules;function o(h){var d=a[h];d.processed=!0;for(var p=0;p<d.length;p++){var y=d[p],x=null;Array.isArray(y)&&(x=y,y={}),!y.regex&&y.start&&(y.regex=y.start,y.next||(y.next=[]),y.next.push({defaultToken:y.token},{token:y.token+".end",regex:y.end||y.start,next:"pop"}),y.token=y.token+".start",y.push=!0);var g=y.next||y.push;if(g&&Array.isArray(g)){var w=y.stateName;w||(w=y.token,typeof w!="string"&&(w=w[0]||""),a[w]&&(w+=f++)),a[w]=g,y.next=w,o(w)}else g=="pop"&&(y.next=u);if(y.push&&(y.nextState=y.next||y.push,y.next=l,delete y.push),y.rules)for(var C in y.rules)a[C]?a[C].push&&a[C].push.apply(a[C],y.rules[C]):a[C]=y.rules[C];var M=typeof y=="string"?y:y.include;if(M&&(Array.isArray(M)?x=M.map(function(E){return a[E]}):x=a[M]),x){var _=[p,1].concat(x);y.noEscape&&(_=_.filter(function(E){return!E.next})),d.splice.apply(d,_),p--}y.keywordMap&&(y.token=this.createKeywordMapper(y.keywordMap,y.defaultToken||"text",y.caseInsensitive),delete y.defaultToken)}}Object.keys(a).forEach(o,this)},this.createKeywordMapper=function(f,a,o,h){var d=Object.create(null);return this.$keywordList=[],Object.keys(f).forEach(function(p){for(var y=f[p],x=y.split(h||"|"),g=x.length;g--;){var w=x[g];this.$keywordList.push(w),o&&(w=w.toLowerCase()),d[w]=p}},this),f=null,o?function(p){return d[p.toLowerCase()]||a}:function(p){return d[p]||a}},this.getKeywords=function(){return this.$keywords}}).call(c.prototype),i.TextHighlightRules=c}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,i,r){var s=function(){this.$behaviours={}};(function(){this.add=function(c,l,u){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[c]:this.$behaviours[c]={}}this.$behaviours[c][l]=u},this.addBehaviours=function(c){for(var l in c)for(var u in c[l])this.add(l,u,c[l][u])},this.remove=function(c){this.$behaviours&&this.$behaviours[c]&&delete this.$behaviours[c]},this.inherit=function(c,l){if(typeof c=="function")var u=new c().getBehaviours(l);else var u=c.getBehaviours(l);this.addBehaviours(u)},this.getBehaviours=function(c){if(c){for(var l={},u=0;u<c.length;u++)this.$behaviours[c[u]]&&(l[c[u]]=this.$behaviours[c[u]]);return l}else return this.$behaviours}}).call(s.prototype),i.Behaviour=s}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,i,r){var s=t("./range").Range,c=function(l,u,f){this.$session=l,this.$row=u,this.$rowTokens=l.getTokens(u);var a=l.getTokenAt(u,f);this.$tokenIndex=a?a.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var l;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,l||(l=this.$session.getLength()),this.$row>=l)return this.$row=l-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var l=this.$rowTokens,u=this.$tokenIndex,f=l[u].start;if(f!==void 0)return f;for(f=0;u>0;)u-=1,f+=l[u].value.length;return f},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var l=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new s(this.$row,u,this.$row,u+l.value.length)}}).call(c.prototype),i.TokenIterator=c}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,i,r){var s=t("../../lib/oop"),c=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator,u=t("../../lib/lang"),f=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],o,h={},d={'"':'"',"'":"'"},p=function(g){var w=-1;if(g.multiSelect&&(w=g.selection.index,h.rangeCount!=g.multiSelect.rangeCount&&(h={rangeCount:g.multiSelect.rangeCount})),h[w])return o=h[w];o=h[w]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},y=function(g,w,C,M){var _=g.end.row-g.start.row;return{text:C+w+M,selection:[0,g.start.column+1,_,g.end.column+(_?0:1)]}},x=function(g){this.add("braces","insertion",function(w,C,M,_,E){var R=M.getCursorPosition(),A=_.doc.getLine(R.row);if(E=="{"){p(M);var T=M.getSelectionRange(),S=_.doc.getTextRange(T);if(S!==""&&S!=="{"&&M.getWrapBehavioursEnabled())return y(T,S,"{","}");if(x.isSaneInsertion(M,_))return/[\]\}\)]/.test(A[R.column])||M.inMultiSelectMode||g&&g.braces?(x.recordAutoInsert(M,_,"}"),{text:"{}",selection:[1,1]}):(x.recordMaybeInsert(M,_,"{"),{text:"{",selection:[1,1]})}else if(E=="}"){p(M);var I=A.substring(R.column,R.column+1);if(I=="}"){var D=_.$findOpeningBracket("}",{column:R.column+1,row:R.row});if(D!==null&&x.isAutoInsertedClosing(R,A,E))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(E==`
`||E==`\r
`){p(M);var z="";x.isMaybeInsertedClosing(R,A)&&(z=u.stringRepeat("}",o.maybeInsertedBrackets),x.clearMaybeInsertedClosing());var I=A.substring(R.column,R.column+1);if(I==="}"){var B=_.findMatchingBracket({row:R.row,column:R.column+1},"}");if(!B)return null;var W=this.$getIndent(_.getLine(B.row))}else if(z)var W=this.$getIndent(A);else{x.clearMaybeInsertedClosing();return}var H=W+_.getTabString();return{text:`
`+H+`
`+W+z,selection:[1,H.length,1,H.length]}}else x.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(w,C,M,_,E){var R=_.doc.getTextRange(E);if(!E.isMultiLine()&&R=="{"){p(M);var A=_.doc.getLine(E.start.row),T=A.substring(E.end.column,E.end.column+1);if(T=="}")return E.end.column++,E;o.maybeInsertedBrackets--}}),this.add("parens","insertion",function(w,C,M,_,E){if(E=="("){p(M);var R=M.getSelectionRange(),A=_.doc.getTextRange(R);if(A!==""&&M.getWrapBehavioursEnabled())return y(R,A,"(",")");if(x.isSaneInsertion(M,_))return x.recordAutoInsert(M,_,")"),{text:"()",selection:[1,1]}}else if(E==")"){p(M);var T=M.getCursorPosition(),S=_.doc.getLine(T.row),I=S.substring(T.column,T.column+1);if(I==")"){var D=_.$findOpeningBracket(")",{column:T.column+1,row:T.row});if(D!==null&&x.isAutoInsertedClosing(T,S,E))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(w,C,M,_,E){var R=_.doc.getTextRange(E);if(!E.isMultiLine()&&R=="("){p(M);var A=_.doc.getLine(E.start.row),T=A.substring(E.start.column+1,E.start.column+2);if(T==")")return E.end.column++,E}}),this.add("brackets","insertion",function(w,C,M,_,E){if(E=="["){p(M);var R=M.getSelectionRange(),A=_.doc.getTextRange(R);if(A!==""&&M.getWrapBehavioursEnabled())return y(R,A,"[","]");if(x.isSaneInsertion(M,_))return x.recordAutoInsert(M,_,"]"),{text:"[]",selection:[1,1]}}else if(E=="]"){p(M);var T=M.getCursorPosition(),S=_.doc.getLine(T.row),I=S.substring(T.column,T.column+1);if(I=="]"){var D=_.$findOpeningBracket("]",{column:T.column+1,row:T.row});if(D!==null&&x.isAutoInsertedClosing(T,S,E))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(w,C,M,_,E){var R=_.doc.getTextRange(E);if(!E.isMultiLine()&&R=="["){p(M);var A=_.doc.getLine(E.start.row),T=A.substring(E.start.column+1,E.start.column+2);if(T=="]")return E.end.column++,E}}),this.add("string_dquotes","insertion",function(w,C,M,_,E){var R=_.$mode.$quotes||d;if(E.length==1&&R[E]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(E)!=-1)return;p(M);var A=E,T=M.getSelectionRange(),S=_.doc.getTextRange(T);if(S!==""&&(S.length!=1||!R[S])&&M.getWrapBehavioursEnabled())return y(T,S,A,A);if(!S){var I=M.getCursorPosition(),D=_.doc.getLine(I.row),z=D.substring(I.column-1,I.column),B=D.substring(I.column,I.column+1),W=_.getTokenAt(I.row,I.column),H=_.getTokenAt(I.row,I.column+1);if(z=="\\"&&W&&/escape/.test(W.type))return null;var J=W&&/string|escape/.test(W.type),G=!H||/string|escape/.test(H.type),K;if(B==A)K=J!==G,K&&/string\.end/.test(H.type)&&(K=!1);else{if(J&&!G||J&&G)return null;var Y=_.$mode.tokenRe;Y.lastIndex=0;var ne=Y.test(z);Y.lastIndex=0;var le=Y.test(z);if(ne||le||B&&!/[\s;,.})\]\\]/.test(B))return null;var j=D[I.column-2];if(z==A&&(j==A||Y.test(j)))return null;K=!0}return{text:K?A+A:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(w,C,M,_,E){var R=_.$mode.$quotes||d,A=_.doc.getTextRange(E);if(!E.isMultiLine()&&R.hasOwnProperty(A)){p(M);var T=_.doc.getLine(E.start.row),S=T.substring(E.start.column+1,E.start.column+2);if(S==A)return E.end.column++,E}})};x.isSaneInsertion=function(g,w){var C=g.getCursorPosition(),M=new l(w,C.row,C.column);if(!this.$matchTokenType(M.getCurrentToken()||"text",f)){if(/[)}\]]/.test(g.session.getLine(C.row)[C.column]))return!0;var _=new l(w,C.row,C.column+1);if(!this.$matchTokenType(_.getCurrentToken()||"text",f))return!1}return M.stepForward(),M.getCurrentTokenRow()!==C.row||this.$matchTokenType(M.getCurrentToken()||"text",a)},x.$matchTokenType=function(g,w){return w.indexOf(g.type||g)>-1},x.recordAutoInsert=function(g,w,C){var M=g.getCursorPosition(),_=w.doc.getLine(M.row);this.isAutoInsertedClosing(M,_,o.autoInsertedLineEnd[0])||(o.autoInsertedBrackets=0),o.autoInsertedRow=M.row,o.autoInsertedLineEnd=C+_.substr(M.column),o.autoInsertedBrackets++},x.recordMaybeInsert=function(g,w,C){var M=g.getCursorPosition(),_=w.doc.getLine(M.row);this.isMaybeInsertedClosing(M,_)||(o.maybeInsertedBrackets=0),o.maybeInsertedRow=M.row,o.maybeInsertedLineStart=_.substr(0,M.column)+C,o.maybeInsertedLineEnd=_.substr(M.column),o.maybeInsertedBrackets++},x.isAutoInsertedClosing=function(g,w,C){return o.autoInsertedBrackets>0&&g.row===o.autoInsertedRow&&C===o.autoInsertedLineEnd[0]&&w.substr(g.column)===o.autoInsertedLineEnd},x.isMaybeInsertedClosing=function(g,w){return o.maybeInsertedBrackets>0&&g.row===o.maybeInsertedRow&&w.substr(g.column)===o.maybeInsertedLineEnd&&w.substr(0,g.column)==o.maybeInsertedLineStart},x.popAutoInsertedClosing=function(){o.autoInsertedLineEnd=o.autoInsertedLineEnd.substr(1),o.autoInsertedBrackets--},x.clearMaybeInsertedClosing=function(){o&&(o.maybeInsertedBrackets=0,o.maybeInsertedRow=-1)},s.inherits(x,c),i.CstyleBehaviour=x}),ace.define("ace/unicode",["require","exports","module"],function(t,i,r){for(var s=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],c=0,l=[],u=0;u<s.length;u+=2)l.push(c+=s[u]),s[u+1]&&l.push(45,c+=s[u+1]);i.wordChars=String.fromCharCode.apply(null,l)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,i,r){var s=t("../config"),c=t("../tokenizer").Tokenizer,l=t("./text_highlight_rules").TextHighlightRules,u=t("./behaviour/cstyle").CstyleBehaviour,f=t("../unicode"),a=t("../lib/lang"),o=t("../token_iterator").TokenIterator,h=t("../range").Range,d=function(){this.HighlightRules=l};(function(){this.$defaultBehaviour=new u,this.tokenRe=new RegExp("^["+f.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+f.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new c(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,y,x,g){var w=y.doc,C=!0,M=!0,_=1/0,E=y.getTabSize(),R=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var S=this.lineCommentStart.map(a.escapeRegExp).join("|"),A=this.lineCommentStart[0];else var S=a.escapeRegExp(this.lineCommentStart),A=this.lineCommentStart;S=new RegExp("^(\\s*)(?:"+S+") ?"),R=y.getUseSoftTabs();var z=function(le,j){var re=le.match(S);if(re){var fe=re[1].length,ve=re[0].length;!H(le,fe,ve)&&re[0][ve-1]==" "&&ve--,w.removeInLine(j,fe,ve)}},W=A+" ",D=function(le,j){(!C||/\S/.test(le))&&(H(le,_,_)?w.insertInLine({row:j,column:_},W):w.insertInLine({row:j,column:_},A))},B=function(le,j){return S.test(le)},H=function(le,j,re){for(var fe=0;j--&&le.charAt(j)==" ";)fe++;if(fe%E!=0)return!1;for(var fe=0;le.charAt(re++)==" ";)fe++;return E>2?fe%E!=E-1:fe%E==0}}else{if(!this.blockComment)return!1;var A=this.blockComment.start,T=this.blockComment.end,S=new RegExp("^(\\s*)(?:"+a.escapeRegExp(A)+")"),I=new RegExp("(?:"+a.escapeRegExp(T)+")\\s*$"),D=function(K,Y){B(K,Y)||(!C||/\S/.test(K))&&(w.insertInLine({row:Y,column:K.length},T),w.insertInLine({row:Y,column:_},A))},z=function(K,Y){var ne;(ne=K.match(I))&&w.removeInLine(Y,K.length-ne[0].length,K.length),(ne=K.match(S))&&w.removeInLine(Y,ne[1].length,ne[0].length)},B=function(K,Y){if(S.test(K))return!0;for(var ne=y.getTokens(Y),le=0;le<ne.length;le++)if(ne[le].type==="comment")return!0}}function J(K){for(var Y=x;Y<=g;Y++)K(w.getLine(Y),Y)}var G=1/0;J(function(K,Y){var ne=K.search(/\S/);ne!==-1?(ne<_&&(_=ne),M&&!B(K,Y)&&(M=!1)):G>K.length&&(G=K.length)}),_==1/0&&(_=G,C=!1,M=!1),R&&_%E!=0&&(_=Math.floor(_/E)*E),J(M?z:D)},this.toggleBlockComment=function(p,y,x,g){var w=this.blockComment;if(w){!w.start&&w[0]&&(w=w[0]);var C=new o(y,g.row,g.column),M=C.getCurrentToken();y.selection;var _=y.selection.toOrientedRange(),E,R;if(M&&/comment/.test(M.type)){for(var A,T;M&&/comment/.test(M.type);){var S=M.value.indexOf(w.start);if(S!=-1){var I=C.getCurrentTokenRow(),D=C.getCurrentTokenColumn()+S;A=new h(I,D,I,D+w.start.length);break}M=C.stepBackward()}for(var C=new o(y,g.row,g.column),M=C.getCurrentToken();M&&/comment/.test(M.type);){var S=M.value.indexOf(w.end);if(S!=-1){var I=C.getCurrentTokenRow(),D=C.getCurrentTokenColumn()+S;T=new h(I,D,I,D+w.end.length);break}M=C.stepForward()}T&&y.remove(T),A&&(y.remove(A),E=A.start.row,R=-w.start.length)}else R=w.start.length,E=x.start.row,y.insert(x.end,w.end),y.insert(x.start,w.start);_.start.row==E&&(_.start.column+=R),_.end.row==E&&(_.end.column+=R),y.selection.fromOrientedRange(_)}},this.getNextLineIndent=function(p,y,x){return this.$getIndent(y)},this.checkOutdent=function(p,y,x){return!1},this.autoOutdent=function(p,y,x){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var y in p)if(p[y]){var x=p[y],g=x.prototype.$id,w=s.$modes[g];w||(s.$modes[g]=w=new x),s.$modes[y]||(s.$modes[y]=w),this.$embeds.push(y),this.$modes[y]=w}for(var C=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=0;y<C.length;y++)(function(_){var E=C[y],R=_[E];_[C[y]]=function(){return this.$delegator(E,arguments,R)}})(this)},this.$delegator=function(p,y,x){var g=y[0]||"start";if(typeof g!="string"){if(Array.isArray(g[2])){var w=g[2][g[2].length-1],C=this.$modes[w];if(C)return C[p].apply(C,[g[1]].concat([].slice.call(y,1)))}g=g[0]||"start"}for(var M=0;M<this.$embeds.length;M++)if(this.$modes[this.$embeds[M]]){var _=g.split(this.$embeds[M]);if(!_[0]&&_[1]){y[0]=_[1];var C=this.$modes[this.$embeds[M]];return C[p].apply(C,y)}}var E=x.apply(this,y);return x?E:void 0},this.transformAction=function(p,y,x,g,w){if(this.$behaviour){var C=this.$behaviour.getBehaviours();for(var M in C)if(C[M][y]){var _=C[M][y].apply(this,arguments);if(_)return _}}},this.getKeywords=function(p){if(!this.completionKeywords){var y=this.$tokenizer.rules,x=[];for(var g in y)for(var w=y[g],C=0,M=w.length;C<M;C++)if(typeof w[C].token=="string")/keyword|support|storage/.test(w[C].token)&&x.push(w[C].regex);else if(typeof w[C].token=="object"){for(var _=0,E=w[C].token.length;_<E;_++)if(/keyword|support|storage/.test(w[C].token[_])){var g=w[C].regex.match(/\(.+?\)/g)[_];x.push(g.substr(1,g.length-2))}}this.completionKeywords=x}return p?x.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,y,x,g){var w=this.$keywordList||this.$createKeywordList();return w.map(function(C){return{name:C,value:C,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(d.prototype),i.Mode=d}),ace.define("ace/apply_delta",["require","exports","module"],function(t,i,r){i.applyDelta=function(s,c,l){var u=c.start.row,f=c.start.column,a=s[u]||"";switch(c.action){case"insert":var o=c.lines;if(o.length===1)s[u]=a.substring(0,f)+c.lines[0]+a.substring(f);else{var h=[u,1].concat(c.lines);s.splice.apply(s,h),s[u]=a.substring(0,f)+s[u],s[u+c.lines.length-1]+=a.substring(f)}break;case"remove":var d=c.end.column,p=c.end.row;u===p?s[u]=a.substring(0,f)+a.substring(d):s.splice(u,p-u+1,a.substring(0,f)+s[p].substring(d));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/event_emitter").EventEmitter,l=i.Anchor=function(u,f,a){this.$onChange=this.onChange.bind(this),this.attach(u),typeof a>"u"?this.setPosition(f.row,f.column):this.setPosition(f,a)};(function(){s.implement(this,c),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(a){if(!(a.start.row==a.end.row&&a.start.row!=this.row)&&!(a.start.row>this.row)){var o=f(a,{row:this.row,column:this.column},this.$insertRight);this.setPosition(o.row,o.column,!0)}};function u(a,o,h){var d=h?a.column<=o.column:a.column<o.column;return a.row<o.row||a.row==o.row&&d}function f(a,o,h){var d=a.action=="insert",p=(d?1:-1)*(a.end.row-a.start.row),y=(d?1:-1)*(a.end.column-a.start.column),x=a.start,g=d?x:a.end;return u(o,x,h)?{row:o.row,column:o.column}:u(g,o,!h)?{row:o.row+p,column:o.column+(o.row==g.row?y:0)}:{row:x.row,column:x.column}}this.setPosition=function(a,o,h){var d;if(h?d={row:a,column:o}:d=this.$clipPositionToDocument(a,o),!(this.row==d.row&&this.column==d.column)){var p={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:p,value:d})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(a){this.document=a||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(a,o){var h={};return a>=this.document.getLength()?(h.row=Math.max(0,this.document.getLength()-1),h.column=this.document.getLine(h.row).length):a<0?(h.row=0,h.column=0):(h.row=a,h.column=Math.min(this.document.getLine(h.row).length,Math.max(0,o))),o<0&&(h.column=0),h}}).call(l.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,i,r){var s=t("./lib/oop"),c=t("./apply_delta").applyDelta,l=t("./lib/event_emitter").EventEmitter,u=t("./range").Range,f=t("./anchor").Anchor,a=function(o){this.$lines=[""],o.length===0?this.$lines=[""]:Array.isArray(o)?this.insertMergedLines({row:0,column:0},o):this.insert({row:0,column:0},o)};(function(){s.implement(this,l),this.setValue=function(o){var h=this.getLength()-1;this.remove(new u(0,0,h,this.getLine(h).length)),this.insert({row:0,column:0},o)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(o,h){return new f(this,o,h)},"aaa".split(/a/).length===0?this.$split=function(o){return o.replace(/\r\n|\r/g,`
`).split(`
`)}:this.$split=function(o){return o.split(/\r\n|\r|\n/)},this.$detectNewLine=function(o){var h=o.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=h?h[1]:`
`,this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(o){this.$newLineMode!==o&&(this.$newLineMode=o,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(o){return o==`\r
`||o=="\r"||o==`
`},this.getLine=function(o){return this.$lines[o]||""},this.getLines=function(o,h){return this.$lines.slice(o,h+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(o){return this.getLinesForRange(o).join(this.getNewLineCharacter())},this.getLinesForRange=function(o){var h;if(o.start.row===o.end.row)h=[this.getLine(o.start.row).substring(o.start.column,o.end.column)];else{h=this.getLines(o.start.row,o.end.row),h[0]=(h[0]||"").substring(o.start.column);var d=h.length-1;o.end.row-o.start.row==d&&(h[d]=h[d].substring(0,o.end.column))}return h},this.insertLines=function(o,h){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(o,h)},this.removeLines=function(o,h){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(o,h)},this.insertNewLine=function(o){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(o,["",""])},this.insert=function(o,h){return this.getLength()<=1&&this.$detectNewLine(h),this.insertMergedLines(o,this.$split(h))},this.insertInLine=function(o,h){var d=this.clippedPos(o.row,o.column),p=this.pos(o.row,o.column+h.length);return this.applyDelta({start:d,end:p,action:"insert",lines:[h]},!0),this.clonePos(p)},this.clippedPos=function(o,h){var d=this.getLength();o===void 0?o=d:o<0?o=0:o>=d&&(o=d-1,h=void 0);var p=this.getLine(o);return h==null&&(h=p.length),h=Math.min(Math.max(h,0),p.length),{row:o,column:h}},this.clonePos=function(o){return{row:o.row,column:o.column}},this.pos=function(o,h){return{row:o,column:h}},this.$clipPosition=function(o){var h=this.getLength();return o.row>=h?(o.row=Math.max(0,h-1),o.column=this.getLine(h-1).length):(o.row=Math.max(0,o.row),o.column=Math.min(Math.max(o.column,0),this.getLine(o.row).length)),o},this.insertFullLines=function(o,h){o=Math.min(Math.max(o,0),this.getLength());var d=0;o<this.getLength()?(h=h.concat([""]),d=0):(h=[""].concat(h),o--,d=this.$lines[o].length),this.insertMergedLines({row:o,column:d},h)},this.insertMergedLines=function(o,h){var d=this.clippedPos(o.row,o.column),p={row:d.row+h.length-1,column:(h.length==1?d.column:0)+h[h.length-1].length};return this.applyDelta({start:d,end:p,action:"insert",lines:h}),this.clonePos(p)},this.remove=function(o){var h=this.clippedPos(o.start.row,o.start.column),d=this.clippedPos(o.end.row,o.end.column);return this.applyDelta({start:h,end:d,action:"remove",lines:this.getLinesForRange({start:h,end:d})}),this.clonePos(h)},this.removeInLine=function(o,h,d){var p=this.clippedPos(o,h),y=this.clippedPos(o,d);return this.applyDelta({start:p,end:y,action:"remove",lines:this.getLinesForRange({start:p,end:y})},!0),this.clonePos(p)},this.removeFullLines=function(o,h){o=Math.min(Math.max(0,o),this.getLength()-1),h=Math.min(Math.max(0,h),this.getLength()-1);var d=h==this.getLength()-1&&o>0,p=h<this.getLength()-1,y=d?o-1:o,x=d?this.getLine(y).length:0,g=p?h+1:h,w=p?0:this.getLine(g).length,C=new u(y,x,g,w),M=this.$lines.slice(o,h+1);return this.applyDelta({start:C.start,end:C.end,action:"remove",lines:this.getLinesForRange(C)}),M},this.removeNewLine=function(o){o<this.getLength()-1&&o>=0&&this.applyDelta({start:this.pos(o,this.getLine(o).length),end:this.pos(o+1,0),action:"remove",lines:["",""]})},this.replace=function(o,h){if(o instanceof u||(o=u.fromPoints(o.start,o.end)),h.length===0&&o.isEmpty())return o.start;if(h==this.getTextRange(o))return o.end;this.remove(o);var d;return h?d=this.insert(o.start,h):d=o.start,d},this.applyDeltas=function(o){for(var h=0;h<o.length;h++)this.applyDelta(o[h])},this.revertDeltas=function(o){for(var h=o.length-1;h>=0;h--)this.revertDelta(o[h])},this.applyDelta=function(o,h){var d=o.action=="insert";(d?o.lines.length<=1&&!o.lines[0]:!u.comparePoints(o.start,o.end))||(d&&o.lines.length>2e4?this.$splitAndapplyLargeDelta(o,2e4):(c(this.$lines,o,h),this._signal("change",o)))},this.$safeApplyDelta=function(o){var h=this.$lines.length;(o.action=="remove"&&o.start.row<h&&o.end.row<h||o.action=="insert"&&o.start.row<=h)&&this.applyDelta(o)},this.$splitAndapplyLargeDelta=function(o,h){for(var d=o.lines,p=d.length-h+1,y=o.start.row,x=o.start.column,g=0,w=0;g<p;g=w){w+=h-1;var C=d.slice(g,w);C.push(""),this.applyDelta({start:this.pos(y+g,x),end:this.pos(y+w,x=0),action:o.action,lines:C},!0)}o.lines=d.slice(g),o.start.row=y+g,o.start.column=x,this.applyDelta(o,!0)},this.revertDelta=function(o){this.$safeApplyDelta({start:this.clonePos(o.start),end:this.clonePos(o.end),action:o.action=="insert"?"remove":"insert",lines:o.lines.slice()})},this.indexToPosition=function(o,h){for(var d=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,y=h||0,x=d.length;y<x;y++)if(o-=d[y].length+p,o<0)return{row:y,column:o+d[y].length+p};return{row:x-1,column:o+d[x-1].length+p}},this.positionToIndex=function(o,h){for(var d=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,y=0,x=Math.min(o.row,d.length),g=h||0;g<x;++g)y+=d[g].length+p;return y+o.column}}).call(a.prototype),i.Document=a}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/event_emitter").EventEmitter,l=function(u,f){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var a=this;this.$worker=function(){if(a.running){for(var o=new Date,h=a.currentLine,d=-1,p=a.doc,y=h;a.lines[h];)h++;var x=p.getLength(),g=0;for(a.running=!1;h<x;){a.$tokenizeRow(h),d=h;do h++;while(a.lines[h]);if(g++,g%5===0&&new Date-o>20){a.running=setTimeout(a.$worker,20);break}}a.currentLine=h,d==-1&&(d=h),y<=d&&a.fireUpdateEvent(y,d)}}};(function(){s.implement(this,c),this.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(u,f){var a={first:u,last:f};this._signal("update",{data:a})},this.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(u){var f=u.start.row,a=u.end.row-f;if(a===0)this.lines[f]=null;else if(u.action=="remove")this.lines.splice(f,a+1,null),this.states.splice(f,a+1,null);else{var o=Array(a+1);o.unshift(f,1),this.lines.splice.apply(this.lines,o),this.states.splice.apply(this.states,o)}this.currentLine=Math.min(f,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},this.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},this.$tokenizeRow=function(u){var f=this.doc.getLine(u),a=this.states[u-1],o=this.tokenizer.getLineTokens(f,a,u);return this.states[u]+""!=o.state+""?(this.states[u]=o.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=o.tokens}}).call(l.prototype),i.BackgroundTokenizer=l}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,i,r){var s=t("./lib/lang");t("./lib/oop");var c=t("./range").Range,l=function(u,f,a){this.setRegexp(u),this.clazz=f,this.type=a||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},this.update=function(u,f,a,o){if(this.regExp)for(var h=o.firstRow,d=o.lastRow,p=h;p<=d;p++){var y=this.cache[p];y==null&&(y=s.getMatchOffsets(a.getLine(p),this.regExp),y.length>this.MAX_RANGES&&(y=y.slice(0,this.MAX_RANGES)),y=y.map(function(g){return new c(p,g.offset,p,g.offset+g.length)}),this.cache[p]=y.length?y:"");for(var x=y.length;x--;)f.drawSingleLineMarker(u,y[x].toScreenRange(a),this.clazz,o)}}}).call(l.prototype),i.SearchHighlight=l}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,i,r){var s=t("../range").Range;function c(l,u){this.foldData=l,Array.isArray(u)?this.folds=u:u=this.folds=[u];var f=u[u.length-1];this.range=new s(u[0].start.row,u[0].start.column,f.end.row,f.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(a){a.setFoldLine(this)},this)}(function(){this.shiftRow=function(l){this.start.row+=l,this.end.row+=l,this.folds.forEach(function(u){u.start.row+=l,u.end.row+=l})},this.addFold=function(l){if(l.sameRow){if(l.start.row<this.startRow||l.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(l),this.folds.sort(function(u,f){return-u.range.compareEnd(f.start.row,f.start.column)}),this.range.compareEnd(l.start.row,l.start.column)>0?(this.end.row=l.end.row,this.end.column=l.end.column):this.range.compareStart(l.end.row,l.end.column)<0&&(this.start.row=l.start.row,this.start.column=l.start.column)}else if(l.start.row==this.end.row)this.folds.push(l),this.end.row=l.end.row,this.end.column=l.end.column;else if(l.end.row==this.start.row)this.folds.unshift(l),this.start.row=l.start.row,this.start.column=l.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");l.foldLine=this},this.containsRow=function(l){return l>=this.start.row&&l<=this.end.row},this.walk=function(l,u,f){var a=0,o=this.folds,h,d,p,y=!0;u==null&&(u=this.end.row,f=this.end.column);for(var x=0;x<o.length;x++){if(h=o[x],d=h.range.compareStart(u,f),d==-1){l(null,u,f,a,y);return}if(p=l(null,h.start.row,h.start.column,a,y),p=!p&&l(h.placeholder,h.start.row,h.start.column,a),p||d===0)return;y=!h.sameRow,a=h.end.column}l(null,u,f,a,y)},this.getNextFoldTo=function(l,u){for(var f,a,o=0;o<this.folds.length;o++){if(f=this.folds[o],a=f.range.compareEnd(l,u),a==-1)return{fold:f,kind:"after"};if(a===0)return{fold:f,kind:"inside"}}return null},this.addRemoveChars=function(l,u,f){var a=this.getNextFoldTo(l,u),o,h;if(a){if(o=a.fold,a.kind=="inside"&&o.start.column!=u&&o.start.row!=l)window.console&&window.console.log(l,u,o);else if(o.start.row==l){h=this.folds;var d=h.indexOf(o);for(d===0&&(this.start.column+=f),d;d<h.length;d++){if(o=h[d],o.start.column+=f,!o.sameRow)return;o.end.column+=f}this.end.column+=f}}},this.split=function(l,u){var f=this.getNextFoldTo(l,u);if(!f||f.kind=="inside")return null;var a=f.fold,o=this.folds,h=this.foldData,d=o.indexOf(a),p=o[d-1];this.end.row=p.end.row,this.end.column=p.end.column,o=o.splice(d,o.length-d);var y=new c(h,o);return h.splice(h.indexOf(this)+1,0,y),y},this.merge=function(l){for(var u=l.folds,f=0;f<u.length;f++)this.addFold(u[f]);var a=this.foldData;a.splice(a.indexOf(l),1)},this.toString=function(){var l=[this.range.toString()+": ["];return this.folds.forEach(function(u){l.push("  "+u.toString())}),l.push("]"),l.join(`
`)},this.idxToPosition=function(l){for(var u=0,f=0;f<this.folds.length;f++){var a=this.folds[f];if(l-=a.start.column-u,l<0)return{row:a.start.row,column:a.start.column+l};if(l-=a.placeholder.length,l<0)return a.start;u=a.end.column}return{row:this.end.row,column:this.end.column+l}}}).call(c.prototype),i.FoldLine=c}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,i,r){var s=t("./range").Range,c=s.comparePoints,l=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=c,this.pointIndex=function(u,f,a){for(var o=this.ranges,h=a||0;h<o.length;h++){var d=o[h],p=c(u,d.end);if(!(p>0)){var y=c(u,d.start);return p===0?f&&y!==0?-h-2:h:y>0||y===0&&!f?h:-h-1}}return-h-1},this.add=function(u){var f=!u.isEmpty(),a=this.pointIndex(u.start,f);a<0&&(a=-a-1);var o=this.pointIndex(u.end,f,a);return o<0?o=-o-1:o++,this.ranges.splice(a,o-a,u)},this.addList=function(u){for(var f=[],a=u.length;a--;)f.push.apply(f,this.add(u[a]));return f},this.substractPoint=function(u){var f=this.pointIndex(u);if(f>=0)return this.ranges.splice(f,1)},this.merge=function(){var u=[],f=this.ranges;f=f.sort(function(p,y){return c(p.start,y.start)});for(var a=f[0],o,h=1;h<f.length;h++){o=a,a=f[h];var d=c(o.end,a.start);d<0||d==0&&!o.isEmpty()&&!a.isEmpty()||(c(o.end,a.end)<0&&(o.end.row=a.end.row,o.end.column=a.end.column),f.splice(h,1),u.push(a),a=o,h--)}return this.ranges=f,u},this.contains=function(u,f){return this.pointIndex({row:u,column:f})>=0},this.containsPoint=function(u){return this.pointIndex(u)>=0},this.rangeAtPoint=function(u){var f=this.pointIndex(u);if(f>=0)return this.ranges[f]},this.clipRows=function(u,f){var a=this.ranges;if(a[0].start.row>f||a[a.length-1].start.row<u)return[];var o=this.pointIndex({row:u,column:0});o<0&&(o=-o-1);var h=this.pointIndex({row:f,column:0},o);h<0&&(h=-h-1);for(var d=[],p=o;p<h;p++)d.push(a[p]);return d},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(u){for(var f=u.start,a=u.end,o=f.row,h=a.row,d=this.ranges,p=0,y=d.length;p<y;p++){var x=d[p];if(x.end.row>=o)break}if(u.action=="insert")for(var g=h-o,w=-f.column+a.column;p<y;p++){var x=d[p];if(x.start.row>o)break;if(x.start.row==o&&x.start.column>=f.column&&(x.start.column==f.column&&this.$bias<=0||(x.start.column+=w,x.start.row+=g)),x.end.row==o&&x.end.column>=f.column){if(x.end.column==f.column&&this.$bias<0)continue;x.end.column==f.column&&w>0&&p<y-1&&x.end.column>x.start.column&&x.end.column==d[p+1].start.column&&(x.end.column-=w),x.end.column+=w,x.end.row+=g}}else for(var g=o-h,w=f.column-a.column;p<y;p++){var x=d[p];if(x.start.row>h)break;x.end.row<h&&(o<x.end.row||o==x.end.row&&f.column<x.end.column)?(x.end.row=o,x.end.column=f.column):x.end.row==h?x.end.column<=a.column?(g||x.end.column>f.column)&&(x.end.column=f.column,x.end.row=f.row):(x.end.column+=w,x.end.row+=g):x.end.row>h&&(x.end.row+=g),x.start.row<h&&(o<x.start.row||o==x.start.row&&f.column<x.start.column)?(x.start.row=o,x.start.column=f.column):x.start.row==h?x.start.column<=a.column?(g||x.start.column>f.column)&&(x.start.column=f.column,x.start.row=f.row):(x.start.column+=w,x.start.row+=g):x.start.row>h&&(x.start.row+=g)}if(g!=0&&p<y)for(;p<y;p++){var x=d[p];x.start.row+=g,x.end.row+=g}}}).call(l.prototype),i.RangeList=l}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(t,i,r){var s=t("../range_list").RangeList,c=t("../lib/oop"),l=i.Fold=function(h,d){this.foldLine=null,this.placeholder=d,this.range=h,this.start=h.start,this.end=h.end,this.sameRow=h.start.row==h.end.row,this.subFolds=this.ranges=[]};c.inherits(l,s),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(h){this.foldLine=h,this.subFolds.forEach(function(d){d.setFoldLine(h)})},this.clone=function(){var h=this.range.clone(),d=new l(h,this.placeholder);return this.subFolds.forEach(function(p){d.subFolds.push(p.clone())}),d.collapseChildren=this.collapseChildren,d},this.addSubFold=function(h){if(!this.range.isEqual(h)){f(h,this.start);for(var g=h.start.row,w=h.start.column,d=0,p=-1;d<this.subFolds.length&&(p=this.subFolds[d].range.compare(g,w),p==1);d++);var y=this.subFolds[d],x=0;if(p==0){if(y.range.containsRange(h))return y.addSubFold(h);x=1}for(var g=h.range.end.row,w=h.range.end.column,C=d,p=-1;C<this.subFolds.length&&(p=this.subFolds[C].range.compare(g,w),p==1);C++);p==0&&C++;for(var M=this.subFolds.splice(d,C-d,h),_=p==0?M.length-1:M.length,E=x;E<_;E++)h.addSubFold(M[E]);return h.setFoldLine(this.foldLine),h}},this.restoreRange=function(h){return o(h,this.start)}}).call(l.prototype);function u(h,d){h.row-=d.row,h.row==0&&(h.column-=d.column)}function f(h,d){u(h.start,d),u(h.end,d)}function a(h,d){h.row==0&&(h.column+=d.column),h.row+=d.row}function o(h,d){a(h.start,d),a(h.end,d)}}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,i,r){var s=t("../range").Range,c=t("./fold_line").FoldLine,l=t("./fold").Fold,u=t("../token_iterator").TokenIterator;function f(){this.getFoldAt=function(a,o,h){var d=this.getFoldLine(a);if(!d)return null;for(var p=d.folds,y=0;y<p.length;y++){var x=p[y].range;if(x.contains(a,o)){if(h==1&&x.isEnd(a,o)&&!x.isEmpty())continue;if(h==-1&&x.isStart(a,o)&&!x.isEmpty())continue;return p[y]}}},this.getFoldsInRange=function(a){var o=a.start,h=a.end,d=this.$foldData,p=[];o.column+=1,h.column-=1;for(var y=0;y<d.length;y++){var x=d[y].range.compareRange(a);if(x!=2){if(x==-2)break;for(var g=d[y].folds,w=0;w<g.length;w++){var C=g[w];if(x=C.range.compareRange(a),x==-2)break;if(x==2)continue;if(x==42)break;p.push(C)}}}return o.column-=1,h.column+=1,p},this.getFoldsInRangeList=function(a){if(Array.isArray(a)){var o=[];a.forEach(function(h){o=o.concat(this.getFoldsInRange(h))},this)}else var o=this.getFoldsInRange(a);return o},this.getAllFolds=function(){for(var a=[],o=this.$foldData,h=0;h<o.length;h++)for(var d=0;d<o[h].folds.length;d++)a.push(o[h].folds[d]);return a},this.getFoldStringAt=function(a,o,h,d){if(d=d||this.getFoldLine(a),!d)return null;for(var p={end:{column:0}},y,x,g=0;g<d.folds.length;g++){x=d.folds[g];var w=x.range.compareEnd(a,o);if(w==-1){y=this.getLine(x.start.row).substring(p.end.column,x.start.column);break}else if(w===0)return null;p=x}return y||(y=this.getLine(x.start.row).substring(p.end.column)),h==-1?y.substring(0,o-p.end.column):h==1?y.substring(o-p.end.column):y},this.getFoldLine=function(a,o){var h=this.$foldData,d=0;for(o&&(d=h.indexOf(o)),d==-1&&(d=0),d;d<h.length;d++){var p=h[d];if(p.start.row<=a&&p.end.row>=a)return p;if(p.end.row>a)return null}return null},this.getNextFoldLine=function(a,o){var h=this.$foldData,d=0;for(o&&(d=h.indexOf(o)),d==-1&&(d=0),d;d<h.length;d++){var p=h[d];if(p.end.row>=a)return p}return null},this.getFoldedRowCount=function(a,o){for(var h=this.$foldData,d=o-a+1,p=0;p<h.length;p++){var y=h[p],x=y.end.row,g=y.start.row;if(x>=o){g<o&&(g>=a?d-=o-g:d=0);break}else x>=a&&(g>=a?d-=x-g:d-=x-a+1)}return d},this.$addFoldLine=function(a){return this.$foldData.push(a),this.$foldData.sort(function(o,h){return o.start.row-h.start.row}),a},this.addFold=function(a,o){var h=this.$foldData,d=!1,p;a instanceof l?p=a:(p=new l(o,a),p.collapseChildren=o.collapseChildren),this.$clipRangeToDocument(p.range);var y=p.start.row,x=p.start.column,g=p.end.row,w=p.end.column,C=this.getFoldAt(y,x,1),M=this.getFoldAt(g,w,-1);if(C&&M==C)return C.addSubFold(p);C&&!C.range.isStart(y,x)&&this.removeFold(C),M&&!M.range.isEnd(g,w)&&this.removeFold(M);var _=this.getFoldsInRange(p.range);_.length>0&&(this.removeFolds(_),p.collapseChildren||_.forEach(function(T){p.addSubFold(T)}));for(var E=0;E<h.length;E++){var R=h[E];if(g==R.start.row){R.addFold(p),d=!0;break}else if(y==R.end.row){if(R.addFold(p),d=!0,!p.sameRow){var A=h[E+1];if(A&&A.start.row==g){R.merge(A);break}}break}else if(g<=R.start.row)break}return d||(R=this.$addFoldLine(new c(this.$foldData,p))),this.$useWrapMode?this.$updateWrapData(R.start.row,R.start.row):this.$updateRowLengthCache(R.start.row,R.start.row),this.$modified=!0,this._signal("changeFold",{data:p,action:"add"}),p},this.addFolds=function(a){a.forEach(function(o){this.addFold(o)},this)},this.removeFold=function(a){var o=a.foldLine,h=o.start.row,d=o.end.row,p=this.$foldData,y=o.folds;if(y.length==1)p.splice(p.indexOf(o),1);else if(o.range.isEnd(a.end.row,a.end.column))y.pop(),o.end.row=y[y.length-1].end.row,o.end.column=y[y.length-1].end.column;else if(o.range.isStart(a.start.row,a.start.column))y.shift(),o.start.row=y[0].start.row,o.start.column=y[0].start.column;else if(a.sameRow)y.splice(y.indexOf(a),1);else{var x=o.split(a.start.row,a.start.column);y=x.folds,y.shift(),x.start.row=y[0].start.row,x.start.column=y[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(h,d):this.$updateRowLengthCache(h,d)),this.$modified=!0,this._signal("changeFold",{data:a,action:"remove"})},this.removeFolds=function(a){for(var o=[],h=0;h<a.length;h++)o.push(a[h]);o.forEach(function(d){this.removeFold(d)},this),this.$modified=!0},this.expandFold=function(a){this.removeFold(a),a.subFolds.forEach(function(o){a.restoreRange(o),this.addFold(o)},this),a.collapseChildren>0&&this.foldAll(a.start.row+1,a.end.row,a.collapseChildren-1),a.subFolds=[]},this.expandFolds=function(a){a.forEach(function(o){this.expandFold(o)},this)},this.unfold=function(a,o){var h,d;if(a==null?(h=new s(0,0,this.getLength(),0),o==null&&(o=!0)):typeof a=="number"?h=new s(a,0,a,this.getLine(a).length):"row"in a?h=s.fromPoints(a,a):h=a,d=this.getFoldsInRangeList(h),o!=!1?this.removeFolds(d):this.expandFolds(d),d.length)return d},this.isRowFolded=function(a,o){return!!this.getFoldLine(a,o)},this.getRowFoldEnd=function(a,o){var h=this.getFoldLine(a,o);return h?h.end.row:a},this.getRowFoldStart=function(a,o){var h=this.getFoldLine(a,o);return h?h.start.row:a},this.getFoldDisplayLine=function(a,o,h,d,p){d==null&&(d=a.start.row),p==null&&(p=0),o==null&&(o=a.end.row),h==null&&(h=this.getLine(o).length);var y=this.doc,x="";return a.walk(function(g,w,C,M){if(!(w<d)){if(w==d){if(C<p)return;M=Math.max(p,M)}g!=null?x+=g:x+=y.getLine(w).substring(M,C)}},o,h),x},this.getDisplayLine=function(a,o,h,d){var p=this.getFoldLine(a);if(p)return this.getFoldDisplayLine(p,a,o,h,d);var y;return y=this.doc.getLine(a),y.substring(d||0,o||y.length)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(o){var h=o.folds.map(function(d){return d.clone()});return new c(a,h)}),a},this.toggleFold=function(a){var o=this.selection,h=o.getRange(),d,p;if(h.isEmpty()){var y=h.start;if(d=this.getFoldAt(y.row,y.column),d){this.expandFold(d);return}else(p=this.findMatchingBracket(y))?h.comparePoint(p)==1?h.end=p:(h.start=p,h.start.column++,h.end.column--):(p=this.findMatchingBracket({row:y.row,column:y.column+1}))?(h.comparePoint(p)==1?h.end=p:h.start=p,h.start.column++):h=this.getCommentFoldRange(y.row,y.column)||h}else{var x=this.getFoldsInRange(h);if(a&&x.length){this.expandFolds(x);return}else x.length==1&&(d=x[0])}if(d||(d=this.getFoldAt(h.start.row,h.start.column)),d&&d.range.toString()==h.toString()){this.expandFold(d);return}var g="...";if(!h.isMultiLine()){if(g=this.getTextRange(h),g.length<4)return;g=g.trim().substring(0,2)+".."}this.addFold(g,h)},this.getCommentFoldRange=function(a,o,h){var d=new u(this,a,o),p=d.getCurrentToken(),y=p&&p.type;if(p&&/^comment|string/.test(y)){y=y.match(/comment|string/)[0],y=="comment"&&(y+="|doc-start");var x=new RegExp(y),g=new s;if(h!=1){do p=d.stepBackward();while(p&&x.test(p.type));d.stepForward()}if(g.start.row=d.getCurrentTokenRow(),g.start.column=d.getCurrentTokenColumn()+2,d=new u(this,a,o),h!=-1){var w=-1;do if(p=d.stepForward(),w==-1){var C=this.getState(d.$row);x.test(C)||(w=d.$row)}else if(d.$row>w)break;while(p&&x.test(p.type));p=d.stepBackward()}else p=d.getCurrentToken();return g.end.row=d.getCurrentTokenRow(),g.end.column=d.getCurrentTokenColumn()+p.value.length-2,g}},this.foldAll=function(a,o,h,d){h==null&&(h=1e5);var p=this.foldWidgets;if(p){o=o||this.getLength(),a=a||0;for(var y=a;y<o;y++)if(p[y]==null&&(p[y]=this.getFoldWidget(y)),p[y]=="start"&&!(d&&!d(y))){var x=this.getFoldWidgetRange(y);x&&x.isMultiLine()&&x.end.row<=o&&x.start.row>=a&&(y=x.end.row,x.collapseChildren=h,this.addFold("...",x))}}},this.foldToLevel=function(a){for(this.foldAll();a-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var a=this;this.foldAll(null,null,null,function(o){for(var h=a.getTokens(o),d=0;d<h.length;d++){var p=h[d];if(!(p.type=="text"&&/^\s+$/.test(p.value)))return!!/comment/.test(p.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw new Error("invalid fold style: "+a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=a){this.$foldStyle=a,a=="manual"&&this.unfold();var o=this.$foldMode;this.$setFolding(null),this.$setFolding(o)}},this.$setFolding=function(a){if(this.$foldMode!=a){if(this.$foldMode=a,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!a||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle),this.getFoldWidgetRange=a.getFoldWidgetRange.bind(a,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(a,o){var h=this.foldWidgets;if(!h||o&&h[a])return{};for(var d=a-1,p;d>=0;){var y=h[d];if(y==null&&(y=h[d]=this.getFoldWidget(d)),y=="start"){var x=this.getFoldWidgetRange(d);if(p||(p=x),x&&x.end.row>=a)break}d--}return{range:d!==-1&&x,firstRange:p}},this.onFoldWidgetClick=function(a,o){o=o.domEvent;var h={children:o.shiftKey,all:o.ctrlKey||o.metaKey,siblings:o.altKey},d=this.$toggleFoldWidget(a,h);if(!d){var p=o.target||o.srcElement;p&&/ace_fold-widget/.test(p.className)&&(p.className+=" ace_invalid")}},this.$toggleFoldWidget=function(a,o){if(this.getFoldWidget){var h=this.getFoldWidget(a),d=this.getLine(a),p=h==="end"?-1:1,y=this.getFoldAt(a,p===-1?0:d.length,p);if(y)return o.children||o.all?this.removeFold(y):this.expandFold(y),y;var x=this.getFoldWidgetRange(a,!0);if(x&&!x.isMultiLine()&&(y=this.getFoldAt(x.start.row,x.start.column,1),y&&x.isEqual(y.range)))return this.removeFold(y),y;if(o.siblings){var g=this.getParentFoldRangeData(a);if(g.range)var w=g.range.start.row+1,C=g.range.end.row;this.foldAll(w,C,o.all?1e4:0)}else o.children?(C=x?x.end.row:this.getLength(),this.foldAll(a+1,C,o.all?1e4:0)):x&&(o.all&&(x.collapseChildren=1e4),this.addFold("...",x));return x}},this.toggleFoldWidget=function(a){var o=this.selection.getCursor().row;o=this.getRowFoldStart(o);var h=this.$toggleFoldWidget(o,{});if(!h){var d=this.getParentFoldRangeData(o,!0);if(h=d.range||d.firstRange,h){o=h.start.row;var p=this.getFoldAt(o,this.getLine(o).length,1);p?this.removeFold(p):this.addFold("...",h)}}},this.updateFoldWidgets=function(a){var o=a.start.row,h=a.end.row-o;if(h===0)this.foldWidgets[o]=null;else if(a.action=="remove")this.foldWidgets.splice(o,h+1,null);else{var d=Array(h+1);d.unshift(o,1),this.foldWidgets.splice.apply(this.foldWidgets,d)}},this.tokenizerUpdateFoldWidgets=function(a){var o=a.data;o.first!=o.last&&this.foldWidgets.length>o.first&&this.foldWidgets.splice(o.first,this.foldWidgets.length)}}i.Folding=f}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,i,r){var s=t("../token_iterator").TokenIterator,c=t("../range").Range;function l(){this.findMatchingBracket=function(u,f){if(u.column==0)return null;var a=f||this.getLine(u.row).charAt(u.column-1);if(a=="")return null;var o=a.match(/([\(\[\{])|([\)\]\}])/);return o?o[1]?this.$findClosingBracket(o[1],u):this.$findOpeningBracket(o[2],u):null},this.getBracketRange=function(u){var f=this.getLine(u.row),a=!0,o,h=f.charAt(u.column-1),d=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(d||(h=f.charAt(u.column),u={row:u.row,column:u.column+1},d=h&&h.match(/([\(\[\{])|([\)\]\}])/),a=!1),!d)return null;if(d[1]){var p=this.$findClosingBracket(d[1],u);if(!p)return null;o=c.fromPoints(u,p),a||(o.end.column++,o.start.column--),o.cursor=o.end}else{var p=this.$findOpeningBracket(d[2],u);if(!p)return null;o=c.fromPoints(p,u),a||(o.start.column++,o.end.column--),o.cursor=o.start}return o},this.getMatchingBracketRanges=function(u){var f=this.getLine(u.row),a=f.charAt(u.column-1),o=a&&a.match(/([\(\[\{])|([\)\]\}])/);if(o||(a=f.charAt(u.column),u={row:u.row,column:u.column+1},o=a&&a.match(/([\(\[\{])|([\)\]\}])/)),!o)return null;var h=new c(u.row,u.column-1,u.row,u.column),d=o[1]?this.$findClosingBracket(o[1],u):this.$findOpeningBracket(o[2],u);if(!d)return[h];var p=new c(d.row,d.column,d.row,d.column+1);return[h,p]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(u,f,a){var o=this.$brackets[u],h=1,d=new s(this,f.row,f.column),p=d.getCurrentToken();if(p||(p=d.stepForward()),!!p){a||(a=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var y=f.column-d.getCurrentTokenColumn()-2,x=p.value;;){for(;y>=0;){var g=x.charAt(y);if(g==o){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:y+d.getCurrentTokenColumn()}}else g==u&&(h+=1);y-=1}do p=d.stepBackward();while(p&&!a.test(p.type));if(p==null)break;x=p.value,y=x.length-1}return null}},this.$findClosingBracket=function(u,f,a){var o=this.$brackets[u],h=1,d=new s(this,f.row,f.column),p=d.getCurrentToken();if(p||(p=d.stepForward()),!!p){a||(a=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var y=f.column-d.getCurrentTokenColumn();;){for(var x=p.value,g=x.length;y<g;){var w=x.charAt(y);if(w==o){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:y+d.getCurrentTokenColumn()}}else w==u&&(h+=1);y+=1}do p=d.stepForward();while(p&&!a.test(p.type));if(p==null)break;y=0}return null}}}i.BracketMatch=l}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/lang"),l=t("./bidihandler").BidiHandler,u=t("./config"),f=t("./lib/event_emitter").EventEmitter,a=t("./selection").Selection,o=t("./mode/text").Mode,h=t("./range").Range,d=t("./document").Document,p=t("./background_tokenizer").BackgroundTokenizer,y=t("./search_highlight").SearchHighlight,x=function(g,w){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++x.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof g!="object"||!g.getLine)&&(g=new d(g)),this.setDocument(g),this.selection=new a(this),this.$bidiHandler=new l(this),u.resetOptions(this),this.setMode(w),u._signal("session",this)};x.$uid=0,(function(){s.implement(this,f),this.setDocument=function(S){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=S,S.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(S){if(!S){this.$docRowCache=[],this.$screenRowCache=[];return}var I=this.$docRowCache.length,D=this.$getRowCacheIndex(this.$docRowCache,S)+1;I>D&&(this.$docRowCache.splice(D,I),this.$screenRowCache.splice(D,I))},this.$getRowCacheIndex=function(S,I){for(var D=0,z=S.length-1;D<=z;){var B=D+z>>1,W=S[B];if(I>W)D=B+1;else if(I<W)z=B-1;else return B}return D-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(S){var I=S.data;this.$resetRowCache(I.start.row)},this.onChange=function(S){this.$modified=!0,this.$bidiHandler.onChange(S),this.$resetRowCache(S.start.row);var I=this.$updateInternalDataOnChange(S);!this.$fromUndo&&this.$undoManager&&(I&&I.length&&(this.$undoManager.add({action:"removeFolds",folds:I},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(S,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(S),this._signal("change",S)},this.setValue=function(S){this.doc.setValue(S),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(S){return this.bgTokenizer.getState(S)},this.getTokens=function(S){return this.bgTokenizer.getTokens(S)},this.getTokenAt=function(S,I){var D=this.bgTokenizer.getTokens(S),z,B=0;if(I==null){var W=D.length-1;B=this.getLine(S).length}else for(var W=0;W<D.length&&(B+=D[W].value.length,!(B>=I));W++);return z=D[W],z?(z.index=W,z.start=B-z.value.length,z):null},this.setUndoManager=function(S){if(this.$undoManager=S,this.$informUndoManager&&this.$informUndoManager.cancel(),S){var I=this;S.addSession(this),this.$syncInformUndoManager=function(){I.$informUndoManager.cancel(),I.mergeUndoDeltas=!1},this.$informUndoManager=c.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?c.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(S){this.setOption("useSoftTabs",S)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(S){this.setOption("tabSize",S)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(S){return this.$useSoftTabs&&S.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(S){this.setOption("navigateWithinSoftTabs",S)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(S){this.setOption("overwrite",S)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(S,I){this.$decorations[S]||(this.$decorations[S]=""),this.$decorations[S]+=" "+I,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(S,I){this.$decorations[S]=(this.$decorations[S]||"").replace(" "+I,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(S){this.$breakpoints=[];for(var I=0;I<S.length;I++)this.$breakpoints[S[I]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(S,I){I===void 0&&(I="ace_breakpoint"),I?this.$breakpoints[S]=I:delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(S){delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},this.addMarker=function(S,I,D,z){var B=this.$markerId++,W={range:S,type:D||"line",renderer:typeof D=="function"?D:null,clazz:I,inFront:!!z,id:B};return z?(this.$frontMarkers[B]=W,this._signal("changeFrontMarker")):(this.$backMarkers[B]=W,this._signal("changeBackMarker")),B},this.addDynamicMarker=function(S,I){if(S.update){var D=this.$markerId++;return S.id=D,S.inFront=!!I,I?(this.$frontMarkers[D]=S,this._signal("changeFrontMarker")):(this.$backMarkers[D]=S,this._signal("changeBackMarker")),S}},this.removeMarker=function(S){var I=this.$frontMarkers[S]||this.$backMarkers[S];if(I){var D=I.inFront?this.$frontMarkers:this.$backMarkers;delete D[S],this._signal(I.inFront?"changeFrontMarker":"changeBackMarker")}},this.getMarkers=function(S){return S?this.$frontMarkers:this.$backMarkers},this.highlight=function(S){if(!this.$searchHighlight){var I=new y(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(I)}this.$searchHighlight.setRegexp(S)},this.highlightLines=function(S,I,D,z){typeof I!="number"&&(D=I,I=S),D||(D="ace_step");var B=new h(S,0,I,1/0);return B.id=this.addMarker(B,D,"fullLine",z),B},this.setAnnotations=function(S){this.$annotations=S,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(S){var I=S.match(/^.*?(\r?\n)/m);I?this.$autoNewLine=I[1]:this.$autoNewLine=`
`},this.getWordRange=function(S,I){var D=this.getLine(S),z=!1;if(I>0&&(z=!!D.charAt(I-1).match(this.tokenRe)),z||(z=!!D.charAt(I).match(this.tokenRe)),z)var B=this.tokenRe;else if(/^\s+$/.test(D.slice(I-1,I+1)))var B=/\s/;else var B=this.nonTokenRe;var W=I;if(W>0){do W--;while(W>=0&&D.charAt(W).match(B));W++}for(var H=I;H<D.length&&D.charAt(H).match(B);)H++;return new h(S,W,S,H)},this.getAWordRange=function(S,I){for(var D=this.getWordRange(S,I),z=this.getLine(D.end.row);z.charAt(D.end.column).match(/[ \t]/);)D.end.column+=1;return D},this.setNewLineMode=function(S){this.doc.setNewLineMode(S)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(S){this.setOption("useWorker",S)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(S){var I=S.data;this.bgTokenizer.start(I.first),this._signal("tokenizerUpdate",S)},this.$modes=u.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(S,I){if(S&&typeof S=="object"){if(S.getTokenizer)return this.$onChangeMode(S);var D=S,z=D.path}else z=S||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new o),this.$modes[z]&&!D){this.$onChangeMode(this.$modes[z]),I&&I();return}this.$modeId=z,u.loadModule(["mode",z],(function(B){if(this.$modeId!==z)return I&&I();this.$modes[z]&&!D?this.$onChangeMode(this.$modes[z]):B&&B.Mode&&(B=new B.Mode(D),D||(this.$modes[z]=B,B.$id=z),this.$onChangeMode(B)),I&&I()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(S,I){if(I||(this.$modeId=S.$id),this.$mode!==S){var D=this.$mode;this.$mode=S,this.$stopWorker(),this.$useWorker&&this.$startWorker();var z=S.getTokenizer();if(z.on!==void 0){var B=this.onReloadTokenizer.bind(this);z.on("update",B)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(z);else{this.bgTokenizer=new p(z);var W=this;this.bgTokenizer.on("update",function(H){W._signal("tokenizerUpdate",H)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=S.tokenRe,this.nonTokenRe=S.nonTokenRe,I||(S.attachToSession&&S.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(S.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:D,mode:S}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(S){u.warn("Could not load worker",S),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(S){this.$scrollTop===S||isNaN(S)||(this.$scrollTop=S,this._signal("changeScrollTop",S))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(S){this.$scrollLeft===S||isNaN(S)||(this.$scrollLeft=S,this._signal("changeScrollLeft",S))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var S=0;return this.lineWidgets.forEach(function(I){I&&I.screenWidth>S&&(S=I.screenWidth)}),this.lineWidgetWidth=S},this.$computeWidth=function(S){if(this.$modified||S){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var I=this.doc.getAllLines(),D=this.$rowLengthCache,z=0,B=0,W=this.$foldData[B],H=W?W.start.row:1/0,J=I.length,G=0;G<J;G++){if(G>H){if(G=W.end.row+1,G>=J)break;W=this.$foldData[B++],H=W?W.start.row:1/0}D[G]==null&&(D[G]=this.$getStringScreenWidth(I[G])[0]),D[G]>z&&(z=D[G])}this.screenWidth=z}},this.getLine=function(S){return this.doc.getLine(S)},this.getLines=function(S,I){return this.doc.getLines(S,I)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(S){return this.doc.getTextRange(S||this.selection.getRange())},this.insert=function(S,I){return this.doc.insert(S,I)},this.remove=function(S){return this.doc.remove(S)},this.removeFullLines=function(S,I){return this.doc.removeFullLines(S,I)},this.undoChanges=function(S,I){if(S.length){this.$fromUndo=!0;for(var D=S.length-1;D!=-1;D--){var z=S[D];z.action=="insert"||z.action=="remove"?this.doc.revertDelta(z):z.folds&&this.addFolds(z.folds)}!I&&this.$undoSelect&&(S.selectionBefore?this.selection.fromJSON(S.selectionBefore):this.selection.setRange(this.$getUndoSelection(S,!0))),this.$fromUndo=!1}},this.redoChanges=function(S,I){if(S.length){this.$fromUndo=!0;for(var D=0;D<S.length;D++){var z=S[D];(z.action=="insert"||z.action=="remove")&&this.doc.$safeApplyDelta(z)}!I&&this.$undoSelect&&(S.selectionAfter?this.selection.fromJSON(S.selectionAfter):this.selection.setRange(this.$getUndoSelection(S,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(S){this.$undoSelect=S},this.$getUndoSelection=function(S,I){function D(J){return I?J.action!=="insert":J.action==="insert"}for(var z,B,W=0;W<S.length;W++){var H=S[W];if(H.start){if(!z){D(H)?z=h.fromPoints(H.start,H.end):z=h.fromPoints(H.start,H.start);continue}D(H)?(B=H.start,z.compare(B.row,B.column)==-1&&z.setStart(B),B=H.end,z.compare(B.row,B.column)==1&&z.setEnd(B)):(B=H.start,z.compare(B.row,B.column)==-1&&(z=h.fromPoints(H.start,H.start)))}}return z},this.replace=function(S,I){return this.doc.replace(S,I)},this.moveText=function(S,I,D){var z=this.getTextRange(S),B=this.getFoldsInRange(S),W=h.fromPoints(I,I);if(!D){this.remove(S);var H=S.start.row-S.end.row,J=H?-S.end.column:S.start.column-S.end.column;J&&(W.start.row==S.end.row&&W.start.column>S.end.column&&(W.start.column+=J),W.end.row==S.end.row&&W.end.column>S.end.column&&(W.end.column+=J)),H&&W.start.row>=S.end.row&&(W.start.row+=H,W.end.row+=H)}if(W.end=this.insert(W.start,z),B.length){var G=S.start,K=W.start,H=K.row-G.row,J=K.column-G.column;this.addFolds(B.map(function(le){return le=le.clone(),le.start.row==G.row&&(le.start.column+=J),le.end.row==G.row&&(le.end.column+=J),le.start.row+=H,le.end.row+=H,le}))}return W},this.indentRows=function(S,I,D){D=D.replace(/\t/g,this.getTabString());for(var z=S;z<=I;z++)this.doc.insertInLine({row:z,column:0},D)},this.outdentRows=function(S){for(var I=S.collapseRows(),D=new h(0,0,0,0),z=this.getTabSize(),B=I.start.row;B<=I.end.row;++B){var W=this.getLine(B);D.start.row=B,D.end.row=B;for(var H=0;H<z&&W.charAt(H)==" ";++H);H<z&&W.charAt(H)=="	"?(D.start.column=H,D.end.column=H+1):(D.start.column=0,D.end.column=H),this.remove(D)}},this.$moveLines=function(S,I,D){if(S=this.getRowFoldStart(S),I=this.getRowFoldEnd(I),D<0){var z=this.getRowFoldStart(S+D);if(z<0)return 0;var B=z-S}else if(D>0){var z=this.getRowFoldEnd(I+D);if(z>this.doc.getLength()-1)return 0;var B=z-I}else{S=this.$clipRowToDocument(S),I=this.$clipRowToDocument(I);var B=I-S+1}var W=new h(S,0,I,Number.MAX_VALUE),H=this.getFoldsInRange(W).map(function(G){return G=G.clone(),G.start.row+=B,G.end.row+=B,G}),J=D==0?this.doc.getLines(S,I):this.doc.removeFullLines(S,I);return this.doc.insertFullLines(S+B,J),H.length&&this.addFolds(H),B},this.moveLinesUp=function(S,I){return this.$moveLines(S,I,-1)},this.moveLinesDown=function(S,I){return this.$moveLines(S,I,1)},this.duplicateLines=function(S,I){return this.$moveLines(S,I,0)},this.$clipRowToDocument=function(S){return Math.max(0,Math.min(S,this.doc.getLength()-1))},this.$clipColumnToRow=function(S,I){return I<0?0:Math.min(this.doc.getLine(S).length,I)},this.$clipPositionToDocument=function(S,I){if(I=Math.max(0,I),S<0)S=0,I=0;else{var D=this.doc.getLength();S>=D?(S=D-1,I=this.doc.getLine(D-1).length):I=Math.min(this.doc.getLine(S).length,I)}return{row:S,column:I}},this.$clipRangeToDocument=function(S){S.start.row<0?(S.start.row=0,S.start.column=0):S.start.column=this.$clipColumnToRow(S.start.row,S.start.column);var I=this.doc.getLength()-1;return S.end.row>I?(S.end.row=I,S.end.column=this.doc.getLine(I).length):S.end.column=this.$clipColumnToRow(S.end.row,S.end.column),S},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(S){if(S!=this.$useWrapMode){if(this.$useWrapMode=S,this.$modified=!0,this.$resetRowCache(0),S){var I=this.getLength();this.$wrapData=Array(I),this.$updateWrapData(0,I-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(S,I){(this.$wrapLimitRange.min!==S||this.$wrapLimitRange.max!==I)&&(this.$wrapLimitRange={min:S,max:I},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(S,I){var D=this.$wrapLimitRange;D.max<0&&(D={min:I,max:I});var z=this.$constrainWrapLimit(S,D.min,D.max);return z!=this.$wrapLimit&&z>1?(this.$wrapLimit=z,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(S,I,D){return I&&(S=Math.max(I,S)),D&&(S=Math.min(D,S)),S},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(S){this.setWrapLimitRange(S,S)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(S){var I=this.$useWrapMode,D=S.action,z=S.start,B=S.end,W=z.row,H=B.row,J=H-W,G=null;if(this.$updating=!0,J!=0)if(D==="remove"){this[I?"$wrapData":"$rowLengthCache"].splice(W,J);var K=this.$foldData;G=this.getFoldsInRange(S),this.removeFolds(G);var Y=this.getFoldLine(B.row),ne=0;if(Y){Y.addRemoveChars(B.row,B.column,z.column-B.column),Y.shiftRow(-J);var le=this.getFoldLine(W);le&&le!==Y&&(le.merge(Y),Y=le),ne=K.indexOf(Y)+1}for(ne;ne<K.length;ne++){var Y=K[ne];Y.start.row>=B.row&&Y.shiftRow(-J)}H=W}else{var j=Array(J);j.unshift(W,0);var re=I?this.$wrapData:this.$rowLengthCache;re.splice.apply(re,j);var K=this.$foldData,Y=this.getFoldLine(W),ne=0;if(Y){var fe=Y.range.compareInside(z.row,z.column);fe==0?(Y=Y.split(z.row,z.column),Y&&(Y.shiftRow(J),Y.addRemoveChars(H,0,B.column-z.column))):fe==-1&&(Y.addRemoveChars(W,0,B.column-z.column),Y.shiftRow(J)),ne=K.indexOf(Y)+1}for(ne;ne<K.length;ne++){var Y=K[ne];Y.start.row>=W&&Y.shiftRow(J)}}else{J=Math.abs(S.start.column-S.end.column),D==="remove"&&(G=this.getFoldsInRange(S),this.removeFolds(G),J=-J);var Y=this.getFoldLine(W);Y&&Y.addRemoveChars(W,z.column,J)}return I&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,I?this.$updateWrapData(W,H):this.$updateRowLengthCache(W,H),G},this.$updateRowLengthCache=function(S,I,D){this.$rowLengthCache[S]=null,this.$rowLengthCache[I]=null},this.$updateWrapData=function(S,I){var D=this.doc.getAllLines(),z=this.getTabSize(),B=this.$wrapData,W=this.$wrapLimit,H,J,G=S;for(I=Math.min(I,D.length-1);G<=I;)J=this.getFoldLine(G,J),J?(H=[],J.walk((function(K,Y,ne,le){var j;if(K!=null){j=this.$getDisplayTokens(K,H.length),j[0]=C;for(var re=1;re<j.length;re++)j[re]=M}else j=this.$getDisplayTokens(D[Y].substring(le,ne),H.length);H=H.concat(j)}).bind(this),J.end.row,D[J.end.row].length+1),B[J.start.row]=this.$computeWrapSplits(H,W,z),G=J.end.row+1):(H=this.$getDisplayTokens(D[G]),B[G]=this.$computeWrapSplits(H,W,z),G++)};var g=1,w=2,C=3,M=4,_=9,E=10,R=11,A=12;this.$computeWrapSplits=function(S,I,D){if(S.length==0)return[];var z=[],B=S.length,W=0,H=0,J=this.$wrapAsCode,G=this.$indentedSoftWrap,K=I<=Math.max(2*D,8)||G===!1?0:Math.floor(I/2);function Y(){var fe=0;if(K===0)return fe;if(G)for(var ve=0;ve<S.length;ve++){var ye=S[ve];if(ye==E)fe+=1;else if(ye==R)fe+=D;else{if(ye==A)continue;break}}return J&&G!==!1&&(fe+=D),Math.min(fe,K)}function ne(fe){for(var ve=fe-W,ye=W;ye<fe;ye++){var ze=S[ye];(ze===12||ze===2)&&(ve-=1)}z.length||(le=Y(),z.indent=le),H+=ve,z.push(H),W=fe}for(var le=0;B-W>I-le;){var j=W+I-le;if(S[j-1]>=E&&S[j]>=E){ne(j);continue}if(S[j]==C||S[j]==M){for(j;j!=W-1&&S[j]!=C;j--);if(j>W){ne(j);continue}for(j=W+I,j;j<S.length&&S[j]==M;j++);if(j==S.length)break;ne(j);continue}for(var re=Math.max(j-(I-(I>>2)),W-1);j>re&&S[j]<C;)j--;if(J){for(;j>re&&S[j]<C;)j--;for(;j>re&&S[j]==_;)j--}else for(;j>re&&S[j]<E;)j--;if(j>re){ne(++j);continue}j=W+I,S[j]==w&&j--,ne(j-le)}return z},this.$getDisplayTokens=function(S,I){var D=[],z;I=I||0;for(var B=0;B<S.length;B++){var W=S.charCodeAt(B);if(W==9){z=this.getScreenTabSize(D.length+I),D.push(R);for(var H=1;H<z;H++)D.push(A)}else W==32?D.push(E):W>39&&W<48||W>57&&W<64?D.push(_):W>=4352&&T(W)?D.push(g,w):D.push(g)}return D},this.$getStringScreenWidth=function(S,I,D){if(I==0)return[0,0];I==null&&(I=1/0),D=D||0;var z,B;for(B=0;B<S.length&&(z=S.charCodeAt(B),z==9?D+=this.getScreenTabSize(D):z>=4352&&T(z)?D+=2:D+=1,!(D>I));B++);return[D,B]},this.lineWidgets=null,this.getRowLength=function(S){var I=1;return this.lineWidgets&&(I+=this.lineWidgets[S]&&this.lineWidgets[S].rowCount||0),!this.$useWrapMode||!this.$wrapData[S]?I:this.$wrapData[S].length+I},this.getRowLineCount=function(S){return!this.$useWrapMode||!this.$wrapData[S]?1:this.$wrapData[S].length+1},this.getRowWrapIndent=function(S){if(this.$useWrapMode){var I=this.screenToDocumentPosition(S,Number.MAX_VALUE),D=this.$wrapData[I.row];return D.length&&D[0]<I.column?D.indent:0}else return 0},this.getScreenLastRowColumn=function(S){var I=this.screenToDocumentPosition(S,Number.MAX_VALUE);return this.documentToScreenColumn(I.row,I.column)},this.getDocumentLastRowColumn=function(S,I){var D=this.documentToScreenRow(S,I);return this.getScreenLastRowColumn(D)},this.getDocumentLastRowColumnPosition=function(S,I){var D=this.documentToScreenRow(S,I);return this.screenToDocumentPosition(D,Number.MAX_VALUE/10)},this.getRowSplitData=function(S){if(this.$useWrapMode)return this.$wrapData[S]},this.getScreenTabSize=function(S){return this.$tabSize-(S%this.$tabSize|0)},this.screenToDocumentRow=function(S,I){return this.screenToDocumentPosition(S,I).row},this.screenToDocumentColumn=function(S,I){return this.screenToDocumentPosition(S,I).column},this.screenToDocumentPosition=function(S,I,D){if(S<0)return{row:0,column:0};var z,B=0,W=0,H,J=0,G=0,K=this.$screenRowCache,Y=this.$getRowCacheIndex(K,S),ne=K.length;if(ne&&Y>=0)var J=K[Y],B=this.$docRowCache[Y],le=S>K[ne-1];else var le=!ne;for(var j=this.getLength()-1,re=this.getNextFoldLine(B),fe=re?re.start.row:1/0;J<=S&&(G=this.getRowLength(B),!(J+G>S||B>=j));)J+=G,B++,B>fe&&(B=re.end.row+1,re=this.getNextFoldLine(B,re),fe=re?re.start.row:1/0),le&&(this.$docRowCache.push(B),this.$screenRowCache.push(J));if(re&&re.start.row<=B)z=this.getFoldDisplayLine(re),B=re.start.row;else{if(J+G<=S||B>j)return{row:j,column:this.getLine(j).length};z=this.getLine(B),re=null}var ve=0,ye=Math.floor(S-J);if(this.$useWrapMode){var ze=this.$wrapData[B];ze&&(H=ze[ye],ye>0&&ze.length&&(ve=ze.indent,W=ze[ye-1]||ze[ze.length-1],z=z.substring(W)))}return D!==void 0&&this.$bidiHandler.isBidiRow(J+ye,B,ye)&&(I=this.$bidiHandler.offsetToCol(D)),W+=this.$getStringScreenWidth(z,I-ve)[1],this.$useWrapMode&&W>=H&&(W=H-1),re?re.idxToPosition(W):{row:B,column:W}},this.documentToScreenPosition=function(S,I){if(typeof I>"u")var D=this.$clipPositionToDocument(S.row,S.column);else D=this.$clipPositionToDocument(S,I);S=D.row,I=D.column;var z=0,B=null,W=null;W=this.getFoldAt(S,I,1),W&&(S=W.start.row,I=W.start.column);var H,J=0,G=this.$docRowCache,K=this.$getRowCacheIndex(G,S),Y=G.length;if(Y&&K>=0)var J=G[K],z=this.$screenRowCache[K],ne=S>G[Y-1];else var ne=!Y;for(var le=this.getNextFoldLine(J),j=le?le.start.row:1/0;J<S;){if(J>=j){if(H=le.end.row+1,H>S)break;le=this.getNextFoldLine(H,le),j=le?le.start.row:1/0}else H=J+1;z+=this.getRowLength(J),J=H,ne&&(this.$docRowCache.push(J),this.$screenRowCache.push(z))}var re="";le&&J>=j?(re=this.getFoldDisplayLine(le,S,I),B=le.start.row):(re=this.getLine(S).substring(0,I),B=S);var fe=0;if(this.$useWrapMode){var ve=this.$wrapData[B];if(ve){for(var ye=0;re.length>=ve[ye];)z++,ye++;re=re.substring(ve[ye-1]||0,re.length),fe=ye>0?ve.indent:0}}return this.lineWidgets&&this.lineWidgets[J]&&this.lineWidgets[J].rowsAbove&&(z+=this.lineWidgets[J].rowsAbove),{row:z,column:fe+this.$getStringScreenWidth(re)[0]}},this.documentToScreenColumn=function(S,I){return this.documentToScreenPosition(S,I).column},this.documentToScreenRow=function(S,I){return this.documentToScreenPosition(S,I).row},this.getScreenLength=function(){var S=0,I=null;if(this.$useWrapMode)for(var B=this.$wrapData.length,W=0,z=0,I=this.$foldData[z++],H=I?I.start.row:1/0;W<B;){var J=this.$wrapData[W];S+=J?J.length+1:1,W++,W>H&&(W=I.end.row+1,I=this.$foldData[z++],H=I?I.start.row:1/0)}else{S=this.getLength();for(var D=this.$foldData,z=0;z<D.length;z++)I=D[z],S-=I.end.row-I.start.row}return this.lineWidgets&&(S+=this.$getWidgetScreenLength()),S},this.$setFontMetrics=function(S){this.$enableVarChar&&(this.$getStringScreenWidth=function(I,D,z){if(D===0)return[0,0];D||(D=1/0),z=z||0;var B,W;for(W=0;W<I.length&&(B=I.charAt(W),B==="	"?z+=this.getScreenTabSize(z):z+=S.getCharacterWidth(B),!(z>D));W++);return[z,W]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=T;function T(S){return S<4352?!1:S>=4352&&S<=4447||S>=4515&&S<=4519||S>=4602&&S<=4607||S>=9001&&S<=9002||S>=11904&&S<=11929||S>=11931&&S<=12019||S>=12032&&S<=12245||S>=12272&&S<=12283||S>=12288&&S<=12350||S>=12353&&S<=12438||S>=12441&&S<=12543||S>=12549&&S<=12589||S>=12593&&S<=12686||S>=12688&&S<=12730||S>=12736&&S<=12771||S>=12784&&S<=12830||S>=12832&&S<=12871||S>=12880&&S<=13054||S>=13056&&S<=19903||S>=19968&&S<=42124||S>=42128&&S<=42182||S>=43360&&S<=43388||S>=44032&&S<=55203||S>=55216&&S<=55238||S>=55243&&S<=55291||S>=63744&&S<=64255||S>=65040&&S<=65049||S>=65072&&S<=65106||S>=65108&&S<=65126||S>=65128&&S<=65131||S>=65281&&S<=65376||S>=65504&&S<=65510}}).call(x.prototype),t("./edit_session/folding").Folding.call(x.prototype),t("./edit_session/bracket_match").BracketMatch.call(x.prototype),u.defineOptions(x.prototype,"session",{wrap:{set:function(g){if(!g||g=="off"?g=!1:g=="free"?g=!0:g=="printMargin"?g=-1:typeof g=="string"&&(g=parseInt(g,10)||!1),this.$wrap!=g)if(this.$wrap=g,!g)this.setUseWrapMode(!1);else{var w=typeof g=="number"?g:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(g){g=g=="auto"?this.$mode.type!="text":g!="text",g!=this.$wrapAsCode&&(this.$wrapAsCode=g,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(g){this.$useWorker=g,this.$stopWorker(),g&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(g){g=parseInt(g),g>0&&this.$tabSize!==g&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=g,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(g){this.setFoldStyle(g)},handlesSet:!0},overwrite:{set:function(g){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(g){this.doc.setNewLineMode(g)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(g){this.setMode(g)},get:function(){return this.$modeId},handlesSet:!0}}),i.EditSession=x}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,i,r){var s=t("./lib/lang"),c=t("./lib/oop"),l=t("./range").Range,u=function(){this.$options={}};(function(){this.set=function(a){return c.mixin(this.$options,a),this},this.getOptions=function(){return s.copyObject(this.$options)},this.setOptions=function(a){this.$options=a},this.find=function(a){var o=this.$options,h=this.$matchIterator(a,o);if(!h)return!1;var d=null;return h.forEach(function(p,y,x,g){return d=new l(p,y,x,g),y==g&&o.start&&o.start.start&&o.skipCurrent!=!1&&d.isEqual(o.start)?(d=null,!1):!0}),d},this.findAll=function(a){var o=this.$options;if(!o.needle)return[];this.$assembleRegExp(o);var h=o.range,d=h?a.getLines(h.start.row,h.end.row):a.doc.getAllLines(),p=[],y=o.re;if(o.$isMultiLine){var x=y.length,g=d.length-x,w;e:for(var C=y.offset||0;C<=g;C++){for(var M=0;M<x;M++)if(d[C+M].search(y[M])==-1)continue e;var _=d[C],E=d[C+x-1],R=_.length-_.match(y[0])[0].length,A=E.match(y[x-1])[0].length;w&&w.end.row===C&&w.end.column>R||(p.push(w=new l(C,R,C+x-1,A)),x>2&&(C=C+x-2))}}else for(var T=0;T<d.length;T++)for(var S=s.getMatchOffsets(d[T],y),M=0;M<S.length;M++){var I=S[M];p.push(new l(T,I.offset,T,I.offset+I.length))}if(h){for(var D=h.start.column,z=h.start.column,T=0,M=p.length-1;T<M&&p[T].start.column<D&&p[T].start.row==h.start.row;)T++;for(;T<M&&p[M].end.column>z&&p[M].end.row==h.end.row;)M--;for(p=p.slice(T,M+1),T=0,M=p.length;T<M;T++)p[T].start.row+=h.start.row,p[T].end.row+=h.start.row}return p},this.replace=function(a,o){var h=this.$options,d=this.$assembleRegExp(h);if(h.$isMultiLine)return o;if(d){var p=d.exec(a);if(!p||p[0].length!=a.length)return null;if(o=a.replace(d,o),h.preserveCase){o=o.split("");for(var y=Math.min(a.length,a.length);y--;){var x=a[y];x&&x.toLowerCase()!=x?o[y]=o[y].toUpperCase():o[y]=o[y].toLowerCase()}o=o.join("")}return o}},this.$assembleRegExp=function(a,o){if(a.needle instanceof RegExp)return a.re=a.needle;var h=a.needle;if(!a.needle)return a.re=!1;a.regExp||(h=s.escapeRegExp(h)),a.wholeWord&&(h=f(h,a));var d=a.caseSensitive?"gm":"gmi";if(a.$isMultiLine=!o&&/[\n\r]/.test(h),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(h,d);try{var p=new RegExp(h,d)}catch{p=!1}return a.re=p},this.$assembleMultilineRegExp=function(a,o){for(var h=a.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),d=[],p=0;p<h.length;p++)try{d.push(new RegExp(h[p],o))}catch{return!1}return d},this.$matchIterator=function(a,o){var h=this.$assembleRegExp(o);if(!h)return!1;var d=o.backwards==!0,p=o.skipCurrent!=!1,y=o.range,x=o.start;x||(x=y?y[d?"end":"start"]:a.selection.getRange()),x.start&&(x=x[p!=d?"end":"start"]);var g=y?y.start.row:0,w=y?y.end.row:a.getLength()-1;if(d)var C=function(E){var R=x.row;if(!_(R,x.column,E)){for(R--;R>=g;R--)if(_(R,Number.MAX_VALUE,E))return;if(o.wrap!=!1){for(R=w,g=x.row;R>=g;R--)if(_(R,Number.MAX_VALUE,E))return}}};else var C=function(R){var A=x.row;if(!_(A,x.column,R)){for(A=A+1;A<=w;A++)if(_(A,0,R))return;if(o.wrap!=!1){for(A=g,w=x.row;A<=w;A++)if(_(A,0,R))return}}};if(o.$isMultiLine)var M=h.length,_=function(E,R,A){var T=d?E-M+1:E;if(!(T<0)){var S=a.getLine(T),I=S.search(h[0]);if(!(!d&&I<R||I===-1)){for(var D=1;D<M;D++)if(S=a.getLine(T+D),S.search(h[D])==-1)return;var z=S.match(h[M-1])[0].length;if(!(d&&z>R)&&A(T,I,T+M-1,z))return!0}}};else if(d)var _=function(R,A,T){var S=a.getLine(R),I=[],D,z=0;for(h.lastIndex=0;D=h.exec(S);){var B=D[0].length;if(z=D.index,!B){if(z>=S.length)break;h.lastIndex=z+=1}if(D.index+B>A)break;I.push(D.index,B)}for(var W=I.length-1;W>=0;W-=2){var H=I[W-1],B=I[W];if(T(R,H,R,H+B))return!0}};else var _=function(R,A,T){var S=a.getLine(R),I,D;for(h.lastIndex=A;D=h.exec(S);){var z=D[0].length;if(I=D.index,T(R,I,R,I+z))return!0;if(!z&&(h.lastIndex=I+=1,I>=S.length))return!1}};return{forEach:C}}}).call(u.prototype);function f(a,o){function h(d){return/\w/.test(d)||o.regExp?"\\b":""}return h(a[0])+a+h(a[a.length-1])}i.Search=u}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,i,r){var s=t("../lib/keys"),c=t("../lib/useragent"),l=s.KEY_MODS;function u(a,o){this.platform=o||(c.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(a),this.$singleCommand=!0}function f(a,o){u.call(this,a,o),this.$singleCommand=!1}f.prototype=u.prototype,(function(){this.addCommand=function(o){this.commands[o.name]&&this.removeCommand(o),this.commands[o.name]=o,o.bindKey&&this._buildKeyHash(o)},this.removeCommand=function(o,h){var d=o&&(typeof o=="string"?o:o.name);o=this.commands[d],h||delete this.commands[d];var p=this.commandKeyBinding;for(var y in p){var x=p[y];if(x==o)delete p[y];else if(Array.isArray(x)){var g=x.indexOf(o);g!=-1&&(x.splice(g,1),x.length==1&&(p[y]=x[0]))}}},this.bindKey=function(o,h,d){if(typeof o=="object"&&o&&(d==null&&(d=o.position),o=o[this.platform]),!!o){if(typeof h=="function")return this.addCommand({exec:h,bindKey:o,name:h.name||o});o.split("|").forEach(function(p){var y="";if(p.indexOf(" ")!=-1){var x=p.split(/\s+/);p=x.pop(),x.forEach(function(C){var M=this.parseKeys(C),_=l[M.hashId]+M.key;y+=(y?" ":"")+_,this._addCommandToBinding(y,"chainKeys")},this),y+=" "}var g=this.parseKeys(p),w=l[g.hashId]+g.key;this._addCommandToBinding(y+w,h,d)},this)}};function a(o){return typeof o=="object"&&o.bindKey&&o.bindKey.position||(o.isDefault?-100:0)}this._addCommandToBinding=function(o,h,d){var p=this.commandKeyBinding,y;if(!h)delete p[o];else if(!p[o]||this.$singleCommand)p[o]=h;else{Array.isArray(p[o])?(y=p[o].indexOf(h))!=-1&&p[o].splice(y,1):p[o]=[p[o]],typeof d!="number"&&(d=a(h));var x=p[o];for(y=0;y<x.length;y++){var g=x[y],w=a(g);if(w>d)break}x.splice(y,0,h)}},this.addCommands=function(o){o&&Object.keys(o).forEach(function(h){var d=o[h];if(d){if(typeof d=="string")return this.bindKey(d,h);typeof d=="function"&&(d={exec:d}),typeof d=="object"&&(d.name||(d.name=h),this.addCommand(d))}},this)},this.removeCommands=function(o){Object.keys(o).forEach(function(h){this.removeCommand(o[h])},this)},this.bindKeys=function(o){Object.keys(o).forEach(function(h){this.bindKey(h,o[h])},this)},this._buildKeyHash=function(o){this.bindKey(o.bindKey,o)},this.parseKeys=function(o){var h=o.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(w){return w}),d=h.pop(),p=s[d];if(s.FUNCTION_KEYS[p])d=s.FUNCTION_KEYS[p].toLowerCase();else if(h.length){if(h.length==1&&h[0]=="shift")return{key:d.toUpperCase(),hashId:-1}}else return{key:d,hashId:-1};for(var y=0,x=h.length;x--;){var g=s.KEY_MODS[h[x]];if(g==null)return typeof console<"u"&&console.error("invalid modifier "+h[x]+" in "+o),!1;y|=g}return{key:d,hashId:y}},this.findKeyCommand=function(h,d){var p=l[h]+d;return this.commandKeyBinding[p]},this.handleKeyboard=function(o,h,d,p){if(!(p<0)){var y=l[h]+d,x=this.commandKeyBinding[y];return o.$keyChain&&(o.$keyChain+=" "+y,x=this.commandKeyBinding[o.$keyChain]||x),x&&(x=="chainKeys"||x[x.length-1]=="chainKeys")?(o.$keyChain=o.$keyChain||y,{command:"null"}):(o.$keyChain&&((!h||h==4)&&d.length==1?o.$keyChain=o.$keyChain.slice(0,-y.length-1):(h==-1||p>0)&&(o.$keyChain="")),{command:x})}},this.getStatusText=function(o,h){return h.$keyChain||""}}).call(u.prototype),i.HashHandler=u,i.MultiHashHandler=f}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,i,r){var s=t("../lib/oop"),c=t("../keyboard/hash_handler").MultiHashHandler,l=t("../lib/event_emitter").EventEmitter,u=function(f,a){c.call(this,a,f),this.byName=this.commands,this.setDefaultHandler("exec",function(o){return o.command.exec(o.editor,o.args||{})})};s.inherits(u,c),(function(){s.implement(this,l),this.exec=function(f,a,o){if(Array.isArray(f)){for(var h=f.length;h--;)if(this.exec(f[h],a,o))return!0;return!1}if(typeof f=="string"&&(f=this.commands[f]),!f||a&&a.$readOnly&&!f.readOnly||this.$checkCommandState!=!1&&f.isAvailable&&!f.isAvailable(a))return!1;var d={editor:a,command:f,args:o};return d.returnValue=this._emit("exec",d),this._signal("afterExec",d),d.returnValue!==!1},this.toggleRecording=function(f){if(!this.$inReplay)return f&&f._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(a){this.macro.push([a.command,a.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(f){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(f);try{this.$inReplay=!0,this.macro.forEach(function(a){typeof a=="string"?this.exec(a,f):this.exec(a[0],f,a[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(f){return f.map(function(a){return typeof a[0]!="string"&&(a[0]=a[0].name),a[1]||(a=a[0]),a})}}).call(u.prototype),i.CommandManager=u}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,i,r){var s=t("../lib/lang"),c=t("../config"),l=t("../range").Range;function u(a,o){return{win:a,mac:o}}i.commands=[{name:"showSettingsMenu",bindKey:u("Ctrl-,","Command-,"),exec:function(a){c.loadModule("ace/ext/settings_menu",function(o){o.init(a),a.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:u("Alt-E","F4"),exec:function(a){c.loadModule("./ext/error_marker",function(o){o.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:u("Alt-Shift-E","Shift-F4"),exec:function(a){c.loadModule("./ext/error_marker",function(o){o.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:u("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:u(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:u("Ctrl-L","Command-L"),exec:function(a,o){typeof o=="number"&&!isNaN(o)&&a.gotoLine(o),a.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:u("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:u("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:u("F2","F2"),exec:function(a){a.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:u("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:u(null,"Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:u(null,"Ctrl-Command-Option-0"),exec:function(a){a.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:u("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll(),a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:u("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:u("Ctrl-K","Command-G"),exec:function(a){a.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:u("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:u("Alt-K","Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:u("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:u("Ctrl-F","Command-F"),exec:function(a){c.loadModule("ace/ext/searchbox",function(o){o.Search(a)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:u("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:u("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:u("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:u("Up","Up|Ctrl-P"),exec:function(a,o){a.navigateUp(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:u("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:u("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:u("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:u("Down","Down|Ctrl-N"),exec:function(a,o){a.navigateDown(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:u("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:u("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:u("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:u("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:u("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:u("Left","Left|Ctrl-B"),exec:function(a,o){a.navigateLeft(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:u("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:u("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:u("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:u("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:u("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:u("Right","Right|Ctrl-F"),exec:function(a,o){a.navigateRight(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:u(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:u("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:u(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:u("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:u("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:u("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:u("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:u("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:u("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(a){a.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:u("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(a){a.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:u(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(a){},readOnly:!0},{name:"cut",description:"Cut",exec:function(a){var o=a.$copyWithEmptySelection&&a.selection.isEmpty(),h=o?a.selection.getLineRange():a.selection.getRange();a._emit("cut",h),h.isEmpty()||a.session.remove(h),a.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(a,o){a.$handlePaste(o)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:u("Ctrl-D","Command-D"),exec:function(a){a.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:u("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:u("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:u("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:u("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:u("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:u("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:u("Ctrl-H","Command-Option-F"),exec:function(a){c.loadModule("ace/ext/searchbox",function(o){o.Search(a,!0)})}},{name:"undo",description:"Undo",bindKey:u("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",description:"Redo",bindKey:u("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:u("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:u("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:u("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:u("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:u("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:u("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:u("Shift-Delete",null),exec:function(a){if(a.selection.isEmpty())a.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:u("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:u("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:u("Ctrl-Shift-Backspace",null),exec:function(a){var o=a.selection.getRange();o.start.column=0,a.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:u("Ctrl-Shift-Delete",null),exec:function(a){var o=a.selection.getRange();o.end.column=Number.MAX_VALUE,a.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:u("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:u("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:u("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:u("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:u("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:u("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(a,o){a.insert(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(a,o){a.insert(s.stringRepeat(o.text||"",o.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:u(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:u("Alt-Shift-X","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:u("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:u("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:u(null,null),exec:function(a){a.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:u("Ctrl-Shift-L","Command-Shift-L"),exec:function(a){var o=a.selection.getRange();o.start.column=o.end.column=0,o.end.row++,a.selection.setRange(o,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:u(null,null),exec:function(a){for(var o=a.selection.isBackwards(),h=o?a.selection.getSelectionLead():a.selection.getSelectionAnchor(),d=o?a.selection.getSelectionAnchor():a.selection.getSelectionLead(),p=a.session.doc.getLine(h.row).length,y=a.session.doc.getTextRange(a.selection.getRange()),x=y.replace(/\n\s*/," ").length,g=a.session.doc.getLine(h.row),w=h.row+1;w<=d.row+1;w++){var C=s.stringTrimLeft(s.stringTrimRight(a.session.doc.getLine(w)));C.length!==0&&(C=" "+C),g+=C}d.row+1<a.session.doc.getLength()-1&&(g+=a.session.doc.getNewLineCharacter()),a.clearSelection(),a.session.doc.replace(new l(h.row,0,d.row+2,0),g),x>0?(a.selection.moveCursorTo(h.row,h.column),a.selection.selectTo(h.row,h.column+x)):(p=a.session.doc.getLine(h.row).length>p?p+1:p,a.selection.moveCursorTo(h.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:u(null,null),exec:function(a){var o=a.session.doc.getLength()-1,h=a.session.doc.getLine(o).length,d=a.selection.rangeList.ranges,p=[];d.length<1&&(d=[a.selection.getRange()]);for(var y=0;y<d.length;y++)y==d.length-1&&(d[y].end.row===o&&d[y].end.column===h||p.push(new l(d[y].end.row,d[y].end.column,o,h))),y===0?d[y].start.row===0&&d[y].start.column===0||p.push(new l(0,0,d[y].start.row,d[y].start.column)):p.push(new l(d[y-1].end.row,d[y-1].end.column,d[y].start.row,d[y].start.column));a.exitMultiSelectMode(),a.clearSelection();for(var y=0;y<p.length;y++)a.selection.addRange(p[y],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(a){a.selection.clearSelection(),a.navigateLineEnd(),a.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(a){a.selection.clearSelection();var o=a.getCursorPosition();a.selection.moveTo(o.row-1,Number.MAX_VALUE),a.insert(`
`),o.row===0&&a.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:u("F1","F1"),exec:function(a){a.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:u(null,null),exec:function(a){a.prompt({$type:"modes"})},readOnly:!0}];for(var f=1;f<9;f++)i.commands.push({name:"foldToLevel"+f,description:"Fold To Level "+f,level:f,exec:function(a){a.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(t,i,r){t("./lib/fixoldbrowsers");var s=t("./lib/oop"),c=t("./lib/dom"),l=t("./lib/lang"),u=t("./lib/useragent"),f=t("./keyboard/textinput").TextInput,a=t("./mouse/mouse_handler").MouseHandler,o=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,d=t("./edit_session").EditSession,p=t("./search").Search,y=t("./range").Range,x=t("./lib/event_emitter").EventEmitter,g=t("./commands/command_manager").CommandManager,w=t("./commands/default_commands").commands,C=t("./config"),M=t("./token_iterator").TokenIterator,_=t("./clipboard"),E=function(A,T,S){this.$toDestroy=[];var I=A.getContainerElement();this.container=I,this.renderer=A,this.id="editor"+ ++E.$uid,this.commands=new g(u.isMac?"mac":"win",w),typeof document=="object"&&(this.textInput=new f(A.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new o(this)),this.keyBinding=new h(this),this.$search=new p().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall((function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(D,z){z._$emitInputEvent.schedule(31)}),this.setSession(T||S&&S.session||new d("")),C.resetOptions(this),S&&this.setOptions(S),C._signal("editor",this)};E.$uid=0,(function(){s.implement(this,x),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=l.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(A){if(this.curOp){if(!A||this.curOp.command)return;this.prevOp=this.curOp}A||(this.previousCommand=null,A={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:A.command||{},args:A.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(A){if(this.curOp&&this.session){if(A&&A.returnValue===!1||!this.session)return this.curOp=null;if(A==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var T=this.curOp.command,S=T&&T.scrollIntoView;if(S){switch(S){case"center-animate":S="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var I=this.selection.getRange(),D=this.renderer.layerConfig;(I.start.row>=D.lastRow||I.end.row<=D.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}S=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var z=this.selection.toJSON();this.curOp.selectionAfter=z,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(z),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(A){if(this.$mergeUndoDeltas){var T=this.prevOp,S=this.$mergeableCommands,I=T.command&&A.command.name==T.command.name;if(A.command.name=="insertstring"){var D=A.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),I=I&&this.mergeNextCommand&&(!/\s/.test(D)||/\s/.test(T.args)),this.mergeNextCommand=!0}else I=I&&S.indexOf(A.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(I=!1),I?this.session.mergeUndoDeltas=!0:S.indexOf(A.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(A,T){if(A&&typeof A=="string"&&A!="ace"){this.$keybindingId=A;var S=this;C.loadModule(["keybinding",A],function(I){S.$keybindingId==A&&S.keyBinding.setKeyboardHandler(I&&I.handler),T&&T()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(A),T&&T()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(A){if(this.session!=A){this.curOp&&this.endOperation(),this.curOp={};var T=this.session;if(T){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var S=this.session.getSelection();S.off("changeCursor",this.$onCursorChange),S.off("changeSelection",this.$onSelectionChange)}this.session=A,A?(this.$onDocumentChange=this.onDocumentChange.bind(this),A.on("change",this.$onDocumentChange),this.renderer.setSession(A),this.$onChangeMode=this.onChangeMode.bind(this),A.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),A.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),A.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),A.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),A.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),A.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=A.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(A)),this._signal("changeSession",{session:A,oldSession:T}),this.curOp=null,T&&T._signal("changeEditor",{oldEditor:this}),A&&A._signal("changeEditor",{editor:this}),A&&A.bgTokenizer&&A.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(A,T){return this.session.doc.setValue(A),T?T==1?this.navigateFileEnd():T==-1&&this.navigateFileStart():this.selectAll(),A},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(A){this.renderer.onResize(A)},this.setTheme=function(A,T){this.renderer.setTheme(A,T)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(A){this.renderer.setStyle(A)},this.unsetStyle=function(A){this.renderer.unsetStyle(A)},this.getFontSize=function(){return this.getOption("fontSize")||c.computedStyle(this.container).fontSize},this.setFontSize=function(A){this.setOption("fontSize",A)},this.$highlightBrackets=function(){if(!this.$highlightPending){var A=this;this.$highlightPending=!0,setTimeout(function(){A.$highlightPending=!1;var T=A.session;if(!(!T||!T.bgTokenizer)){T.$bracketHighlight&&(T.$bracketHighlight.markerIds.forEach(function(D){T.removeMarker(D)}),T.$bracketHighlight=null);var S=T.getMatchingBracketRanges(A.getCursorPosition());if(!S&&T.$mode.getMatching&&(S=T.$mode.getMatching(A.session)),!!S){var I="ace_bracket";Array.isArray(S)?S.length==1&&(I="ace_error_bracket"):S=[S],S.length==2&&(y.comparePoints(S[0].end,S[1].start)==0?S=[y.fromPoints(S[0].start,S[1].end)]:y.comparePoints(S[0].start,S[1].end)==0&&(S=[y.fromPoints(S[1].start,S[0].end)])),T.$bracketHighlight={ranges:S,markerIds:S.map(function(D){return T.addMarker(D,I,"text")})}}}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var A=this;this.$highlightTagPending=!0,setTimeout(function(){A.$highlightTagPending=!1;var T=A.session;if(!(!T||!T.bgTokenizer)){var S=A.getCursorPosition(),I=new M(A.session,S.row,S.column),D=I.getCurrentToken();if(!D||!/\b(?:tag-open|tag-name)/.test(D.type)){T.removeMarker(T.$tagHighlight),T.$tagHighlight=null;return}if(!(D.type.indexOf("tag-open")!==-1&&(D=I.stepForward(),!D))){var z=D.value,B=D.value,W=0,H=I.stepBackward();if(H.value==="<")do H=D,D=I.stepForward(),D&&(D.type.indexOf("tag-name")!==-1?(B=D.value,z===B&&(H.value==="<"?W++:H.value==="</"&&W--)):z===B&&D.value==="/>"&&W--);while(D&&W>=0);else{do if(D=H,H=I.stepBackward(),D){if(D.type.indexOf("tag-name")!==-1)z===D.value&&(H.value==="<"?W++:H.value==="</"&&W--);else if(D.value==="/>"){for(var J=0,G=H;G;){if(G.type.indexOf("tag-name")!==-1&&G.value===z){W--;break}else if(G.value==="<")break;G=I.stepBackward(),J++}for(var K=0;K<J;K++)I.stepForward()}}while(H&&W<=0);I.stepForward()}if(!D){T.removeMarker(T.$tagHighlight),T.$tagHighlight=null;return}var Y=I.getCurrentTokenRow(),ne=I.getCurrentTokenColumn(),le=new y(Y,ne,Y,ne+D.value.length),j=T.$backMarkers[T.$tagHighlight];T.$tagHighlight&&j!=null&&le.compareRange(j.range)!==0&&(T.removeMarker(T.$tagHighlight),T.$tagHighlight=null),T.$tagHighlight||(T.$tagHighlight=T.addMarker(le,"ace_bracket","text"))}}},50)}},this.focus=function(){var A=this;setTimeout(function(){A.isFocused()||A.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(A){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",A))},this.onBlur=function(A){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",A))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(A){var T=this.session.$useWrapMode,S=A.start.row==A.end.row?A.end.row:1/0;this.renderer.updateLines(A.start.row,S,T),this._signal("change",A),this.$cursorChange()},this.onTokenizerUpdate=function(A){var T=A.data;this.renderer.updateLines(T.first,T.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var A=this.getSession(),T;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(T=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(T=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(T=!1)),A.$highlightLineMarker&&!T)A.removeMarker(A.$highlightLineMarker.id),A.$highlightLineMarker=null;else if(!A.$highlightLineMarker&&T){var S=new y(T.row,T.column,T.row,1/0);S.id=A.addMarker(S,"ace_active-line","screenLine"),A.$highlightLineMarker=S}else T&&(A.$highlightLineMarker.start.row=T.row,A.$highlightLineMarker.end.row=T.row,A.$highlightLineMarker.start.column=T.column,A._signal("changeBackMarker"))},this.onSelectionChange=function(A){var T=this.session;if(T.$selectionMarker&&T.removeMarker(T.$selectionMarker),T.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var S=this.selection.getRange(),I=this.getSelectionStyle();T.$selectionMarker=T.addMarker(S,"ace_selection",I)}var D=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(D),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var A=this.session,T=this.getSelectionRange();if(!(T.isEmpty()||T.isMultiLine())){var S=T.start.column,I=T.end.column,D=A.getLine(T.start.row),z=D.substring(S,I);if(!(z.length>5e3||!/[\w\d]/.test(z))){var B=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:z}),W=D.substring(S-1,I+1);if(B.test(W))return B}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(A){this.renderer.updateText(),this._emit("changeMode",A)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var A=this.getSelectedText(),T=this.session.doc.getNewLineCharacter(),S=!1;if(!A&&this.$copyWithEmptySelection){S=!0;for(var I=this.selection.getAllRanges(),D=0;D<I.length;D++){var z=I[D];D&&I[D-1].start.row==z.start.row||(A+=this.session.getLine(z.start.row)+T)}}var B={text:A};return this._signal("copy",B),_.lineMode=S?B.text:"",B.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(A,T){var S={text:A,event:T};this.commands.exec("paste",this,S)},this.$handlePaste=function(A){typeof A=="string"&&(A={text:A}),this._signal("paste",A);var T=A.text,S=T==_.lineMode,I=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)S?I.insert({row:this.selection.lead.row,column:0},T):this.insert(T);else if(S)this.selection.rangeList.ranges.forEach(function(J){I.insert({row:J.start.row,column:0},T)});else{var D=T.split(/\r\n|\r|\n/),z=this.selection.rangeList.ranges,B=D.length==2&&(!D[0]||!D[1]);if(D.length!=z.length||B)return this.commands.exec("insertstring",this,T);for(var W=z.length;W--;){var H=z[W];H.isEmpty()||I.remove(H),I.insert(H.start,D[W])}}},this.execCommand=function(A,T){return this.commands.exec(A,this,T)},this.insert=function(A,T){var S=this.session,I=S.getMode(),D=this.getCursorPosition();if(this.getBehavioursEnabled()&&!T){var z=I.transformAction(S.getState(D.row),"insertion",this,S,A);z&&(A!==z.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),A=z.text)}if(A=="	"&&(A=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&A.indexOf(`
`)==-1){var B=new y.fromPoints(D,D);B.end.column+=A.length,this.session.remove(B)}}else{var B=this.getSelectionRange();D=this.session.remove(B),this.clearSelection()}if(A==`
`||A==`\r
`){var G=S.getLine(D.row);if(D.column>G.search(/\S|$/)){var W=G.substr(D.column).search(/\S|$/);S.doc.removeInLine(D.row,D.column,D.column+W)}}this.clearSelection();var H=D.column,J=S.getState(D.row),G=S.getLine(D.row),K=I.checkOutdent(J,G,A);if(S.insert(D,A),z&&z.selection&&(z.selection.length==2?this.selection.setSelectionRange(new y(D.row,H+z.selection[0],D.row,H+z.selection[1])):this.selection.setSelectionRange(new y(D.row+z.selection[0],z.selection[1],D.row+z.selection[2],z.selection[3]))),this.$enableAutoIndent){if(S.getDocument().isNewLine(A)){var Y=I.getNextLineIndent(J,G.slice(0,D.column),S.getTabString());S.insert({row:D.row+1,column:0},Y)}K&&I.autoOutdent(J,S,D.row)}},this.autoIndent=function(){var A=this.session,T=A.getMode(),S,I;if(this.selection.isEmpty())S=0,I=A.doc.getLength()-1;else{var D=this.getSelectionRange();S=D.start.row,I=D.end.row}for(var z="",B="",W="",H,J,G,K=A.getTabString(),Y=S;Y<=I;Y++)Y>0&&(z=A.getState(Y-1),B=A.getLine(Y-1),W=T.getNextLineIndent(z,B,K)),H=A.getLine(Y),J=T.$getIndent(H),W!==J&&(J.length>0&&(G=new y(Y,0,Y,J.length),A.remove(G)),W.length>0&&A.insert({row:Y,column:0},W)),T.autoOutdent(z,A,Y)},this.onTextInput=function(A,T){if(!T)return this.keyBinding.onTextInput(A);this.startOperation({command:{name:"insertstring"}});var S=this.applyComposition.bind(this,A,T);this.selection.rangeCount?this.forEachSelection(S):S(),this.endOperation()},this.applyComposition=function(A,T){if(T.extendLeft||T.extendRight){var S=this.selection.getRange();S.start.column-=T.extendLeft,S.end.column+=T.extendRight,S.start.column<0&&(S.start.row--,S.start.column+=this.session.getLine(S.start.row).length+1),this.selection.setRange(S),!A&&!S.isEmpty()&&this.remove()}if((A||!this.selection.isEmpty())&&this.insert(A,!0),T.restoreStart||T.restoreEnd){var S=this.selection.getRange();S.start.column-=T.restoreStart,S.end.column-=T.restoreEnd,this.selection.setRange(S)}},this.onCommandKey=function(A,T,S){return this.keyBinding.onCommandKey(A,T,S)},this.setOverwrite=function(A){this.session.setOverwrite(A)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(A){this.setOption("scrollSpeed",A)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(A){this.setOption("dragDelay",A)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(A){this.setOption("selectionStyle",A)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(A){this.setOption("highlightActiveLine",A)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(A){this.setOption("highlightGutterLine",A)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(A){this.setOption("highlightSelectedWord",A)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(A){this.renderer.setAnimatedScroll(A)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(A){this.renderer.setShowInvisibles(A)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(A){this.renderer.setDisplayIndentGuides(A)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(A){this.renderer.setShowPrintMargin(A)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(A){this.renderer.setPrintMarginColumn(A)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(A){this.setOption("readOnly",A)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(A){this.setOption("behavioursEnabled",A)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(A){this.setOption("wrapBehavioursEnabled",A)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(A){this.setOption("showFoldWidgets",A)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(A){this.setOption("fadeFoldWidgets",A)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(A){this.selection.isEmpty()&&(A=="left"?this.selection.selectLeft():this.selection.selectRight());var T=this.getSelectionRange();if(this.getBehavioursEnabled()){var S=this.session,I=S.getState(T.start.row),D=S.getMode().transformAction(I,"deletion",this,S,T);if(T.end.column===0){var z=S.getTextRange(T);if(z[z.length-1]==`
`){var B=S.getLine(T.end.row);/^\s+$/.test(B)&&(T.end.column=B.length)}}D&&(T=D)}this.session.remove(T),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var A=this.getSelectionRange();A.start.column==A.end.column&&A.start.row==A.end.row&&(A.end.column=0,A.end.row++),this.session.remove(A),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var A=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(A)},this.transposeLetters=function(){if(this.selection.isEmpty()){var A=this.getCursorPosition(),T=A.column;if(T!==0){var S=this.session.getLine(A.row),I,D;T<S.length?(I=S.charAt(T)+S.charAt(T-1),D=new y(A.row,T-1,A.row,T+1)):(I=S.charAt(T-1)+S.charAt(T-2),D=new y(A.row,T-2,A.row,T)),this.session.replace(D,I),this.session.selection.moveToPosition(D.end)}}},this.toLowerCase=function(){var A=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var T=this.getSelectionRange(),S=this.session.getTextRange(T);this.session.replace(T,S.toLowerCase()),this.selection.setSelectionRange(A)},this.toUpperCase=function(){var A=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var T=this.getSelectionRange(),S=this.session.getTextRange(T);this.session.replace(T,S.toUpperCase()),this.selection.setSelectionRange(A)},this.indent=function(){var A=this.session,T=this.getSelectionRange();if(T.start.row<T.end.row){var S=this.$getSelectedRows();A.indentRows(S.first,S.last,"	");return}else if(T.start.column<T.end.column){var I=A.getTextRange(T);if(!/^\s+$/.test(I)){var S=this.$getSelectedRows();A.indentRows(S.first,S.last,"	");return}}var D=A.getLine(T.start.row),z=T.start,B=A.getTabSize(),W=A.documentToScreenColumn(z.row,z.column);if(this.session.getUseSoftTabs())var H=B-W%B,J=l.stringRepeat(" ",H);else{for(var H=W%B;D[T.start.column-1]==" "&&H;)T.start.column--,H--;this.selection.setSelectionRange(T),J="	"}return this.insert(J)},this.blockIndent=function(){var A=this.$getSelectedRows();this.session.indentRows(A.first,A.last,"	")},this.blockOutdent=function(){var A=this.session.getSelection();this.session.outdentRows(A.getRange())},this.sortLines=function(){for(var A=this.$getSelectedRows(),T=this.session,S=[],I=A.first;I<=A.last;I++)S.push(T.getLine(I));S.sort(function(B,W){return B.toLowerCase()<W.toLowerCase()?-1:B.toLowerCase()>W.toLowerCase()?1:0});for(var D=new y(0,0,0,0),I=A.first;I<=A.last;I++){var z=T.getLine(I);D.start.row=I,D.end.row=I,D.end.column=z.length,T.replace(D,S[I-A.first])}},this.toggleCommentLines=function(){var A=this.session.getState(this.getCursorPosition().row),T=this.$getSelectedRows();this.session.getMode().toggleCommentLines(A,this.session,T.first,T.last)},this.toggleBlockComment=function(){var A=this.getCursorPosition(),T=this.session.getState(A.row),S=this.getSelectionRange();this.session.getMode().toggleBlockComment(T,this.session,S,A)},this.getNumberAt=function(A,T){var S=/[\-]?[0-9]+(?:\.[0-9]+)?/g;S.lastIndex=0;for(var I=this.session.getLine(A);S.lastIndex<T;){var D=S.exec(I);if(D.index<=T&&D.index+D[0].length>=T){var z={value:D[0],start:D.index,end:D.index+D[0].length};return z}}return null},this.modifyNumber=function(A){var T=this.selection.getCursor().row,S=this.selection.getCursor().column,I=new y(T,S-1,T,S),D=this.session.getTextRange(I);if(!isNaN(parseFloat(D))&&isFinite(D)){var z=this.getNumberAt(T,S);if(z){var B=z.value.indexOf(".")>=0?z.start+z.value.indexOf(".")+1:z.end,W=z.start+z.value.length-B,H=parseFloat(z.value);H*=Math.pow(10,W),B!==z.end&&S<B?A*=Math.pow(10,z.end-S-1):A*=Math.pow(10,z.end-S),H+=A,H/=Math.pow(10,W);var J=H.toFixed(W),G=new y(T,z.start,T,z.end);this.session.replace(G,J),this.moveCursorTo(T,Math.max(z.start+1,S+J.length-z.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var A=this.selection.getCursor().row,T=this.selection.getCursor().column;this.selection.selectWord();var S=this.getSelectedText(),I=this.selection.getWordRange().start.column,D=S.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),z=T-I-1;z<0&&(z=0);var B=0,W=0,H=this;S.match(/[A-Za-z0-9_]+/)&&D.forEach(function(fe,ve){W=B+fe.length,z>=B&&z<=W&&(S=fe,H.selection.clearSelection(),H.moveCursorTo(A,B+I),H.selection.selectTo(A,W+I)),B=W});for(var J=this.$toggleWordPairs,G,K=0;K<J.length;K++)for(var Y=J[K],ne=0;ne<=1;ne++){var le=+!ne,j=S.match(new RegExp("^\\s?_?("+l.escapeRegExp(Y[ne])+")\\s?$","i"));if(j){var re=S.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(j[1])+")($|\\s)","g"));re&&(G=S.replace(new RegExp(l.escapeRegExp(Y[ne]),"i"),function(fe){var ve=Y[le];return fe.toUpperCase()==fe?ve=ve.toUpperCase():fe.charAt(0).toUpperCase()==fe.charAt(0)&&(ve=ve.substr(0,0)+Y[le].charAt(0).toUpperCase()+ve.substr(1)),ve}),this.insert(G),G="")}}},this.removeLines=function(){var A=this.$getSelectedRows();this.session.removeFullLines(A.first,A.last),this.clearSelection()},this.duplicateSelection=function(){var A=this.selection,T=this.session,S=A.getRange(),I=A.isBackwards();if(S.isEmpty()){var D=S.start.row;T.duplicateLines(D,D)}else{var z=I?S.start:S.end,B=T.insert(z,T.getTextRange(S),!1);S.start=z,S.end=B,A.setSelectionRange(S,I)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(A,T,S){return this.session.moveText(A,T,S)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(A,T){var S,I,D=this.selection;if(!D.inMultiSelectMode||this.inVirtualSelectionMode){var z=D.toOrientedRange();S=this.$getSelectedRows(z),I=this.session.$moveLines(S.first,S.last,T?0:A),T&&A==-1&&(I=0),z.moveBy(I,0),D.fromOrientedRange(z)}else{var B=D.rangeList.ranges;D.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var W=0,H=0,J=B.length,G=0;G<J;G++){var K=G;B[G].moveBy(W,0),S=this.$getSelectedRows(B[G]);for(var Y=S.first,ne=S.last;++G<J;){H&&B[G].moveBy(H,0);var le=this.$getSelectedRows(B[G]);if(T&&le.first!=ne)break;if(!T&&le.first>ne+1)break;ne=le.last}for(G--,W=this.session.$moveLines(Y,ne,T?0:A),T&&A==-1&&(K=G+1);K<=G;)B[K].moveBy(W,0),K++;T||(W=0),H+=W}D.fromOrientedRange(D.ranges[0]),D.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(A){return A=(A||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(A.start.row),last:this.session.getRowFoldEnd(A.end.row)}},this.onCompositionStart=function(A){this.renderer.showComposition(A)},this.onCompositionUpdate=function(A){this.renderer.setCompositionText(A)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(A){return A>=this.getFirstVisibleRow()&&A<=this.getLastVisibleRow()},this.isRowFullyVisible=function(A){return A>=this.renderer.getFirstFullyVisibleRow()&&A<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(A,T){var S=this.renderer,I=this.renderer.layerConfig,D=A*Math.floor(I.height/I.lineHeight);T===!0?this.selection.$moveSelection(function(){this.moveCursorBy(D,0)}):T===!1&&(this.selection.moveCursorBy(D,0),this.selection.clearSelection());var z=S.scrollTop;S.scrollBy(0,D*I.lineHeight),T!=null&&S.scrollCursorIntoView(null,.5),S.animateScrolling(z)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(A){this.renderer.scrollToRow(A)},this.scrollToLine=function(A,T,S,I){this.renderer.scrollToLine(A,T,S,I)},this.centerSelection=function(){var A=this.getSelectionRange(),T={row:Math.floor(A.start.row+(A.end.row-A.start.row)/2),column:Math.floor(A.start.column+(A.end.column-A.start.column)/2)};this.renderer.alignCursor(T,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(A,T){this.selection.moveCursorTo(A,T)},this.moveCursorToPosition=function(A){this.selection.moveCursorToPosition(A)},this.jumpToMatching=function(A,T){var S=this.getCursorPosition(),I=new M(this.session,S.row,S.column),D=I.getCurrentToken(),z=D||I.stepForward();if(z){var B,W=!1,H={},J=S.column-z.start,G,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(z.value.match(/[{}()\[\]]/g)){for(;J<z.value.length&&!W;J++)if(K[z.value[J]])switch(G=K[z.value[J]]+"."+z.type.replace("rparen","lparen"),isNaN(H[G])&&(H[G]=0),z.value[J]){case"(":case"[":case"{":H[G]++;break;case")":case"]":case"}":H[G]--,H[G]===-1&&(B="bracket",W=!0);break}}else z.type.indexOf("tag-name")!==-1&&(isNaN(H[z.value])&&(H[z.value]=0),D.value==="<"?H[z.value]++:D.value==="</"&&H[z.value]--,H[z.value]===-1&&(B="tag",W=!0));W||(D=z,z=I.stepForward(),J=0)}while(z&&!W);if(B){var Y,ne;if(B==="bracket")Y=this.session.getBracketRange(S),Y||(Y=new y(I.getCurrentTokenRow(),I.getCurrentTokenColumn()+J-1,I.getCurrentTokenRow(),I.getCurrentTokenColumn()+J-1),ne=Y.start,(T||ne.row===S.row&&Math.abs(ne.column-S.column)<2)&&(Y=this.session.getBracketRange(ne)));else if(B==="tag"){if(z&&z.type.indexOf("tag-name")!==-1)var le=z.value;else return;if(Y=new y(I.getCurrentTokenRow(),I.getCurrentTokenColumn()-2,I.getCurrentTokenRow(),I.getCurrentTokenColumn()-2),Y.compare(S.row,S.column)===0){W=!1;do z=D,D=I.stepBackward(),D&&(D.type.indexOf("tag-close")!==-1&&Y.setEnd(I.getCurrentTokenRow(),I.getCurrentTokenColumn()+1),z.value===le&&z.type.indexOf("tag-name")!==-1&&(D.value==="<"?H[le]++:D.value==="</"&&H[le]--,H[le]===0&&(W=!0)));while(D&&!W)}z&&z.type.indexOf("tag-name")&&(ne=Y.start,ne.row==S.row&&Math.abs(ne.column-S.column)<2&&(ne=Y.end))}ne=Y&&Y.cursor||ne,ne&&(A?Y&&T?this.selection.setRange(Y):Y&&Y.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(ne.row,ne.column):this.selection.moveTo(ne.row,ne.column))}}},this.gotoLine=function(A,T,S){this.selection.clearSelection(),this.session.unfold({row:A-1,column:T||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(A-1,T||0),this.isRowFullyVisible(A-1)||this.scrollToLine(A-1,!0,S)},this.navigateTo=function(A,T){this.selection.moveTo(A,T)},this.navigateUp=function(A){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var T=this.selection.anchor.getPosition();return this.moveCursorToPosition(T)}this.selection.clearSelection(),this.selection.moveCursorBy(-A||-1,0)},this.navigateDown=function(A){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var T=this.selection.anchor.getPosition();return this.moveCursorToPosition(T)}this.selection.clearSelection(),this.selection.moveCursorBy(A||1,0)},this.navigateLeft=function(A){if(this.selection.isEmpty())for(A=A||1;A--;)this.selection.moveCursorLeft();else{var T=this.getSelectionRange().start;this.moveCursorToPosition(T)}this.clearSelection()},this.navigateRight=function(A){if(this.selection.isEmpty())for(A=A||1;A--;)this.selection.moveCursorRight();else{var T=this.getSelectionRange().end;this.moveCursorToPosition(T)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(A,T){T&&this.$search.set(T);var S=this.$search.find(this.session),I=0;return S&&(this.$tryReplace(S,A)&&(I=1),this.selection.setSelectionRange(S),this.renderer.scrollSelectionIntoView(S.start,S.end)),I},this.replaceAll=function(A,T){T&&this.$search.set(T);var S=this.$search.findAll(this.session),I=0;if(!S.length)return I;var D=this.getSelectionRange();this.selection.moveTo(0,0);for(var z=S.length-1;z>=0;--z)this.$tryReplace(S[z],A)&&I++;return this.selection.setSelectionRange(D),I},this.$tryReplace=function(A,T){var S=this.session.getTextRange(A);return T=this.$search.replace(S,T),T!==null?(A.end=this.session.replace(A,T),A):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(A,T,S){T||(T={}),typeof A=="string"||A instanceof RegExp?T.needle=A:typeof A=="object"&&s.mixin(T,A);var I=this.selection.getRange();T.needle==null&&(A=this.session.getTextRange(I)||this.$search.$options.needle,A||(I=this.session.getWordRange(I.start.row,I.start.column),A=this.session.getTextRange(I)),this.$search.set({needle:A})),this.$search.set(T),T.start||this.$search.set({start:I});var D=this.$search.find(this.session);if(T.preventScroll)return D;if(D)return this.revealRange(D,S),D;T.backwards?I.start=I.end:I.end=I.start,this.selection.setRange(I)},this.findNext=function(A,T){this.find({skipCurrent:!0,backwards:!1},A,T)},this.findPrevious=function(A,T){this.find(A,{skipCurrent:!0,backwards:!0},T)},this.revealRange=function(A,T){this.session.unfold(A),this.selection.setSelectionRange(A);var S=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(A.start,A.end,.5),T!==!1&&this.renderer.animateScrolling(S)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(A){A.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(A){if(A){var T,S=this,I=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var D=this.$scrollAnchor;D.style.cssText="position:absolute",this.container.insertBefore(D,this.container.firstChild);var z=this.on("changeSelection",function(){I=!0}),B=this.renderer.on("beforeRender",function(){I&&(T=S.renderer.container.getBoundingClientRect())}),W=this.renderer.on("afterRender",function(){if(I&&T&&(S.isFocused()||S.searchBox&&S.searchBox.isFocused())){var H=S.renderer,J=H.$cursorLayer.$pixelPos,G=H.layerConfig,K=J.top-G.offset;J.top>=0&&K+T.top<0?I=!0:J.top<G.height&&J.top+T.top+G.lineHeight>window.innerHeight?I=!1:I=null,I!=null&&(D.style.top=K+"px",D.style.left=J.left+"px",D.style.height=G.lineHeight+"px",D.scrollIntoView(I)),I=T=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",z),this.renderer.off("afterRender",W),this.renderer.off("beforeRender",B))}}},this.$resetCursorStyle=function(){var A=this.$cursorStyle||"ace",T=this.renderer.$cursorLayer;T&&(T.setSmoothBlinking(/smooth/.test(A)),T.isBlinking=!this.$readOnly&&A!="wide",c.setCssClass(T.element,"ace_slim-cursors",/slim/.test(A)))},this.prompt=function(A,T,S){var I=this;C.loadModule("./ext/prompt",function(D){D.prompt(I,A,T,S)})}}).call(E.prototype),C.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(A){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:A})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(A){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(A){this.textInput.setReadOnly(A),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(A){this.textInput.setCopyWithEmptySelection(A)},initialValue:!1},cursorStyle:{set:function(A){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(A){this.setAutoScrollEditorIntoView(A)}},keyboardHandler:{set:function(A){this.setKeyboardHandler(A)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(A){this.session.setValue(A)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(A){this.setSession(A)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(A){this.renderer.$gutterLayer.setShowLineNumbers(A),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),A&&this.$relativeLineNumbers?R.attach(this):R.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(A){this.$showLineNumbers&&A?R.attach(this):R.detach(this)}},placeholder:{set:function(A){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var T=this.session&&(this.renderer.$composition||this.getValue());if(T&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),c.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!T&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),c.addCssClass(this.container,"ace_hasPlaceholder");var S=c.createElement("div");S.className="ace_placeholder",S.textContent=this.$placeholder||"",this.renderer.placeholderNode=S,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!T&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var R={getText:function(A,T){return(Math.abs(A.selection.lead.row-T)||T+1+(T<9?"":""))+""},getWidth:function(A,T,S){return Math.max(T.toString().length,(S.lastRow+1).toString().length,2)*S.characterWidth},update:function(A,T){T.renderer.$loop.schedule(T.renderer.CHANGE_GUTTER)},attach:function(A){A.renderer.$gutterLayer.$renderer=this,A.on("changeSelection",this.update),this.update(null,A)},detach:function(A){A.renderer.$gutterLayer.$renderer==this&&(A.renderer.$gutterLayer.$renderer=null),A.off("changeSelection",this.update),this.update(null,A)}};i.Editor=E}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(t,i,r){var s=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(_){this.$session=_},this.add=function(_,E,R){this.$fromUndo||_!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),(E===!1||!this.lastDeltas)&&(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),_.id=this.$rev=++this.$maxRev),(_.action=="remove"||_.action=="insert")&&(this.$lastDelta=_),this.lastDeltas.push(_))},this.addSelection=function(_,E){this.selections.push({value:_,rev:E||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(_,E){E==null&&(E=this.$rev+1);for(var R=this.$undoStack,A=R.length;A--;){var T=R[A][0];if(T.id<=_)break;T.id<E&&(T.ignore=!0)}this.lastDeltas=null},this.getSelection=function(_,E){for(var R=this.selections,A=R.length;A--;){var T=R[A];if(T.rev<_)return E&&(T=R[A+1]),T}},this.getRevision=function(){return this.$rev},this.getDeltas=function(_,E){E==null&&(E=this.$rev+1);for(var R=this.$undoStack,A=null,T=0,S=R.length;S--;){var I=R[S][0];if(I.id<E&&!A&&(A=S+1),I.id<=_){T=S+1;break}}return R.slice(T,A)},this.getChangedRanges=function(_,E){E==null&&(E=this.$rev+1)},this.getChangedLines=function(_,E){E==null&&(E=this.$rev+1)},this.undo=function(_,E){this.lastDeltas=null;var R=this.$undoStack;if(c(R,R.length)){_||(_=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var A=R.pop(),T=null;return A&&(T=_.undoChanges(A,E),this.$redoStack.push(A),this.$syncRev()),this.$fromUndo=!1,T}},this.redo=function(_,E){if(this.lastDeltas=null,_||(_=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var R=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);M(this.$redoStack,R),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(S){S[0].id=++this.$maxRev},this)}var A=this.$redoStack.pop(),T=null;return A&&(T=_.redoChanges(A,E),this.$undoStack.push(A),this.$syncRev()),this.$fromUndo=!1,T},this.$syncRev=function(){var _=this.$undoStack,E=_[_.length-1],R=E&&E[0].id||0;this.$redoStackBaseRev=R,this.$rev=R},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(_){_==null&&(_=this.$rev),this.mark=_},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(_){return _?o(_):o(this.$undoStack)+`
---
`+o(this.$redoStack)}}).call(s.prototype);function c(_,E){for(var R=E;R--;){var A=_[R];if(A&&!A[0].ignore){for(;R<E-1;){var T=p(_[R],_[R+1]);_[R]=T[0],_[R+1]=T[1],R++}return!0}}}var l=t("./range").Range,u=l.comparePoints;l.comparePoints;function f(_){return{row:_.row,column:_.column}}function a(_){return{start:f(_.start),end:f(_.end),action:_.action,lines:_.lines.slice()}}function o(_){if(_=_||this,Array.isArray(_))return _.map(o).join(`
`);var E="";return _.action?(E=_.action=="insert"?"+":"-",E+="["+_.lines+"]"):_.value&&(Array.isArray(_.value)?E=_.value.map(h).join(`
`):E=h(_.value)),_.start&&(E+=h(_)),(_.id||_.rev)&&(E+="	("+(_.id||_.rev)+")"),E}function h(_){return _.start.row+":"+_.start.column+"=>"+_.end.row+":"+_.end.column}function d(_,E){var R=_.action=="insert",A=E.action=="insert";if(R&&A)if(u(E.start,_.end)>=0)x(E,_,-1);else if(u(E.start,_.start)<=0)x(_,E,1);else return null;else if(R&&!A)if(u(E.start,_.end)>=0)x(E,_,-1);else if(u(E.end,_.start)<=0)x(_,E,-1);else return null;else if(!R&&A)if(u(E.start,_.start)>=0)x(E,_,1);else if(u(E.start,_.start)<=0)x(_,E,1);else return null;else if(!R&&!A)if(u(E.start,_.start)>=0)x(E,_,1);else if(u(E.end,_.start)<=0)x(_,E,-1);else return null;return[E,_]}function p(_,E){for(var R=_.length;R--;)for(var A=0;A<E.length;A++)if(!d(_[R],E[A])){for(;R<_.length;){for(;A--;)d(E[A],_[R]);A=E.length,R++}return[_,E]}return _.selectionBefore=E.selectionBefore=_.selectionAfter=E.selectionAfter=null,[E,_]}function y(_,E){var R=_.action=="insert",A=E.action=="insert";if(R&&A)u(_.start,E.start)<0?x(E,_,1):x(_,E,1);else if(R&&!A)u(_.start,E.end)>=0?x(_,E,-1):(u(_.start,E.start)<=0||x(_,l.fromPoints(E.start,_.start),-1),x(E,_,1));else if(!R&&A)u(E.start,_.end)>=0?x(E,_,-1):(u(E.start,_.start)<=0||x(E,l.fromPoints(_.start,E.start),-1),x(_,E,1));else if(!R&&!A)if(u(E.start,_.end)>=0)x(E,_,-1);else if(u(E.end,_.start)<=0)x(_,E,-1);else{var T,S;return u(_.start,E.start)<0&&(T=_,_=w(_,E.start)),u(_.end,E.end)>0&&(S=w(_,E.end)),g(E.end,_.start,_.end,-1),S&&!T&&(_.lines=S.lines,_.start=S.start,_.end=S.end,S=_),[E,T,S].filter(Boolean)}return[E,_]}function x(_,E,R){g(_.start,E.start,E.end,R),g(_.end,E.start,E.end,R)}function g(_,E,R,A){_.row==(A==1?E:R).row&&(_.column+=A*(R.column-E.column)),_.row+=A*(R.row-E.row)}function w(_,E){var R=_.lines,A=_.end;_.end=f(E);var T=_.end.row-_.start.row,S=R.splice(T,R.length),I=T?E.column:E.column-_.start.column;R.push(S[0].substring(0,I)),S[0]=S[0].substr(I);var D={start:f(E),end:A,lines:S,action:_.action};return D}function C(_,E){E=a(E);for(var R=_.length;R--;){for(var A=_[R],T=0;T<A.length;T++){var S=A[T],I=y(S,E);E=I[0],I.length!=2&&(I[2]?(A.splice(T+1,1,I[1],I[2]),T++):I[1]||(A.splice(T,1),T--))}A.length||_.splice(R,1)}return _}function M(_,E){for(var R=0;R<E.length;R++)for(var A=E[R],T=0;T<A.length;T++)C(_,A[T])}i.UndoManager=s}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(t,i,r){var s=t("../lib/dom"),c=function(l,u){this.element=l,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(l){s.translate(this.element,0,-(l.firstRowScreen*l.lineHeight%this.canvasHeight)-l.offset*this.$offsetCoefficient)},this.pageChanged=function(l,u){return Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},this.computeLineTop=function(l,u,f){var a=u.firstRowScreen*u.lineHeight,o=Math.floor(a/this.canvasHeight),h=f.documentToScreenRow(l,0)*u.lineHeight;return h-o*this.canvasHeight},this.computeLineHeight=function(l,u,f){return u.lineHeight*f.getRowLineCount(l)},this.getLength=function(){return this.cells.length},this.get=function(l){return this.cells[l]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(l){if(Array.isArray(l)){this.cells.push.apply(this.cells,l);for(var u=s.createFragment(this.element),f=0;f<l.length;f++)u.appendChild(l[f].element);this.element.appendChild(u)}else this.cells.push(l),this.element.appendChild(l.element)},this.unshift=function(l){if(Array.isArray(l)){this.cells.unshift.apply(this.cells,l);for(var u=s.createFragment(this.element),f=0;f<l.length;f++)u.appendChild(l[f].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(l),this.element.insertAdjacentElement("afterbegin",l.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(l){l&&(l.element.remove(),this.cellCache.push(l))},this.createCell=function(l,u,f,a){var o=this.cellCache.pop();if(!o){var h=s.createElement("div");a&&a(h),this.element.appendChild(h),o={element:h,text:"",row:l}}return o.row=l,o}}).call(c.prototype),i.Lines=c}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(t,i,r){var s=t("../lib/dom"),c=t("../lib/oop"),l=t("../lib/lang"),u=t("../lib/event_emitter").EventEmitter,f=t("./lines").Lines,a=function(h){this.element=s.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new f(this.element),this.$lines.$offsetCoefficient=1};(function(){c.implement(this,u),this.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),this.session=h,h&&h.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(h,d){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,d)},this.removeGutterDecoration=function(h,d){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,d)},this.setAnnotations=function(h){this.$annotations=[];for(var d=0;d<h.length;d++){var p=h[d],y=p.row,x=this.$annotations[y];x||(x=this.$annotations[y]={text:[]});var g=p.text;g=g?l.escapeHTML(g):p.html||"",x.text.indexOf(g)===-1&&x.text.push(g);var w=p.type;w=="error"?x.className=" ace_error":w=="warning"&&x.className!=" ace_error"?x.className=" ace_warning":w=="info"&&!x.className&&(x.className=" ace_info")}},this.$updateAnnotations=function(h){if(this.$annotations.length){var d=h.start.row,p=h.end.row-d;if(p!==0)if(h.action=="remove")this.$annotations.splice(d,p+1,null);else{var y=new Array(p+1);y.unshift(d,1),this.$annotations.splice.apply(this.$annotations,y)}}},this.update=function(h){this.config=h;var d=this.session,p=h.firstRow,y=Math.min(h.lastRow+h.gutterOffset,d.getLength()-1);this.oldLastRow=y,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow();for(var x=d.getNextFoldLine(p),g=x?x.start.row:1/0,w=null,C=-1,M=p;;){if(M>g&&(M=x.end.row+1,x=d.getNextFoldLine(M,x),g=x?x.start.row:1/0),M>y){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}w=this.$lines.get(++C),w?w.row=M:(w=this.$lines.createCell(M,h,this.session,o),this.$lines.push(w)),this.$renderCell(w,h,x,M),M++}this._signal("afterRender"),this.$updateGutterWidth(h)},this.$updateGutterWidth=function(h){var d=this.session,p=d.gutterRenderer||this.$renderer,y=d.$firstLineNumber,x=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||d.$useWrapMode)&&(x=d.getLength()+y-1);var g=p?p.getWidth(d,x,h):x.toString().length*h.characterWidth,w=this.$padding||this.$computePadding();g+=w.left+w.right,g!==this.gutterWidth&&!isNaN(g)&&(this.gutterWidth=g,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",g))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var h=this.session.selection.getCursor();this.$cursorRow!==h.row&&(this.$cursorRow=h.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!(this.$cursorCell&&this.$cursorCell.row==h)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var d=this.$lines.cells;this.$cursorCell=null;for(var p=0;p<d.length;p++){var y=d[p];if(y.row>=this.$cursorRow){if(y.row>this.$cursorRow){var x=this.session.getFoldLine(this.$cursorRow);if(p>0&&x&&x.start.row==d[p-1].row)y=d[p-1];else break}y.element.className="ace_gutter-active-line "+y.element.className,this.$cursorCell=y;break}}}}},this.scrollLines=function(h){var d=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(d,h))return this.update(h);this.$lines.moveContainer(h);var p=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),y=this.oldLastRow;if(this.oldLastRow=p,!d||y<h.firstRow)return this.update(h);if(p<d.firstRow)return this.update(h);if(d.firstRow<h.firstRow)for(var x=this.session.getFoldedRowCount(d.firstRow,h.firstRow-1);x>0;x--)this.$lines.shift();if(y>p)for(var x=this.session.getFoldedRowCount(p+1,y);x>0;x--)this.$lines.pop();h.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,d.firstRow-1)),p>y&&this.$lines.push(this.$renderLines(h,y+1,p)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},this.$renderLines=function(h,d,p){for(var y=[],x=d,g=this.session.getNextFoldLine(x),w=g?g.start.row:1/0;x>w&&(x=g.end.row+1,g=this.session.getNextFoldLine(x,g),w=g?g.start.row:1/0),!(x>p);){var C=this.$lines.createCell(x,h,this.session,o);this.$renderCell(C,h,g,x),y.push(C),x++}return y},this.$renderCell=function(h,d,p,y){var x=h.element,g=this.session,w=x.childNodes[0],C=x.childNodes[1],M=g.$firstLineNumber,_=g.$breakpoints,E=g.$decorations,R=g.gutterRenderer||this.$renderer,A=this.$showFoldWidgets&&g.foldWidgets,T=p?p.start.row:Number.MAX_VALUE,S="ace_gutter-cell ";if(this.$highlightGutterLine&&(y==this.$cursorRow||p&&y<this.$cursorRow&&y>=T&&this.$cursorRow<=p.end.row)&&(S+="ace_gutter-active-line ",this.$cursorCell!=h&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h)),_[y]&&(S+=_[y]),E[y]&&(S+=E[y]),this.$annotations[y]&&(S+=this.$annotations[y].className),x.className!=S&&(x.className=S),A){var I=A[y];I==null&&(I=A[y]=g.getFoldWidget(y))}if(I){var S="ace_fold-widget ace_"+I;I=="start"&&y==T&&y<p.end.row?S+=" ace_closed":S+=" ace_open",C.className!=S&&(C.className=S);var D=d.lineHeight+"px";s.setStyle(C.style,"height",D),s.setStyle(C.style,"display","inline-block")}else C&&s.setStyle(C.style,"display","none");var z=(R?R.getText(g,y):y+M).toString();return z!==w.data&&(w.data=z),s.setStyle(h.element.style,"height",this.$lines.computeLineHeight(y,d,g)+"px"),s.setStyle(h.element.style,"top",this.$lines.computeLineTop(y,d,g)+"px"),h.text=z,h},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(h){h?s.addCssClass(this.element,"ace_folding-enabled"):s.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var h=s.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding},this.getRegion=function(h){var d=this.$padding||this.$computePadding(),p=this.element.getBoundingClientRect();if(h.x<d.left+p.left)return"markers";if(this.$showFoldWidgets&&h.x>p.right-d.right)return"foldWidgets"}}).call(a.prototype);function o(h){var d=document.createTextNode("");h.appendChild(d);var p=s.createElement("span");return h.appendChild(p),h}i.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,i,r){var s=t("../range").Range,c=t("../lib/dom"),l=function(u){this.element=c.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(f){this.$padding=f},this.setSession=function(f){this.session=f},this.setMarkers=function(f){this.markers=f},this.elt=function(f,a){var o=this.i!=-1&&this.element.childNodes[this.i];o?this.i++:(o=document.createElement("div"),this.element.appendChild(o),this.i=-1),o.style.cssText=a,o.className=f},this.update=function(f){if(f){this.config=f,this.i=0;var a;for(var o in this.markers){var h=this.markers[o];if(!h.range){h.update(a,this,this.session,f);continue}var d=h.range.clipRows(f.firstRow,f.lastRow);if(!d.isEmpty())if(d=d.toScreenRange(this.session),h.renderer){var p=this.$getTop(d.start.row,f),y=this.$padding+d.start.column*f.characterWidth;h.renderer(a,d,y,p,f)}else h.type=="fullLine"?this.drawFullLineMarker(a,d,h.clazz,f):h.type=="screenLine"?this.drawScreenLineMarker(a,d,h.clazz,f):d.isMultiLine()?h.type=="text"?this.drawTextMarker(a,d,h.clazz,f):this.drawMultiLineMarker(a,d,h.clazz,f):this.drawSingleLineMarker(a,d,h.clazz+" ace_start ace_br15",f)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(f,a){return(f-a.firstRowScreen)*a.lineHeight};function u(f,a,o,h){return(f?1:0)|(a?2:0)|(o?4:0)|(h?8:0)}this.drawTextMarker=function(f,a,o,h,d){for(var p=this.session,y=a.start.row,x=a.end.row,g=y,w=0,C=0,M=p.getScreenLastRowColumn(g),_=new s(g,a.start.column,g,C);g<=x;g++)_.start.row=_.end.row=g,_.start.column=g==y?a.start.column:p.getRowWrapIndent(g),_.end.column=M,w=C,C=M,M=g+1<x?p.getScreenLastRowColumn(g+1):g==x?0:a.end.column,this.drawSingleLineMarker(f,_,o+(g==y?" ace_start":"")+" ace_br"+u(g==y||g==y+1&&a.start.column,w<C,C>M,g==x),h,g==x?0:1,d)},this.drawMultiLineMarker=function(f,a,o,h,d){var p=this.$padding,y=h.lineHeight,x=this.$getTop(a.start.row,h),g=p+a.start.column*h.characterWidth;if(d=d||"",this.session.$bidiHandler.isBidiRow(a.start.row)){var w=a.clone();w.end.row=w.start.row,w.end.column=this.session.getLine(w.start.row).length,this.drawBidiSingleLineMarker(f,w,o+" ace_br1 ace_start",h,null,d)}else this.elt(o+" ace_br1 ace_start","height:"+y+"px;right:0;top:"+x+"px;left:"+g+"px;"+(d||""));if(this.session.$bidiHandler.isBidiRow(a.end.row)){var w=a.clone();w.start.row=w.end.row,w.start.column=0,this.drawBidiSingleLineMarker(f,w,o+" ace_br12",h,null,d)}else{x=this.$getTop(a.end.row,h);var C=a.end.column*h.characterWidth;this.elt(o+" ace_br12","height:"+y+"px;width:"+C+"px;top:"+x+"px;left:"+p+"px;"+(d||""))}if(y=(a.end.row-a.start.row-1)*h.lineHeight,!(y<=0)){x=this.$getTop(a.start.row+1,h);var M=(a.start.column?1:0)|(a.end.column?0:8);this.elt(o+(M?" ace_br"+M:""),"height:"+y+"px;right:0;top:"+x+"px;left:"+p+"px;"+(d||""))}},this.drawSingleLineMarker=function(f,a,o,h,d,p){if(this.session.$bidiHandler.isBidiRow(a.start.row))return this.drawBidiSingleLineMarker(f,a,o,h,d,p);var y=h.lineHeight,x=(a.end.column+(d||0)-a.start.column)*h.characterWidth,g=this.$getTop(a.start.row,h),w=this.$padding+a.start.column*h.characterWidth;this.elt(o,"height:"+y+"px;width:"+x+"px;top:"+g+"px;left:"+w+"px;"+(p||""))},this.drawBidiSingleLineMarker=function(f,a,o,h,d,p){var y=h.lineHeight,x=this.$getTop(a.start.row,h),g=this.$padding,w=this.session.$bidiHandler.getSelections(a.start.column,a.end.column);w.forEach(function(C){this.elt(o,"height:"+y+"px;width:"+C.width+(d||0)+"px;top:"+x+"px;left:"+(g+C.left)+"px;"+(p||""))},this)},this.drawFullLineMarker=function(f,a,o,h,d){var p=this.$getTop(a.start.row,h),y=h.lineHeight;a.start.row!=a.end.row&&(y+=this.$getTop(a.end.row,h)-p),this.elt(o,"height:"+y+"px;top:"+p+"px;left:0;right:0;"+(d||""))},this.drawScreenLineMarker=function(f,a,o,h,d){var p=this.$getTop(a.start.row,h),y=h.lineHeight;this.elt(o,"height:"+y+"px;top:"+p+"px;left:0;right:0;"+(d||""))}}).call(l.prototype),i.Marker=l}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(t,i,r){var s=t("../lib/oop"),c=t("../lib/dom"),l=t("../lib/lang"),u=t("./lines").Lines,f=t("../lib/event_emitter").EventEmitter,a=function(o){this.dom=c,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",o.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new u(this.element)};(function(){s.implement(this,f),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var o=this.session.doc,h=o.getNewLineCharacter()==`
`&&o.getNewLineMode()!="windows",d=h?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=d)return this.EOL_CHAR=d,!0},this.setPadding=function(o){this.$padding=o,this.element.style.margin="0 "+o+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(o){this.$fontMetrics=o,this.$fontMetrics.on("changeCharacterSize",(function(h){this._signal("changeCharacterSize",h)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(o){this.session=o,o&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(o){return this.showInvisibles==o?!1:(this.showInvisibles=o,typeof o=="string"?(this.showSpaces=/tab/i.test(o),this.showTabs=/space/i.test(o),this.showEOL=/eol/i.test(o)):this.showSpaces=this.showTabs=this.showEOL=o,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(o){return this.displayIndentGuides==o?!1:(this.displayIndentGuides=o,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var o=this.session.getTabSize();this.tabSize=o;for(var h=this.$tabStrings=[0],d=1;d<o+1;d++)if(this.showTabs){var p=this.dom.createElement("span");p.className="ace_invisible ace_invisible_tab",p.textContent=l.stringRepeat(this.TAB_CHAR,d),h.push(p)}else h.push(this.dom.createTextNode(l.stringRepeat(" ",d),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var y="ace_indent-guide",x=this.showSpaces?" ace_invisible ace_invisible_space":"",g=this.showSpaces?l.stringRepeat(this.SPACE_CHAR,this.tabSize):l.stringRepeat(" ",this.tabSize),w=this.showTabs?" ace_invisible ace_invisible_tab":"",C=this.showTabs?l.stringRepeat(this.TAB_CHAR,this.tabSize):g,p=this.dom.createElement("span");p.className=y+x,p.textContent=g,this.$tabStrings[" "]=p;var p=this.dom.createElement("span");p.className=y+w,p.textContent=C,this.$tabStrings["	"]=p}},this.updateLines=function(o,h,d){if(this.config.lastRow!=o.lastRow||this.config.firstRow!=o.firstRow)return this.update(o);this.config=o;for(var p=Math.max(h,o.firstRow),y=Math.min(d,o.lastRow),x=this.element.childNodes,g=0,C=o.firstRow;C<p;C++){var M=this.session.getFoldLine(C);if(M)if(M.containsRow(p)){p=M.start.row;break}else C=M.end.row;g++}for(var w=!1,C=p,M=this.session.getNextFoldLine(C),_=M?M.start.row:1/0;C>_&&(C=M.end.row+1,M=this.session.getNextFoldLine(C,M),_=M?M.start.row:1/0),!(C>y);){var E=x[g++];if(E){this.dom.removeChildren(E),this.$renderLine(E,C,C==_?M:!1),w&&(E.style.top=this.$lines.computeLineTop(C,o,this.session)+"px");var R=o.lineHeight*this.session.getRowLength(C)+"px";E.style.height!=R&&(w=!0,E.style.height=R)}C++}if(w)for(;g<this.$lines.cells.length;){var A=this.$lines.cells[g++];A.element.style.top=this.$lines.computeLineTop(A.row,o,this.session)+"px"}},this.scrollLines=function(o){var h=this.config;if(this.config=o,this.$lines.pageChanged(h,o))return this.update(o);this.$lines.moveContainer(o);var d=o.lastRow,p=h?h.lastRow:-1;if(!h||p<o.firstRow)return this.update(o);if(d<h.firstRow)return this.update(o);if(!h||h.lastRow<o.firstRow)return this.update(o);if(o.lastRow<h.firstRow)return this.update(o);if(h.firstRow<o.firstRow)for(var y=this.session.getFoldedRowCount(h.firstRow,o.firstRow-1);y>0;y--)this.$lines.shift();if(h.lastRow>o.lastRow)for(var y=this.session.getFoldedRowCount(o.lastRow+1,h.lastRow);y>0;y--)this.$lines.pop();o.firstRow<h.firstRow&&this.$lines.unshift(this.$renderLinesFragment(o,o.firstRow,h.firstRow-1)),o.lastRow>h.lastRow&&this.$lines.push(this.$renderLinesFragment(o,h.lastRow+1,o.lastRow))},this.$renderLinesFragment=function(o,h,d){for(var p=[],y=h,x=this.session.getNextFoldLine(y),g=x?x.start.row:1/0;y>g&&(y=x.end.row+1,x=this.session.getNextFoldLine(y,x),g=x?x.start.row:1/0),!(y>d);){var w=this.$lines.createCell(y,o,this.session),C=w.element;this.dom.removeChildren(C),c.setStyle(C.style,"height",this.$lines.computeLineHeight(y,o,this.session)+"px"),c.setStyle(C.style,"top",this.$lines.computeLineTop(y,o,this.session)+"px"),this.$renderLine(C,y,y==g?x:!1),this.$useLineGroups()?C.className="ace_line_group":C.className="ace_line",p.push(w),y++}return p},this.update=function(o){this.$lines.moveContainer(o),this.config=o;for(var h=o.firstRow,d=o.lastRow,p=this.$lines;p.getLength();)p.pop();p.push(this.$renderLinesFragment(o,h,d))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(o,h,d,p){for(var y=this,x=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,g=this.dom.createFragment(this.element),w,C=0;w=x.exec(p);){var M=w[1],_=w[2],E=w[3],R=w[4],A=w[5];if(!(!y.showSpaces&&_)){var T=C!=w.index?p.slice(C,w.index):"";if(C=w.index+w[0].length,T&&g.appendChild(this.dom.createTextNode(T,this.element)),M){var S=y.session.getScreenTabSize(h+w.index);g.appendChild(y.$tabStrings[S].cloneNode(!0)),h+=S-1}else if(_)if(y.showSpaces){var I=this.dom.createElement("span");I.className="ace_invisible ace_invisible_space",I.textContent=l.stringRepeat(y.SPACE_CHAR,_.length),g.appendChild(I)}else g.appendChild(this.com.createTextNode(_,this.element));else if(E){var I=this.dom.createElement("span");I.className="ace_invisible ace_invisible_space ace_invalid",I.textContent=l.stringRepeat(y.SPACE_CHAR,E.length),g.appendChild(I)}else if(R){h+=1;var I=this.dom.createElement("span");I.style.width=y.config.characterWidth*2+"px",I.className=y.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",I.textContent=y.showSpaces?y.SPACE_CHAR:R,g.appendChild(I)}else if(A){h+=1;var I=this.dom.createElement("span");I.style.width=y.config.characterWidth*2+"px",I.className="ace_cjk",I.textContent=A,g.appendChild(I)}}}if(g.appendChild(this.dom.createTextNode(C?p.slice(C):p,this.element)),this.$textToken[d.type])o.appendChild(g);else{var D="ace_"+d.type.replace(/\./g," ace_"),I=this.dom.createElement("span");d.type=="fold"&&(I.style.width=d.value.length*this.config.characterWidth+"px"),I.className=D,I.appendChild(g),o.appendChild(I)}return h+p.length},this.renderIndentGuide=function(o,h,d){var p=h.search(this.$indentGuideRe);if(p<=0||p>=d)return h;if(h[0]==" "){p-=p%this.tabSize;for(var y=p/this.tabSize,x=0;x<y;x++)o.appendChild(this.$tabStrings[" "].cloneNode(!0));return h.substr(p)}else if(h[0]=="	"){for(var x=0;x<p;x++)o.appendChild(this.$tabStrings["	"].cloneNode(!0));return h.substr(p)}return h},this.$createLineElement=function(o){var h=this.dom.createElement("div");return h.className="ace_line",h.style.height=this.config.lineHeight+"px",h},this.$renderWrappedLine=function(o,h,d){var p=0,y=0,x=d[0],g=0,w=this.$createLineElement();o.appendChild(w);for(var C=0;C<h.length;C++){var M=h[C],_=M.value;if(C==0&&this.displayIndentGuides){if(p=_.length,_=this.renderIndentGuide(w,_,x),!_)continue;p-=_.length}if(p+_.length<x)g=this.$renderToken(w,g,M,_),p+=_.length;else{for(;p+_.length>=x;)g=this.$renderToken(w,g,M,_.substring(0,x-p)),_=_.substring(x-p),p=x,w=this.$createLineElement(),o.appendChild(w),w.appendChild(this.dom.createTextNode(l.stringRepeat("",d.indent),this.element)),y++,g=0,x=d[y]||Number.MAX_VALUE;_.length!=0&&(p+=_.length,g=this.$renderToken(w,g,M,_))}}d[d.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(w,g,null,"",!0)},this.$renderSimpleLine=function(o,h){var d=0,p=h[0],y=p.value;this.displayIndentGuides&&(y=this.renderIndentGuide(o,y)),y&&(d=this.$renderToken(o,d,p,y));for(var x=1;x<h.length;x++){if(p=h[x],y=p.value,d+y.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(o,d,p,y);d=this.$renderToken(o,d,p,y)}},this.$renderOverflowMessage=function(o,h,d,p,y){d&&this.$renderToken(o,h,d,p.slice(0,this.MAX_LINE_LENGTH-h));var x=this.dom.createElement("span");x.className="ace_inline_button ace_keyword ace_toggle_wrap",x.textContent=y?"<hide>":"<click to see more...>",o.appendChild(x)},this.$renderLine=function(o,h,d){if(!d&&d!=!1&&(d=this.session.getFoldLine(h)),d)var p=this.$getFoldLineTokens(h,d);else var p=this.session.getTokens(h);var y=o;if(p.length){var x=this.session.getRowSplitData(h);if(x&&x.length){this.$renderWrappedLine(o,p,x);var y=o.lastChild}else{var y=o;this.$useLineGroups()&&(y=this.$createLineElement(),o.appendChild(y)),this.$renderSimpleLine(y,p)}}else this.$useLineGroups()&&(y=this.$createLineElement(),o.appendChild(y));if(this.showEOL&&y){d&&(h=d.end.row);var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_eol",g.textContent=h==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,y.appendChild(g)}},this.$getFoldLineTokens=function(o,h){var d=this.session,p=[];function y(g,w,C){for(var M=0,_=0;_+g[M].value.length<w;)if(_+=g[M].value.length,M++,M==g.length)return;if(_!=w){var E=g[M].value.substring(w-_);E.length>C-w&&(E=E.substring(0,C-w)),p.push({type:g[M].type,value:E}),_=w+E.length,M+=1}for(;_<C&&M<g.length;){var E=g[M].value;E.length+_>C?p.push({type:g[M].type,value:E.substring(0,C-_)}):p.push(g[M]),_+=E.length,M+=1}}var x=d.getTokens(o);return h.walk(function(g,w,C,M,_){g!=null?p.push({type:"fold",value:g}):(_&&(x=d.getTokens(w)),x.length&&y(x,M,C))},h.end.row,this.session.getLine(h.end.row).length),p},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(a.prototype),i.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,i,r){var s=t("../lib/dom"),c=function(l){this.element=s.createElement("div"),this.element.className="ace_layer ace_cursor-layer",l.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),s.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(l){for(var u=this.cursors,f=u.length;f--;)s.setStyle(u[f].style,"opacity",l?"":"0")},this.$startCssAnimation=function(){for(var l=this.cursors,u=l.length;u--;)l[u].style.animationDuration=this.blinkInterval+"ms";setTimeout((function(){s.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){s.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(l){this.$padding=l},this.setSession=function(l){this.session=l},this.setBlinking=function(l){l!=this.isBlinking&&(this.isBlinking=l,this.restartTimer())},this.setBlinkInterval=function(l){l!=this.blinkInterval&&(this.blinkInterval=l,this.restartTimer())},this.setSmoothBlinking=function(l){l!=this.smoothBlinking&&(this.smoothBlinking=l,s.setCssClass(this.element,"ace_smooth-blinking",l),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var l=s.createElement("div");return l.className="ace_cursor",this.element.appendChild(l),this.cursors.push(l),l},this.removeCursor=function(){if(this.cursors.length>1){var l=this.cursors.pop();return l.parentNode.removeChild(l),l}},this.hideCursor=function(){this.isVisible=!1,s.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,s.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var l=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&s.removeCssClass(this.element,"ace_smooth-blinking"),l(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&setTimeout((function(){s.addCssClass(this.element,"ace_smooth-blinking")}).bind(this)),s.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=(function(){this.timeoutId=setTimeout(function(){l(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){l(!0),u()},this.blinkInterval),u()}},this.getPixelPosition=function(l,u){if(!this.config||!this.session)return{left:0,top:0};l||(l=this.session.selection.getCursor());var f=this.session.documentToScreenPosition(l),a=this.$padding+(this.session.$bidiHandler.isBidiRow(f.row,l.row)?this.session.$bidiHandler.getPosLeft(f.column):f.column*this.config.characterWidth),o=(f.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:a,top:o}},this.isCursorInView=function(l,u){return l.top>=0&&l.top<u.maxHeight},this.update=function(l){this.config=l;var u=this.session.$selectionMarkers,f=0,a=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var f=0,o=u.length;f<o;f++){var h=this.getPixelPosition(u[f].cursor,!0);if(!((h.top>l.height+l.offset||h.top<0)&&f>1)){var d=this.cursors[a++]||this.addCursor(),p=d.style;this.drawCursor?this.drawCursor(d,h,l,u[f],this.session):this.isCursorInView(h,l)?(s.setStyle(p,"display","block"),s.translate(d,h.left,h.top),s.setStyle(p,"width",Math.round(l.characterWidth)+"px"),s.setStyle(p,"height",l.lineHeight+"px")):s.setStyle(p,"display","none")}}for(;this.cursors.length>a;)this.removeCursor();var y=this.session.getOverwrite();this.$setOverwrite(y),this.$pixelPos=h,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(l){l!=this.overwrite&&(this.overwrite=l,l?s.addCssClass(this.element,"ace_overwrite-cursors"):s.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(c.prototype),i.Cursor=c}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/dom"),l=t("./lib/event"),u=t("./lib/event_emitter").EventEmitter,f=32768,a=function(d){this.element=c.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=c.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)};(function(){s.implement(this,u),this.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1}}).call(a.prototype);var o=function(d,p){a.call(this,d),this.scrollTop=0,this.scrollHeight=0,p.$scrollbarWidth=this.width=c.scrollbarWidth(d.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};s.inherits(o,a),(function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var d=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-d)/(this.coeff-d)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(d){this.element.style.height=d+"px"},this.setInnerHeight=this.setScrollHeight=function(d){this.scrollHeight=d,d>f?(this.coeff=f/d,d=f):this.coeff!=1&&(this.coeff=1),this.inner.style.height=d+"px"},this.setScrollTop=function(d){this.scrollTop!=d&&(this.skipEvent=!0,this.scrollTop=d,this.element.scrollTop=d*this.coeff)}}).call(o.prototype);var h=function(d,p){a.call(this,d),this.scrollLeft=0,this.height=p.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};s.inherits(h,a),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(d){this.element.style.width=d+"px"},this.setInnerWidth=function(d){this.inner.style.width=d+"px"},this.setScrollWidth=function(d){this.inner.style.width=d+"px"},this.setScrollLeft=function(d){this.scrollLeft!=d&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=d)}}).call(h.prototype),i.ScrollBar=o,i.ScrollBarV=o,i.ScrollBarH=h,i.VScrollBar=o,i.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,i,r){var s=t("./lib/event"),c=function(l,u){this.onRender=l,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var f=this;this._flush=function(a){f.pending=!1;var o=f.changes;if(o&&(s.blockIdle(100),f.changes=0,f.onRender(o)),f.changes){if(f.$recursionLimit--<0)return;f.schedule()}else f.$recursionLimit=2}};(function(){this.schedule=function(l){this.changes=this.changes|l,this.changes&&!this.pending&&(s.nextFrame(this._flush),this.pending=!0)},this.clear=function(l){var u=this.changes;return this.changes=0,u}}).call(c.prototype),i.RenderLoop=c}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(t,i,r){var s=t("../lib/oop"),c=t("../lib/dom"),l=t("../lib/lang"),u=t("../lib/event"),f=t("../lib/useragent"),a=t("../lib/event_emitter").EventEmitter,o=256,h=typeof ResizeObserver=="function",d=200,p=i.FontMetrics=function(y){this.el=c.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=c.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=c.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),y.appendChild(this.el),this.$measureNode.textContent=l.stringRepeat("X",o),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()};(function(){s.implement(this,a),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(y,x){y.width=y.height="auto",y.left=y.top="0px",y.visibility="hidden",y.position="absolute",y.whiteSpace="pre",f.isIE<8?y["font-family"]="inherit":y.font="inherit",y.overflow=x?"hidden":"visible"},this.checkForSizeChanges=function(y){if(y===void 0&&(y=this.$measureSizes()),y&&(this.$characterSize.width!==y.width||this.$characterSize.height!==y.height)){this.$measureNode.style.fontWeight="bold";var x=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=y,this.charSizes=Object.create(null),this.allowBoldFonts=x&&x.width===y.width&&x.height===y.height,this._emit("changeCharacterSize",{data:y})}},this.$addObserver=function(){var y=this;this.$observer=new window.ResizeObserver(function(x){y.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var y=this;return this.$pollSizeChangesTimer=u.onIdle(function x(){y.checkForSizeChanges(),u.onIdle(x,500)},500)},this.setPolling=function(y){y?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(y){var x={height:(y||this.$measureNode).clientHeight,width:(y||this.$measureNode).clientWidth/o};return x.width===0||x.height===0?null:x},this.$measureCharWidth=function(y){this.$main.textContent=l.stringRepeat(y,o);var x=this.$main.getBoundingClientRect();return x.width/o},this.getCharacterWidth=function(y){var x=this.charSizes[y];return x===void 0&&(x=this.charSizes[y]=this.$measureCharWidth(y)/this.$characterSize.width),x},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function y(x){return!x||!x.parentElement?1:(window.getComputedStyle(x).zoom||1)*y(x.parentElement)},this.$initTransformMeasureNodes=function(){var y=function(x,g){return["div",{style:"position: absolute;top:"+x+"px;left:"+g+"px;"}]};this.els=c.buildDom([y(0,0),y(d,0),y(0,d),y(d,d)],this.el)},this.transformCoordinates=function(y,x){if(y){var g=this.$getZoom(this.el);y=_(1/g,y)}function w(K,Y,ne){var le=K[1]*Y[0]-K[0]*Y[1];return[(-Y[1]*ne[0]+Y[0]*ne[1])/le,(+K[1]*ne[0]-K[0]*ne[1])/le]}function C(K,Y){return[K[0]-Y[0],K[1]-Y[1]]}function M(K,Y){return[K[0]+Y[0],K[1]+Y[1]]}function _(K,Y){return[K*Y[0],K*Y[1]]}this.els||this.$initTransformMeasureNodes();function E(K){var Y=K.getBoundingClientRect();return[Y.left,Y.top]}var R=E(this.els[0]),A=E(this.els[1]),T=E(this.els[2]),S=E(this.els[3]),I=w(C(S,A),C(S,T),C(M(A,T),M(S,R))),D=_(1+I[0],C(A,R)),z=_(1+I[1],C(T,R));if(x){var B=x,W=I[0]*B[0]/d+I[1]*B[1]/d+1,H=M(_(B[0],D),_(B[1],z));return M(_(1/W/d,H),R)}var J=C(y,R),G=w(C(D,_(I[0],J)),C(z,_(I[1],J)),J);return _(d,G)}}).call(p.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/dom"),l=t("./config"),u=t("./layer/gutter").Gutter,f=t("./layer/marker").Marker,a=t("./layer/text").Text,o=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,d=t("./scrollbar").VScrollBar,p=t("./renderloop").RenderLoop,y=t("./layer/font_metrics").FontMetrics,x=t("./lib/event_emitter").EventEmitter,g=`	.ace_br1 {border-top-left-radius    : 3px;}	.ace_br2 {border-top-right-radius   : 3px;}	.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}	.ace_br4 {border-bottom-right-radius: 3px;}	.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}	.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}	.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}	.ace_br8 {border-bottom-left-radius : 3px;}	.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}	.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}	.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}	.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}	.ace_editor {	position: relative;	overflow: hidden;	padding: 0;	font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;	direction: ltr;	text-align: left;	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);	}	.ace_scroller {	position: absolute;	overflow: hidden;	top: 0;	bottom: 0;	background-color: inherit;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	cursor: text;	}	.ace_content {	position: absolute;	box-sizing: border-box;	min-width: 100%;	contain: style size layout;	font-variant-ligatures: no-common-ligatures;	}	.ace_dragging .ace_scroller:before{	position: absolute;	top: 0;	left: 0;	right: 0;	bottom: 0;	content: '';	background: rgba(250, 250, 250, 0.01);	z-index: 1000;	}	.ace_dragging.ace_dark .ace_scroller:before{	background: rgba(0, 0, 0, 0.01);	}	.ace_selecting, .ace_selecting * {	cursor: text !important;	}	.ace_gutter {	position: absolute;	overflow : hidden;	width: auto;	top: 0;	bottom: 0;	left: 0;	cursor: default;	z-index: 4;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	contain: style size layout;	}	.ace_gutter-active-line {	position: absolute;	left: 0;	right: 0;	}	.ace_scroller.ace_scroll-left {	box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;	}	.ace_gutter-cell {	position: absolute;	top: 0;	left: 0;	right: 0;	padding-left: 19px;	padding-right: 6px;	background-repeat: no-repeat;	}	.ace_gutter-cell.ace_error {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: 2px center;	}	.ace_gutter-cell.ace_warning {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");	background-position: 2px center;	}	.ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");	background-position: 2px center;	}	.ace_dark .ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");	}	.ace_scrollbar {	contain: strict;	position: absolute;	right: 0;	bottom: 0;	z-index: 6;	}	.ace_scrollbar-inner {	position: absolute;	cursor: text;	left: 0;	top: 0;	}	.ace_scrollbar-v{	overflow-x: hidden;	overflow-y: scroll;	top: 0;	}	.ace_scrollbar-h {	overflow-x: scroll;	overflow-y: hidden;	left: 0;	}	.ace_print-margin {	position: absolute;	height: 100%;	}	.ace_text-input {	position: absolute;	z-index: 0;	width: 0.5em;	height: 1em;	opacity: 0;	background: transparent;	-moz-appearance: none;	appearance: none;	border: none;	resize: none;	outline: none;	overflow: hidden;	font: inherit;	padding: 0 1px;	margin: 0 -1px;	contain: strict;	-ms-user-select: text;	-moz-user-select: text;	-webkit-user-select: text;	user-select: text;	white-space: pre!important;	}	.ace_text-input.ace_composition {	background: transparent;	color: inherit;	z-index: 1000;	opacity: 1;	}	.ace_composition_placeholder { color: transparent }	.ace_composition_marker { 	border-bottom: 1px solid;	position: absolute;	border-radius: 0;	margin-top: 1px;	}	[ace_nocontext=true] {	transform: none!important;	filter: none!important;	clip-path: none!important;	mask : none!important;	contain: none!important;	perspective: none!important;	mix-blend-mode: initial!important;	z-index: auto;	}	.ace_layer {	z-index: 1;	position: absolute;	overflow: hidden;	word-wrap: normal;	white-space: pre;	height: 100%;	width: 100%;	box-sizing: border-box;	pointer-events: none;	}	.ace_gutter-layer {	position: relative;	width: auto;	text-align: right;	pointer-events: auto;	height: 1000000px;	contain: style size layout;	}	.ace_text-layer {	font: inherit !important;	position: absolute;	height: 1000000px;	width: 1000000px;	contain: style size layout;	}	.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {	contain: style size layout;	position: absolute;	top: 0;	left: 0;	right: 0;	}	.ace_hidpi .ace_text-layer,	.ace_hidpi .ace_gutter-layer,	.ace_hidpi .ace_content,	.ace_hidpi .ace_gutter {	contain: strict;	will-change: transform;	}	.ace_hidpi .ace_text-layer > .ace_line, 	.ace_hidpi .ace_text-layer > .ace_line_group {	contain: strict;	}	.ace_cjk {	display: inline-block;	text-align: center;	}	.ace_cursor-layer {	z-index: 4;	}	.ace_cursor {	z-index: 4;	position: absolute;	box-sizing: border-box;	border-left: 2px solid;	transform: translatez(0);	}	.ace_multiselect .ace_cursor {	border-left-width: 1px;	}	.ace_slim-cursors .ace_cursor {	border-left-width: 1px;	}	.ace_overwrite-cursors .ace_cursor {	border-left-width: 0;	border-bottom: 1px solid;	}	.ace_hidden-cursors .ace_cursor {	opacity: 0.2;	}	.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {	opacity: 0;	}	.ace_smooth-blinking .ace_cursor {	transition: opacity 0.18s;	}	.ace_animate-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: step-end;	animation-name: blink-ace-animate;	animation-iteration-count: infinite;	}	.ace_animate-blinking.ace_smooth-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: ease-in-out;	animation-name: blink-ace-animate-smooth;	}	@keyframes blink-ace-animate {	from, to { opacity: 1; }	60% { opacity: 0; }	}	@keyframes blink-ace-animate-smooth {	from, to { opacity: 1; }	45% { opacity: 1; }	60% { opacity: 0; }	85% { opacity: 0; }	}	.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {	position: absolute;	z-index: 3;	}	.ace_marker-layer .ace_selection {	position: absolute;	z-index: 5;	}	.ace_marker-layer .ace_bracket {	position: absolute;	z-index: 6;	}	.ace_marker-layer .ace_error_bracket {	position: absolute;	border-bottom: 1px solid #DE5555;	border-radius: 0;	}	.ace_marker-layer .ace_active-line {	position: absolute;	z-index: 2;	}	.ace_marker-layer .ace_selected-word {	position: absolute;	z-index: 4;	box-sizing: border-box;	}	.ace_line .ace_fold {	box-sizing: border-box;	display: inline-block;	height: 11px;	margin-top: -2px;	vertical-align: middle;	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");	background-repeat: no-repeat, repeat-x;	background-position: center center, top left;	color: transparent;	border: 1px solid black;	border-radius: 2px;	cursor: pointer;	pointer-events: auto;	}	.ace_dark .ace_fold {	}	.ace_fold:hover{	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");	}	.ace_tooltip {	background-color: #FFF;	background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));	border: 1px solid gray;	border-radius: 1px;	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);	color: black;	max-width: 100%;	padding: 3px 4px;	position: fixed;	z-index: 999999;	box-sizing: border-box;	cursor: default;	white-space: pre;	word-wrap: break-word;	line-height: normal;	font-style: normal;	font-weight: normal;	letter-spacing: normal;	pointer-events: none;	}	.ace_folding-enabled > .ace_gutter-cell {	padding-right: 13px;	}	.ace_fold-widget {	box-sizing: border-box;	margin: 0 -12px 0 1px;	display: none;	width: 11px;	vertical-align: top;	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: center;	border-radius: 3px;	border: 1px solid transparent;	cursor: pointer;	}	.ace_folding-enabled .ace_fold-widget {	display: inline-block;   	}	.ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");	}	.ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");	}	.ace_fold-widget:hover {	border: 1px solid rgba(0, 0, 0, 0.3);	background-color: rgba(255, 255, 255, 0.2);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);	}	.ace_fold-widget:active {	border: 1px solid rgba(0, 0, 0, 0.4);	background-color: rgba(0, 0, 0, 0.05);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);	}	.ace_dark .ace_fold-widget {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");	}	.ace_dark .ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget:hover {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	background-color: rgba(255, 255, 255, 0.1);	}	.ace_dark .ace_fold-widget:active {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	}	.ace_inline_button {	border: 1px solid lightgray;	display: inline-block;	margin: -1px 8px;	padding: 0 5px;	pointer-events: auto;	cursor: pointer;	}	.ace_inline_button:hover {	border-color: gray;	background: rgba(200,200,200,0.2);	display: inline-block;	pointer-events: auto;	}	.ace_fold-widget.ace_invalid {	background-color: #FFB4B4;	border-color: #DE5555;	}	.ace_fade-fold-widgets .ace_fold-widget {	transition: opacity 0.4s ease 0.05s;	opacity: 0;	}	.ace_fade-fold-widgets:hover .ace_fold-widget {	transition: opacity 0.05s ease 0.05s;	opacity:1;	}	.ace_underline {	text-decoration: underline;	}	.ace_bold {	font-weight: bold;	}	.ace_nobold .ace_bold {	font-weight: normal;	}	.ace_italic {	font-style: italic;	}	.ace_error-marker {	background-color: rgba(255, 0, 0,0.2);	position: absolute;	z-index: 9;	}	.ace_highlight-marker {	background-color: rgba(255, 255, 0,0.2);	position: absolute;	z-index: 8;	}	.ace_mobile-menu {	position: absolute;	line-height: 1.5;	border-radius: 4px;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	background: white;	box-shadow: 1px 3px 2px grey;	border: 1px solid #dcdcdc;	color: black;	}	.ace_dark > .ace_mobile-menu {	background: #333;	color: #ccc;	box-shadow: 1px 3px 2px grey;	border: 1px solid #444;	}	.ace_mobile-button {	padding: 2px;	cursor: pointer;	overflow: hidden;	}	.ace_mobile-button:hover {	background-color: #eee;	opacity:1;	}	.ace_mobile-button:active {	background-color: #ddd;	}	.ace_placeholder {	font-family: arial;	transform: scale(0.9);	transform-origin: left;	white-space: pre;	opacity: 0.7;	margin: 0 10px;	}`,w=t("./lib/useragent"),C=w.isIE;c.importCssString(g,"ace_editor.css");var M=function(_,E){var R=this;this.container=_||c.createElement("div"),c.addCssClass(this.container,"ace_editor"),c.HI_DPI&&c.addCssClass(this.container,"ace_hidpi"),this.setTheme(E),this.$gutter=c.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=c.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=c.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new f(this.content);var A=this.$textLayer=new a(this.content);this.canvas=A.element,this.$markerFront=new f(this.content),this.$cursorLayer=new o(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.on("scroll",function(T){R.$scrollAnimation||R.session.setScrollTop(T.data-R.scrollMargin.top)}),this.scrollBarH.on("scroll",function(T){R.$scrollAnimation||R.session.setScrollLeft(T.data-R.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new y(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(T){R.updateCharacterSize(),R.onResize(!0,R.gutterWidth,R.$size.width,R.$size.height),R._signal("changeCharacterSize",T)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!w.isIOS,this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),l.resetOptions(this),l._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,s.implement(this,x),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),c.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(_){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=_,_&&this.scrollMargin.top&&_.getScrollTop()<=0&&_.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(_),this.$markerBack.setSession(_),this.$markerFront.setSession(_),this.$gutterLayer.setSession(_),this.$textLayer.setSession(_),_&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(_,E,R){if(E===void 0&&(E=1/0),this.$changedLines?(this.$changedLines.firstRow>_&&(this.$changedLines.firstRow=_),this.$changedLines.lastRow<E&&(this.$changedLines.lastRow=E)):this.$changedLines={firstRow:_,lastRow:E},this.$changedLines.lastRow<this.layerConfig.firstRow)if(R)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(_){_?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(_,E,R,A){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=_?1:0;var T=this.container;A||(A=T.clientHeight||T.scrollHeight),R||(R=T.clientWidth||T.scrollWidth);var S=this.$updateCachedSize(_,E,R,A);if(!this.$size.scrollerHeight||!R&&!A)return this.resizing=0;_&&(this.$gutterLayer.$padding=null),_?this.$renderChanges(S|this.$changes,!0):this.$loop.schedule(S|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(_,E,R,A){A-=this.$extraHeight||0;var T=0,S=this.$size,I={width:S.width,height:S.height,scrollerHeight:S.scrollerHeight,scrollerWidth:S.scrollerWidth};if(A&&(_||S.height!=A)&&(S.height=A,T|=this.CHANGE_SIZE,S.scrollerHeight=S.height,this.$horizScroll&&(S.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",T=T|this.CHANGE_SCROLL),R&&(_||S.width!=R)){T|=this.CHANGE_SIZE,S.width=R,E==null&&(E=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=E,c.setStyle(this.scrollBarH.element.style,"left",E+"px"),c.setStyle(this.scroller.style,"left",E+this.margin.left+"px"),S.scrollerWidth=Math.max(0,R-E-this.scrollBarV.getWidth()-this.margin.h),c.setStyle(this.$gutter.style,"left",this.margin.left+"px");var D=this.scrollBarV.getWidth()+"px";c.setStyle(this.scrollBarH.element.style,"right",D),c.setStyle(this.scroller.style,"right",D),c.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||_)&&(T|=this.CHANGE_FULL)}return S.$dirty=!R||!A,T&&this._signal("resize",I),T},this.onGutterResize=function(_){var E=this.$showGutter?_:0;E!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,E,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var _=this.$size.scrollerWidth-this.$padding*2,E=Math.floor(_/this.characterWidth);return this.session.adjustWrapLimit(E,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(_){this.setOption("animatedScroll",_)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(_){this.setOption("showInvisibles",_),this.session.$bidiHandler.setShowInvisibles(_)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(_){this.setOption("displayIndentGuides",_)},this.setShowPrintMargin=function(_){this.setOption("showPrintMargin",_)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(_){this.setOption("printMarginColumn",_)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(_){return this.setOption("showGutter",_)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(_){this.setOption("fadeFoldWidgets",_)},this.setHighlightGutterLine=function(_){this.setOption("highlightGutterLine",_)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var _=c.createElement("div");_.className="ace_layer ace_print-margin-layer",this.$printMarginEl=c.createElement("div"),this.$printMarginEl.className="ace_print-margin",_.appendChild(this.$printMarginEl),this.content.insertBefore(_,this.content.firstChild)}var E=this.$printMarginEl.style;E.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",E.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var _=this.textarea.style,E=this.$composition;if(!this.$keepTextAreaAtCursor&&!E){c.translate(this.textarea,-100,0);return}var R=this.$cursorLayer.$pixelPos;if(R){E&&E.markerRange&&(R=this.$cursorLayer.getPixelPosition(E.markerRange.start,!0));var A=this.layerConfig,T=R.top,S=R.left;T-=A.offset;var I=E&&E.useTextareaForIME?this.lineHeight:C?0:1;if(T<0||T>A.height-I){c.translate(this.textarea,0,0);return}var D=1,z=this.$size.height-I;if(!E)T+=this.lineHeight;else if(E.useTextareaForIME){var B=this.textarea.value;D=this.characterWidth*this.session.$getStringScreenWidth(B)[0]}else T+=this.lineHeight+2;S-=this.scrollLeft,S>this.$size.scrollerWidth-D&&(S=this.$size.scrollerWidth-D),S+=this.gutterWidth+this.margin.left,c.setStyle(_,"height",I+"px"),c.setStyle(_,"width",D+"px"),c.translate(this.textarea,Math.min(S,this.$size.scrollerWidth-D),Math.min(T,z))}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var _=this.layerConfig,E=_.lastRow,R=this.session.documentToScreenRow(E,0)*_.lineHeight;return R-this.session.getScrollTop()>_.height-_.lineHeight?E-1:E},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(_){this.$padding=_,this.$textLayer.setPadding(_),this.$cursorLayer.setPadding(_),this.$markerFront.setPadding(_),this.$markerBack.setPadding(_),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(_,E,R,A){var T=this.scrollMargin;T.top=_|0,T.bottom=E|0,T.right=A|0,T.left=R|0,T.v=T.top+T.bottom,T.h=T.left+T.right,T.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-T.top),this.updateFull()},this.setMargin=function(_,E,R,A){var T=this.margin;T.top=_|0,T.bottom=E|0,T.right=A|0,T.left=R|0,T.v=T.top+T.bottom,T.h=T.left+T.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(_){this.setOption("hScrollBarAlwaysVisible",_)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(_){this.setOption("vScrollBarAlwaysVisible",_)},this.$updateScrollBarV=function(){var _=this.layerConfig.maxHeight,E=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(_-=(E-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>_-E&&(_=this.scrollTop+E,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(_+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(_,E){if(this.$changes&&(_|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!_&&!E){this.$changes|=_;return}if(this.$size.$dirty)return this.$changes|=_,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",_),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var R=this.layerConfig;if(_&this.CHANGE_FULL||_&this.CHANGE_SIZE||_&this.CHANGE_TEXT||_&this.CHANGE_LINES||_&this.CHANGE_SCROLL||_&this.CHANGE_H_SCROLL){if(_|=this.$computeLayerConfig()|this.$loop.clear(),R.firstRow!=this.layerConfig.firstRow&&R.firstRowScreen==this.layerConfig.firstRowScreen){var A=this.scrollTop+(R.firstRow-this.layerConfig.firstRow)*this.lineHeight;A>0&&(this.scrollTop=A,_=_|this.CHANGE_SCROLL,_|=this.$computeLayerConfig()|this.$loop.clear())}R=this.layerConfig,this.$updateScrollBarV(),_&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),c.translate(this.content,-this.scrollLeft,-R.offset);var T=R.width+2*this.$padding+"px",S=R.minHeight+"px";c.setStyle(this.content.style,"width",T),c.setStyle(this.content.style,"height",S)}if(_&this.CHANGE_H_SCROLL&&(c.translate(this.content,-this.scrollLeft,-R.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),_&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(R),this.$showGutter&&this.$gutterLayer.update(R),this.$markerBack.update(R),this.$markerFront.update(R),this.$cursorLayer.update(R),this.$moveTextAreaToCursor(),this._signal("afterRender",_);return}if(_&this.CHANGE_SCROLL){this.$changedLines=null,_&this.CHANGE_TEXT||_&this.CHANGE_LINES?this.$textLayer.update(R):this.$textLayer.scrollLines(R),this.$showGutter&&(_&this.CHANGE_GUTTER||_&this.CHANGE_LINES?this.$gutterLayer.update(R):this.$gutterLayer.scrollLines(R)),this.$markerBack.update(R),this.$markerFront.update(R),this.$cursorLayer.update(R),this.$moveTextAreaToCursor(),this._signal("afterRender",_);return}_&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(R),this.$showGutter&&this.$gutterLayer.update(R)):_&this.CHANGE_LINES?(this.$updateLines()||_&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(R):_&this.CHANGE_TEXT||_&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(R):_&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(R),_&this.CHANGE_CURSOR&&(this.$cursorLayer.update(R),this.$moveTextAreaToCursor()),_&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(R),_&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(R),this._signal("afterRender",_)},this.$autosize=function(){var _=this.session.getScreenLength()*this.lineHeight,E=this.$maxLines*this.lineHeight,R=Math.min(E,Math.max((this.$minLines||1)*this.lineHeight,_))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(R+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&R>this.$maxPixelHeight&&(R=this.$maxPixelHeight);var A=R<=2*this.lineHeight,T=!A&&_>E;if(R!=this.desiredHeight||this.$size.height!=this.desiredHeight||T!=this.$vScroll){T!=this.$vScroll&&(this.$vScroll=T,this.scrollBarV.setVisible(T));var S=this.container.clientWidth;this.container.style.height=R+"px",this.$updateCachedSize(!0,this.$gutterWidth,S,R),this.desiredHeight=R,this._signal("autosize")}},this.$computeLayerConfig=function(){var _=this.session,E=this.$size,R=E.height<=2*this.lineHeight,A=this.session.getScreenLength(),T=A*this.lineHeight,S=this.$getLongestLine(),I=!R&&(this.$hScrollBarAlwaysVisible||E.scrollerWidth-S-2*this.$padding<0),D=this.$horizScroll!==I;D&&(this.$horizScroll=I,this.scrollBarH.setVisible(I));var z=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var B=E.scrollerHeight+this.lineHeight,W=!this.$maxLines&&this.$scrollPastEnd?(E.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;T+=W;var H=this.scrollMargin;this.session.setScrollTop(Math.max(-H.top,Math.min(this.scrollTop,T-E.scrollerHeight+H.bottom))),this.session.setScrollLeft(Math.max(-H.left,Math.min(this.scrollLeft,S+2*this.$padding-E.scrollerWidth+H.right)));var J=!R&&(this.$vScrollBarAlwaysVisible||E.scrollerHeight-T+W<0||this.scrollTop>H.top),G=z!==J;G&&(this.$vScroll=J,this.scrollBarV.setVisible(J));var K=this.scrollTop%this.lineHeight,Y=Math.ceil(B/this.lineHeight)-1,ne=Math.max(0,Math.round((this.scrollTop-K)/this.lineHeight)),le=ne+Y,j,re,fe=this.lineHeight;ne=_.screenToDocumentRow(ne,0);var ve=_.getFoldLine(ne);ve&&(ne=ve.start.row),j=_.documentToScreenRow(ne,0),re=_.getRowLength(ne)*fe,le=Math.min(_.screenToDocumentRow(le,0),_.getLength()-1),B=E.scrollerHeight+_.getRowLength(le)*fe+re,K=this.scrollTop-j*fe;var ye=0;return(this.layerConfig.width!=S||D)&&(ye=this.CHANGE_H_SCROLL),(D||G)&&(ye|=this.$updateCachedSize(!0,this.gutterWidth,E.width,E.height),this._signal("scrollbarVisibilityChanged"),G&&(S=this.$getLongestLine())),this.layerConfig={width:S,padding:this.$padding,firstRow:ne,firstRowScreen:j,lastRow:le,lineHeight:fe,characterWidth:this.characterWidth,minHeight:B,maxHeight:T,offset:K,gutterOffset:fe?Math.max(0,Math.ceil((K+E.height-E.scrollerHeight)/fe)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(S-this.$padding),ye},this.$updateLines=function(){if(this.$changedLines){var _=this.$changedLines.firstRow,E=this.$changedLines.lastRow;this.$changedLines=null;var R=this.layerConfig;if(!(_>R.lastRow+1)&&!(E<R.firstRow)){if(E===1/0){this.$showGutter&&this.$gutterLayer.update(R),this.$textLayer.update(R);return}return this.$textLayer.updateLines(R,_,E),!0}}},this.$getLongestLine=function(){var _=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(_+=1),this.$textLayer&&_>this.$textLayer.MAX_LINE_LENGTH&&(_=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(_*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(_,E){this.$gutterLayer.addGutterDecoration(_,E)},this.removeGutterDecoration=function(_,E){this.$gutterLayer.removeGutterDecoration(_,E)},this.updateBreakpoints=function(_){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(_){this.$gutterLayer.setAnnotations(_),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(_,E,R){this.scrollCursorIntoView(_,R),this.scrollCursorIntoView(E,R)},this.scrollCursorIntoView=function(_,E,R){if(this.$size.scrollerHeight!==0){var A=this.$cursorLayer.getPixelPosition(_),T=A.left,S=A.top,I=R&&R.top||0,D=R&&R.bottom||0,z=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;z+I>S?(E&&z+I>S+this.lineHeight&&(S-=E*this.$size.scrollerHeight),S===0&&(S=-this.scrollMargin.top),this.session.setScrollTop(S)):z+this.$size.scrollerHeight-D<S+this.lineHeight&&(E&&z+this.$size.scrollerHeight-D<S-this.lineHeight&&(S+=E*this.$size.scrollerHeight),this.session.setScrollTop(S+this.lineHeight+D-this.$size.scrollerHeight));var B=this.scrollLeft;B>T?(T<this.$padding+2*this.layerConfig.characterWidth&&(T=-this.scrollMargin.left),this.session.setScrollLeft(T)):B+this.$size.scrollerWidth<T+this.characterWidth?this.session.setScrollLeft(Math.round(T+this.characterWidth-this.$size.scrollerWidth)):B<=this.$padding&&T-B<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(_){this.session.setScrollTop(_*this.lineHeight)},this.alignCursor=function(_,E){typeof _=="number"&&(_={row:_,column:0});var R=this.$cursorLayer.getPixelPosition(_),A=this.$size.scrollerHeight-this.lineHeight,T=R.top-A*(E||0);return this.session.setScrollTop(T),T},this.STEPS=8,this.$calcSteps=function(_,E){var R=0,A=this.STEPS,T=[],S=function(I,D,z){return z*(Math.pow(I-1,3)+1)+D};for(R=0;R<A;++R)T.push(S(R/this.STEPS,_,E-_));return T},this.scrollToLine=function(_,E,R,A){var T=this.$cursorLayer.getPixelPosition({row:_,column:0}),S=T.top;E&&(S-=this.$size.scrollerHeight/2);var I=this.scrollTop;this.session.setScrollTop(S),R!==!1&&this.animateScrolling(I,A)},this.animateScrolling=function(_,E){var R=this.scrollTop;if(this.$animatedScroll){var A=this;if(_!=R){if(this.$scrollAnimation){var T=this.$scrollAnimation.steps;if(T.length&&(_=T[0],_==R))return}var S=A.$calcSteps(_,R);this.$scrollAnimation={from:_,to:R,steps:S},clearInterval(this.$timer),A.session.setScrollTop(S.shift()),A.session.$scrollTop=R,this.$timer=setInterval(function(){if(!A.session)return clearInterval(A.$timer);S.length?(A.session.setScrollTop(S.shift()),A.session.$scrollTop=R):R!=null?(A.session.$scrollTop=-1,A.session.setScrollTop(R),R=null):(A.$timer=clearInterval(A.$timer),A.$scrollAnimation=null,E&&E())},10)}}},this.scrollToY=function(_){this.scrollTop!==_&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=_)},this.scrollToX=function(_){this.scrollLeft!==_&&(this.scrollLeft=_),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(_,E){this.session.setScrollTop(E),this.session.setScrollLeft(E)},this.scrollBy=function(_,E){E&&this.session.setScrollTop(this.session.getScrollTop()+E),_&&this.session.setScrollLeft(this.session.getScrollLeft()+_)},this.isScrollableBy=function(_,E){if(E<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||E>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||_<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||_>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(_,E){var R;if(this.$hasCssTransforms){R={top:0,left:0};var A=this.$fontMetrics.transformCoordinates([_,E]);_=A[1]-this.gutterWidth-this.margin.left,E=A[0]}else R=this.scroller.getBoundingClientRect();var T=_+this.scrollLeft-R.left-this.$padding,S=T/this.characterWidth,I=Math.floor((E+this.scrollTop-R.top)/this.lineHeight),D=this.$blockCursor?Math.floor(S):Math.round(S);return{row:I,column:D,side:S-D>0?1:-1,offsetX:T}},this.screenToTextCoordinates=function(_,E){var R;if(this.$hasCssTransforms){R={top:0,left:0};var A=this.$fontMetrics.transformCoordinates([_,E]);_=A[1]-this.gutterWidth-this.margin.left,E=A[0]}else R=this.scroller.getBoundingClientRect();var T=_+this.scrollLeft-R.left-this.$padding,S=T/this.characterWidth,I=this.$blockCursor?Math.floor(S):Math.round(S),D=Math.floor((E+this.scrollTop-R.top)/this.lineHeight);return this.session.screenToDocumentPosition(D,Math.max(I,0),T)},this.textToScreenCoordinates=function(_,E){var R=this.scroller.getBoundingClientRect(),A=this.session.documentToScreenPosition(_,E),T=this.$padding+(this.session.$bidiHandler.isBidiRow(A.row,_)?this.session.$bidiHandler.getPosLeft(A.column):Math.round(A.column*this.characterWidth)),S=A.row*this.lineHeight;return{pageX:R.left+T-this.scrollLeft,pageY:R.top+S-this.scrollTop}},this.visualizeFocus=function(){c.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){c.removeCssClass(this.container,"ace_focus")},this.showComposition=function(_){this.$composition=_,_.cssText||(_.cssText=this.textarea.style.cssText),_.useTextareaForIME==null&&(_.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(c.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):_.markerId=this.session.addMarker(_.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(_){var E=this.session.selection.cursor;this.addToken(_,"composition_placeholder",E.row,E.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),c.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var _=this.session.selection.cursor;this.removeExtraToken(_.row,_.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(_,E,R,A){var T=this.session;T.bgTokenizer.lines[R]=null;var S={type:E,value:_},I=T.getTokens(R);if(A==null)I.push(S);else for(var D=0,z=0;z<I.length;z++){var B=I[z];if(D+=B.value.length,A<=D){var W=B.value.length-(D-A),H=B.value.slice(0,W),J=B.value.slice(W);I.splice(z,1,{type:B.type,value:H},S,{type:B.type,value:J});break}}this.updateLines(R,R)},this.removeExtraToken=function(_,E){this.updateLines(_,_)},this.setTheme=function(_,E){var R=this;if(this.$themeId=_,R._dispatchEvent("themeChange",{theme:_}),!_||typeof _=="string"){var A=_||this.$options.theme.initialValue;l.loadModule(["theme",A],T)}else T(_);function T(S){if(R.$themeId!=_)return E&&E();if(!S||!S.cssClass)throw new Error("couldn't load module "+_+" or it didn't call define");S.$id&&(R.$themeId=S.$id),c.importCssString(S.cssText,S.cssClass,R.container),R.theme&&c.removeCssClass(R.container,R.theme.cssClass);var I="padding"in S?S.padding:"padding"in(R.theme||{})?4:R.$padding;R.$padding&&I!=R.$padding&&R.setPadding(I),R.$theme=S.cssClass,R.theme=S,c.addCssClass(R.container,S.cssClass),c.setCssClass(R.container,"ace_dark",S.isDark),R.$size&&(R.$size.width=0,R.$updateSizeAsync()),R._dispatchEvent("themeLoaded",{theme:S}),E&&E()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(_,E){c.setCssClass(this.container,_,E!==!1)},this.unsetStyle=function(_){c.removeCssClass(this.container,_)},this.setCursorStyle=function(_){c.setStyle(this.scroller.style,"cursor",_)},this.setMouseCursor=function(_){c.setStyle(this.scroller.style,"cursor",_)},this.attachToShadowRoot=function(){c.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(M.prototype),l.defineOptions(M.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(_){this.$textLayer.setShowInvisibles(_)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(_){typeof _=="number"&&(this.$printMarginColumn=_),this.$showPrintMargin=!!_,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(_){this.$gutter.style.display=_?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(_){c.setCssClass(this.$gutter,"ace_fade-fold-widgets",_)},initialValue:!1},showFoldWidgets:{set:function(_){this.$gutterLayer.setShowFoldWidgets(_),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(_){this.$textLayer.setDisplayIndentGuides(_)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(_){this.$gutterLayer.setHighlightGutterLine(_),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(_){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(_){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(_){typeof _=="number"&&(_=_+"px"),this.container.style.fontSize=_,this.updateFontSize()},initialValue:12},fontFamily:{set:function(_){this.container.style.fontFamily=_,this.updateFontSize()}},maxLines:{set:function(_){this.updateFull()}},minLines:{set:function(_){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(_){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(_){_=+_||0,this.$scrollPastEnd!=_&&(this.$scrollPastEnd=_,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(_){this.$gutterLayer.$fixedWidth=!!_,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(_){this.setTheme(_)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!w.isMobile&&!w.isIE}}),i.VirtualRenderer=M}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,i,r){var s=t("../lib/oop"),c=t("../lib/net"),l=t("../lib/event_emitter").EventEmitter,u=t("../config");function f(d){var p="importScripts('"+c.qualifyURL(d)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var y=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,x=new y;return x.append(p),x.getBlob("application/javascript")}}function a(d){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(u.get("loadWorkerFromBlob")){var p=f(d),y=window.URL||window.webkitURL,x=y.createObjectURL(p);return new Worker(x)}return new Worker(d)}var o=function(d){d.postMessage||(d=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=d,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){s.implement(this,l),this.$createWorkerFromOldConfig=function(d,p,y,x,g){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),u.get("packaged")||!t.toUrl)x=x||u.moduleUrl(p,"worker");else{var w=this.$normalizePath;x=x||w(t.toUrl("ace/worker/worker.js",null,"_"));var C={};d.forEach(function(M){C[M]=w(t.toUrl(M,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=a(x),g&&this.send("importScripts",g),this.$worker.postMessage({init:!0,tlns:C,module:p,classname:y}),this.$worker},this.onMessage=function(d){var p=d.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var y=this.callbacks[p.id];y&&(y(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(d){window.console&&console.error&&console.error(d)},this.$normalizePath=function(d){return c.qualifyURL(d)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(d,p){this.$worker.postMessage({command:d,args:p})},this.call=function(d,p,y){if(y){var x=this.callbackId++;this.callbacks[x]=y,p.push(x)}this.send(d,p)},this.emit=function(d,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker.postMessage({event:d,data:{data:p.data}})}catch(y){console.error(y.stack)}},this.attachToDocument=function(d){this.$doc&&this.terminate(),this.$doc=d,this.call("setValue",[d.getValue()]),d.on("change",this.changeListener)},this.changeListener=function(d){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),d.action=="insert"?this.deltaQueue.push(d.start,d.lines):this.deltaQueue.push(d.start,d.end)},this.$sendDeltaQueue=function(){var d=this.deltaQueue;d&&(this.deltaQueue=null,d.length>50&&d.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:d}))}}).call(o.prototype);var h=function(d,p,y){var x=null,g=!1,w=Object.create(l),C=[],M=new o({messageBuffer:C,terminate:function(){},postMessage:function(E){C.push(E),x&&(g?setTimeout(_):_())}});M.setEmitSync=function(E){g=E};var _=function(){var E=C.shift();E.command?x[E.command].apply(x,E.args):E.event&&w._signal(E.event,E.data)};return w.postMessage=function(E){M.onMessage({data:E})},w.callback=function(E,R){this.postMessage({type:"call",id:R,data:E})},w.emit=function(E,R){this.postMessage({type:"event",name:E,data:R})},u.loadModule(["worker",p],function(E){for(x=new E[y](w);C.length;)_()}),M};i.UIWorkerClient=h,i.WorkerClient=o,i.createWorker=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,i,r){var s=t("./range").Range,c=t("./lib/event_emitter").EventEmitter,l=t("./lib/oop"),u=function(f,a,o,h,d,p){var y=this;this.length=a,this.session=f,this.doc=f.getDocument(),this.mainClass=d,this.othersClass=p,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=h,this.$onCursorChange=function(){setTimeout(function(){y.onCursorChange()})},this.$pos=o;var x=f.getUndoManager().$undoStack||f.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=x.length,this.setup(),f.selection.on("changeCursor",this.$onCursorChange)};(function(){l.implement(this,c),this.setup=function(){var f=this,a=this.doc,o=this.session;this.selectionBefore=o.selection.toJSON(),o.selection.inMultiSelectMode&&o.selection.toSingleRange(),this.pos=a.createAnchor(this.$pos.row,this.$pos.column);var h=this.pos;h.$insertRight=!0,h.detach(),h.markerId=o.addMarker(new s(h.row,h.column,h.row,h.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(d){var p=a.createAnchor(d.row,d.column);p.$insertRight=!0,p.detach(),f.others.push(p)}),o.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var f=this.session,a=this;this.othersActive=!0,this.others.forEach(function(o){o.markerId=f.addMarker(new s(o.row,o.column,o.row,o.column+a.length),a.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var f=0;f<this.others.length;f++)this.session.removeMarker(this.others[f].markerId)}},this.onUpdate=function(f){if(this.$updating)return this.updateAnchors(f);var a=f;if(a.start.row===a.end.row&&a.start.row===this.pos.row){this.$updating=!0;var o=f.action==="insert"?a.end.column-a.start.column:a.start.column-a.end.column,h=a.start.column>=this.pos.column&&a.start.column<=this.pos.column+this.length+1,d=a.start.column-this.pos.column;if(this.updateAnchors(f),h&&(this.length+=o),h&&!this.session.$fromUndo){if(f.action==="insert")for(var p=this.others.length-1;p>=0;p--){var y=this.others[p],x={row:y.row,column:y.column+d};this.doc.insertMergedLines(x,f.lines)}else if(f.action==="remove")for(var p=this.others.length-1;p>=0;p--){var y=this.others[p],x={row:y.row,column:y.column+d};this.doc.remove(new s(x.row,x.column,x.row,x.column-o))}}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(f){this.pos.onChange(f);for(var a=this.others.length;a--;)this.others[a].onChange(f);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var f=this,a=this.session,o=function(d,p){a.removeMarker(d.markerId),d.markerId=a.addMarker(new s(d.row,d.column,d.row,d.column+f.length),p,null,!1)};o(this.pos,this.mainClass);for(var h=this.others.length;h--;)o(this.others[h],this.othersClass)}},this.onCursorChange=function(f){if(!(this.$updating||!this.session)){var a=this.session.selection.getCursor();a.row===this.pos.row&&a.column>=this.pos.column&&a.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",f)):(this.hideOtherMarkers(),this._emit("cursorLeave",f))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var f=this.session.getUndoManager(),a=(f.$undoStack||f.$undostack).length-this.$undoStackDepth,o=0;o<a;o++)f.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(u.prototype),i.PlaceHolder=u}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,i,r){var s=t("../lib/event"),c=t("../lib/useragent");function l(f,a){return f.row==a.row&&f.column==a.column}function u(f){var a=f.domEvent,o=a.altKey,h=a.shiftKey,d=a.ctrlKey,p=f.getAccelKey(),y=f.getButton();if(d&&c.isMac&&(y=a.button),f.editor.inMultiSelectMode&&y==2){f.editor.textInput.onContextMenu(f.domEvent);return}if(!d&&!o&&!p){y===0&&f.editor.inMultiSelectMode&&f.editor.exitMultiSelectMode();return}if(y===0){var x=f.editor,g=x.selection,w=x.inMultiSelectMode,C=f.getDocumentPosition(),M=g.getCursor(),_=f.inSelection()||g.isEmpty()&&l(C,M),E=f.x,R=f.y,A=function(ne){E=ne.clientX,R=ne.clientY},T=x.session,S=x.renderer.pixelToScreenCoordinates(E,R),I=S,D;if(x.$mouseHandler.$enableJumpToDef)d&&o||p&&o?D=h?"block":"add":o&&x.$blockSelectEnabled&&(D="block");else if(p&&!o){if(D="add",!w&&h)return}else o&&x.$blockSelectEnabled&&(D="block");if(D&&c.isMac&&a.ctrlKey&&x.$mouseHandler.cancelContextMenu(),D=="add"){if(!w&&_)return;if(!w){var z=g.toOrientedRange();x.addSelectionMarker(z)}var B=g.rangeList.rangeAtPoint(C);x.inVirtualSelectionMode=!0,h&&(B=null,z=g.ranges[0]||z,x.removeSelectionMarker(z)),x.once("mouseup",function(){var ne=g.toOrientedRange();B&&ne.isEmpty()&&l(B.cursor,ne.cursor)?g.substractPoint(ne.cursor):(h?g.substractPoint(z.cursor):z&&(x.removeSelectionMarker(z),g.addRange(z)),g.addRange(ne)),x.inVirtualSelectionMode=!1})}else if(D=="block"){f.stop(),x.inVirtualSelectionMode=!0;var W,H=[],J=function(){var ne=x.renderer.pixelToScreenCoordinates(E,R),le=T.screenToDocumentPosition(ne.row,ne.column,ne.offsetX);l(I,ne)&&l(le,g.lead)||(I=ne,x.selection.moveToPosition(le),x.renderer.scrollCursorIntoView(),x.removeSelectionMarkers(H),H=g.rectangularRangeBlock(I,S),x.$mouseHandler.$clickSelection&&H.length==1&&H[0].isEmpty()&&(H[0]=x.$mouseHandler.$clickSelection.clone()),H.forEach(x.addSelectionMarker,x),x.updateSelectionMarkers())};w&&!p?g.toSingleRange():!w&&p&&(W=g.toOrientedRange(),x.addSelectionMarker(W)),h?S=T.documentToScreenPosition(g.lead):g.moveToPosition(C),I={row:-1,column:-1};var G=function(ne){J(),clearInterval(Y),x.removeSelectionMarkers(H),H.length||(H=[g.toOrientedRange()]),W&&(x.removeSelectionMarker(W),g.toSingleRange(W));for(var le=0;le<H.length;le++)g.addRange(H[le]);x.inVirtualSelectionMode=!1,x.$mouseHandler.$clickSelection=null},K=J;s.capture(x.container,A,G);var Y=setInterval(function(){K()},20);return f.preventDefault()}}}i.onMouseDown=u}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,i,r){i.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(c){c.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(c){c.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(c){c.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(c){c.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(c){c.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(c){c.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(c){c.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(c){c.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(c){c.multiSelect.rangeCount>1?c.multiSelect.joinSelections():c.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(c){c.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(c){c.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(c){c.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],i.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(c){c.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(c){return c&&c.inMultiSelectMode}}];var s=t("../keyboard/hash_handler").HashHandler;i.keyboardHandler=new s(i.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,i,r){var s=t("./range_list").RangeList,c=t("./range").Range,l=t("./selection").Selection,u=t("./mouse/multi_select_handler").onMouseDown,f=t("./lib/event"),a=t("./lib/lang"),o=t("./commands/multi_select_commands");i.commands=o.defaultCommands.concat(o.multiSelectCommands);var h=t("./search").Search,d=new h;function p(M,_,E){return d.$options.wrap=!0,d.$options.needle=_,d.$options.backwards=E==-1,d.find(M)}var y=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(y.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(M,_){if(M){if(!this.inMultiSelectMode&&this.rangeCount===0){var E=this.toOrientedRange();if(this.rangeList.add(E),this.rangeList.add(M),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),_||this.fromOrientedRange(M);this.rangeList.removeAll(),this.rangeList.add(E),this.$onAddRange(E)}M.cursor||(M.cursor=M.end);var R=this.rangeList.add(M);return this.$onAddRange(M),R.length&&this.$onRemoveRange(R),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),_||this.fromOrientedRange(M)}},this.toSingleRange=function(M){M=M||this.ranges[0];var _=this.rangeList.removeAll();_.length&&this.$onRemoveRange(_),M&&this.fromOrientedRange(M)},this.substractPoint=function(M){var _=this.rangeList.substractPoint(M);if(_)return this.$onRemoveRange(_),_[0]},this.mergeOverlappingRanges=function(){var M=this.rangeList.merge();M.length&&this.$onRemoveRange(M)},this.$onAddRange=function(M){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(M),this._signal("addRange",{range:M})},this.$onRemoveRange=function(M){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var _=this.rangeList.ranges.pop();M.push(_),this.rangeCount=0}for(var E=M.length;E--;){var R=this.ranges.indexOf(M[E]);this.ranges.splice(R,1)}this._signal("removeRange",{ranges:M}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),_=_||this.ranges[0],_&&!_.isEqual(this.getRange())&&this.fromOrientedRange(_)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var M=this.ranges.length?this.ranges:[this.getRange()],_=[],E=0;E<M.length;E++){var R=M[E],A=R.start.row,T=R.end.row;if(A===T)_.push(R.clone());else{for(_.push(new c(A,R.start.column,A,this.session.getLine(A).length));++A<T;)_.push(this.getLineRange(A,!0));_.push(new c(T,0,T,R.end.column))}E==0&&!this.isBackwards()&&(_=_.reverse())}this.toSingleRange();for(var E=_.length;E--;)this.addRange(_[E])},this.joinSelections=function(){var M=this.rangeList.ranges,_=M[M.length-1],E=c.fromPoints(M[0].start,_.end);this.toSingleRange(),this.setSelectionRange(E,_.cursor==_.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var M=this.rangeList.ranges,_=M[M.length-1],E=c.fromPoints(M[0].start,_.end);this.toSingleRange(),this.setSelectionRange(E,_.cursor==_.start)}else{var R=this.session.documentToScreenPosition(this.cursor),A=this.session.documentToScreenPosition(this.anchor),T=this.rectangularRangeBlock(R,A);T.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(M,_,E){var R=[],A=M.column<_.column;if(A)var T=M.column,S=_.column,I=M.offsetX,D=_.offsetX;else var T=_.column,S=M.column,I=_.offsetX,D=M.offsetX;var z=M.row<_.row;if(z)var B=M.row,W=_.row;else var B=_.row,W=M.row;T<0&&(T=0),B<0&&(B=0),B==W&&(E=!0);for(var H,J=B;J<=W;J++){var G=c.fromPoints(this.session.screenToDocumentPosition(J,T,I),this.session.screenToDocumentPosition(J,S,D));if(G.isEmpty()){if(H&&g(G.end,H))break;H=G.end}G.cursor=A?G.start:G.end,R.push(G)}if(z&&R.reverse(),!E){for(var K=R.length-1;R[K].isEmpty()&&K>0;)K--;if(K>0)for(var Y=0;R[Y].isEmpty();)Y++;for(var ne=K;ne>=Y;ne--)R[ne].isEmpty()&&R.splice(ne,1)}return R}}).call(l.prototype);var x=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(M){M.cursor||(M.cursor=M.end);var _=this.getSelectionStyle();return M.marker=this.session.addMarker(M,"ace_selection",_),this.session.$selectionMarkers.push(M),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,M},this.removeSelectionMarker=function(M){if(M.marker){this.session.removeMarker(M.marker);var _=this.session.$selectionMarkers.indexOf(M);_!=-1&&this.session.$selectionMarkers.splice(_,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(M){for(var _=this.session.$selectionMarkers,E=M.length;E--;){var R=M[E];if(R.marker){this.session.removeMarker(R.marker);var A=_.indexOf(R);A!=-1&&_.splice(A,1)}}this.session.selectionMarkerCount=_.length},this.$onAddRange=function(M){this.addSelectionMarker(M.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(M){this.removeSelectionMarkers(M.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(M){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(o.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(M){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(o.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(M){var _=M.command,E=M.editor;if(E.multiSelect){if(_.multiSelectAction)_.multiSelectAction=="forEach"?R=E.forEachSelection(_,M.args):_.multiSelectAction=="forEachLine"?R=E.forEachSelection(_,M.args,!0):_.multiSelectAction=="single"?(E.exitMultiSelectMode(),R=_.exec(E,M.args||{})):R=_.multiSelectAction(E,M.args||{});else{var R=_.exec(E,M.args||{});E.multiSelect.addRange(E.multiSelect.toOrientedRange()),E.multiSelect.mergeOverlappingRanges()}return R}},this.forEachSelection=function(M,_,E){if(!this.inVirtualSelectionMode){var R=E&&E.keepOrder,A=E==!0||E&&E.$byLines,T=this.session,S=this.selection,I=S.rangeList,D=(R?S:I).ranges,z;if(!D.length)return M.exec?M.exec(this,_||{}):M(this,_||{});var B=S._eventRegistry;S._eventRegistry={};var W=new l(T);this.inVirtualSelectionMode=!0;for(var H=D.length;H--;){if(A)for(;H>0&&D[H].start.row==D[H-1].end.row;)H--;W.fromOrientedRange(D[H]),W.index=H,this.selection=T.selection=W;var J=M.exec?M.exec(this,_||{}):M(this,_||{});!z&&J!==void 0&&(z=J),W.toOrientedRange(D[H])}W.detach(),this.selection=T.selection=S,this.inVirtualSelectionMode=!1,S._eventRegistry=B,S.mergeOverlappingRanges(),S.ranges[0]&&S.fromOrientedRange(S.ranges[0]);var G=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),G&&G.from==G.to&&this.renderer.animateScrolling(G.from),z}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var M="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var _=this.multiSelect.rangeList.ranges,E=[],R=0;R<_.length;R++)E.push(this.session.getTextRange(_[R]));var A=this.session.getDocument().getNewLineCharacter();M=E.join(A),M.length==(E.length-1)*A.length&&(M="")}else this.selection.isEmpty()||(M=this.session.getTextRange(this.getSelectionRange()));return M},this.$checkMultiselectChange=function(M,_){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var E=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&_==this.multiSelect.anchor)return;var R=_==this.multiSelect.anchor?E.cursor==E.start?E.end:E.start:E.cursor;R.row!=_.row||this.session.$clipPositionToDocument(R.row,R.column).column!=_.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(M,_,E){if(_=_||{},_.needle=M||_.needle,_.needle==null){var R=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();_.needle=this.session.getTextRange(R)}this.$search.set(_);var A=this.$search.findAll(this.session);if(!A.length)return 0;var T=this.multiSelect;E||T.toSingleRange(A[0]);for(var S=A.length;S--;)T.addRange(A[S],!0);return R&&T.rangeList.rangeAtPoint(R.start)&&T.addRange(R,!0),A.length},this.selectMoreLines=function(M,_){var E=this.selection.toOrientedRange(),R=E.cursor==E.end,A=this.session.documentToScreenPosition(E.cursor);this.selection.$desiredColumn&&(A.column=this.selection.$desiredColumn);var T=this.session.screenToDocumentPosition(A.row+M,A.column);if(E.isEmpty())var I=T;else var S=this.session.documentToScreenPosition(R?E.end:E.start),I=this.session.screenToDocumentPosition(S.row+M,S.column);if(R){var D=c.fromPoints(T,I);D.cursor=D.start}else{var D=c.fromPoints(I,T);D.cursor=D.end}if(D.desiredColumn=A.column,!this.selection.inMultiSelectMode)this.selection.addRange(E);else if(_)var z=E.cursor;this.selection.addRange(D),z&&this.selection.substractPoint(z)},this.transposeSelections=function(M){for(var _=this.session,E=_.multiSelect,R=E.ranges,A=R.length;A--;){var T=R[A];if(T.isEmpty()){var S=_.getWordRange(T.start.row,T.start.column);T.start.row=S.start.row,T.start.column=S.start.column,T.end.row=S.end.row,T.end.column=S.end.column}}E.mergeOverlappingRanges();for(var I=[],A=R.length;A--;){var T=R[A];I.unshift(_.getTextRange(T))}M<0?I.unshift(I.pop()):I.push(I.shift());for(var A=R.length;A--;){var T=R[A],S=T.clone();_.replace(T,I[A]),T.start.row=S.start.row,T.start.column=S.start.column}E.fromOrientedRange(E.ranges[0])},this.selectMore=function(M,_,E){var R=this.session,A=R.multiSelect,T=A.toOrientedRange();if(!(T.isEmpty()&&(T=R.getWordRange(T.start.row,T.start.column),T.cursor=M==-1?T.start:T.end,this.multiSelect.addRange(T),E))){var S=R.getTextRange(T),I=p(R,S,M);I&&(I.cursor=M==-1?I.start:I.end,this.session.unfold(I),this.multiSelect.addRange(I),this.renderer.scrollCursorIntoView(null,.5)),_&&this.multiSelect.substractPoint(T.cursor)}},this.alignCursors=function(){var M=this.session,_=M.multiSelect,E=_.ranges,R=-1,A=E.filter(function(K){if(K.cursor.row==R)return!0;R=K.cursor.row});if(!E.length||A.length==E.length-1){var T=this.selection.getRange(),S=T.start.row,I=T.end.row,D=S==I;if(D){var z=this.session.getLength(),B;do B=this.session.getLine(I);while(/[=:]/.test(B)&&++I<z);do B=this.session.getLine(S);while(/[=:]/.test(B)&&--S>0);S<0&&(S=0),I>=z&&(I=z-1)}var W=this.session.removeFullLines(S,I);W=this.$reAlignText(W,D),this.session.insert({row:S,column:0},W.join(`
`)+`
`),D||(T.start.column=0,T.end.column=W[W.length-1].length),this.selection.setRange(T)}else{A.forEach(function(K){_.substractPoint(K.cursor)});var H=0,J=1/0,G=E.map(function(K){var Y=K.cursor,ne=M.getLine(Y.row),le=ne.substr(Y.column).search(/\S/g);return le==-1&&(le=0),Y.column>H&&(H=Y.column),le<J&&(J=le),le});E.forEach(function(K,Y){var ne=K.cursor,le=H-ne.column,j=G[Y]-J;le>j?M.insert(ne,a.stringRepeat(" ",le-j)):M.remove(new c(ne.row,ne.column,ne.row,ne.column-le+j)),K.start.column=K.end.column=H,K.start.row=K.end.row=ne.row,K.cursor=K.end}),_.fromOrientedRange(E[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(M,_){var E=!0,R=!0,A,T,S;return M.map(function(W){var H=W.match(/(\s*)(.*?)(\s*)([=:].*)/);return H?A==null?(A=H[1].length,T=H[2].length,S=H[3].length,H):(A+T+S!=H[1].length+H[2].length+H[3].length&&(R=!1),A!=H[1].length&&(E=!1),A>H[1].length&&(A=H[1].length),T<H[2].length&&(T=H[2].length),S>H[3].length&&(S=H[3].length),H):[W]}).map(_?D:E?R?z:D:B);function I(W){return a.stringRepeat(" ",W)}function D(W){return W[2]?I(A)+W[2]+I(T-W[2].length+S)+W[4].replace(/^([=:])\s+/,"$1 "):W[0]}function z(W){return W[2]?I(A+T-W[2].length)+W[2]+I(S)+W[4].replace(/^([=:])\s+/,"$1 "):W[0]}function B(W){return W[2]?I(A)+W[2]+I(S)+W[4].replace(/^([=:])\s+/,"$1 "):W[0]}}}).call(x.prototype);function g(M,_){return M.row==_.row&&M.column==_.column}i.onSessionChange=function(M){var _=M.session;_&&!_.multiSelect&&(_.$selectionMarkers=[],_.selection.$initRangeList(),_.multiSelect=_.selection),this.multiSelect=_&&_.multiSelect;var E=M.oldSession;E&&(E.multiSelect.off("addRange",this.$onAddRange),E.multiSelect.off("removeRange",this.$onRemoveRange),E.multiSelect.off("multiSelect",this.$onMultiSelect),E.multiSelect.off("singleSelect",this.$onSingleSelect),E.multiSelect.lead.off("change",this.$checkMultiselectChange),E.multiSelect.anchor.off("change",this.$checkMultiselectChange)),_&&(_.multiSelect.on("addRange",this.$onAddRange),_.multiSelect.on("removeRange",this.$onRemoveRange),_.multiSelect.on("multiSelect",this.$onMultiSelect),_.multiSelect.on("singleSelect",this.$onSingleSelect),_.multiSelect.lead.on("change",this.$checkMultiselectChange),_.multiSelect.anchor.on("change",this.$checkMultiselectChange)),_&&this.inMultiSelectMode!=_.selection.inMultiSelectMode&&(_.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function w(M){M.$multiselectOnSessionChange||(M.$onAddRange=M.$onAddRange.bind(M),M.$onRemoveRange=M.$onRemoveRange.bind(M),M.$onMultiSelect=M.$onMultiSelect.bind(M),M.$onSingleSelect=M.$onSingleSelect.bind(M),M.$multiselectOnSessionChange=i.onSessionChange.bind(M),M.$checkMultiselectChange=M.$checkMultiselectChange.bind(M),M.$multiselectOnSessionChange(M),M.on("changeSession",M.$multiselectOnSessionChange),M.on("mousedown",u),M.commands.addCommands(o.defaultCommands),C(M))}function C(M){if(!M.textInput)return;var _=M.textInput.getElement(),E=!1;f.addListener(_,"keydown",function(A){var T=A.keyCode==18&&!(A.ctrlKey||A.shiftKey||A.metaKey);M.$blockSelectEnabled&&T?E||(M.renderer.setMouseCursor("crosshair"),E=!0):E&&R()},M),f.addListener(_,"keyup",R,M),f.addListener(_,"blur",R,M);function R(A){E&&(M.renderer.setMouseCursor(""),E=!1)}}i.MultiSelect=w,t("./config").defineOptions(x.prototype,"editor",{enableMultiselect:{set:function(M){w(this),M?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",u)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",u))},value:!0},enableBlockSelect:{set:function(M){this.$blockSelectEnabled=M},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,i,r){var s=t("../../range").Range,c=i.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,u,f){var a=l.getLine(f);return this.foldingStartMarker.test(a)?"start":u=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(a)?"end":""},this.getFoldWidgetRange=function(l,u,f){return null},this.indentationBlock=function(l,u,f){var a=/\S/,o=l.getLine(u),h=o.search(a);if(h!=-1){for(var d=f||o.length,p=l.getLength(),y=u,x=u;++u<p;){var g=l.getLine(u).search(a);if(g!=-1){if(g<=h){var w=l.getTokenAt(u,0);if(!w||w.type!=="string")break}x=u}}if(x>y){var C=l.getLine(x).length;return new s(y,d,x,C)}}},this.openingBracketBlock=function(l,u,f,a,o){var h={row:f,column:a+1},d=l.$findClosingBracket(u,h,o);if(d){var p=l.foldWidgets[d.row];return p==null&&(p=l.getFoldWidget(d.row)),p=="start"&&d.row>h.row&&(d.row--,d.column=l.getLine(d.row).length),s.fromPoints(h,d)}},this.closingBracketBlock=function(l,u,f,a,o){var h={row:f,column:a},d=l.$findOpeningBracket(u,h);if(d)return d.column++,h.column--,s.fromPoints(d,h)}}).call(c.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,i,r){i.isDark=!1,i.cssClass="ace-tm",i.cssText='.ace-tm .ace_gutter {	background: #f0f0f0;	color: #333;	}	.ace-tm .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-tm .ace_fold {	background-color: #6B72E6;	}	.ace-tm {	background-color: #FFFFFF;	color: black;	}	.ace-tm .ace_cursor {	color: black;	}	.ace-tm .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-tm .ace_storage,	.ace-tm .ace_keyword {	color: blue;	}	.ace-tm .ace_constant {	color: rgb(197, 6, 11);	}	.ace-tm .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-tm .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-tm .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-tm .ace_invalid {	background-color: rgba(255, 0, 0, 0.1);	color: red;	}	.ace-tm .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-tm .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-tm .ace_support.ace_type,	.ace-tm .ace_support.ace_class {	color: rgb(109, 121, 222);	}	.ace-tm .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-tm .ace_string {	color: rgb(3, 106, 7);	}	.ace-tm .ace_comment {	color: rgb(76, 136, 107);	}	.ace-tm .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-tm .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-tm .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-tm .ace_variable {	color: rgb(49, 132, 149);	}	.ace-tm .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-tm .ace_entity.ace_name.ace_function {	color: #0000A2;	}	.ace-tm .ace_heading {	color: rgb(12, 7, 255);	}	.ace-tm .ace_list {	color:rgb(185, 6, 144);	}	.ace-tm .ace_meta.ace_tag {	color:rgb(0, 22, 142);	}	.ace-tm .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-tm .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-tm.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px white;	}	.ace-tm .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-tm .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-tm .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-tm .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-tm .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-tm .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-tm .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}	',i.$id="ace/theme/textmate";var s=t("../lib/dom");s.importCssString(i.cssText,i.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(t,i,r){var s=t("./lib/dom");function c(l){this.session=l,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(l){var u;return this.lineWidgets?u=this.lineWidgets[l]&&this.lineWidgets[l].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[l]?1+u:this.$wrapData[l].length+1+u},this.$getWidgetScreenLength=function(){var l=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(l+=u.rowCount)}),l},this.$onChangeEditor=function(l){this.attach(l.editor)},this.attach=function(l){l&&l.widgetManager&&l.widgetManager!=this&&l.widgetManager.detach(),this.editor!=l&&(this.detach(),this.editor=l,l&&(l.widgetManager=this,l.renderer.on("beforeRender",this.measureWidgets),l.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(l){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var f=this.session.lineWidgets;f&&f.forEach(function(a){a&&a.el&&a.el.parentNode&&(a._inDocument=!1,a.el.parentNode.removeChild(a.el))})}},this.updateOnFold=function(l,u){var f=u.lineWidgets;if(!(!f||!l.action)){for(var a=l.data,o=a.start.row,h=a.end.row,d=l.action=="add",p=o+1;p<h;p++)f[p]&&(f[p].hidden=d);f[h]&&(d?f[o]?f[h].hidden=d:f[o]=f[h]:(f[o]==f[h]&&(f[o]=void 0),f[h].hidden=d))}},this.updateOnChange=function(l){var u=this.session.lineWidgets;if(u){var f=l.start.row,a=l.end.row-f;if(a!==0)if(l.action=="remove"){var o=u.splice(f+1,a);!u[f]&&o[o.length-1]&&(u[f]=o.pop()),o.forEach(function(d){d&&this.removeLineWidget(d)},this),this.$updateRows()}else{var h=new Array(a);u[f]&&u[f].column!=null&&l.start.column>u[f].column&&f++,h.unshift(f,0),u.splice.apply(u,h),this.$updateRows()}}},this.$updateRows=function(){var l=this.session.lineWidgets;if(l){var u=!0;l.forEach(function(f,a){if(f)for(u=!1,f.row=a;f.$oldWidget;)f.$oldWidget.row=a,f=f.$oldWidget}),u&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(l){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[l.row];return u&&(l.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[l.row]=l,l},this.addLineWidget=function(l){if(this.$registerLineWidget(l),l.session=this.session,!this.editor)return l;var u=this.editor.renderer;l.html&&!l.el&&(l.el=s.createElement("div"),l.el.innerHTML=l.html),l.el&&(s.addCssClass(l.el,"ace_lineWidgetContainer"),l.el.style.position="absolute",l.el.style.zIndex=5,u.container.appendChild(l.el),l._inDocument=!0,l.coverGutter||(l.el.style.zIndex=3),l.pixelHeight==null&&(l.pixelHeight=l.el.offsetHeight)),l.rowCount==null&&(l.rowCount=l.pixelHeight/u.layerConfig.lineHeight);var f=this.session.getFoldAt(l.row,0);if(l.$fold=f,f){var a=this.session.lineWidgets;l.row==f.end.row&&!a[f.start.row]?a[f.start.row]=l:l.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(l),l},this.removeLineWidget=function(l){if(l._inDocument=!1,l.session=null,l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el),l.editor&&l.editor.destroy)try{l.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[l.row];if(u==l)this.session.lineWidgets[l.row]=l.$oldWidget,l.$oldWidget&&this.onWidgetChanged(l.$oldWidget);else for(;u;){if(u.$oldWidget==l){u.$oldWidget=l.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(l){for(var u=this.session.lineWidgets,f=u&&u[l],a=[];f;)a.push(f),f=f.$oldWidget;return a},this.onWidgetChanged=function(l){this.session._changedWidgets.push(l),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(l,u){var f=this.session._changedWidgets,a=u.layerConfig;if(!(!f||!f.length)){for(var o=1/0,h=0;h<f.length;h++){var d=f[h];if(!(!d||!d.el)&&d.session==this.session){if(!d._inDocument){if(this.session.lineWidgets[d.row]!=d)continue;d._inDocument=!0,u.container.appendChild(d.el)}d.h=d.el.offsetHeight,d.fixedWidth||(d.w=d.el.offsetWidth,d.screenWidth=Math.ceil(d.w/a.characterWidth));var p=d.h/a.lineHeight;d.coverLine&&(p-=this.session.getRowLineCount(d.row),p<0&&(p=0)),d.rowCount!=p&&(d.rowCount=p,d.row<o&&(o=d.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(l,u){var f=u.layerConfig,a=this.session.lineWidgets;if(a){for(var o=Math.min(this.firstRow,f.firstRow),h=Math.max(this.lastRow,f.lastRow,a.length);o>0&&!a[o];)o--;this.firstRow=f.firstRow,this.lastRow=f.lastRow,u.$cursorLayer.config=f;for(var d=o;d<=h;d++){var p=a[d];if(!(!p||!p.el)){if(p.hidden){p.el.style.top=-100-(p.pixelHeight||0)+"px";continue}p._inDocument||(p._inDocument=!0,u.container.appendChild(p.el));var y=u.$cursorLayer.getPixelPosition({row:d,column:0},!0).top;p.coverLine||(y+=f.lineHeight*this.session.getRowLineCount(p.row)),p.el.style.top=y-f.offset+"px";var x=p.coverGutter?0:u.gutterWidth;p.fixedWidth||(x-=u.scrollLeft),p.el.style.left=x+"px",p.fullWidth&&p.screenWidth&&(p.el.style.minWidth=f.width+2*f.padding+"px"),p.fixedWidth?p.el.style.right=u.scrollBar.getWidth()+"px":p.el.style.right=""}}}}}).call(c.prototype),i.LineWidgets=c}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,i,r){var s=t("../line_widgets").LineWidgets,c=t("../lib/dom"),l=t("../range").Range;function u(a,o,h){for(var d=0,p=a.length-1;d<=p;){var y=d+p>>1,x=h(o,a[y]);if(x>0)d=y+1;else if(x<0)p=y-1;else return y}return-(d+1)}function f(a,o,h){var d=a.getAnnotations().sort(l.comparePoints);if(d.length){var p=u(d,{row:o,column:-1},l.comparePoints);p<0&&(p=-p-1),p>=d.length?p=h>0?0:d.length-1:p===0&&h<0&&(p=d.length-1);var y=d[p];if(!(!y||!h)){if(y.row===o){do y=d[p+=h];while(y&&y.row===o);if(!y)return d.slice()}var x=[];o=y.row;do x[h<0?"unshift":"push"](y),y=d[p+=h];while(y&&y.row==o);return x.length&&x}}}i.showErrorMarker=function(a,o){var h=a.session;h.widgetManager||(h.widgetManager=new s(h),h.widgetManager.attach(a));var d=a.getCursorPosition(),p=d.row,y=h.widgetManager.getWidgetsAtRow(p).filter(function(A){return A.type=="errorMarker"})[0];y?y.destroy():p-=o;var x=f(h,p,o),g;if(x){var w=x[0];d.column=(w.pos&&typeof w.column!="number"?w.pos.sc:w.column)||0,d.row=w.row,g=a.renderer.$gutterLayer.$annotations[d.row]}else{if(y)return;g={text:["Looks good!"],className:"ace_ok"}}a.session.unfold(d.row),a.selection.moveToPosition(d);var C={row:d.row,fixedWidth:!0,coverGutter:!0,el:c.createElement("div"),type:"errorMarker"},M=C.el.appendChild(c.createElement("div")),_=C.el.appendChild(c.createElement("div"));_.className="error_widget_arrow "+g.className;var E=a.renderer.$cursorLayer.getPixelPosition(d).left;_.style.left=E+a.renderer.gutterWidth-5+"px",C.el.className="error_widget_wrapper",M.className="error_widget "+g.className,M.innerHTML=g.text.join("<br>"),M.appendChild(c.createElement("div"));var R=function(A,T,S){if(T===0&&(S==="esc"||S==="return"))return C.destroy(),{command:"null"}};C.destroy=function(){a.$mouseHandler.isMousePressed||(a.keyBinding.removeKeyboardHandler(R),h.widgetManager.removeLineWidget(C),a.off("changeSelection",C.destroy),a.off("changeSession",C.destroy),a.off("mouseup",C.destroy),a.off("change",C.destroy))},a.keyBinding.addKeyboardHandler(R),a.on("changeSelection",C.destroy),a.on("changeSession",C.destroy),a.on("mouseup",C.destroy),a.on("change",C.destroy),a.session.widgetManager.addLineWidget(C),C.el.onmousedown=a.focus.bind(a),a.renderer.scrollCursorIntoView(null,.5,{bottom:C.el.offsetHeight})},c.importCssString("	    .error_widget_wrapper {	        background: inherit;	        color: inherit;	        border:none	    }	    .error_widget {	        border-top: solid 2px;	        border-bottom: solid 2px;	        margin: 5px 0;	        padding: 10px 40px;	        white-space: pre-wrap;	    }	    .error_widget.ace_error, .error_widget_arrow.ace_error{	        border-color: #ff5a5a	    }	    .error_widget.ace_warning, .error_widget_arrow.ace_warning{	        border-color: #F1D817	    }	    .error_widget.ace_info, .error_widget_arrow.ace_info{	        border-color: #5a5a5a	    }	    .error_widget.ace_ok, .error_widget_arrow.ace_ok{	        border-color: #5aaa5a	    }	    .error_widget_arrow {	        position: absolute;	        border: solid 5px;	        border-top-color: transparent!important;	        border-right-color: transparent!important;	        border-left-color: transparent!important;	        top: -5px;	    }	","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(t,i,r){t("./lib/fixoldbrowsers");var s=t("./lib/dom"),c=t("./lib/event"),l=t("./range").Range,u=t("./editor").Editor,f=t("./edit_session").EditSession,a=t("./undomanager").UndoManager,o=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),i.config=t("./config"),i.require=t,i.edit=function(h,d){if(typeof h=="string"){var p=h;if(h=document.getElementById(p),!h)throw new Error("ace.edit can't find div #"+p)}if(h&&h.env&&h.env.editor instanceof u)return h.env.editor;var y="";if(h&&/input|textarea/i.test(h.tagName)){var x=h;y=x.value,h=s.createElement("pre"),x.parentNode.replaceChild(h,x)}else h&&(y=h.textContent,h.innerHTML="");var g=i.createEditSession(y),w=new u(new o(h),g,d),C={document:g,editor:w,onResize:w.resize.bind(w,null)};return x&&(C.textarea=x),c.addListener(window,"resize",C.onResize),w.on("destroy",function(){c.removeListener(window,"resize",C.onResize),C.editor.container.env=null}),w.container.env=w.env=C,w},i.createEditSession=function(h,d){var p=new f(h,d);return p.setUndoManager(new a),p},i.Range=l,i.Editor=u,i.EditSession=f,i.UndoManager=a,i.VirtualRenderer=o,i.version=i.config.version}),function(){ace.require(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t);for(var i in t)t.hasOwnProperty(i)&&(window.ace[i]=t[i]);window.ace.default=window.ace,n&&(n.exports=window.ace)})}()})(jT);var XU=jT.exports;const YU=Vy(XU);var ZU={exports:{}};(function(n,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,i,r){var s=t("../lib/oop"),c=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};s.inherits(l,c),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},i.DocCommentHighlightRules=l}),ace.define("ace/mode/c_cpp_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,i,r){var s=t("../lib/oop"),c=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u=i.cFunctions="\\b(?:hypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len))))\\b",f=function(){var a="break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using",o="asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template|char16_t|char32_t",h="const|extern|register|restrict|static|volatile|inline|private|protected|public|friend|explicit|virtual|export|mutable|typename|constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local",d="and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eq|const_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace",p="NULL|true|false|TRUE|FALSE|nullptr",y=this.$keywords=this.createKeywordMapper({"keyword.control":a,"storage.type":o,"storage.modifier":h,"keyword.operator":d,"variable.language":"this","constant.language":p},"identifier"),x=/\\(?:['"?\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}U[a-fA-F\d]{8}|.)/.source,g="%"+/(\d+\$)?/.source+/[#0\- +']*/.source+/[,;:_]?/.source+/((-?\d+)|\*(-?\d+\$)?)?/.source+/(\.((-?\d+)|\*(-?\d+\$)?)?)?/.source+/(hh|h|ll|l|j|t|z|q|L|vh|vl|v|hv|hl)?/.source+/(\[[^"\]]+\]|[diouxXDOUeEfFgGaACcSspn%])/.source;this.$rules={start:[{token:"comment",regex:"//$",next:"start"},{token:"comment",regex:"//",next:"singleLineComment"},c.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string",regex:"'(?:"+x+"|.)?'"},{token:"string.start",regex:'"',stateName:"qqstring",next:[{token:"string",regex:/\\\s*$/,next:"qqstring"},{token:"constant.language.escape",regex:x},{token:"constant.language.escape",regex:g},{token:"string.end",regex:'"|$',next:"start"},{defaultToken:"string"}]},{token:"string.start",regex:'R"\\(',stateName:"rawString",next:[{token:"string.end",regex:'\\)"',next:"start"},{defaultToken:"string"}]},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"keyword",regex:"#\\s*(?:include|import|pragma|line|define|undef)\\b",next:"directive"},{token:"keyword",regex:"#\\s*(?:endif|if|ifdef|else|elif|ifndef)\\b"},{token:"support.function.C99.c",regex:u},{token:y,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*"},{token:"keyword.operator",regex:/--|\+\+|<<=|>>=|>>>=|<>|&&|\|\||\?:|[*%\/+\-&\^|~!<>=]=?/},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],singleLineComment:[{token:"comment",regex:/\\$/,next:"singleLineComment"},{token:"comment",regex:/$/,next:"start"},{defaultToken:"comment"}],directive:[{token:"constant.other.multiline",regex:/\\/},{token:"constant.other.multiline",regex:/.*\\/},{token:"constant.other",regex:"\\s*<.+?>",next:"start"},{token:"constant.other",regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:"start"},{token:"constant.other",regex:"\\s*['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']",next:"start"},{token:"constant.other",regex:/[^\\\/]+/,next:"start"}]},this.embedRules(c,"doc-",[c.getEndRule("start")]),this.normalizeRules()};s.inherits(f,l),i.c_cppHighlightRules=f}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,i,r){var s=t("../range").Range,c=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var f=l.getLine(u),a=f.match(/^(\s*\})/);if(!a)return 0;var o=a[1].length,h=l.findMatchingBracket({row:u,column:o});if(!h||h.row==u)return 0;var d=this.$getIndent(l.getLine(h.row));l.replace(new s(u,0,u,o-1),d)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(c.prototype),i.MatchingBraceOutdent=c}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,i,r){var s=t("../../lib/oop"),c=t("../../range").Range,l=t("./fold_mode").FoldMode,u=i.FoldMode=function(f){f&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+f.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+f.end)))};s.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(f,a,o){var h=f.getLine(o);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var d=this._getFoldWidgetBase(f,a,o);return!d&&this.startRegionRe.test(h)?"start":d},this.getFoldWidgetRange=function(f,a,o,h){var d=f.getLine(o);if(this.startRegionRe.test(d))return this.getCommentRegionBlock(f,d,o);var x=d.match(this.foldingStartMarker);if(x){var p=x.index;if(x[1])return this.openingBracketBlock(f,x[1],o,p);var y=f.getCommentFoldRange(o,p+x[0].length,1);return y&&!y.isMultiLine()&&(h?y=this.getSectionRange(f,o):a!="all"&&(y=null)),y}if(a!=="markbegin"){var x=d.match(this.foldingStopMarker);if(x){var p=x.index+x[0].length;return x[1]?this.closingBracketBlock(f,x[1],o,p):f.getCommentFoldRange(o,p,-1)}}},this.getSectionRange=function(f,a){var o=f.getLine(a),h=o.search(/\S/),d=a,p=o.length;a=a+1;for(var y=a,x=f.getLength();++a<x;){o=f.getLine(a);var g=o.search(/\S/);if(g!==-1){if(h>g)break;var w=this.getFoldWidgetRange(f,"all",a);if(w){if(w.start.row<=d)break;if(w.isMultiLine())a=w.end.row;else if(h==g)break}y=a}}return new c(d,p,y,f.getLine(y).length)},this.getCommentRegionBlock=function(f,a,o){for(var h=a.search(/\s*$/),d=f.getLength(),p=o,y=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,x=1;++o<d;){a=f.getLine(o);var g=y.exec(a);if(g&&(g[1]?x--:x++,!x))break}var w=o;if(w>p)return new c(p,h,w,a.length)}}).call(u.prototype)}),ace.define("ace/mode/c_cpp",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/c_cpp_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,i,r){var s=t("../lib/oop"),c=t("./text").Mode,l=t("./c_cpp_highlight_rules").c_cppHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent;t("../range").Range;var f=t("./behaviour/cstyle").CstyleBehaviour,a=t("./folding/cstyle").FoldMode,o=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new f,this.foldingRules=new a};s.inherits(o,c),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(h,d,p){var y=this.$getIndent(d),x=this.getTokenizer().getLineTokens(d,h),g=x.tokens,w=x.state;if(g.length&&g[g.length-1].type=="comment")return y;if(h=="start"){var C=d.match(/^.*[\{\(\[]\s*$/);C&&(y+=p)}else if(h=="doc-start"){if(w=="start")return"";var C=d.match(/^\s*(\/?)\*/);C&&(C[1]&&(y+=" "),y+="* ")}return y},this.checkOutdent=function(h,d,p){return this.$outdent.checkOutdent(d,p)},this.autoOutdent=function(h,d,p){this.$outdent.autoOutdent(d,p)},this.$id="ace/mode/c_cpp",this.snippetFileId="ace/snippets/c_cpp"}).call(o.prototype),i.Mode=o}),ace.define("ace/mode/glsl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/c_cpp_highlight_rules"],function(t,i,r){var s=t("../lib/oop"),c=t("./c_cpp_highlight_rules").c_cppHighlightRules,l=function(){var u="attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct",f="radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData",a=this.createKeywordMapper({"variable.language":"this",keyword:u,"constant.language":f},"identifier");this.$rules=new c().$rules,this.$rules.start.forEach(function(o){typeof o.token=="function"&&(o.token=a)})};s.inherits(l,c),i.glslHighlightRules=l}),ace.define("ace/mode/glsl",["require","exports","module","ace/lib/oop","ace/mode/c_cpp","ace/mode/glsl_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,i,r){var s=t("../lib/oop"),c=t("./c_cpp").Mode,l=t("./glsl_highlight_rules").glslHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent;t("../range").Range;var f=t("./behaviour/cstyle").CstyleBehaviour,a=t("./folding/cstyle").FoldMode,o=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new f,this.foldingRules=new a};s.inherits(o,c),(function(){this.$id="ace/mode/glsl"}).call(o.prototype),i.Mode=o}),function(){ace.require(["ace/mode/glsl"],function(t){n&&(n.exports=t)})}()})(ZU);var QU={exports:{}};(function(n,e){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(t,i,r){i.isDark=!0,i.cssClass="ace-monokai",i.cssText=".ace-monokai .ace_gutter {	background: #2F3129;	color: #8F908A	}	.ace-monokai .ace_print-margin {	width: 1px;	background: #555651	}	.ace-monokai {	background-color: #272822;	color: #F8F8F2	}	.ace-monokai .ace_cursor {	color: #F8F8F0	}	.ace-monokai .ace_marker-layer .ace_selection {	background: #49483E	}	.ace-monokai.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #272822;	}	.ace-monokai .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-monokai .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #49483E	}	.ace-monokai .ace_marker-layer .ace_active-line {	background: #202020	}	.ace-monokai .ace_gutter-active-line {	background-color: #272727	}	.ace-monokai .ace_marker-layer .ace_selected-word {	border: 1px solid #49483E	}	.ace-monokai .ace_invisible {	color: #52524d	}	.ace-monokai .ace_entity.ace_name.ace_tag,	.ace-monokai .ace_keyword,	.ace-monokai .ace_meta.ace_tag,	.ace-monokai .ace_storage {	color: #F92672	}	.ace-monokai .ace_punctuation,	.ace-monokai .ace_punctuation.ace_tag {	color: #fff	}	.ace-monokai .ace_constant.ace_character,	.ace-monokai .ace_constant.ace_language,	.ace-monokai .ace_constant.ace_numeric,	.ace-monokai .ace_constant.ace_other {	color: #AE81FF	}	.ace-monokai .ace_invalid {	color: #F8F8F0;	background-color: #F92672	}	.ace-monokai .ace_invalid.ace_deprecated {	color: #F8F8F0;	background-color: #AE81FF	}	.ace-monokai .ace_support.ace_constant,	.ace-monokai .ace_support.ace_function {	color: #66D9EF	}	.ace-monokai .ace_fold {	background-color: #A6E22E;	border-color: #F8F8F2	}	.ace-monokai .ace_storage.ace_type,	.ace-monokai .ace_support.ace_class,	.ace-monokai .ace_support.ace_type {	font-style: italic;	color: #66D9EF	}	.ace-monokai .ace_entity.ace_name.ace_function,	.ace-monokai .ace_entity.ace_other,	.ace-monokai .ace_entity.ace_other.ace_attribute-name,	.ace-monokai .ace_variable {	color: #A6E22E	}	.ace-monokai .ace_variable.ace_parameter {	font-style: italic;	color: #FD971F	}	.ace-monokai .ace_string {	color: #E6DB74	}	.ace-monokai .ace_comment {	color: #75715E	}	.ace-monokai .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y	}";var s=t("../lib/dom");s.importCssString(i.cssText,i.cssClass)}),function(){ace.require(["ace/theme/monokai"],function(t){n&&(n.exports=t)})}()})(QU);var JU={exports:{}};(function(n,e){ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/lib/dom","ace/editor"],function(t,i,r){var s=t("./lib/oop"),c=t("./lib/event_emitter").EventEmitter,l=t("./lib/lang"),u=t("./range").Range,f=t("./range_list").RangeList,a=t("./keyboard/hash_handler").HashHandler,o=t("./tokenizer").Tokenizer,h=t("./clipboard"),d={CURRENT_WORD:function(M){return M.session.getTextRange(M.session.getWordRange())},SELECTION:function(M,_,E){var R=M.session.getTextRange();return E?R.replace(/\n\r?([ \t]*\S)/g,`
`+E+"$1"):R},CURRENT_LINE:function(M){return M.session.getLine(M.getCursorPosition().row)},PREV_LINE:function(M){return M.session.getLine(M.getCursorPosition().row-1)},LINE_INDEX:function(M){return M.getCursorPosition().row},LINE_NUMBER:function(M){return M.getCursorPosition().row+1},SOFT_TABS:function(M){return M.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(M){return M.session.getTabSize()},CLIPBOARD:function(M){return h.getText&&h.getText()},FILENAME:function(M){return/[^/\\]*$/.exec(this.FILEPATH(M))[0]},FILENAME_BASE:function(M){return/[^/\\]*$/.exec(this.FILEPATH(M))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(M){return this.FILEPATH(M).replace(/[^/\\]*$/,"")},FILEPATH:function(M){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(M){var _=M.session.$mode||{};return _.blockComment&&_.blockComment.start||""},BLOCK_COMMENT_END:function(M){var _=M.session.$mode||{};return _.blockComment&&_.blockComment.end||""},LINE_COMMENT:function(M){var _=M.session.$mode||{};return _.lineCommentStart||""},CURRENT_YEAR:p.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:p.bind(null,{year:"2-digit"}),CURRENT_MONTH:p.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:p.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:p.bind(null,{month:"short"}),CURRENT_DATE:p.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:p.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:p.bind(null,{weekday:"short"}),CURRENT_HOUR:p.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:p.bind(null,{minute:"2-digit"}),CURRENT_SECOND:p.bind(null,{second:"2-digit"})};d.SELECTED_TEXT=d.SELECTION;function p(M){var _=new Date().toLocaleString("en-us",M);return _.length==1?"0"+_:_}var y=function(){this.snippetMap={},this.snippetNameMap={}};(function(){s.implement(this,c),this.getTokenizer=function(){return y.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function M(R){return R=R.substr(1),/^\d+$/.test(R)?[{tabstopId:parseInt(R,10)}]:[{text:R}]}function _(R){return"(?:[^\\\\"+R+"]|\\\\.)"}var E={regex:"/("+_("/")+"+)/",onMatch:function(R,A,T){var S=T[0];return S.fmtString=!0,S.guard=R.slice(1,-1),S.flag="",""},next:"formatString"};return y.$tokenizer=new o({start:[{regex:/\\./,onMatch:function(R,A,T){var S=R[1];return(S=="}"&&T.length||"`$\\".indexOf(S)!=-1)&&(R=S),[R]}},{regex:/}/,onMatch:function(R,A,T){return[T.length?T.shift():R]}},{regex:/\$(?:\d+|\w+)/,onMatch:M},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(R,A,T){var S=M(R.substr(1));return T.unshift(S[0]),S},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+_("\\|")+"*\\|",onMatch:function(R,A,T){var S=R.slice(1,-1).replace(/\\[,|\\]|,/g,function(I){return I.length==2?I[1]:"\0"}).split("\0").map(function(I){return{value:I}});return T[0].choices=S,[S[0]]},next:"start"},E,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(R,A,T){return T.length&&T[0].expectElse?(T[0].expectElse=!1,T[0].ifEnd={elseEnd:T[0]},[T[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(R,A,T){var S=R[1];return S=="}"&&T.length||"`$\\".indexOf(S)!=-1?R=S:S=="n"?R=`
`:S=="t"?R="	":"ulULE".indexOf(S)!=-1&&(R={changeCase:S,local:S>"a"}),[R]}},{regex:"/\\w*}",onMatch:function(R,A,T){var S=T.shift();return S&&(S.flag=R.slice(1,-1)),this.next=S&&S.tabstopId?"start":"",[S||R]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(R,A,T){return[{text:R.slice(1)}]}},{regex:/\${\w+/,onMatch:function(R,A,T){var S={text:R.slice(2)};return T.unshift(S),[S]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(R,A,T){var S=T.shift();return this.next=S&&S.tabstopId?"start":"",[S||R]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(R,A,T){var S=T[0];return S.formatFunction=R.slice(2,-1),[T.shift()]},next:"formatString"},E,{regex:/:[\?\-+]?/,onMatch:function(R,A,T){R[1]=="+"&&(T[0].ifEnd=T[0]),R[1]=="?"&&(T[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),y.$tokenizer},this.tokenizeTmSnippet=function(M,_){return this.getTokenizer().getLineTokens(M,_).tokens.map(function(E){return E.value||E})},this.getVariableValue=function(M,_,E){if(/^\d+$/.test(_))return(this.variables.__||{})[_]||"";if(/^[A-Z]\d+$/.test(_))return(this.variables[_[0]+"__"]||{})[_.substr(1)]||"";if(_=_.replace(/^TM_/,""),!this.variables.hasOwnProperty(_))return"";var R=this.variables[_];return typeof R=="function"&&(R=this.variables[_](M,_,E)),R??""},this.variables=d,this.tmStrFormat=function(M,_,E){if(!_.fmt)return M;var R=_.flag||"",A=_.guard;A=new RegExp(A,R.replace(/[^gim]/g,""));var T=typeof _.fmt=="string"?this.tokenizeTmSnippet(_.fmt,"formatString"):_.fmt,S=this,I=M.replace(A,function(){var D=S.variables.__;S.variables.__=[].slice.call(arguments);for(var z=S.resolveVariables(T,E),B="E",W=0;W<z.length;W++){var H=z[W];if(typeof H=="object")if(z[W]="",H.changeCase&&H.local){var J=z[W+1];J&&typeof J=="string"&&(H.changeCase=="u"?z[W]=J[0].toUpperCase():z[W]=J[0].toLowerCase(),z[W+1]=J.substr(1))}else H.changeCase&&(B=H.changeCase);else B=="U"?z[W]=H.toUpperCase():B=="L"&&(z[W]=H.toLowerCase())}return S.variables.__=D,z.join("")});return I},this.tmFormatFunction=function(M,_,E){return _.formatFunction=="upcase"?M.toUpperCase():_.formatFunction=="downcase"?M.toLowerCase():M},this.resolveVariables=function(M,_){for(var E=[],R="",A=!0,T=0;T<M.length;T++){var S=M[T];if(typeof S=="string"){E.push(S),S==`
`?(A=!0,R=""):A&&(R=/^\t*/.exec(S)[0],A=/\S/.test(S));continue}if(S){if(A=!1,S.fmtString){var I=M.indexOf(S,T+1);I==-1&&(I=M.length),S.fmt=M.slice(T+1,I),T=I}if(S.text){var D=this.getVariableValue(_,S.text,R)+"";S.fmtString&&(D=this.tmStrFormat(D,S,_)),S.formatFunction&&(D=this.tmFormatFunction(D,S,_)),D&&!S.ifEnd?(E.push(D),z(S)):!D&&S.ifEnd&&z(S.ifEnd)}else S.elseEnd?z(S.elseEnd):(S.tabstopId!=null||S.changeCase!=null)&&E.push(S)}}function z(B){var W=M.indexOf(B,T+1);W!=-1&&(T=W)}return E},this.insertSnippetForSelection=function(M,_){var E=M.getCursorPosition(),R=M.session.getLine(E.row),A=M.session.getTabString(),T=R.match(/^\s*/)[0];E.column<T.length&&(T=T.slice(0,E.column)),_=_.replace(/\r/g,"");var S=this.tokenizeTmSnippet(_);S=this.resolveVariables(S,M),S=S.map(function(ye){return ye==`
`?ye+T:typeof ye=="string"?ye.replace(/\t/g,A):ye});var I=[];S.forEach(function(ye,ze){if(typeof ye=="object"){var Xe=ye.tabstopId,Ae=I[Xe];if(Ae||(Ae=I[Xe]=[],Ae.index=Xe,Ae.value="",Ae.parents={}),Ae.indexOf(ye)===-1){ye.choices&&!Ae.choices&&(Ae.choices=ye.choices),Ae.push(ye);var je=S.indexOf(ye,ze+1);if(je!==-1){var oe=S.slice(ze+1,je),Ve=oe.some(function(Te){return typeof Te=="object"});Ve&&!Ae.value?Ae.value=oe:oe.length&&(!Ae.value||typeof Ae.value!="string")&&(Ae.value=oe.join(""))}}}}),I.forEach(function(ye){ye.length=0});var D={};function z(ye){for(var ze=[],Xe=0;Xe<ye.length;Xe++){var Ae=ye[Xe];if(typeof Ae=="object"){if(D[Ae.tabstopId])continue;var je=ye.lastIndexOf(Ae,Xe-1);Ae=ze[je]||{tabstopId:Ae.tabstopId}}ze[Xe]=Ae}return ze}for(var B=0;B<S.length;B++){var W=S[B];if(typeof W=="object"){var H=W.tabstopId,J=I[H],G=S.indexOf(W,B+1);if(D[H]){D[H]===W&&(delete D[H],Object.keys(D).forEach(function(ye){J.parents[ye]=!0}));continue}D[H]=W;var K=J.value;typeof K!="string"?K=z(K):W.fmt&&(K=this.tmStrFormat(K,W,M)),S.splice.apply(S,[B+1,Math.max(0,G-B)].concat(K,W)),J.indexOf(W)===-1&&J.push(W)}}var Y=0,ne=0,le="";S.forEach(function(ye){if(typeof ye=="string"){var ze=ye.split(`
`);ze.length>1?(ne=ze[ze.length-1].length,Y+=ze.length-1):ne+=ye.length,le+=ye}else ye&&(ye.start?ye.end={row:Y,column:ne}:ye.start={row:Y,column:ne})});var j=M.getSelectionRange(),re=M.session.replace(j,le),fe=new x(M),ve=M.inVirtualSelectionMode&&M.selection.index;fe.addTabstops(I,j.start,re,ve)},this.insertSnippet=function(M,_){var E=this;if(M.inVirtualSelectionMode)return E.insertSnippetForSelection(M,_);M.forEachSelection(function(){E.insertSnippetForSelection(M,_)},null,{keepOrder:!0}),M.tabstopManager&&M.tabstopManager.tabNext()},this.$getScope=function(M){var _=M.session.$mode.$id||"";if(_=_.split("/").pop(),_==="html"||_==="php"){_==="php"&&!M.session.$mode.inlinePhp&&(_="html");var E=M.getCursorPosition(),R=M.session.getState(E.row);typeof R=="object"&&(R=R[0]),R.substring&&(R.substring(0,3)=="js-"?_="javascript":R.substring(0,4)=="css-"?_="css":R.substring(0,4)=="php-"&&(_="php"))}return _},this.getActiveScopes=function(M){var _=this.$getScope(M),E=[_],R=this.snippetMap;return R[_]&&R[_].includeScopes&&E.push.apply(E,R[_].includeScopes),E.push("_"),E},this.expandWithTab=function(M,_){var E=this,R=M.forEachSelection(function(){return E.expandSnippetForSelection(M,_)},null,{keepOrder:!0});return R&&M.tabstopManager&&M.tabstopManager.tabNext(),R},this.expandSnippetForSelection=function(M,_){var E=M.getCursorPosition(),R=M.session.getLine(E.row),A=R.substring(0,E.column),T=R.substr(E.column),S=this.snippetMap,I;return this.getActiveScopes(M).some(function(D){var z=S[D];return z&&(I=this.findMatchingSnippet(z,A,T)),!!I},this),I?(_&&_.dryRun||(M.session.doc.removeInLine(E.row,E.column-I.replaceBefore.length,E.column+I.replaceAfter.length),this.variables.M__=I.matchBefore,this.variables.T__=I.matchAfter,this.insertSnippetForSelection(M,I.content),this.variables.M__=this.variables.T__=null),!0):!1},this.findMatchingSnippet=function(M,_,E){for(var R=M.length;R--;){var A=M[R];if(!(A.startRe&&!A.startRe.test(_))&&!(A.endRe&&!A.endRe.test(E))&&!(!A.startRe&&!A.endRe))return A.matchBefore=A.startRe?A.startRe.exec(_):[""],A.matchAfter=A.endRe?A.endRe.exec(E):[""],A.replaceBefore=A.triggerRe?A.triggerRe.exec(_)[0]:"",A.replaceAfter=A.endTriggerRe?A.endTriggerRe.exec(E)[0]:"",A}},this.snippetMap={},this.snippetNameMap={},this.register=function(M,_){var E=this.snippetMap,R=this.snippetNameMap,A=this;M||(M=[]);function T(D){return D&&!/^\^?\(.*\)\$?$|^\\b$/.test(D)&&(D="(?:"+D+")"),D||""}function S(D,z,B){return D=T(D),z=T(z),B?(D=z+D,D&&D[D.length-1]!="$"&&(D=D+"$")):(D=D+z,D&&D[0]!="^"&&(D="^"+D)),new RegExp(D)}function I(D){D.scope||(D.scope=_||"_"),_=D.scope,E[_]||(E[_]=[],R[_]={});var z=R[_];if(D.name){var B=z[D.name];B&&A.unregister(B),z[D.name]=D}E[_].push(D),D.prefix&&(D.tabTrigger=D.prefix),!D.content&&D.body&&(D.content=Array.isArray(D.body)?D.body.join(`
`):D.body),D.tabTrigger&&!D.trigger&&(!D.guard&&/^\w/.test(D.tabTrigger)&&(D.guard="\\b"),D.trigger=l.escapeRegExp(D.tabTrigger)),!(!D.trigger&&!D.guard&&!D.endTrigger&&!D.endGuard)&&(D.startRe=S(D.trigger,D.guard,!0),D.triggerRe=new RegExp(D.trigger),D.endRe=S(D.endTrigger,D.endGuard,!0),D.endTriggerRe=new RegExp(D.endTrigger))}Array.isArray(M)?M.forEach(I):Object.keys(M).forEach(function(D){I(M[D])}),this._signal("registerSnippets",{scope:_})},this.unregister=function(M,_){var E=this.snippetMap,R=this.snippetNameMap;function A(T){var S=R[T.scope||_];if(S&&S[T.name]){delete S[T.name];var I=E[T.scope||_],D=I&&I.indexOf(T);D>=0&&I.splice(D,1)}}M.content?A(M):Array.isArray(M)&&M.forEach(A)},this.parseSnippetFile=function(M){M=M.replace(/\r/g,"");for(var _=[],E={},R=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,A;A=R.exec(M);){if(A[1])try{E=JSON.parse(A[1]),_.push(E)}catch{}if(A[4])E.content=A[4].replace(/^\t/gm,""),_.push(E),E={};else{var T=A[2],S=A[3];if(T=="regex"){var I=/\/((?:[^\/\\]|\\.)*)|$/g;E.guard=I.exec(S)[1],E.trigger=I.exec(S)[1],E.endTrigger=I.exec(S)[1],E.endGuard=I.exec(S)[1]}else T=="snippet"?(E.tabTrigger=S.match(/^\S*/)[0],E.name||(E.name=S)):T&&(E[T]=S)}}return _},this.getSnippetByName=function(M,_){var E=this.snippetNameMap,R;return this.getActiveScopes(_).some(function(A){var T=E[A];return T&&(R=T[M]),!!R},this),R}}).call(y.prototype);var x=function(M){if(M.tabstopManager)return M.tabstopManager;M.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=l.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(M)};(function(){this.attach=function(M){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=M,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(M){for(var _=M.action[0]=="r",E=this.selectedTabstop||{},R=E.parents||{},A=(this.tabstops||[]).slice(),T=0;T<A.length;T++){var S=A[T],I=S==E||R[S.index];if(S.rangeList.$bias=I?0:1,M.action=="remove"&&S!==E){var D=S.parents&&S.parents[E.index],z=S.rangeList.pointIndex(M.start,D);z=z<0?-z-1:z+1;var B=S.rangeList.pointIndex(M.end,D);B=B<0?-B-1:B-1;for(var W=S.rangeList.ranges.slice(z,B),H=0;H<W.length;H++)this.removeRange(W[H])}S.rangeList.$onChange(M)}var J=this.editor.session;!this.$inChange&&_&&J.getLength()==1&&!J.getValue()&&this.detach()},this.updateLinkedFields=function(){var M=this.selectedTabstop;if(!(!M||!M.hasLinkedRanges||!M.firstNonLinked)){this.$inChange=!0;for(var _=this.editor.session,E=_.getTextRange(M.firstNonLinked),R=0;R<M.length;R++){var A=M[R];if(A.linked){var T=A.original,S=i.snippetManager.tmStrFormat(E,T,this.editor);_.replace(A,S)}}this.$inChange=!1}},this.onAfterExec=function(M){M.command&&!M.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var M=this.editor.selection.lead,_=this.editor.selection.anchor,E=this.editor.selection.isEmpty(),R=0;R<this.ranges.length;R++)if(!this.ranges[R].linked){var A=this.ranges[R].contains(M.row,M.column),T=E||this.ranges[R].contains(_.row,_.column);if(A&&T)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(M){var _=this.tabstops.length,E=this.index+(M||1);E=Math.min(Math.max(E,1),_),E==_&&(E=0),this.selectTabstop(E),E===0&&this.detach()},this.selectTabstop=function(M){this.$openTabstops=null;var _=this.tabstops[this.index];if(_&&this.addTabstopMarkers(_),this.index=M,_=this.tabstops[this.index],!(!_||!_.length)){this.selectedTabstop=_;var E=_.firstNonLinked||_;if(_.choices&&(E.cursor=E.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(E);else{var R=this.editor.multiSelect;R.toSingleRange(E);for(var A=0;A<_.length;A++)_.hasLinkedRanges&&_[A].linked||R.addRange(_[A].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(M,_,E){var R=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!M[0]){var A=u.fromPoints(E,E);w(A.start,_),w(A.end,_),M[0]=[A],M[0].index=0}var T=this.index,S=[T+1,0],I=this.ranges;M.forEach(function(D,z){for(var B=this.$openTabstops[z]||D,W=0;W<D.length;W++){var H=D[W],J=u.fromPoints(H.start,H.end||H.start);g(J.start,_),g(J.end,_),J.original=H,J.tabstop=B,I.push(J),B!=D?B.unshift(J):B[W]=J,H.fmtString||B.firstNonLinked&&R?(J.linked=!0,B.hasLinkedRanges=!0):B.firstNonLinked||(B.firstNonLinked=J)}B.firstNonLinked||(B.hasLinkedRanges=!1),B===D&&(S.push(B),this.$openTabstops[z]=B),this.addTabstopMarkers(B),B.rangeList=B.rangeList||new f,B.rangeList.$bias=0,B.rangeList.addList(B)},this),S.length>2&&(this.tabstops.length&&S.push(S.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,S))},this.addTabstopMarkers=function(M){var _=this.editor.session;M.forEach(function(E){E.markerId||(E.markerId=_.addMarker(E,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(M){var _=this.editor.session;M.forEach(function(E){_.removeMarker(E.markerId),E.markerId=null})},this.removeRange=function(M){var _=M.tabstop.indexOf(M);_!=-1&&M.tabstop.splice(_,1),_=this.ranges.indexOf(M),_!=-1&&this.ranges.splice(_,1),_=M.tabstop.rangeList.ranges.indexOf(M),_!=-1&&M.tabstop.splice(_,1),this.editor.session.removeMarker(M.markerId),M.tabstop.length||(_=this.tabstops.indexOf(M.tabstop),_!=-1&&this.tabstops.splice(_,1),this.tabstops.length||this.detach())},this.keyboardHandler=new a,this.keyboardHandler.bindKeys({Tab:function(M){i.snippetManager&&i.snippetManager.expandWithTab(M)||(M.tabstopManager.tabNext(1),M.renderer.scrollCursorIntoView())},"Shift-Tab":function(M){M.tabstopManager.tabNext(-1),M.renderer.scrollCursorIntoView()},Esc:function(M){M.tabstopManager.detach()}})}).call(x.prototype);var g=function(M,_){M.row==0&&(M.column+=_.column),M.row+=_.row},w=function(M,_){M.row==_.row&&(M.column-=_.column),M.row-=_.row};t("./lib/dom").importCssString("	.ace_snippet-marker {	    -moz-box-sizing: border-box;	    box-sizing: border-box;	    background: rgba(194, 193, 208, 0.09);	    border: 1px dotted rgba(211, 208, 235, 0.62);	    position: absolute;	}"),i.snippetManager=new y;var C=t("./editor").Editor;(function(){this.insertSnippet=function(M,_){return i.snippetManager.insertSnippet(this,M,_)},this.expandSnippet=function(M){return i.snippetManager.expandWithTab(this,M)}}).call(C.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(t,i,r){var s=t("../virtual_renderer").VirtualRenderer,c=t("../editor").Editor,l=t("../range").Range,u=t("../lib/event"),f=t("../lib/lang"),a=t("../lib/dom"),o=function(d){var p=new s(d);p.$maxLines=4;var y=new c(p);return y.setHighlightActiveLine(!1),y.setShowPrintMargin(!1),y.renderer.setShowGutter(!1),y.renderer.setHighlightGutterLine(!1),y.$mouseHandler.$focusTimeout=0,y.$highlightTagPending=!0,y},h=function(d){var p=a.createElement("div"),y=new o(p);d&&d.appendChild(p),p.style.display="none",y.renderer.content.style.cursor="default",y.renderer.setStyle("ace_autocomplete"),y.setOption("displayIndentGuides",!1),y.setOption("dragDelay",150);var x=function(){};y.focus=x,y.$isFocused=!0,y.renderer.$cursorLayer.restartTimer=x,y.renderer.$cursorLayer.element.style.opacity=0,y.renderer.$maxLines=8,y.renderer.$keepTextAreaAtCursor=!1,y.setHighlightActiveLine(!1),y.session.highlight(""),y.session.$searchHighlight.clazz="ace_highlight-marker",y.on("mousedown",function(R){var A=R.getDocumentPosition();y.selection.moveToPosition(A),C.start.row=C.end.row=A.row,R.stop()});var g,w=new l(-1,0,-1,1/0),C=new l(-1,0,-1,1/0);C.id=y.session.addMarker(C,"ace_active-line","fullLine"),y.setSelectOnHover=function(R){R?w.id&&(y.session.removeMarker(w.id),w.id=null):w.id=y.session.addMarker(w,"ace_line-hover","fullLine")},y.setSelectOnHover(!1),y.on("mousemove",function(R){if(!g){g=R;return}if(!(g.x==R.x&&g.y==R.y)){g=R,g.scrollTop=y.renderer.scrollTop;var A=g.getDocumentPosition().row;w.start.row!=A&&(w.id||y.setRow(A),_(A))}}),y.renderer.on("beforeRender",function(){if(g&&w.start.row!=-1){g.$pos=null;var R=g.getDocumentPosition().row;w.id||y.setRow(R),_(R,!0)}}),y.renderer.on("afterRender",function(){var R=y.getRow(),A=y.renderer.$textLayer,T=A.element.childNodes[R-A.config.firstRow];T!==A.selectedNode&&A.selectedNode&&a.removeCssClass(A.selectedNode,"ace_selected"),A.selectedNode=T,T&&a.addCssClass(T,"ace_selected")});var M=function(){_(-1)},_=function(R,A){R!==w.start.row&&(w.start.row=w.end.row=R,A||y.session._emit("changeBackMarker"),y._emit("changeHoverMarker"))};y.getHoveredRow=function(){return w.start.row},u.addListener(y.container,"mouseout",M),y.on("hide",M),y.on("changeSelection",M),y.session.doc.getLength=function(){return y.data.length},y.session.doc.getLine=function(R){var A=y.data[R];return typeof A=="string"?A:A&&A.value||""};var E=y.session.bgTokenizer;return E.$tokenizeRow=function(R){var A=y.data[R],T=[];if(!A)return T;typeof A=="string"&&(A={value:A});var S=A.caption||A.value||A.name;function I(K,Y){K&&T.push({type:(A.className||"")+(Y||""),value:K})}for(var D=S.toLowerCase(),z=(y.filterText||"").toLowerCase(),B=0,W=0,H=0;H<=z.length;H++)if(H!=W&&(A.matchMask&1<<H||H==z.length)){var J=z.slice(W,H);W=H;var G=D.indexOf(J,B);if(G==-1)continue;I(S.slice(B,G),""),B=G+J.length,I(S.slice(G,B),"completion-highlight")}return I(S.slice(B,S.length),""),A.meta&&T.push({type:"completion-meta",value:A.meta}),A.message&&T.push({type:"completion-message",value:A.message}),T},E.$updateOnChange=x,E.start=x,y.session.$computeWidth=function(){return this.screenWidth=0},y.isOpen=!1,y.isTopdown=!1,y.autoSelect=!0,y.filterText="",y.data=[],y.setData=function(R,A){y.filterText=A||"",y.setValue(f.stringRepeat(`
`,R.length),-1),y.data=R||[],y.setRow(0)},y.getData=function(R){return y.data[R]},y.getRow=function(){return C.start.row},y.setRow=function(R){R=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,R)),C.start.row!=R&&(y.selection.clearSelection(),C.start.row=C.end.row=R||0,y.session._emit("changeBackMarker"),y.moveCursorTo(R||0,0),y.isOpen&&y._signal("select"))},y.on("changeSelection",function(){y.isOpen&&y.setRow(y.selection.lead.row),y.renderer.scrollCursorIntoView()}),y.hide=function(){this.container.style.display="none",this._signal("hide"),y.isOpen=!1},y.show=function(R,A,T){var S=this.container,I=window.innerHeight,D=window.innerWidth,z=this.renderer,B=z.$maxLines*A*1.4,W=R.top+this.$borderSize,H=W>I/2&&!T;H&&W+A+B>I?(z.$maxPixelHeight=W-2*this.$borderSize,S.style.top="",S.style.bottom=I-W+"px",y.isTopdown=!1):(W+=A,z.$maxPixelHeight=I-W-.2*A,S.style.top=W+"px",S.style.bottom="",y.isTopdown=!0),S.style.display="";var J=R.left;J+S.offsetWidth>D&&(J=D-S.offsetWidth),S.style.left=J+"px",this._signal("show"),g=null,y.isOpen=!0},y.goTo=function(R){var A=this.getRow(),T=this.session.getLength()-1;switch(R){case"up":A=A<=0?T:A-1;break;case"down":A=A>=T?-1:A+1;break;case"start":A=0;break;case"end":A=T;break}this.setRow(A)},y.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},y.$imageSize=0,y.$borderSize=1,y};a.importCssString("	.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {	    background-color: #CAD6FA;	    z-index: 1;	}	.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {	    background-color: #3a674e;	}	.ace_editor.ace_autocomplete .ace_line-hover {	    border: 1px solid #abbffe;	    margin-top: -1px;	    background: rgba(233,233,253,0.4);	    position: absolute;	    z-index: 2;	}	.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {	    border: 1px solid rgba(109, 150, 13, 0.8);	    background: rgba(58, 103, 78, 0.62);	}	.ace_completion-meta {	    opacity: 0.5;	    margin: 0.9em;	}	.ace_completion-message {	    color: blue;	}	.ace_editor.ace_autocomplete .ace_completion-highlight{	    color: #2d69c7;	}	.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{	    color: #93ca12;	}	.ace_editor.ace_autocomplete {	    width: 300px;	    z-index: 200000;	    border: 1px lightgray solid;	    position: fixed;	    box-shadow: 2px 3px 5px rgba(0,0,0,.2);	    line-height: 1.4;	    background: #fefefe;	    color: #111;	}	.ace_dark.ace_editor.ace_autocomplete {	    border: 1px #484747 solid;	    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);	    line-height: 1.4;	    background: #25282c;	    color: #c1c1c1;	}","autocompletion.css"),i.AcePopup=h,i.$singleLineEditor=o}),ace.define("ace/autocomplete/util",["require","exports","module"],function(t,i,r){i.parForEach=function(c,l,u){var f=0,a=c.length;a===0&&u();for(var o=0;o<a;o++)l(c[o],function(h,d){f++,f===a&&u(h,d)})};var s=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;i.retrievePrecedingIdentifier=function(c,l,u){u=u||s;for(var f=[],a=l-1;a>=0&&u.test(c[a]);a--)f.push(c[a]);return f.reverse().join("")},i.retrieveFollowingIdentifier=function(c,l,u){u=u||s;for(var f=[],a=l;a<c.length&&u.test(c[a]);a++)f.push(c[a]);return f},i.getCompletionPrefix=function(c){var l=c.getCursorPosition(),u=c.session.getLine(l.row),f;return c.completers.forEach((function(a){a.identifierRegexps&&a.identifierRegexps.forEach((function(o){!f&&o&&(f=this.retrievePrecedingIdentifier(u,l.column,o))}).bind(this))}).bind(this)),f||this.retrievePrecedingIdentifier(u,l.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(t,i,r){var s=t("./keyboard/hash_handler").HashHandler,c=t("./autocomplete/popup").AcePopup,l=t("./autocomplete/util"),u=t("./lib/lang"),f=t("./lib/dom"),a=t("./snippets").snippetManager,o=t("./config"),h=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new s,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=u.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=u.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new c(document.body||document.documentElement),this.popup.on("click",(function(p){this.insertMatch(),p.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(p,y,x){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),p.keyBinding.addKeyboardHandler(this.keyboardHandler);var g=p.renderer;if(this.popup.setRow(this.autoSelect?0:-1),x)x&&!y&&this.detach();else{this.popup.setTheme(p.getTheme()),this.popup.setFontSize(p.getFontSize());var w=g.layerConfig.lineHeight,C=g.$cursorLayer.getPixelPosition(this.base,!0);C.left-=this.popup.getTextLeftOffset();var M=p.container.getBoundingClientRect();C.top+=M.top-g.layerConfig.offset,C.left+=M.left-p.renderer.scrollLeft,C.left+=g.gutterWidth,this.popup.show(C,w)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(p){var y=this.editor.selection.lead;(y.row!=this.base.row||y.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(p){var y=document.activeElement,x=this.editor.textInput.getElement(),g=p.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(p.relatedTarget),w=this.popup&&this.popup.container;y!=x&&y.parentNode!=w&&!g&&y!=this.tooltipNode&&p.relatedTarget!=x&&this.detach()},this.mousedownListener=function(p){this.detach()},this.mousewheelListener=function(p){this.detach()},this.goTo=function(p){this.popup.goTo(p)},this.insertMatch=function(p,y){if(p||(p=this.popup.getData(this.popup.getRow())),!p)return!1;var x=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),p.completer&&p.completer.insertMatch)p.completer.insertMatch(this.editor,p);else{if(x.filterText)for(var g=this.editor.selection.getAllRanges(),w=0,C;C=g[w];w++)C.start.column-=x.filterText.length,this.editor.session.remove(C);p.snippet?a.insertSnippet(this.editor,p.snippet):this.editor.execCommand("insertstring",p.value||p)}this.completions==x&&this.detach(),this.editor.endOperation()},this.commands={Up:function(p){p.completer.goTo("up")},Down:function(p){p.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(p){p.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(p){p.completer.goTo("end")},Esc:function(p){p.completer.detach()},Return:function(p){return p.completer.insertMatch()},"Shift-Return":function(p){p.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(p){var y=p.completer.insertMatch();if(!y&&!p.tabstopManager)p.completer.goTo("down");else return y},PageUp:function(p){p.completer.popup.gotoPageUp()},PageDown:function(p){p.completer.popup.gotoPageDown()}},this.gatherCompletions=function(p,y){var x=p.getSession(),g=p.getCursorPosition(),w=l.getCompletionPrefix(p);this.base=x.doc.createAnchor(g.row,g.column-w.length),this.base.$insertRight=!0;var C=[],M=p.completers.length;return p.completers.forEach(function(_,E){_.getCompletions(p,x,g,w,function(R,A){!R&&A&&(C=C.concat(A)),y(null,{prefix:l.getCompletionPrefix(p),matches:C,finished:--M===0})})}),!0},this.showPopup=function(p,y){this.editor&&this.detach(),this.activated=!0,this.editor=p,p.completer!=this&&(p.completer&&p.completer.detach(),p.completer=this),p.on("changeSelection",this.changeListener),p.on("blur",this.blurListener),p.on("mousedown",this.mousedownListener),p.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,y)},this.updateCompletions=function(p,y){if(p&&this.base&&this.completions){var x=this.editor.getCursorPosition(),g=this.editor.session.getTextRange({start:this.base,end:x});if(g==this.completions.filterText)return;if(this.completions.setFilter(g),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==g&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,g,p);return}if(y&&y.matches){var x=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(x.row,x.column),this.base.$insertRight=!0,this.completions=new d(y.matches),this.openPopup(this.editor,"",p)}var w=this.gatherCompletionsId;this.gatherCompletions(this.editor,(function(C,M){var _=(function(){if(M.finished)return this.detach()}).bind(this),E=M.prefix,R=M&&M.matches;if(!R||!R.length)return _();if(!(E.indexOf(M.prefix)!==0||w!=this.gatherCompletionsId)){this.completions=new d(R),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(E);var A=this.completions.filtered;if(!A.length||A.length==1&&A[0].value==E&&!A[0].snippet)return _();if(this.autoInsert&&A.length==1&&M.finished)return this.insertMatch(A[0]);this.openPopup(this.editor,E,p)}}).bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var p=this.popup,y=p.data,x=y&&(y[p.getHoveredRow()]||y[p.getRow()]),g=null;if(!x||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();if(this.editor.completers.some(function(w){return w.getDocTooltip&&(g=w.getDocTooltip(x)),g}),!g&&typeof x!="string"&&(g=x),typeof g=="string"&&(g={docText:g}),!g||!(g.docHTML||g.docText))return this.hideDocTooltip();this.showDocTooltip(g)},this.showDocTooltip=function(p){this.tooltipNode||(this.tooltipNode=f.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var y=this.tooltipNode;p.docHTML?y.innerHTML=p.docHTML:p.docText&&(y.textContent=p.docText),y.parentNode||document.body.appendChild(y);var x=this.popup,g=x.container.getBoundingClientRect();y.style.top=x.container.style.top,y.style.bottom=x.container.style.bottom,y.style.display="block",window.innerWidth-g.right<320?g.left<320?x.isTopdown?(y.style.top=g.bottom+"px",y.style.left=g.left+"px",y.style.right="",y.style.bottom=""):(y.style.top=x.container.offsetTop-y.offsetHeight+"px",y.style.left=g.left+"px",y.style.right="",y.style.bottom=""):(y.style.right=window.innerWidth-g.left+"px",y.style.left=""):(y.style.left=g.right+1+"px",y.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var p=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==p&&this.editor.focus(),this.tooltipNode=null,p.parentNode&&p.parentNode.removeChild(p)}},this.onTooltipClick=function(p){for(var y=p.target;y&&y!=this.tooltipNode;){if(y.nodeName=="A"&&y.href){y.rel="noreferrer",y.target="_blank";break}y=y.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var p=this.popup.container;p&&p.parentNode&&p.parentNode.removeChild(p)}this.editor&&this.editor.completer==this&&this.editor.completer==null,this.popup=null}}).call(h.prototype),h.for=function(p){return p.completer||(o.get("sharedPopups")?(h.$shared||(h.$sharedInstance=new h),p.completer=h.$sharedInstance):(p.completer=new h,p.once("destroy",function(y,x){x.completer.destroy()}))),p.completer},h.startCommand={name:"startAutocomplete",exec:function(p,y){var x=h.for(p);x.autoInsert=!1,x.autoSelect=!0,x.showPopup(p,y),x.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var d=function(p,y){this.all=p,this.filtered=p,this.filterText=y||"",this.exactMatch=!1};(function(){this.setFilter=function(p){if(p.length>this.filterText&&p.lastIndexOf(this.filterText,0)===0)var y=this.filtered;else var y=this.all;this.filterText=p,y=this.filterCompletions(y,this.filterText),y=y.sort(function(g,w){return w.exactMatch-g.exactMatch||w.$score-g.$score||(g.caption||g.value).localeCompare(w.caption||w.value)});var x=null;y=y.filter(function(g){var w=g.snippet||g.caption||g.value;return w===x?!1:(x=w,!0)}),this.filtered=y},this.filterCompletions=function(p,y){var x=[],g=y.toUpperCase(),w=y.toLowerCase();e:for(var C=0,M;M=p[C];C++){var _=M.caption||M.value||M.snippet;if(_){var E=-1,R=0,A=0,T,S;if(this.exactMatch){if(y!==_.substr(0,y.length))continue e}else{var I=_.toLowerCase().indexOf(w);if(I>-1)A=I;else for(var D=0;D<y.length;D++){var z=_.indexOf(w[D],E+1),B=_.indexOf(g[D],E+1);if(T=z>=0&&(B<0||z<B)?z:B,T<0)continue e;S=T-E-1,S>0&&(E===-1&&(A+=10),A+=S,R=R|1<<D),E=T}}M.matchMask=R,M.exactMatch=A?0:1,M.$score=(M.score||0)-A,x.push(M)}}return x}}).call(d.prototype),i.Autocomplete=h,i.FilteredList=d}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(t,i,r){var s=t("../range").Range,c=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(f,a){var o=f.getTextRange(s.fromPoints({row:0,column:0},a));return o.split(c).length-1}function u(f,a){var o=l(f,a),h=f.getValue().split(c),d=Object.create(null),p=h[o];return h.forEach(function(y,x){if(!(!y||y===p)){var g=Math.abs(o-x),w=h.length-g;d[y]?d[y]=Math.max(w,d[y]):d[y]=w}}),d}i.getCompletions=function(f,a,o,h,d){var p=u(a,o),y=Object.keys(p);d(null,y.map(function(x){return{caption:x,value:x,score:p[x],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(t,i,r){var s=t("../snippets").snippetManager,c=t("../autocomplete").Autocomplete,l=t("../config"),u=t("../lib/lang"),f=t("../autocomplete/util"),a=t("../autocomplete/text_completer"),o={getCompletions:function(M,_,E,R,A){if(_.$mode.completer)return _.$mode.completer.getCompletions(M,_,E,R,A);var T=M.session.getState(E.row),S=_.$mode.getCompletions(T,_,E,R);A(null,S)}},h={getCompletions:function(M,_,E,R,A){var T=[],S=_.getTokenAt(E.row,E.column);S&&S.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?T.push("html-tag"):T=s.getActiveScopes(M);var I=s.snippetMap,D=[];T.forEach(function(z){for(var B=I[z]||[],W=B.length;W--;){var H=B[W],J=H.name||H.tabTrigger;J&&D.push({caption:J,snippet:H.content,meta:H.tabTrigger&&!H.name?H.tabTrigger+" ":"snippet",type:"snippet"})}},this),A(null,D)},getDocTooltip:function(M){M.type=="snippet"&&!M.docHTML&&(M.docHTML=["<b>",u.escapeHTML(M.caption),"</b>","<hr></hr>",u.escapeHTML(M.snippet)].join(""))}},d=[h,a,o];i.setCompleters=function(M){d.length=0,M&&d.push.apply(d,M)},i.addCompleter=function(M){d.push(M)},i.textCompleter=a,i.keyWordCompleter=o,i.snippetCompleter=h;var p={name:"expandSnippet",exec:function(M){return s.expandWithTab(M)},bindKey:"Tab"},y=function(M,_){x(_.session.$mode)},x=function(M){typeof M=="string"&&(M=l.$modes[M]),M&&(s.files||(s.files={}),g(M.$id,M.snippetFileId),M.modes&&M.modes.forEach(x))},g=function(M,_){!_||!M||s.files[M]||(s.files[M]={},l.loadModule(_,function(E){E&&(s.files[M]=E,!E.snippets&&E.snippetText&&(E.snippets=s.parseSnippetFile(E.snippetText)),s.register(E.snippets||[],E.scope),E.includeScopes&&(s.snippetMap[E.scope].includeScopes=E.includeScopes,E.includeScopes.forEach(function(R){x("ace/mode/"+R)})))}))},w=function(M){var _=M.editor,E=_.completer&&_.completer.activated;if(M.command.name==="backspace")E&&!f.getCompletionPrefix(_)&&_.completer.detach();else if(M.command.name==="insertstring"){var R=f.getCompletionPrefix(_);if(R&&!E){var A=c.for(_);A.autoInsert=!1,A.showPopup(_)}}},C=t("../editor").Editor;t("../config").defineOptions(C.prototype,"editor",{enableBasicAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:d),this.commands.addCommand(c.startCommand)):this.commands.removeCommand(c.startCommand)},value:!1},enableLiveAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:d),this.commands.on("afterExec",w)):this.commands.removeListener("afterExec",w)},value:!1},enableSnippets:{set:function(M){M?(this.commands.addCommand(p),this.on("changeMode",y),y(null,this)):(this.commands.removeCommand(p),this.off("changeMode",y))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(t){n&&(n.exports=t)})}()})(JU);var qU={exports:{}};(function(n,e){ace.define("ace/keyboard/vim",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/dom","ace/lib/oop","ace/lib/keys","ace/lib/event","ace/search","ace/lib/useragent","ace/search_highlight","ace/commands/multi_select_commands","ace/mode/text","ace/multi_select"],function(t,i,r){var s=t("../range").Range,c=t("../lib/event_emitter").EventEmitter,l=t("../lib/dom"),u=t("../lib/oop"),f=t("../lib/keys"),a=t("../lib/event"),o=t("../search").Search,h=t("../lib/useragent"),d=t("../search_highlight").SearchHighlight,p=t("../commands/multi_select_commands"),y=t("../mode/text").Mode.prototype.tokenRe;t("../multi_select");var x=function(b){this.ace=b,this.state={},this.marks={},this.$uid=0,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onBeforeEndOperation=this.onBeforeEndOperation.bind(this),this.ace.on("change",this.onChange),this.ace.on("changeSelection",this.onSelectionChange),this.ace.on("beforeEndOperation",this.onBeforeEndOperation)};x.Pos=function(b,P){if(!(this instanceof R))return new R(b,P);this.line=b,this.ch=P},x.defineOption=function(b,P,k){},x.commands={redo:function(b){b.ace.redo()},undo:function(b){b.ace.undo()},newlineAndIndent:function(b){b.ace.insert(`
`)}},x.keyMap={},x.addClass=x.rmClass=function(){},x.e_stop=x.e_preventDefault=a.stopEvent,x.keyName=function(b){var P=f[b.keyCode]||b.key||"";return P.length==1&&(P=P.toUpperCase()),P=a.getModifierString(b).replace(/(^|-)\w/g,function(k){return k.toUpperCase()})+P,P},x.keyMap.default=function(b){return function(P){var k=P.ace.commands.commandKeyBinding[b.toLowerCase()];return k&&P.ace.execCommand(k)!==!1}},x.lookupKey=function b(P,k,O){k||(k="default"),typeof k=="string"&&(k=x.keyMap[k]);var F=typeof k=="function"?k(P):k[P];if(F===!1)return"nothing";if(F==="...")return"multi";if(F!=null&&O(F))return"handled";if(k.fallthrough){if(!Array.isArray(k.fallthrough))return b(P,k.fallthrough,O);for(var $=0;$<k.fallthrough.length;$++){var X=b(P,k.fallthrough[$],O);if(X)return X}}},x.signal=function(b,P,k){return b._signal(P,k)},x.on=a.addListener,x.off=a.removeListener,x.isWordChar=function(b){return b<""?/^\w$/.test(b):(y.lastIndex=0,y.test(b))},(function(){u.implement(x.prototype,c),this.destroy=function(){this.ace.off("change",this.onChange),this.ace.off("changeSelection",this.onSelectionChange),this.ace.off("beforeEndOperation",this.onBeforeEndOperation),this.removeOverlay()},this.virtualSelectionMode=function(){return this.ace.inVirtualSelectionMode&&this.ace.selection.index},this.onChange=function(k){var O={text:k.action[0]=="i"?k.lines:[]},F=this.curOp=this.curOp||{};F.changeHandlers||(F.changeHandlers=this._eventRegistry.change&&this._eventRegistry.change.slice()),F.lastChange?F.lastChange.next=F.lastChange=O:F.lastChange=F.change=O,this.$updateMarkers(k)},this.onSelectionChange=function(){var k=this.curOp=this.curOp||{};k.cursorActivityHandlers||(k.cursorActivityHandlers=this._eventRegistry.cursorActivity&&this._eventRegistry.cursorActivity.slice()),this.curOp.cursorActivity=!0,this.ace.inMultiSelectMode&&this.ace.keyBinding.removeKeyboardHandler(p.keyboardHandler)},this.operation=function(k,O){if(!O&&this.curOp||O&&this.curOp&&this.curOp.force)return k();if((O||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),!this.ace.curOp){var F=this.ace.prevOp;this.ace.startOperation({command:{name:"vim",scrollIntoView:"cursor"}})}var $=this.curOp=this.curOp||{};this.curOp.force=O;var X=k();return this.ace.curOp&&this.ace.curOp.command.name=="vim"&&(this.state.dialog&&(this.ace.curOp.command.scrollIntoView=!1),this.ace.endOperation(),!$.cursorActivity&&!$.lastChange&&F&&(this.ace.prevOp=F)),(O||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),X},this.onBeforeEndOperation=function(){var k=this.curOp;k&&(k.change&&this.signal("change",k.change,k),k&&k.cursorActivity&&this.signal("cursorActivity",null,k),this.curOp=null)},this.signal=function(k,O,F){var $=F?F[k+"Handlers"]:(this._eventRegistry||{})[k];if($){$=$.slice();for(var X=0;X<$.length;X++)$[X](this,O)}},this.firstLine=function(){return 0},this.lastLine=function(){return this.ace.session.getLength()-1},this.lineCount=function(){return this.ace.session.getLength()},this.setCursor=function(k,O){typeof k=="object"&&(O=k.ch,k=k.line),this.ace.inVirtualSelectionMode||this.ace.exitMultiSelectMode(),this.ace.session.unfold({row:k,column:O}),this.ace.selection.moveTo(k,O)},this.getCursor=function(k){var O=this.ace.selection,F=k=="anchor"?O.isEmpty()?O.lead:O.anchor:k=="head"||!k?O.lead:O.getRange()[k];return w(F)},this.listSelections=function(k){var O=this.ace.multiSelect.rangeList.ranges;return!O.length||this.ace.inVirtualSelectionMode?[{anchor:this.getCursor("anchor"),head:this.getCursor("head")}]:O.map(function(F){return{anchor:this.clipPos(w(F.cursor==F.end?F.start:F.end)),head:this.clipPos(w(F.cursor))}},this)},this.setSelections=function(k,O){var F=this.ace.multiSelect,$=k.map(function(ue){var de=g(ue.anchor),Le=g(ue.head),Be=s.comparePoints(de,Le)<0?new s.fromPoints(de,Le):new s.fromPoints(Le,de);return Be.cursor=s.comparePoints(Be.start,Le)?Be.end:Be.start,Be});if(this.ace.inVirtualSelectionMode){this.ace.selection.fromOrientedRange($[0]);return}O?$[O]&&$.push($.splice(O,1)[0]):$=$.reverse(),F.toSingleRange($[0].clone());for(var X=this.ace.session,ee=0;ee<$.length;ee++){var te=X.$clipRangeToDocument($[ee]);F.addRange(te)}},this.setSelection=function(k,O,F){var $=this.ace.selection;$.moveTo(k.line,k.ch),$.selectTo(O.line,O.ch),F&&F.origin=="*mouse"&&this.onBeforeEndOperation()},this.somethingSelected=function(k){return!this.ace.selection.isEmpty()},this.clipPos=function(k){var O=this.ace.session.$clipPositionToDocument(k.line,k.ch);return w(O)},this.markText=function(k){return{clear:function(){},find:function(){}}},this.$updateMarkers=function(k){var O=k.action=="insert",F=k.start,$=k.end,X=($.row-F.row)*(O?1:-1),ee=($.column-F.column)*(O?1:-1);O&&($=F);for(var te in this.marks){var ue=this.marks[te],de=s.comparePoints(ue,F);if(!(de<0)){if(de===0&&O)if(ue.bias==1)de=1;else{ue.bias=-1;continue}var Le=O?de:s.comparePoints(ue,$);if(Le>0){ue.row+=X,ue.column+=ue.row==$.row?ee:0;continue}!O&&Le<=0&&(ue.row=F.row,ue.column=F.column,Le===0&&(ue.bias=1))}}};var b=function(k,O,F,$){this.cm=k,this.id=O,this.row=F,this.column=$,k.marks[this.id]=this};b.prototype.clear=function(){delete this.cm.marks[this.id]},b.prototype.find=function(){return w(this)},this.setBookmark=function(k,O){var F=new b(this,this.$uid++,k.line,k.ch);return(!O||!O.insertLeft)&&(F.$insertRight=!0),this.marks[F.id]=F,F},this.moveH=function(k,O){if(O=="char"){var F=this.ace.selection;F.clearSelection(),F.moveCursorBy(0,k)}},this.findPosV=function(k,O,F,$){if(F=="page"){var X=this.ace.renderer,ee=X.layerConfig;O=O*Math.floor(ee.height/ee.lineHeight),F="line"}if(F=="line"){var te=this.ace.session.documentToScreenPosition(k.line,k.ch);$!=null&&(te.column=$),te.row+=O,te.row=Math.min(Math.max(0,te.row),this.ace.session.getScreenLength()-1);var ue=this.ace.session.screenToDocumentPosition(te.row,te.column);return w(ue)}else debugger},this.charCoords=function(k,O){if(O=="div"||!O){var F=this.ace.session.documentToScreenPosition(k.line,k.ch);return{left:F.column,top:F.row}}if(O=="local"){var $=this.ace.renderer,F=this.ace.session.documentToScreenPosition(k.line,k.ch),X=$.layerConfig.lineHeight,ee=$.layerConfig.characterWidth,te=X*F.row;return{left:F.column*ee,top:te,bottom:te+X}}},this.coordsChar=function(k,O){var F=this.ace.renderer;if(O=="local"){var $=Math.max(0,Math.floor(k.top/F.lineHeight)),X=Math.max(0,Math.floor(k.left/F.characterWidth)),ee=F.session.screenToDocumentPosition($,X);return w(ee)}else if(O=="div")throw"not implemented"},this.getSearchCursor=function(k,O,F){var $=!1,X=!1;k instanceof RegExp&&!k.global&&($=!k.ignoreCase,k=k.source,X=!0);var ee=new o;O.ch==null&&(O.ch=Number.MAX_VALUE);var te={row:O.line,column:O.ch},ue=this,de=null;return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(Le){ee.setOptions({needle:k,caseSensitive:$,wrap:!1,backwards:Le,regExp:X,start:de||te});var Be=ee.find(ue.ace.session);return Be&&Be.isEmpty()&&ue.getLine(Be.start.row).length==Be.start.column&&(ee.$options.start=Be,Be=ee.find(ue.ace.session)),de=Be,de},from:function(){return de&&w(de.start)},to:function(){return de&&w(de.end)},replace:function(Le){de&&(de.end=ue.ace.session.doc.replace(de,Le))}}},this.scrollTo=function(k,O){var F=this.ace.renderer,$=F.layerConfig,X=$.maxHeight;X-=(F.$size.scrollerHeight-F.lineHeight)*F.$scrollPastEnd,O!=null&&this.ace.session.setScrollTop(Math.max(0,Math.min(O,X))),k!=null&&this.ace.session.setScrollLeft(Math.max(0,Math.min(k,$.width)))},this.scrollInfo=function(){return 0},this.scrollIntoView=function(k,O){if(k){var F=this.ace.renderer,$={top:0,bottom:O};F.scrollCursorIntoView(g(k),F.lineHeight*2/F.$size.scrollerHeight,$)}},this.getLine=function(k){return this.ace.session.getLine(k)},this.getRange=function(k,O){return this.ace.session.getTextRange(new s(k.line,k.ch,O.line,O.ch))},this.replaceRange=function(k,O,F){return F||(F=O),this.ace.session.replace(new s(O.line,O.ch,F.line,F.ch),k)},this.replaceSelection=this.replaceSelections=function(k){var O=this.ace.selection;if(this.ace.inVirtualSelectionMode){this.ace.session.replace(O.getRange(),k[0]||"");return}O.inVirtualSelectionMode=!0;var F=O.rangeList.ranges;F.length||(F=[this.ace.multiSelect.getRange()]);for(var $=F.length;$--;)this.ace.session.replace(F[$],k[$]||"");O.inVirtualSelectionMode=!1},this.getSelection=function(){return this.ace.getSelectedText()},this.getSelections=function(){return this.listSelections().map(function(k){return this.getRange(k.anchor,k.head)},this)},this.getInputField=function(){return this.ace.textInput.getElement()},this.getWrapperElement=function(){return this.ace.container};var P={indentWithTabs:"useSoftTabs",indentUnit:"tabSize",tabSize:"tabSize",firstLineNumber:"firstLineNumber",readOnly:"readOnly"};this.setOption=function(k,O){switch(this.state[k]=O,k){case"indentWithTabs":k=P[k],O=!O;break;case"keyMap":this.state.$keyMap=O;return;default:k=P[k]}k&&this.ace.setOption(k,O)},this.getOption=function(k,O){var F=P[k];switch(F&&(O=this.ace.getOption(F)),k){case"indentWithTabs":return k=P[k],!O;case"keyMap":return this.state.$keyMap}return F?O:this.state[k]},this.toggleOverwrite=function(k){return this.state.overwrite=k,this.ace.setOverwrite(k)},this.addOverlay=function(k){if(!this.$searchHighlight||!this.$searchHighlight.session){var O=new d(null,"ace_highlight-marker","text"),F=this.ace.session.addDynamicMarker(O);O.id=F.id,O.session=this.ace.session,O.destroy=function(X){O.session.off("change",O.updateOnChange),O.session.off("changeEditor",O.destroy),O.session.removeMarker(O.id),O.session=null},O.updateOnChange=function(X){var ee=X.start.row;ee==X.end.row?O.cache[ee]=void 0:O.cache.splice(ee,O.cache.length)},O.session.on("changeEditor",O.destroy),O.session.on("change",O.updateOnChange)}var $=new RegExp(k.query.source,"gmi");this.$searchHighlight=k.highlight=O,this.$searchHighlight.setRegexp($),this.ace.renderer.updateBackMarkers()},this.removeOverlay=function(k){this.$searchHighlight&&this.$searchHighlight.session&&this.$searchHighlight.destroy()},this.getScrollInfo=function(){var k=this.ace.renderer,O=k.layerConfig;return{left:k.scrollLeft,top:k.scrollTop,height:O.maxHeight,width:O.width,clientHeight:O.height,clientWidth:O.width}},this.getValue=function(){return this.ace.getValue()},this.setValue=function(k){return this.ace.setValue(k,-1)},this.getTokenTypeAt=function(k){var O=this.ace.session.getTokenAt(k.line,k.ch);return O&&/comment|string/.test(O.type)?"string":""},this.findMatchingBracket=function(k){var O=this.ace.session.findMatchingBracket(g(k));return{to:O&&w(O)}},this.indentLine=function(k,O){O===!0?this.ace.session.indentRows(k,k,"	"):O===!1&&this.ace.session.outdentRows(new s(k,0,k,0))},this.indexFromPos=function(k){return this.ace.session.doc.positionToIndex(g(k))},this.posFromIndex=function(k){return w(this.ace.session.doc.indexToPosition(k))},this.focus=function(k){return this.ace.textInput.focus()},this.blur=function(k){return this.ace.blur()},this.defaultTextHeight=function(k){return this.ace.renderer.layerConfig.lineHeight},this.scanForBracket=function(k,O,F,$){var X=$.bracketRegex.source,ee=/paren|text|operator|tag/;if(O==1)var te=this.ace.session.$findClosingBracket(X.slice(1,2),g(k),ee);else var te=this.ace.session.$findOpeningBracket(X.slice(-2,-1),{row:k.line,column:k.ch+1},ee);return te&&{pos:w(te)}},this.refresh=function(){return this.ace.resize(!0)},this.getMode=function(){return{name:this.getOption("mode")}},this.execCommand=function(k){k=="indentAuto"?this.ace.execCommand("autoindent"):console.log(k+" is not implemented")}}).call(x.prototype);function g(b){return{row:b.line,column:b.ch}}function w(b){return new R(b.row,b.column)}var C=x.StringStream=function(b,P){this.pos=this.start=0,this.string=b,this.tabSize=P||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};C.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(b){var P=this.string.charAt(this.pos);if(typeof b=="string")var k=P==b;else var k=P&&(b.test?b.test(P):b(P));if(k)return++this.pos,P},eatWhile:function(b){for(var P=this.pos;this.eat(b););return this.pos>P},eatSpace:function(){for(var b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>b},skipToEnd:function(){this.pos=this.string.length},skipTo:function(b){var P=this.string.indexOf(b,this.pos);if(P>-1)return this.pos=P,!0},backUp:function(b){this.pos-=b},column:function(){throw"not implemented"},indentation:function(){throw"not implemented"},match:function(b,P,k){if(typeof b=="string"){var O=function(X){return k?X.toLowerCase():X},F=this.string.substr(this.pos,b.length);if(O(F)==O(b))return P!==!1&&(this.pos+=b.length),!0}else{var $=this.string.slice(this.pos).match(b);return $&&$.index>0?null:($&&P!==!1&&(this.pos+=$[0].length),$)}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(b,P){this.lineStart+=b;try{return P()}finally{this.lineStart-=b}}},x.defineExtension=function(b,P){x.prototype[b]=P},l.importCssString(".normal-mode .ace_cursor{	    border: none;	    background-color: rgba(255,0,0,0.5);	}	.normal-mode .ace_hidden-cursors .ace_cursor{	  background-color: transparent;	  border: 1px solid red;	  opacity: 0.7	}	.ace_dialog {	  position: absolute;	  left: 0; right: 0;	  background: inherit;	  z-index: 15;	  padding: .1em .8em;	  overflow: hidden;	  color: inherit;	}	.ace_dialog-top {	  border-bottom: 1px solid #444;	  top: 0;	}	.ace_dialog-bottom {	  border-top: 1px solid #444;	  bottom: 0;	}	.ace_dialog input {	  border: none;	  outline: none;	  background: transparent;	  width: 20em;	  color: inherit;	  font-family: monospace;	}","vimMode"),function(){function b(k,O,F){var $=k.ace.container,X;return X=$.appendChild(document.createElement("div")),F?X.className="ace_dialog ace_dialog-bottom":X.className="ace_dialog ace_dialog-top",typeof O=="string"?X.innerHTML=O:X.appendChild(O),X}function P(k,O){k.state.currentNotificationClose&&k.state.currentNotificationClose(),k.state.currentNotificationClose=O}x.defineExtension("openDialog",function(k,O,F){if(this.virtualSelectionMode())return;F||(F={}),P(this,null);var $=b(this,k,F.bottom),X=!1,ee=this;this.state.dialog=$;function te(Le){if(typeof Le=="string")ue.value=Le;else{if(X||Le&&Le.type=="blur"&&document.activeElement===ue)return;ee.state.dialog=null,X=!0,$.parentNode.removeChild($),ee.focus(),F.onClose&&F.onClose($)}}var ue=$.getElementsByTagName("input")[0],de;return ue?(F.value&&(ue.value=F.value,F.selectValueOnOpen!==!1&&ue.select()),F.onInput&&x.on(ue,"input",function(Le){F.onInput(Le,ue.value,te)}),F.onKeyUp&&x.on(ue,"keyup",function(Le){F.onKeyUp(Le,ue.value,te)}),x.on(ue,"keydown",function(Le){F&&F.onKeyDown&&F.onKeyDown(Le,ue.value,te)||(Le.keyCode==13&&O(ue.value),(Le.keyCode==27||F.closeOnEnter!==!1&&Le.keyCode==13)&&(ue.blur(),x.e_stop(Le),te()))}),F.closeOnBlur!==!1&&x.on(ue,"blur",te),ue.focus()):(de=$.getElementsByTagName("button")[0])&&(x.on(de,"click",function(){te(),ee.focus()}),F.closeOnBlur!==!1&&x.on(de,"blur",te),de.focus()),te}),x.defineExtension("openNotification",function(k,O){if(this.virtualSelectionMode())return;P(this,te);var F=b(this,k,O&&O.bottom),$=!1,X,ee=O&&typeof O.duration<"u"?O.duration:5e3;function te(){$||($=!0,clearTimeout(X),F.parentNode.removeChild(F))}return x.on(F,"click",function(ue){x.e_preventDefault(ue),te()}),ee&&(X=setTimeout(te,ee)),te})}();var M=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],_=M.length,E=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],R=x.Pos,A=function(){return Ye};function T(b){b.setOption("disableInput",!0),b.setOption("showCursorWhenSelecting",!1),x.signal(b,"vim-mode-change",{mode:"normal"}),b.on("cursorActivity",Jc),Ee(b),x.on(b.getInputField(),"paste",J(b))}function S(b){b.setOption("disableInput",!1),b.off("cursorActivity",Jc),x.off(b.getInputField(),"paste",J(b)),b.state.vim=null}function I(b,P){this==x.keyMap.vim&&x.rmClass(b.getWrapperElement(),"cm-fat-cursor"),(!P||P.attach!=D)&&S(b)}function D(b,P){this==x.keyMap.vim&&x.addClass(b.getWrapperElement(),"cm-fat-cursor"),(!P||P.attach!=D)&&T(b)}x.defineOption("vimMode",!1,function(b,P,k){P&&b.getOption("keyMap")!="vim"?b.setOption("keyMap","vim"):!P&&k!=x.Init&&/^vim/.test(b.getOption("keyMap"))&&b.setOption("keyMap","default")});function z(b,P){if(P){if(this[b])return this[b];var k=H(b);if(!k)return!1;var O=x.Vim.findKey(P,k);return typeof O=="function"&&x.signal(P,"vim-keypress",k),O}}var B={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},W={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function H(b){if(b.charAt(0)=="'")return b.charAt(1);var P=b.split(/-(?!$)/),k=P[P.length-1];if(P.length==1&&P[0].length==1)return!1;if(P.length==2&&P[0]=="Shift"&&k.length==1)return!1;for(var O=!1,F=0;F<P.length;F++){var $=P[F];$ in B?P[F]=B[$]:O=!0,$ in W&&(P[F]=W[$])}return O?(je(k)&&(P[P.length-1]=k.toLowerCase()),"<"+P.join("-")+">"):!1}function J(b){var P=b.state.vim;return P.onPasteFn||(P.onPasteFn=function(){P.insertMode||(b.setCursor(nt(b.getCursor(),0,1)),at.enterInsertMode(b,{},P))}),P.onPasteFn}var G=/[\d]/,K=[x.isWordChar,function(b){return b&&!x.isWordChar(b)&&!/\s/.test(b)}],Y=[function(b){return/\S/.test(b)}];function ne(b,P){for(var k=[],O=b;O<b+P;O++)k.push(String.fromCharCode(O));return k}var le=ne(65,26),j=ne(97,26),re=ne(48,10),fe=[].concat(le,j,re,["<",">"]),ve=[].concat(le,j,re,["-",'"',".",":","/"]);function ye(b,P){return P>=b.firstLine()&&P<=b.lastLine()}function ze(b){return/^[a-z]$/.test(b)}function Xe(b){return"()[]{}".indexOf(b)!=-1}function Ae(b){return G.test(b)}function je(b){return/^[A-Z]$/.test(b)}function oe(b){return/^\s*$/.test(b)}function Ve(b){return".?!".indexOf(b)!=-1}function Te(b,P){for(var k=0;k<P.length;k++)if(P[k]==b)return!0;return!1}var $e={};function Ne(b,P,k,O,F){if(P===void 0&&!F)throw Error("defaultValue is required unless callback is provided");if(k||(k="string"),$e[b]={type:k,defaultValue:P,callback:F},O)for(var $=0;$<O.length;$++)$e[O[$]]=$e[b];P&&ht(b,P)}function ht(b,P,k,O){var F=$e[b];O=O||{};var $=O.scope;if(!F)return new Error("Unknown option: "+b);if(F.type=="boolean"){if(P&&P!==!0)return new Error("Invalid argument: "+b+"="+P);P!==!1&&(P=!0)}F.callback?($!=="local"&&F.callback(P,void 0),$!=="global"&&k&&F.callback(P,k)):($!=="local"&&(F.value=F.type=="boolean"?!!P:P),$!=="global"&&k&&(k.state.vim.options[b]={value:P}))}function Ze(b,P,k){var O=$e[b];k=k||{};var F=k.scope;if(!O)return new Error("Unknown option: "+b);if(O.callback){var $=P&&O.callback(void 0,P);return F!=="global"&&$!==void 0?$:F!=="local"?O.callback():void 0}else{var $=F!=="global"&&P&&P.state.vim.options[b];return($||F!=="local"&&O||{}).value}}Ne("filetype",void 0,"string",["ft"],function(b,P){if(P!==void 0)if(b===void 0){var k=P.getOption("mode");return k=="null"?"":k}else{var k=b==""?"null":b;P.setOption("mode",k)}});var q=function(){var b=100,P=-1,k=0,O=0,F=new Array(b);function $(te,ue,de){var Le=P%b,Be=F[Le];function Ie(mt){var qe=++P%b,St=F[qe];St&&St.clear(),F[qe]=te.setBookmark(mt)}if(Be){var it=Be.find();it&&!tn(it,ue)&&Ie(ue)}else Ie(ue);Ie(de),k=P,O=P-b+1,O<0&&(O=0)}function X(te,ue){P+=ue,P>k?P=k:P<O&&(P=O);var de=F[(b+P)%b];if(de&&!de.find()){var Le=ue>0?1:-1,Be,Ie=te.getCursor();do if(P+=Le,de=F[(b+P)%b],de&&(Be=de.find())&&!tn(Ie,Be))break;while(P<k&&P>O)}return de}function ee(te,ue){var de=P,Le=X(te,ue);return P=de,Le&&Le.find()}return{cachedCursor:void 0,add:$,find:ee,move:X}},Z=function(b){return b?{changes:b.changes,expectCursorActivityForChange:b.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function ae(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Z()}ae.prototype={exitMacroRecordMode:function(){var b=me.macroModeState;b.onRecordingDone&&b.onRecordingDone(),b.onRecordingDone=void 0,b.isRecording=!1},enterMacroRecordMode:function(b,P){var k=me.registerController.getRegister(P);k&&(k.clear(),this.latestRegister=P,b.openDialog&&(this.onRecordingDone=b.openDialog("(recording)["+P+"]",null,{bottom:!0})),this.isRecording=!0)}};function Ee(b){return b.state.vim||(b.state.vim={inputState:new Je,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),b.state.vim}var me;function ke(){me={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:q(),macroModeState:new ae,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new et({}),searchHistoryController:new ot,exCommandHistoryController:new ot};for(var b in $e){var P=$e[b];P.value=P.defaultValue}}var Qe,Ye={buildKeyMap:function(){},getRegisterController:function(){return me.registerController},resetVimGlobalState_:ke,getVimGlobalState_:function(){return me},maybeInitVimState_:Ee,suppressErrorLogging:!1,InsertModeKey:qc,map:function(b,P,k){er.map(b,P,k)},unmap:function(b,P){er.unmap(b,P)},noremap:function(b,P,k){function O(Be){return Be?[Be]:["normal","insert","visual"]}for(var F=O(k),$=M.length,X=_,ee=$-X;ee<$&&F.length;ee++){var te=M[ee];if(te.keys==P&&(!k||!te.context||te.context===k)&&te.type.substr(0,2)!=="ex"&&te.type.substr(0,3)!=="key"){var ue={};for(var de in te)ue[de]=te[de];ue.keys=b,k&&!ue.context&&(ue.context=k),this._mapCommand(ue);var Le=O(te.context);F=F.filter(function(Be){return Le.indexOf(Be)===-1})}}},mapclear:function(b){var P=M.length,k=_,O=M.slice(0,P-k);if(M=M.slice(P-k),b)for(var F=O.length-1;F>=0;F--){var $=O[F];if(b!==$.context)if($.context)this._mapCommand($);else{var X=["normal","insert","visual"];for(var ee in X)if(X[ee]!==b){var te={};for(var ue in $)te[ue]=$[ue];te.context=X[ee],this._mapCommand(te)}}}},setOption:ht,getOption:Ze,defineOption:Ne,defineEx:function(b,P,k){if(!P)P=b;else if(b.indexOf(P)!==0)throw new Error('(Vim.defineEx) "'+P+'" is not a prefix of "'+b+'", command not registered');uf[b]=k,er.commandMap_[P]={name:b,shortName:P,type:"api"}},handleKey:function(b,P,k){var O=this.findKey(b,P,k);if(typeof O=="function")return O()},findKey:function(b,P,k){var O=Ee(b);function F(){var de=me.macroModeState;if(de.isRecording){if(P=="q")return de.exitMacroRecordMode(),ge(b),!0;k!="mapping"&&Pr(de,P)}}function $(){if(P=="<Esc>")return ge(b),O.visualMode?be(b):O.insertMode&&ps(b),!0}function X(de){for(var Le;de;)Le=/<\w+-.+?>|<\w+>|./.exec(de),P=Le[0],de=de.substring(Le.index+P.length),x.Vim.handleKey(b,P,"mapping")}function ee(){if($())return!0;for(var de=O.inputState.keyBuffer=O.inputState.keyBuffer+P,Le=P.length==1,Be=Ue.matchCommand(de,M,O.inputState,"insert");de.length>1&&Be.type!="full";){var de=O.inputState.keyBuffer=de.slice(1),Ie=Ue.matchCommand(de,M,O.inputState,"insert");Ie.type!="none"&&(Be=Ie)}if(Be.type=="none")return ge(b),!1;if(Be.type=="partial")return Qe&&window.clearTimeout(Qe),Qe=window.setTimeout(function(){O.insertMode&&O.inputState.keyBuffer&&ge(b)},Ze("insertModeEscKeysTimeout")),!Le;if(Qe&&window.clearTimeout(Qe),Le){for(var it=b.listSelections(),mt=0;mt<it.length;mt++){var qe=it[mt].head;b.replaceRange("",nt(qe,0,-(de.length-1)),qe,"+input")}me.macroModeState.lastInsertModeChanges.changes.pop()}return ge(b),Be.command}function te(){if(F()||$())return!0;var de=O.inputState.keyBuffer=O.inputState.keyBuffer+P;if(/^[1-9]\d*$/.test(de))return!0;var Ie=/^(\d*)(.*)$/.exec(de);if(!Ie)return ge(b),!1;var Le=O.visualMode?"visual":"normal",Be=Ue.matchCommand(Ie[2]||Ie[1],M,O.inputState,Le);if(Be.type=="none")return ge(b),!1;if(Be.type=="partial")return!0;O.inputState.keyBuffer="";var Ie=/^(\d*)(.*)$/.exec(de);return Ie[1]&&Ie[1]!="0"&&O.inputState.pushRepeatDigit(Ie[1]),Be.command}var ue;if(O.insertMode?ue=ee():ue=te(),ue!==!1)return ue===!0?function(){return!0}:function(){if(!((ue.operator||ue.isEdit)&&b.getOption("readOnly")))return b.operation(function(){b.curOp.isVimOp=!0;try{ue.type=="keyToKey"?X(ue.toKeys):Ue.processCommand(b,O,ue)}catch(de){throw b.state.vim=void 0,Ee(b),x.Vim.suppressErrorLogging||console.log(de),de}return!0})}},handleEx:function(b,P){er.processCommand(b,P)},defineMotion:rt,defineAction:Ke,defineOperator:tt,mapCommand:Zm,_mapCommand:pr,defineRegister:_e,exitVisualMode:be,exitInsertMode:ps};function Je(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}Je.prototype.pushRepeatDigit=function(b){this.operator?this.motionRepeat=this.motionRepeat.concat(b):this.prefixRepeat=this.prefixRepeat.concat(b)},Je.prototype.getRepeat=function(){var b=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(b=1,this.prefixRepeat.length>0&&(b*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(b*=parseInt(this.motionRepeat.join(""),10))),b};function ge(b,P){b.state.vim.inputState=new Je,x.signal(b,"vim-command-done",P)}function Me(b,P,k){this.clear(),this.keyBuffer=[b||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!P,this.blockwise=!!k}Me.prototype={setText:function(b,P,k){this.keyBuffer=[b||""],this.linewise=!!P,this.blockwise=!!k},pushText:function(b,P){P&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(b)},pushInsertModeChanges:function(b){this.insertModeChanges.push(Z(b))},pushSearchQuery:function(b){this.searchQueries.push(b)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function _e(b,P){var k=me.registerController.registers;if(!b||b.length!=1)throw Error("Register name must be 1 character");k[b]=P,ve.push(b)}function et(b){this.registers=b,this.unnamedRegister=b['"']=new Me,b["."]=new Me,b[":"]=new Me,b["/"]=new Me}et.prototype={pushText:function(b,P,k,O,F){O&&k.charAt(k.length-1)!==`
`&&(k+=`
`);var $=this.isValidRegister(b)?this.getRegister(b):null;if(!$){switch(P){case"yank":this.registers[0]=new Me(k,O,F);break;case"delete":case"change":k.indexOf(`
`)==-1?this.registers["-"]=new Me(k,O):(this.shiftNumericRegisters_(),this.registers[1]=new Me(k,O));break}this.unnamedRegister.setText(k,O,F);return}var X=je(b);X?$.pushText(k,O):$.setText(k,O,F),this.unnamedRegister.setText($.toString(),O)},getRegister:function(b){return this.isValidRegister(b)?(b=b.toLowerCase(),this.registers[b]||(this.registers[b]=new Me),this.registers[b]):this.unnamedRegister},isValidRegister:function(b){return b&&Te(b,ve)},shiftNumericRegisters_:function(){for(var b=9;b>=2;b--)this.registers[b]=this.getRegister(""+(b-1))}};function ot(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}ot.prototype={nextMatch:function(b,P){var k=this.historyBuffer,O=P?-1:1;this.initialPrefix===null&&(this.initialPrefix=b);for(var F=this.iterator+O;P?F>=0:F<k.length;F+=O)for(var $=k[F],X=0;X<=$.length;X++)if(this.initialPrefix==$.substring(0,X))return this.iterator=F,$;if(F>=k.length)return this.iterator=k.length,this.initialPrefix;if(F<0)return b},pushInput:function(b){var P=this.historyBuffer.indexOf(b);P>-1&&this.historyBuffer.splice(P,1),b.length&&this.historyBuffer.push(b)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Ue={matchCommand:function(b,P,k,O){var F=Tt(b,P,O,k);if(!F.full&&!F.partial)return{type:"none"};if(!F.full&&F.partial)return{type:"partial"};for(var $,X=0;X<F.full.length;X++){var ee=F.full[X];$||($=ee)}if($.keys.slice(-11)=="<character>"){var te=Xt(b);if(/<C-.>/.test(te)||!te)return{type:"none"};k.selectedCharacter=te}return{type:"full",command:$}},processCommand:function(b,P,k){switch(P.inputState.repeatOverride=k.repeatOverride,k.type){case"motion":this.processMotion(b,P,k);break;case"operator":this.processOperator(b,P,k);break;case"operatorMotion":this.processOperatorMotion(b,P,k);break;case"action":this.processAction(b,P,k);break;case"search":this.processSearch(b,P,k);break;case"ex":case"keyToEx":this.processEx(b,P,k);break}},processMotion:function(b,P,k){P.inputState.motion=k.motion,P.inputState.motionArgs=lt(k.motionArgs),this.evalInput(b,P)},processOperator:function(b,P,k){var O=P.inputState;if(O.operator)if(O.operator==k.operator){O.motion="expandToLine",O.motionArgs={linewise:!0},this.evalInput(b,P);return}else ge(b);O.operator=k.operator,O.operatorArgs=lt(k.operatorArgs),k.exitVisualBlock&&(P.visualBlock=!1,we(b)),P.visualMode&&this.evalInput(b,P)},processOperatorMotion:function(b,P,k){var O=P.visualMode,F=lt(k.operatorMotionArgs);F&&O&&F.visualLine&&(P.visualLine=!0),this.processOperator(b,P,k),O||this.processMotion(b,P,k)},processAction:function(b,P,k){var O=P.inputState,F=O.getRepeat(),$=!!F,X=lt(k.actionArgs)||{};O.selectedCharacter&&(X.selectedCharacter=O.selectedCharacter),k.operator&&this.processOperator(b,P,k),k.motion&&this.processMotion(b,P,k),(k.motion||k.operator)&&this.evalInput(b,P),X.repeat=F||1,X.repeatIsExplicit=$,X.registerName=O.registerName,ge(b),P.lastMotion=null,k.isEdit&&this.recordLastEdit(P,O,k),at[k.action](b,X,P)},processSearch:function(b,P,k){if(!b.getSearchCursor)return;var O=k.searchArgs.forward,F=k.searchArgs.wholeWordOnly;Vn(b).setReversed(!O);var $=O?"/":"?",X=Vn(b).getQuery(),ee=b.getScrollInfo();function te(qe,St,kt){me.searchHistoryController.pushInput(qe),me.searchHistoryController.reset();try{aa(b,qe,St,kt)}catch{pn(b,"Invalid regex: "+qe),ge(b);return}Ue.processMotion(b,P,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:k.searchArgs.toJumplist}})}function ue(qe){b.scrollTo(ee.left,ee.top),te(qe,!0,!0);var St=me.macroModeState;St.isRecording&&vl(St,qe)}function de(qe,St,kt){var $t=x.keyName(qe),un,ai;$t=="Up"||$t=="Down"?(un=$t=="Up",ai=qe.target?qe.target.selectionEnd:0,St=me.searchHistoryController.nextMatch(St,un)||"",kt(St),ai&&qe.target&&(qe.target.selectionEnd=qe.target.selectionStart=Math.min(ai,qe.target.value.length))):$t!="Left"&&$t!="Right"&&$t!="Ctrl"&&$t!="Alt"&&$t!="Shift"&&me.searchHistoryController.reset();var Mn;try{Mn=aa(b,St,!0,!0)}catch{}Mn?b.scrollIntoView(Zc(b,!O,Mn),30):(la(b),b.scrollTo(ee.left,ee.top))}function Le(qe,St,kt){var $t=x.keyName(qe);$t=="Esc"||$t=="Ctrl-C"||$t=="Ctrl-["||$t=="Backspace"&&St==""?(me.searchHistoryController.pushInput(St),me.searchHistoryController.reset(),aa(b,X),la(b),b.scrollTo(ee.left,ee.top),x.e_stop(qe),ge(b),kt(),b.focus()):$t=="Up"||$t=="Down"?x.e_stop(qe):$t=="Ctrl-U"&&(x.e_stop(qe),kt(""))}switch(k.searchArgs.querySrc){case"prompt":var Be=me.macroModeState;if(Be.isPlaying){var mt=Be.replaySearchQueries.shift();te(mt,!0,!1)}else ao(b,{onClose:ue,prefix:$,desc:Xc,onKeyUp:de,onKeyDown:Le});break;case"wordUnderCursor":var Ie=Rt(b,!1,!0,!1,!0),it=!0;if(Ie||(Ie=Rt(b,!1,!0,!1,!1),it=!1),!Ie)return;var mt=b.getLine(Ie.start.line).substring(Ie.start.ch,Ie.end.ch);it&&F?mt="\\b"+mt+"\\b":mt=ds(mt),me.jumpList.cachedCursor=b.getCursor(),b.setCursor(Ie.start),te(mt,!0,!1);break}},processEx:function(b,P,k){function O($){me.exCommandHistoryController.pushInput($),me.exCommandHistoryController.reset(),er.processCommand(b,$)}function F($,X,ee){var te=x.keyName($),ue,de;(te=="Esc"||te=="Ctrl-C"||te=="Ctrl-["||te=="Backspace"&&X=="")&&(me.exCommandHistoryController.pushInput(X),me.exCommandHistoryController.reset(),x.e_stop($),ge(b),ee(),b.focus()),te=="Up"||te=="Down"?(x.e_stop($),ue=te=="Up",de=$.target?$.target.selectionEnd:0,X=me.exCommandHistoryController.nextMatch(X,ue)||"",ee(X),de&&$.target&&($.target.selectionEnd=$.target.selectionStart=Math.min(de,$.target.value.length))):te=="Ctrl-U"?(x.e_stop($),ee("")):te!="Left"&&te!="Right"&&te!="Ctrl"&&te!="Alt"&&te!="Shift"&&me.exCommandHistoryController.reset()}k.type=="keyToEx"?er.processCommand(b,k.exArgs.input):P.visualMode?ao(b,{onClose:O,prefix:":",value:"'<,'>",onKeyDown:F,selectValueOnOpen:!1}):ao(b,{onClose:O,prefix:":",onKeyDown:F})},evalInput:function(b,P){var k=P.inputState,O=k.motion,F=k.motionArgs||{},$=k.operator,X=k.operatorArgs||{},ee=k.registerName,te=P.sel,ue=Pt(P.visualMode?pe(b,te.head):b.getCursor("head")),de=Pt(P.visualMode?pe(b,te.anchor):b.getCursor("anchor")),Le=Pt(ue),Be=Pt(de),Ie,it,mt;if($&&this.recordLastEdit(P,k),k.repeatOverride!==void 0?mt=k.repeatOverride:mt=k.getRepeat(),mt>0&&F.explicitRepeat?F.repeatIsExplicit=!0:(F.noRepeat||!F.explicitRepeat&&mt===0)&&(mt=1,F.repeatIsExplicit=!1),k.selectedCharacter&&(F.selectedCharacter=X.selectedCharacter=k.selectedCharacter),F.repeat=mt,ge(b),O){var qe=We[O](b,ue,F,P);if(P.lastMotion=We[O],!qe)return;if(F.toJumplist){!$&&b.ace.curOp!=null&&(b.ace.curOp.command.scrollIntoView="center-animate");var St=me.jumpList,kt=St.cachedCursor;kt?(Ft(b,kt,qe),delete St.cachedCursor):Ft(b,ue,qe)}qe instanceof Array?(it=qe[0],Ie=qe[1]):Ie=qe,Ie||(Ie=Pt(ue)),P.visualMode?(P.visualBlock&&Ie.ch===1/0||(Ie=pe(b,Ie,P.visualBlock)),it&&(it=pe(b,it,!0)),it=it||Be,te.anchor=it,te.head=Ie,we(b),Bn(b,P,"<",At(it,Ie)?it:Ie),Bn(b,P,">",At(it,Ie)?Ie:it)):$||(Ie=pe(b,Ie),b.setCursor(Ie.line,Ie.ch))}if($){if(X.lastSel){it=Be;var $t=X.lastSel,un=Math.abs($t.head.line-$t.anchor.line),ai=Math.abs($t.head.ch-$t.anchor.ch);$t.visualLine?Ie=R(Be.line+un,Be.ch):$t.visualBlock?Ie=R(Be.line+un,Be.ch+ai):$t.head.line==$t.anchor.line?Ie=R(Be.line,Be.ch+ai):Ie=R(Be.line+un,Be.ch),P.visualMode=!0,P.visualLine=$t.visualLine,P.visualBlock=$t.visualBlock,te=P.sel={anchor:it,head:Ie},we(b)}else P.visualMode&&(X.lastSel={anchor:Pt(te.anchor),head:Pt(te.head),visualBlock:P.visualBlock,visualLine:P.visualLine});var Mn,ei,Wt,Dt,Cn;if(P.visualMode){if(Mn=cn(te.head,te.anchor),ei=Qn(te.head,te.anchor),Wt=P.visualLine||X.linewise,Dt=P.visualBlock?"block":Wt?"line":"char",Cn=Pe(b,{anchor:Mn,head:ei},Dt),Wt){var Rn=Cn.ranges;if(Dt=="block")for(var gn=0;gn<Rn.length;gn++)Rn[gn].head.ch=Sn(b,Rn[gn].head.line);else Dt=="line"&&(Rn[0].head=R(Rn[0].head.line+1,0))}}else{if(Mn=Pt(it||Be),ei=Pt(Ie||Le),At(ei,Mn)){var $i=Mn;Mn=ei,ei=$i}Wt=F.linewise||X.linewise,Wt?Ct(b,Mn,ei):F.forward&&pt(b,Mn,ei),Dt="char";var lo=!F.inclusive||Wt;Cn=Pe(b,{anchor:Mn,head:ei},Dt,lo)}b.setSelections(Cn.ranges,Cn.primary),P.lastMotion=null,X.repeat=mt,X.registerName=ee,X.linewise=Wt;var fa=De[$](b,X,Cn.ranges,Be,Ie);P.visualMode&&be(b,fa!=null),fa&&b.setCursor(fa)}},recordLastEdit:function(b,P,k){var O=me.macroModeState;O.isPlaying||(b.lastEditInputState=P,b.lastEditActionCommand=k,O.lastInsertModeChanges.changes=[],O.lastInsertModeChanges.expectCursorActivityForChange=!1,O.lastInsertModeChanges.visualBlock=b.visualBlock?b.sel.head.line-b.sel.anchor.line:0)}},We={moveToTopLine:function(b,P,k){var O=Qc(b).top+k.repeat-1;return R(O,wt(b.getLine(O)))},moveToMiddleLine:function(b){var P=Qc(b),k=Math.floor((P.top+P.bottom)*.5);return R(k,wt(b.getLine(k)))},moveToBottomLine:function(b,P,k){var O=Qc(b).bottom-k.repeat+1;return R(O,wt(b.getLine(O)))},expandToLine:function(b,P,k){var O=P;return R(O.line+k.repeat-1,1/0)},findNext:function(b,P,k){var O=Vn(b),F=O.getQuery();if(F){var $=!k.forward;return $=O.isReversed()?!$:$,en(b,F),Zc(b,$,F,k.repeat)}},goToMark:function(b,P,k,O){var F=cf(b,O,k.selectedCharacter);return F?k.linewise?{line:F.line,ch:wt(b.getLine(F.line))}:F:null},moveToOtherHighlightedEnd:function(b,P,k,O){if(O.visualBlock&&k.sameLine){var F=O.sel;return[pe(b,R(F.anchor.line,F.head.ch)),pe(b,R(F.head.line,F.anchor.ch))]}else return[O.sel.head,O.sel.anchor]},jumpToMark:function(b,P,k,O){for(var F=P,$=0;$<k.repeat;$++){var X=F;for(var ee in O.marks)if(ze(ee)){var te=O.marks[ee].find(),ue=k.forward?At(te,X):At(X,te);if(!ue&&!(k.linewise&&te.line==X.line)){var de=tn(X,F),Le=k.forward?io(X,te,F):io(F,te,X);(de||Le)&&(F=te)}}}return k.linewise&&(F=R(F.line,wt(b.getLine(F.line)))),F},moveByCharacters:function(b,P,k){var O=P,F=k.repeat,$=k.forward?O.ch+F:O.ch-F;return R(O.line,$)},moveByLines:function(b,P,k,O){var F=P,$=F.ch;switch(O.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:$=O.lastHPos;break;default:O.lastHPos=$}var X=k.repeat+(k.repeatOffset||0),ee=k.forward?F.line+X:F.line-X,te=b.firstLine(),ue=b.lastLine();if(ee<te&&F.line==te)return this.moveToStartOfLine(b,P,k,O);if(ee>ue&&F.line==ue)return this.moveToEol(b,P,k,O,!0);var de=b.ace.session.getFoldLine(ee);return de&&(k.forward?ee>de.start.row&&(ee=de.end.row+1):ee=de.start.row),k.toFirstChar&&($=wt(b.getLine(ee)),O.lastHPos=$),O.lastHSPos=b.charCoords(R(ee,$),"div").left,R(ee,$)},moveByDisplayLines:function(b,P,k,O){var F=P;switch(O.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:O.lastHSPos=b.charCoords(F,"div").left}var $=k.repeat,X=b.findPosV(F,k.forward?$:-$,"line",O.lastHSPos);if(X.hitSide)if(k.forward)var ee=b.charCoords(X,"div"),te={top:ee.top+8,left:O.lastHSPos},X=b.coordsChar(te,"div");else{var ue=b.charCoords(R(b.firstLine(),0),"div");ue.left=O.lastHSPos,X=b.coordsChar(ue,"div")}return O.lastHPos=X.ch,X},moveByPage:function(b,P,k){var O=P,F=k.repeat;return b.findPosV(O,k.forward?F:-F,"page")},moveByParagraph:function(b,P,k){var O=k.forward?1:-1;return wn(b,P,k.repeat,O)},moveBySentence:function(b,P,k){var O=k.forward?1:-1;return kr(b,P,k.repeat,O)},moveByScroll:function(b,P,k,O){var F=b.getScrollInfo(),ee=null,$=k.repeat;$||($=F.clientHeight/(2*b.defaultTextHeight()));var X=b.charCoords(P,"local");k.repeat=$;var ee=We.moveByDisplayLines(b,P,k,O);if(!ee)return null;var te=b.charCoords(ee,"local");return b.scrollTo(null,F.top+te.top-X.top),ee},moveByWords:function(b,P,k){return Jn(b,P,k.repeat,!!k.forward,!!k.wordEnd,!!k.bigWord)},moveTillCharacter:function(b,P,k){var O=k.repeat,F=Lt(b,O,k.forward,k.selectedCharacter),$=k.forward?-1:1;return Ot($,k),F?(F.ch+=$,F):null},moveToCharacter:function(b,P,k){var O=k.repeat;return Ot(0,k),Lt(b,O,k.forward,k.selectedCharacter)||P},moveToSymbol:function(b,P,k){var O=k.repeat;return si(b,O,k.forward,k.selectedCharacter)||P},moveToColumn:function(b,P,k,O){var F=k.repeat;return O.lastHPos=F-1,O.lastHSPos=b.charCoords(P,"div").left,vt(b,F)},moveToEol:function(b,P,k,O,F){var $=P,X=R($.line+k.repeat-1,1/0),ee=b.clipPos(X);return ee.ch--,F||(O.lastHPos=1/0,O.lastHSPos=b.charCoords(ee,"div").left),X},moveToFirstNonWhiteSpaceCharacter:function(b,P){var k=P;return R(k.line,wt(b.getLine(k.line)))},moveToMatchedSymbol:function(b,P){for(var k=P,O=k.line,F=k.ch,$=b.getLine(O),X;F<$.length;F++)if(X=$.charAt(F),X&&Xe(X)){var ee=b.getTokenTypeAt(R(O,F+1));if(ee!=="string"&&ee!=="comment")break}if(F<$.length){var te=/[<>]/.test($[F])?/[(){}[\]<>]/:/[(){}[\]]/,ue=b.findMatchingBracket(R(O,F+1),{bracketRegex:te});return ue.to}else return k},moveToStartOfLine:function(b,P){return R(P.line,0)},moveToLineOrEdgeOfDocument:function(b,P,k){var O=k.forward?b.lastLine():b.firstLine();return k.repeatIsExplicit&&(O=k.repeat-b.getOption("firstLineNumber")),R(O,wt(b.getLine(O)))},textObjectManipulation:function(b,P,k,O){var F={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},$={"'":!0,'"':!0,"`":!0},X=k.selectedCharacter;X=="b"?X="(":X=="B"&&(X="{");var ee=!k.textObjectInner,te;if(F[X])te=qi(b,P,X,ee);else if($[X])te=qn(b,P,X,ee);else if(X==="W")te=Rt(b,ee,!0,!0);else if(X==="w")te=Rt(b,ee,!0,!1);else if(X==="p")if(te=wn(b,P,k.repeat,0,ee),k.linewise=!0,O.visualMode)O.visualLine||(O.visualLine=!0);else{var ue=O.inputState.operatorArgs;ue&&(ue.linewise=!0),te.end.line--}else return null;return b.state.vim.visualMode?ie(b,te.start,te.end):[te.start,te.end]},repeatLastCharacterSearch:function(b,P,k){var O=me.lastCharacterSearch,F=k.repeat,$=k.forward===O.forward,X=(O.increment?1:0)*($?-1:1);b.moveH(-X,"char"),k.inclusive=!!$;var ee=Lt(b,F,$,O.selectedCharacter);return ee?(ee.ch+=X,ee):(b.moveH(X,"char"),P)}};function rt(b,P){We[b]=P}function he(b,P){for(var k=[],O=0;O<P;O++)k.push(b);return k}var De={change:function(b,P,k){var O,F,$=b.state.vim,X=k[0].anchor,ee=k[0].head;if($.visualMode)if(P.fullLine)ee.ch=Number.MAX_VALUE,ee.line--,b.setSelection(X,ee),F=b.getSelection(),b.replaceSelection(""),O=X;else{F=b.getSelection();var Be=he("",k.length);b.replaceSelections(Be),O=cn(k[0].head,k[0].anchor)}else{F=b.getRange(X,ee);var te=$.lastEditInputState||{};if(te.motion=="moveByWords"&&!oe(F)){var ue=/\s+$/.exec(F);ue&&te.motionArgs&&te.motionArgs.forward&&(ee=nt(ee,0,-ue[0].length),F=F.slice(0,-ue[0].length))}var de=new R(X.line-1,Number.MAX_VALUE),Le=b.firstLine()==b.lastLine();ee.line>b.lastLine()&&P.linewise&&!Le?b.replaceRange("",de,ee):b.replaceRange("",X,ee),P.linewise&&(Le||(b.setCursor(de),x.commands.newlineAndIndent(b)),X.ch=Number.MAX_VALUE),O=X}me.registerController.pushText(P.registerName,"change",F,P.linewise,k.length>1),at.enterInsertMode(b,{head:O},b.state.vim)},delete:function(b,P,k){var O,F,$=b.state.vim;if($.visualBlock){F=b.getSelection();var te=he("",k.length);b.replaceSelections(te),O=k[0].anchor}else{var X=k[0].anchor,ee=k[0].head;P.linewise&&ee.line!=b.firstLine()&&X.line==b.lastLine()&&X.line==ee.line-1&&(X.line==b.firstLine()?X.ch=0:X=R(X.line-1,Sn(b,X.line-1))),F=b.getRange(X,ee),b.replaceRange("",X,ee),O=X,P.linewise&&(O=We.moveToFirstNonWhiteSpaceCharacter(b,X))}me.registerController.pushText(P.registerName,"delete",F,P.linewise,$.visualBlock);var ue=$.insertMode;return pe(b,O,ue)},indent:function(b,P,k){var O=b.state.vim,F=k[0].anchor.line,$=O.visualBlock?k[k.length-1].anchor.line:k[0].head.line,X=O.visualMode?P.repeat:1;P.linewise&&$--;for(var ee=F;ee<=$;ee++)for(var te=0;te<X;te++)b.indentLine(ee,P.indentRight);return We.moveToFirstNonWhiteSpaceCharacter(b,k[0].anchor)},indentAuto:function(b,P,k){return b.execCommand("indentAuto"),We.moveToFirstNonWhiteSpaceCharacter(b,k[0].anchor)},changeCase:function(b,P,k,O,F){for(var $=b.getSelections(),X=[],ee=P.toLower,te=0;te<$.length;te++){var ue=$[te],de="";if(ee===!0)de=ue.toLowerCase();else if(ee===!1)de=ue.toUpperCase();else for(var Le=0;Le<ue.length;Le++){var Be=ue.charAt(Le);de+=je(Be)?Be.toLowerCase():Be.toUpperCase()}X.push(de)}return b.replaceSelections(X),P.shouldMoveCursor?F:!b.state.vim.visualMode&&P.linewise&&k[0].anchor.line+1==k[0].head.line?We.moveToFirstNonWhiteSpaceCharacter(b,O):P.linewise?O:cn(k[0].anchor,k[0].head)},yank:function(b,P,k,O){var F=b.state.vim,$=b.getSelection(),X=F.visualMode?cn(F.sel.anchor,F.sel.head,k[0].head,k[0].anchor):O;return me.registerController.pushText(P.registerName,"yank",$,P.linewise,F.visualBlock),X}};function tt(b,P){De[b]=P}var at={jumpListWalk:function(b,P,k){if(!k.visualMode){var O=P.repeat,F=P.forward,$=me.jumpList,X=$.move(b,F?O:-O),ee=X?X.find():void 0;ee=ee||b.getCursor(),b.setCursor(ee),b.ace.curOp.command.scrollIntoView="center-animate"}},scroll:function(b,P,k){if(!k.visualMode){var O=P.repeat||1,F=b.defaultTextHeight(),$=b.getScrollInfo().top,X=F*O,ee=P.forward?$+X:$-X,te=Pt(b.getCursor()),ue=b.charCoords(te,"local");if(P.forward)ee>ue.top?(te.line+=(ee-ue.top)/F,te.line=Math.ceil(te.line),b.setCursor(te),ue=b.charCoords(te,"local"),b.scrollTo(null,ue.top)):b.scrollTo(null,ee);else{var de=ee+b.getScrollInfo().clientHeight;de<ue.bottom?(te.line-=(ue.bottom-de)/F,te.line=Math.floor(te.line),b.setCursor(te),ue=b.charCoords(te,"local"),b.scrollTo(null,ue.bottom-b.getScrollInfo().clientHeight)):b.scrollTo(null,ee)}}},scrollToCursor:function(b,P){var k=b.getCursor().line,O=b.charCoords(R(k,0),"local"),F=b.getScrollInfo().clientHeight,$=O.top,X=O.bottom-$;switch(P.position){case"center":$=$-F/2+X;break;case"bottom":$=$-F+X;break}b.scrollTo(null,$)},replayMacro:function(b,P,k){var O=P.selectedCharacter,F=P.repeat,$=me.macroModeState;for(O=="@"?O=$.latestRegister:$.latestRegister=O;F--;)Qm(b,k,$,O)},enterMacroRecordMode:function(b,P){var k=me.macroModeState,O=P.selectedCharacter;me.registerController.isValidRegister(O)&&k.enterMacroRecordMode(b,O)},toggleOverwrite:function(b){b.state.overwrite?(b.toggleOverwrite(!1),b.setOption("keyMap","vim-insert"),x.signal(b,"vim-mode-change",{mode:"insert"})):(b.toggleOverwrite(!0),b.setOption("keyMap","vim-replace"),x.signal(b,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(b,P,k){if(!b.getOption("readOnly")){k.insertMode=!0,k.insertModeRepeat=P&&P.repeat||1;var O=P?P.insertAt:null,F=k.sel,$=P.head||b.getCursor("head"),X=b.listSelections().length;if(O=="eol")$=R($.line,Sn(b,$.line));else if(O=="bol")$=R($.line,0);else if(O=="charAfter")$=nt($,0,1);else if(O=="firstNonBlank")$=We.moveToFirstNonWhiteSpaceCharacter(b,$);else if(O=="startOfSelectedArea"){if(!k.visualMode)return;k.visualBlock?($=R(Math.min(F.head.line,F.anchor.line),Math.min(F.head.ch,F.anchor.ch)),X=Math.abs(F.head.line-F.anchor.line)+1):F.head.line<F.anchor.line?$=F.head:$=R(F.anchor.line,0)}else if(O=="endOfSelectedArea"){if(!k.visualMode)return;k.visualBlock?($=R(Math.min(F.head.line,F.anchor.line),Math.max(F.head.ch+1,F.anchor.ch)),X=Math.abs(F.head.line-F.anchor.line)+1):F.head.line>=F.anchor.line?$=nt(F.head,0,1):$=R(F.anchor.line,0)}else if(O=="inplace"){if(k.visualMode)return}else O=="lastEdit"&&($=Gn(b)||$);b.setOption("disableInput",!1),P&&P.replace?(b.toggleOverwrite(!0),b.setOption("keyMap","vim-replace"),x.signal(b,"vim-mode-change",{mode:"replace"})):(b.toggleOverwrite(!1),b.setOption("keyMap","vim-insert"),x.signal(b,"vim-mode-change",{mode:"insert"})),me.macroModeState.isPlaying||(b.on("change",yl),x.on(b.getInputField(),"keydown",ca)),k.visualMode&&be(b),na(b,$,X)}},toggleVisualMode:function(b,P,k){var O=P.repeat,F=b.getCursor(),$;k.visualMode?k.visualLine^P.linewise||k.visualBlock^P.blockwise?(k.visualLine=!!P.linewise,k.visualBlock=!!P.blockwise,x.signal(b,"vim-mode-change",{mode:"visual",subMode:k.visualLine?"linewise":k.visualBlock?"blockwise":""}),we(b)):be(b):(k.visualMode=!0,k.visualLine=!!P.linewise,k.visualBlock=!!P.blockwise,$=pe(b,R(F.line,F.ch+O-1),!0),k.sel={anchor:F,head:$},x.signal(b,"vim-mode-change",{mode:"visual",subMode:k.visualLine?"linewise":k.visualBlock?"blockwise":""}),we(b),Bn(b,k,"<",cn(F,$)),Bn(b,k,">",Qn(F,$)))},reselectLastSelection:function(b,P,k){var O=k.lastSelection;if(k.visualMode&&dl(b,k),O){var F=O.anchorMark.find(),$=O.headMark.find();if(!F||!$)return;k.sel={anchor:F,head:$},k.visualMode=!0,k.visualLine=O.visualLine,k.visualBlock=O.visualBlock,we(b),Bn(b,k,"<",cn(F,$)),Bn(b,k,">",Qn(F,$)),x.signal(b,"vim-mode-change",{mode:"visual",subMode:k.visualLine?"linewise":k.visualBlock?"blockwise":""})}},joinLines:function(b,P,k){var O,F;if(k.visualMode){if(O=b.getCursor("anchor"),F=b.getCursor("head"),At(F,O)){var $=F;F=O,O=$}F.ch=Sn(b,F.line)-1}else{var X=Math.max(P.repeat,2);O=b.getCursor(),F=pe(b,R(O.line+X-1,1/0))}for(var ee=0,te=O.line;te<F.line;te++){ee=Sn(b,O.line);var $=R(O.line+1,Sn(b,O.line+1)),ue=b.getRange(O,$);ue=P.keepSpaces?ue.replace(/\n\r?/g,""):ue.replace(/\n\s*/g," "),b.replaceRange(ue,O,$)}var de=R(O.line,ee);k.visualMode&&be(b,!1),b.setCursor(de)},newLineAndEnterInsertMode:function(b,P,k){k.insertMode=!0;var O=Pt(b.getCursor());if(O.line===b.firstLine()&&!P.after)b.replaceRange(`
`,R(b.firstLine(),0)),b.setCursor(b.firstLine(),0);else{O.line=P.after?O.line:O.line-1,O.ch=Sn(b,O.line),b.setCursor(O);var F=x.commands.newlineAndIndentContinueComment||x.commands.newlineAndIndent;F(b)}this.enterInsertMode(b,{repeat:P.repeat},k)},paste:function(b,P,k){var O=Pt(b.getCursor()),F=me.registerController.getRegister(P.registerName),$=F.toString();if($){if(P.matchIndent){var X=b.getOption("tabSize"),ee=function(gn){var $i=gn.split("	").length-1,lo=gn.split(" ").length-1;return $i*X+lo*1},te=b.getLine(b.getCursor().line),ue=ee(te.match(/^\s*/)[0]),de=$.replace(/\n$/,""),Le=$!==de,Be=ee($.match(/^\s*/)[0]),$=de.replace(/^\s*/gm,function(gn){var $i=ue+(ee(gn)-Be);if($i<0)return"";if(b.getOption("indentWithTabs")){var lo=Math.floor($i/X);return Array(lo+1).join("	")}else return Array($i+1).join(" ")});$+=Le?`
`:""}if(P.repeat>1)var $=Array(P.repeat+1).join($);var Ie=F.linewise,it=F.blockwise;if(it){$=$.split(`
`),Ie&&$.pop();for(var mt=0;mt<$.length;mt++)$[mt]=$[mt]==""?" ":$[mt];O.ch+=P.after?1:0,O.ch=Math.min(Sn(b,O.line),O.ch)}else Ie?k.visualMode?$=k.visualLine?$.slice(0,-1):`
`+$.slice(0,$.length-1)+`
`:P.after?($=`
`+$.slice(0,$.length-1),O.ch=Sn(b,O.line)):O.ch=0:O.ch+=P.after?1:0;var qe,St;if(k.visualMode){k.lastPastedText=$;var kt,$t=Kc(b,k),un=$t[0],ai=$t[1],Mn=b.getSelection(),ei=b.listSelections(),Wt=new Array(ei.length).join("1").split("1");k.lastSelection&&(kt=k.lastSelection.headMark.find()),me.registerController.unnamedRegister.setText(Mn),it?(b.replaceSelections(Wt),ai=R(un.line+$.length-1,un.ch),b.setCursor(un),ta(b,ai),b.replaceSelections($),qe=un):k.visualBlock?(b.replaceSelections(Wt),b.setCursor(un),b.replaceRange($,un,un),qe=un):(b.replaceRange($,un,ai),qe=b.posFromIndex(b.indexFromPos(un)+$.length-1)),kt&&(k.lastSelection.headMark=b.setBookmark(kt)),Ie&&(qe.ch=0)}else if(it){b.setCursor(O);for(var mt=0;mt<$.length;mt++){var Dt=O.line+mt;Dt>b.lastLine()&&b.replaceRange(`
`,R(Dt,0));var Cn=Sn(b,Dt);Cn<O.ch&&ro(b,Dt,O.ch)}b.setCursor(O),ta(b,R(O.line+$.length-1,O.ch)),b.replaceSelections($),qe=O}else b.replaceRange($,O),Ie&&P.after?qe=R(O.line+1,wt(b.getLine(O.line+1))):Ie&&!P.after?qe=R(O.line,wt(b.getLine(O.line))):!Ie&&P.after?(St=b.indexFromPos(O),qe=b.posFromIndex(St+$.length-1)):(St=b.indexFromPos(O),qe=b.posFromIndex(St+$.length));k.visualMode&&be(b,!1),b.setCursor(qe)}},undo:function(b,P){b.operation(function(){Jt(b,x.commands.undo,P.repeat)(),b.setCursor(b.getCursor("anchor"))})},redo:function(b,P){Jt(b,x.commands.redo,P.repeat)()},setRegister:function(b,P,k){k.inputState.registerName=P.selectedCharacter},setMark:function(b,P,k){var O=P.selectedCharacter;Bn(b,k,O,b.getCursor())},replace:function(b,P,k){var O=P.selectedCharacter,F=b.getCursor(),$,X,ee=b.listSelections();if(k.visualMode)F=b.getCursor("start"),X=b.getCursor("end");else{var te=b.getLine(F.line);$=F.ch+P.repeat,$>te.length&&($=te.length),X=R(F.line,$)}if(O==`
`)k.visualMode||b.replaceRange("",F,X),(x.commands.newlineAndIndentContinueComment||x.commands.newlineAndIndent)(b);else{var ue=b.getRange(F,X);if(ue=ue.replace(/[^\n]/g,O),k.visualBlock){var de=new Array(b.getOption("tabSize")+1).join(" ");ue=b.getSelection(),ue=ue.replace(/\t/g,de).replace(/[^\n]/g,O).split(`
`),b.replaceSelections(ue)}else b.replaceRange(ue,F,X);k.visualMode?(F=At(ee[0].anchor,ee[0].head)?ee[0].anchor:ee[0].head,b.setCursor(F),be(b,!1)):b.setCursor(nt(X,0,-1))}},incrementNumberToken:function(b,P){for(var k=b.getCursor(),O=b.getLine(k.line),F=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,$,X,ee,te;($=F.exec(O))!==null&&(X=$.index,ee=X+$[0].length,!(k.ch<ee)););if(!(!P.backtrack&&ee<=k.ch)){if($){var ue=$[2]||$[4],de=$[3]||$[5],Le=P.increase?1:-1,Be={"0b":2,0:8,"":10,"0x":16}[ue.toLowerCase()],Ie=parseInt($[1]+de,Be)+Le*P.repeat;te=Ie.toString(Be);var it=ue?new Array(de.length-te.length+1+$[1].length).join("0"):"";te.charAt(0)==="-"?te="-"+ue+it+te.substr(1):te=ue+it+te;var mt=R(k.line,X),qe=R(k.line,ee);b.replaceRange(te,mt,qe)}else return;b.setCursor(R(k.line,X+te.length-1))}},repeatLastEdit:function(b,P,k){var O=k.lastEditInputState;if(O){var F=P.repeat;F&&P.repeatIsExplicit?k.lastEditInputState.repeatOverride=F:F=k.lastEditInputState.repeatOverride||F,ff(b,k,F,!1)}},indent:function(b,P){b.indentLine(b.getCursor().line,P.indentRight)},exitInsertMode:ps};function Ke(b,P){at[b]=P}function pe(b,P,k){var O=Math.min(Math.max(b.firstLine(),P.line),b.lastLine()),F=Sn(b,O)-1;F=k?F+1:F;var $=Math.min(Math.max(0,P.ch),F);return R(O,$)}function lt(b){var P={};for(var k in b)b.hasOwnProperty(k)&&(P[k]=b[k]);return P}function nt(b,P,k){return typeof P=="object"&&(k=P.ch,P=P.line),R(b.line+P,b.ch+k)}function Tt(b,P,k,O){for(var F,$=[],X=[],ee=0;ee<P.length;ee++){var te=P[ee];k=="insert"&&te.context!="insert"||te.context&&te.context!=k||O.operator&&te.type=="action"||!(F=_t(b,te.keys))||(F=="partial"&&$.push(te),F=="full"&&X.push(te))}return{partial:$.length&&$,full:X.length&&X}}function _t(b,P){if(P.slice(-11)=="<character>"){var k=P.length-11,O=b.slice(0,k),F=P.slice(0,k);return O==F&&b.length>k?"full":F.indexOf(O)==0?"partial":!1}else return b==P?"full":P.indexOf(b)==0?"partial":!1}function Xt(b){var P=/^.*(<[^>]+>)$/.exec(b),k=P?P[1]:b.slice(-1);if(k.length>1)switch(k){case"<CR>":k=`
`;break;case"<Space>":k=" ";break;default:k="";break}return k}function Jt(b,P,k){return function(){for(var O=0;O<k;O++)P(b)}}function Pt(b){return R(b.line,b.ch)}function tn(b,P){return b.ch==P.ch&&b.line==P.line}function At(b,P){return b.line<P.line||b.line==P.line&&b.ch<P.ch}function cn(b,P){return arguments.length>2&&(P=cn.apply(void 0,Array.prototype.slice.call(arguments,1))),At(b,P)?b:P}function Qn(b,P){return arguments.length>2&&(P=Qn.apply(void 0,Array.prototype.slice.call(arguments,1))),At(b,P)?P:b}function io(b,P,k){var O=At(b,P),F=At(P,k);return O&&F}function Sn(b,P){return b.getLine(P).length}function fs(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")}function ds(b){return b.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function ro(b,P,k){var O=Sn(b,P),F=new Array(k-O+1).join(" ");b.setCursor(R(P,O)),b.replaceRange(F,b.getCursor())}function ta(b,P){var k=[],O=b.listSelections(),F=Pt(b.clipPos(P)),$=!tn(P,F),X=b.getCursor("head"),ee=jc(O,X),te=tn(O[ee].head,O[ee].anchor),ue=O.length-1,de=ue-ee>ee?ue:0,Le=O[de].anchor,Be=Math.min(Le.line,F.line),Ie=Math.max(Le.line,F.line),it=Le.ch,mt=F.ch,qe=O[de].head.ch-it,St=mt-it;qe>0&&St<=0?(it++,$||mt--):qe<0&&St>=0?(it--,te||mt++):qe<0&&St==-1&&(it--,mt++);for(var kt=Be;kt<=Ie;kt++){var $t={anchor:new R(kt,it),head:new R(kt,mt)};k.push($t)}return b.setSelections(k),P.ch=mt,Le.ch=it,Le}function na(b,P,k){for(var O=[],F=0;F<k;F++){var $=nt(P,F,0);O.push({anchor:$,head:$})}b.setSelections(O,0)}function jc(b,P,k){for(var O=0;O<b.length;O++){var F=k!="head"&&tn(b[O].anchor,P),$=k!="anchor"&&tn(b[O].head,P);if(F||$)return O}return-1}function Kc(b,P){var k=P.lastSelection,O=function(){var $=b.listSelections(),X=$[0],ee=$[$.length-1],te=At(X.anchor,X.head)?X.anchor:X.head,ue=At(ee.anchor,ee.head)?ee.head:ee.anchor;return[te,ue]},F=function(){var $=b.getCursor(),X=b.getCursor(),ee=k.visualBlock;if(ee){var te=ee.width,ue=ee.height;X=R($.line+ue,$.ch+te);for(var de=[],Le=$.line;Le<X.line;Le++){var Be=R(Le,$.ch),Ie=R(Le,X.ch),it={anchor:Be,head:Ie};de.push(it)}b.setSelections(de)}else{var mt=k.anchorMark.find(),qe=k.headMark.find(),St=qe.line-mt.line,kt=qe.ch-mt.ch;X={line:X.line+St,ch:St?X.ch:kt+X.ch},k.visualLine&&($=R($.line,0),X=R(X.line,Sn(b,X.line))),b.setSelection($,X)}return[$,X]};return P.visualMode?O():F()}function dl(b,P){var k=P.sel.anchor,O=P.sel.head;P.lastPastedText&&(O=b.posFromIndex(b.indexFromPos(k)+P.lastPastedText.length),P.lastPastedText=null),P.lastSelection={anchorMark:b.setBookmark(k),headMark:b.setBookmark(O),anchor:Pt(k),head:Pt(O),visualMode:P.visualMode,visualLine:P.visualLine,visualBlock:P.visualBlock}}function ie(b,P,k){var O=b.state.vim.sel,F=O.head,$=O.anchor,X;return At(k,P)&&(X=k,k=P,P=X),At(F,$)?(F=cn(P,F),$=Qn($,k)):($=cn(P,$),F=Qn(F,k),F=nt(F,0,-1),F.ch==-1&&F.line!=b.firstLine()&&(F=R(F.line-1,Sn(b,F.line-1)))),[$,F]}function we(b,P,F){var O=b.state.vim;P=P||O.sel;var F=F||O.visualLine?"line":O.visualBlock?"block":"char",$=Pe(b,P,F);b.setSelections($.ranges,$.primary),hf(b)}function Pe(b,P,k,O){var F=Pt(P.head),$=Pt(P.anchor);if(k=="char"){var X=!O&&!At(P.head,P.anchor)?1:0,ee=At(P.head,P.anchor)?1:0;return F=nt(P.head,0,X),$=nt(P.anchor,0,ee),{ranges:[{anchor:$,head:F}],primary:0}}else if(k=="line"){if(At(P.head,P.anchor))F.ch=0,$.ch=Sn(b,$.line);else{$.ch=0;var te=b.lastLine();F.line>te&&(F.line=te),F.ch=Sn(b,F.line)}return{ranges:[{anchor:$,head:F}],primary:0}}else if(k=="block"){for(var ue=Math.min($.line,F.line),de=Math.min($.ch,F.ch),Le=Math.max($.line,F.line),Be=Math.max($.ch,F.ch)+1,Ie=Le-ue+1,it=F.line==ue?0:Ie-1,mt=[],qe=0;qe<Ie;qe++)mt.push({anchor:R(ue+qe,de),head:R(ue+qe,Be)});return{ranges:mt,primary:it}}}function Oe(b){var P=b.getCursor("head");return b.getSelection().length==1&&(P=cn(P,b.getCursor("anchor"))),P}function be(b,P){var k=b.state.vim;P!==!1&&b.setCursor(pe(b,k.sel.head)),dl(b,k),k.visualMode=!1,k.visualLine=!1,k.visualBlock=!1,x.signal(b,"vim-mode-change",{mode:"normal"}),k.fakeCursor&&k.fakeCursor.clear()}function pt(b,P,k){var O=b.getRange(P,k);if(/\n\s*$/.test(O)){var F=O.split(`
`);F.pop();for(var $,$=F.pop();F.length>0&&$&&oe($);$=F.pop())k.line--,k.ch=0;$?(k.line--,k.ch=Sn(b,k.line)):k.ch=0}}function Ct(b,P,k){P.ch=0,k.ch=0,k.line++}function wt(b){if(!b)return 0;var P=b.search(/\S/);return P==-1?b.length:P}function Rt(b,P,k,O,F){for(var $=Oe(b),X=b.getLine($.line),ee=$.ch,te=F?K[0]:Y[0];!te(X.charAt(ee));)if(ee++,ee>=X.length)return null;O?te=Y[0]:(te=K[0],te(X.charAt(ee))||(te=K[1]));for(var ue=ee,de=ee;te(X.charAt(ue))&&ue<X.length;)ue++;for(;te(X.charAt(de))&&de>=0;)de--;if(de++,P){for(var Le=ue;/\s/.test(X.charAt(ue))&&ue<X.length;)ue++;if(Le==ue){for(var Be=de;/\s/.test(X.charAt(de-1))&&de>0;)de--;de||(de=Be)}}return{start:R($.line,de),end:R($.line,ue)}}function Ft(b,P,k){tn(P,k)||me.jumpList.add(b,P,k)}function Ot(b,P){me.lastCharacterSearch.increment=b,me.lastCharacterSearch.forward=P.forward,me.lastCharacterSearch.selectedCharacter=P.selectedCharacter}var Ut={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},yn={bracket:{isComplete:function(b){if(b.nextCh===b.symb){if(b.depth++,b.depth>=1)return!0}else b.nextCh===b.reverseSymb&&b.depth--;return!1}},section:{init:function(b){b.curMoveThrough=!0,b.symb=(b.forward?"]":"[")===b.symb?"{":"}"},isComplete:function(b){return b.index===0&&b.nextCh===b.symb}},comment:{isComplete:function(b){var P=b.lastCh==="*"&&b.nextCh==="/";return b.lastCh=b.nextCh,P}},method:{init:function(b){b.symb=b.symb==="m"?"{":"}",b.reverseSymb=b.symb==="{"?"}":"{"},isComplete:function(b){return b.nextCh===b.symb}},preprocess:{init:function(b){b.index=0},isComplete:function(b){if(b.nextCh==="#"){var P=b.lineText.match(/#(\w+)/)[1];if(P==="endif"){if(b.forward&&b.depth===0)return!0;b.depth++}else if(P==="if"){if(!b.forward&&b.depth===0)return!0;b.depth--}if(P==="else"&&b.depth===0)return!0}return!1}}};function si(b,P,k,O){var F=Pt(b.getCursor()),$=k?1:-1,X=k?b.lineCount():-1,ee=F.ch,te=F.line,ue=b.getLine(te),de={lineText:ue,nextCh:ue.charAt(ee),lastCh:null,index:ee,symb:O,reverseSymb:(k?{")":"(","}":"{"}:{"(":")","{":"}"})[O],forward:k,depth:0,curMoveThrough:!1},Le=Ut[O];if(!Le)return F;var Be=yn[Le].init,Ie=yn[Le].isComplete;for(Be&&Be(de);te!==X&&P;){if(de.index+=$,de.nextCh=de.lineText.charAt(de.index),!de.nextCh){if(te+=$,de.lineText=b.getLine(te)||"",$>0)de.index=0;else{var it=de.lineText.length;de.index=it>0?it-1:0}de.nextCh=de.lineText.charAt(de.index)}Ie(de)&&(F.line=te,F.ch=de.index,P--)}return de.nextCh||de.curMoveThrough?R(te,de.index):F}function mn(b,P,k,O,F){var $=P.line,X=P.ch,ee=b.getLine($),te=k?1:-1,ue=O?Y:K;if(F&&ee==""){if($+=te,ee=b.getLine($),!ye(b,$))return null;X=k?0:ee.length}for(;;){if(F&&ee=="")return{from:0,to:0,line:$};for(var de=te>0?ee.length:-1,Le=de,Be=de;X!=de;){for(var Ie=!1,it=0;it<ue.length&&!Ie;++it)if(ue[it](ee.charAt(X))){for(Le=X;X!=de&&ue[it](ee.charAt(X));)X+=te;if(Be=X,Ie=Le!=Be,Le==P.ch&&$==P.line&&Be==Le+te)continue;return{from:Math.min(Le,Be+1),to:Math.max(Le,Be),line:$}}Ie||(X+=te)}if($+=te,!ye(b,$))return null;ee=b.getLine($),X=te>0?0:ee.length}}function Jn(b,P,k,O,F,$){var X=Pt(P),ee=[];(O&&!F||!O&&F)&&k++;for(var te=!(O&&F),ue=0;ue<k;ue++){var de=mn(b,P,O,$,te);if(!de){var Le=Sn(b,b.lastLine());ee.push(O?{line:b.lastLine(),from:Le,to:Le}:{line:0,from:0,to:0});break}ee.push(de),P=R(de.line,O?de.to-1:de.from)}var Be=ee.length!=k,Ie=ee[0],it=ee.pop();return O&&!F?(!Be&&(Ie.from!=X.ch||Ie.line!=X.line)&&(it=ee.pop()),R(it.line,it.from)):O&&F?R(it.line,it.to-1):!O&&F?(!Be&&(Ie.to!=X.ch||Ie.line!=X.line)&&(it=ee.pop()),R(it.line,it.to)):R(it.line,it.from)}function Lt(b,P,k,O){for(var F=b.getCursor(),$=F.ch,X,ee=0;ee<P;ee++){var te=b.getLine(F.line);if(X=Vt($,te,O,k,!0),X==-1)return null;$=X}return R(b.getCursor().line,X)}function vt(b,P){var k=b.getCursor().line;return pe(b,R(k,P-1))}function Bn(b,P,k,O){Te(k,fe)&&(P.marks[k]&&P.marks[k].clear(),P.marks[k]=b.setBookmark(O))}function Vt(b,P,k,O,F){var $;return O?($=P.indexOf(k,b+1),$!=-1&&!F&&($-=1)):($=P.lastIndexOf(k,b-1),$!=-1&&!F&&($+=1)),$}function wn(b,P,k,O,F){var $=P.line,X=b.firstLine(),ee=b.lastLine(),te,ue,de=$;function Le(St){return!/\S/.test(b.getLine(St))}function Be(St,kt,$t){return $t?Le(St)!=Le(St+kt):!Le(St)&&Le(St+kt)}function Ie(St){O=O>0?1:-1;var kt=b.ace.session.getFoldLine(St);kt&&St+O>kt.start.row&&St+O<kt.end.row&&(O=(O>0?kt.end.row:kt.start.row)-St)}if(O){for(;X<=de&&de<=ee&&k>0;)Ie(de),Be(de,O)&&k--,de+=O;return new R(de,0)}var it=b.state.vim;if(it.visualLine&&Be($,1,!0)){var mt=it.sel.anchor;Be(mt.line,-1,!0)&&(!F||mt.line!=$)&&($+=1)}var qe=Le($);for(de=$;de<=ee&&k;de++)Be(de,1,!0)&&(!F||Le(de)!=qe)&&k--;for(ue=new R(de,0),de>ee&&!qe?qe=!0:F=!1,de=$;de>X&&!((!F||Le(de)==qe||de==$)&&Be(de,-1,!0));de--);return te=new R(de,0),{start:te,end:ue}}function kr(b,P,k,O){function F(te,ue){if(ue.pos+ue.dir<0||ue.pos+ue.dir>=ue.line.length){if(ue.ln+=ue.dir,!ye(te,ue.ln)){ue.line=null,ue.ln=null,ue.pos=null;return}ue.line=te.getLine(ue.ln),ue.pos=ue.dir>0?0:ue.line.length-1}else ue.pos+=ue.dir}function $(te,ue,de,Le){var qe=te.getLine(ue),Be=qe==="",Ie={line:qe,ln:ue,pos:de,dir:Le},it={ln:Ie.ln,pos:Ie.pos},mt=Ie.line==="";for(F(te,Ie);Ie.line!==null;){if(it.ln=Ie.ln,it.pos=Ie.pos,Ie.line===""&&!mt)return{ln:Ie.ln,pos:Ie.pos};if(Be&&Ie.line!==""&&!oe(Ie.line[Ie.pos]))return{ln:Ie.ln,pos:Ie.pos};Ve(Ie.line[Ie.pos])&&!Be&&(Ie.pos===Ie.line.length-1||oe(Ie.line[Ie.pos+1]))&&(Be=!0),F(te,Ie)}var qe=te.getLine(it.ln);it.pos=0;for(var St=qe.length-1;St>=0;--St)if(!oe(qe[St])){it.pos=St;break}return it}function X(te,ue,de,Le){var mt=te.getLine(ue),Be={line:mt,ln:ue,pos:de,dir:Le},Ie={ln:Be.ln,pos:null},it=Be.line==="";for(F(te,Be);Be.line!==null;){if(Be.line===""&&!it)return Ie.pos!==null?Ie:{ln:Be.ln,pos:Be.pos};if(Ve(Be.line[Be.pos])&&Ie.pos!==null&&!(Be.ln===Ie.ln&&Be.pos+1===Ie.pos))return Ie;Be.line!==""&&!oe(Be.line[Be.pos])&&(it=!1,Ie={ln:Be.ln,pos:Be.pos}),F(te,Be)}var mt=te.getLine(Ie.ln);Ie.pos=0;for(var qe=0;qe<mt.length;++qe)if(!oe(mt[qe])){Ie.pos=qe;break}return Ie}for(var ee={ln:P.line,pos:P.ch};k>0;)O<0?ee=X(b,ee.ln,ee.pos,O):ee=$(b,ee.ln,ee.pos,O),k--;return R(ee.ln,ee.pos)}function qi(b,P,k,O){var F=P,$,X,ee={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[k],te={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[k],ue=b.getLine(F.line).charAt(F.ch),de=ue===te?1:0;if($=b.scanForBracket(R(F.line,F.ch+de),-1,void 0,{bracketRegex:ee}),X=b.scanForBracket(R(F.line,F.ch+de),1,void 0,{bracketRegex:ee}),!$||!X)return{start:F,end:F};if($=$.pos,X=X.pos,$.line==X.line&&$.ch>X.ch||$.line>X.line){var Le=$;$=X,X=Le}return O?X.ch+=1:$.ch+=1,{start:$,end:X}}function qn(b,P,k,O){var F=Pt(P),$=b.getLine(F.line),X=$.split(""),ee,te,ue,de,Le=X.indexOf(k);if(F.ch<Le?F.ch=Le:Le<F.ch&&X[F.ch]==k&&(te=F.ch,--F.ch),X[F.ch]==k&&!te)ee=F.ch+1;else for(ue=F.ch;ue>-1&&!ee;ue--)X[ue]==k&&(ee=ue+1);if(ee&&!te)for(ue=ee,de=X.length;ue<de&&!te;ue++)X[ue]==k&&(te=ue);return!ee||!te?{start:F,end:F}:(O&&(--ee,++te),{start:R(F.line,ee),end:R(F.line,te)})}Ne("pcre",!0,"boolean");function Tn(){}Tn.prototype={getQuery:function(){return me.query},setQuery:function(b){me.query=b},getOverlay:function(){return this.searchOverlay},setOverlay:function(b){this.searchOverlay=b},isReversed:function(){return me.isReversed},setReversed:function(b){me.isReversed=b},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(b){this.annotate=b}};function Vn(b){var P=b.state.vim;return P.searchState_||(P.searchState_=new Tn)}function so(b,P,k,O,F){b.openDialog?b.openDialog(P,O,{bottom:!0,value:F.value,onKeyDown:F.onKeyDown,onKeyUp:F.onKeyUp,selectValueOnOpen:!1,onClose:function(){b.state.vim&&(b.state.vim.status="",b.ace.renderer.$loop.schedule(b.ace.renderer.CHANGE_CURSOR))}}):O(prompt(k,""))}function oi(b){return Ei(b,"/")}function oo(b){return ia(b,"/")}function Ei(b,P){var k=ia(b,P)||[];if(!k.length)return[];var O=[];if(k[0]===0){for(var F=0;F<k.length;F++)typeof k[F]=="number"&&O.push(b.substring(k[F]+1,k[F+1]));return O}}function ia(b,P){P||(P="/");for(var k=!1,O=[],F=0;F<b.length;F++){var $=b.charAt(F);!k&&$==P&&O.push(F),k=!k&&$=="\\"}return O}function Km(b){for(var P="|(){",k="}",O=!1,F=[],$=-1;$<b.length;$++){var X=b.charAt($)||"",ee=b.charAt($+1)||"",te=ee&&P.indexOf(ee)!=-1;O?((X!=="\\"||!te)&&F.push(X),O=!1):X==="\\"?(O=!0,ee&&k.indexOf(ee)!=-1&&(te=!0),(!te||ee==="\\")&&F.push(X)):(F.push(X),te&&ee!=="\\"&&F.push("\\"))}return F.join("")}var af={"\\n":`
`,"\\r":"\r","\\t":"	"};function pl(b){for(var P=!1,k=[],O=-1;O<b.length;O++){var F=b.charAt(O)||"",$=b.charAt(O+1)||"";af[F+$]?(k.push(af[F+$]),O++):P?(k.push(F),P=!1):F==="\\"?(P=!0,Ae($)||$==="$"?k.push("$"):$!=="/"&&$!=="\\"&&k.push("\\")):(F==="$"&&k.push("$"),k.push(F),$==="/"&&k.push("\\"))}return k.join("")}var ra={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	"};function sa(b){for(var P=new x.StringStream(b),k=[];!P.eol();){for(;P.peek()&&P.peek()!="\\";)k.push(P.next());var O=!1;for(var F in ra)if(P.match(F,!0)){O=!0,k.push(ra[F]);break}O||k.push(P.next())}return k.join("")}function ml(b,P,k){var O=me.registerController.getRegister("/");if(O.setText(b),b instanceof RegExp)return b;var F=oo(b),$,X;if(!F.length)$=b;else{$=b.substring(0,F[0]);var ee=b.substring(F[0]);X=ee.indexOf("i")!=-1}if(!$)return null;Ze("pcre")||($=Km($)),k&&(P=/^[^A-Z]*$/.test($));var te=new RegExp($,P||X?"i":void 0);return te}function pn(b,P){b.openNotification?b.openNotification('<span style="color: red">'+P+"</span>",{bottom:!0,duration:5e3}):alert(P)}function Xm(b,P){var k='<span style="font-family: monospace; white-space: pre">'+(b||"")+'<input type="text" autocorrect="off" autocapitalize="none" autocomplete="off"></span>';return P&&(k+=' <span style="color: #888">'+P+"</span>"),k}var Xc="(Javascript regexp)";function ao(b,P){var k=(P.prefix||"")+" "+(P.desc||""),O=Xm(P.prefix,P.desc);so(b,O,k,P.onClose,P)}function oa(b,P){if(b instanceof RegExp&&P instanceof RegExp){for(var k=["global","multiline","ignoreCase","source"],O=0;O<k.length;O++){var F=k[O];if(b[F]!==P[F])return!1}return!0}return!1}function aa(b,P,k,O){if(P){var F=Vn(b),$=ml(P,!!k,!!O);if($)return en(b,$),oa($,F.getQuery())||F.setQuery($),$}}function Yc(b){if(b.source.charAt(0)=="^")var P=!0;return{token:function(k){if(P&&!k.sol()){k.skipToEnd();return}var O=k.match(b,!1);if(O)return O[0].length==0?(k.next(),"searching"):!k.sol()&&(k.backUp(1),!b.exec(k.next()+O[0]))?(k.next(),null):(k.match(b),"searching");for(;!k.eol()&&(k.next(),!k.match(b,!1)););},query:b}}function en(b,P){var k=Vn(b),O=k.getOverlay();(!O||P!=O.query)&&(O&&b.removeOverlay(O),O=Yc(P),b.addOverlay(O),b.showMatchesOnScrollbar&&(k.getScrollbarAnnotate()&&k.getScrollbarAnnotate().clear(),k.setScrollbarAnnotate(b.showMatchesOnScrollbar(P))),k.setOverlay(O))}function Zc(b,P,k,O){return O===void 0&&(O=1),b.operation(function(){for(var F=b.getCursor(),$=b.getSearchCursor(k,F),X=0;X<O;X++){var ee=$.find(P);if(X==0&&ee&&tn($.from(),F)&&(ee=$.find(P)),!ee&&($=b.getSearchCursor(k,P?R(b.lastLine()):R(b.firstLine(),0)),!$.find(P)))return}return $.from()})}function la(b){var P=Vn(b);b.removeOverlay(Vn(b).getOverlay()),P.setOverlay(null),P.getScrollbarAnnotate()&&(P.getScrollbarAnnotate().clear(),P.setScrollbarAnnotate(null))}function lf(b,P,k){return typeof b!="number"&&(b=b.line),P instanceof Array?Te(b,P):k?b>=P&&b<=k:b==P}function Qc(b){var P=b.ace.renderer;return{top:P.getFirstFullyVisibleRow(),bottom:P.getLastFullyVisibleRow()}}function cf(b,P,k){if(k=="'"||k=="`")return me.jumpList.find(b,-1)||R(0,0);if(k==".")return Gn(b);var O=P.marks[k];return O&&O.find()}function Gn(b){var P=b.ace.session.$undoManager;if(P&&P.$lastDelta)return w(P.$lastDelta.end)}var gl=function(){this.buildCommandMap_()};gl.prototype={processCommand:function(b,P,k){var O=this;b.operation(function(){b.curOp.isVimOp=!0,O._processCommand(b,P,k)})},_processCommand:function(b,P,k){var O=b.state.vim,F=me.registerController.getRegister(":"),$=F.toString();O.visualMode&&be(b);var X=new x.StringStream(P);F.setText(P);var ee=k||{};ee.input=P;try{this.parseInput_(b,X,ee)}catch(Le){throw pn(b,Le),Le}var te,ue;if(!ee.commandName)ee.line!==void 0&&(ue="move");else if(te=this.matchCommand_(ee.commandName),te){if(ue=te.name,te.excludeFromCommandHistory&&F.setText($),this.parseCommandArgs_(X,ee,te),te.type=="exToKey"){for(var de=0;de<te.toKeys.length;de++)x.Vim.handleKey(b,te.toKeys[de],"mapping");return}else if(te.type=="exToEx"){this.processCommand(b,te.toInput);return}}if(!ue){pn(b,'Not an editor command ":'+P+'"');return}try{uf[ue](b,ee),(!te||!te.possiblyAsync)&&ee.callback&&ee.callback()}catch(Le){throw pn(b,Le),Le}},parseInput_:function(b,P,k){P.eatWhile(":"),P.eat("%")?(k.line=b.firstLine(),k.lineEnd=b.lastLine()):(k.line=this.parseLineSpec_(b,P),k.line!==void 0&&P.eat(",")&&(k.lineEnd=this.parseLineSpec_(b,P)));var O=P.match(/^(\w+)/);return O?k.commandName=O[1]:k.commandName=P.match(/.*/)[0],k},parseLineSpec_:function(b,P){var k=P.match(/^(\d+)/);if(k)return parseInt(k[1],10)-1;switch(P.next()){case".":return this.parseLineSpecOffset_(P,b.getCursor().line);case"$":return this.parseLineSpecOffset_(P,b.lastLine());case"'":var O=P.next(),F=cf(b,b.state.vim,O);if(!F)throw new Error("Mark not set");return this.parseLineSpecOffset_(P,F.line);case"-":case"+":return P.backUp(1),this.parseLineSpecOffset_(P,b.getCursor().line);default:P.backUp(1);return}},parseLineSpecOffset_:function(b,P){var k=b.match(/^([+-])?(\d+)/);if(k){var O=parseInt(k[2],10);k[1]=="-"?P-=O:P+=O}return P},parseCommandArgs_:function(b,P,k){if(!b.eol()){P.argString=b.match(/.*/)[0];var O=k.argDelimiter||/\s+/,F=fs(P.argString).split(O);F.length&&F[0]&&(P.args=F)}},matchCommand_:function(b){for(var P=b.length;P>0;P--){var k=b.substring(0,P);if(this.commandMap_[k]){var O=this.commandMap_[k];if(O.name.indexOf(b)===0)return O}}return null},buildCommandMap_:function(){this.commandMap_={};for(var b=0;b<E.length;b++){var P=E[b],k=P.shortName||P.name;this.commandMap_[k]=P}},map:function(b,P,k){if(b!=":"&&b.charAt(0)==":"){if(k)throw Error("Mode not supported for ex mappings");var O=b.substring(1);P!=":"&&P.charAt(0)==":"?this.commandMap_[O]={name:O,type:"exToEx",toInput:P.substring(1),user:!0}:this.commandMap_[O]={name:O,type:"exToKey",toKeys:P,user:!0}}else if(P!=":"&&P.charAt(0)==":"){var F={keys:b,type:"keyToEx",exArgs:{input:P.substring(1)}};k&&(F.context=k),M.unshift(F)}else{var F={keys:b,type:"keyToKey",toKeys:P};k&&(F.context=k),M.unshift(F)}},unmap:function(b,P){if(b!=":"&&b.charAt(0)==":"){if(P)throw Error("Mode not supported for ex mappings");var k=b.substring(1);if(this.commandMap_[k]&&this.commandMap_[k].user){delete this.commandMap_[k];return}}else for(var O=b,F=0;F<M.length;F++)if(O==M[F].keys&&M[F].context===P){M.splice(F,1);return}}};var uf={colorscheme:function(b,P){if(!P.args||P.args.length<1){pn(b,b.getOption("theme"));return}b.setOption("theme",P.args[0])},map:function(b,P,k){var O=P.args;if(!O||O.length<2){b&&pn(b,"Invalid mapping: "+P.input);return}er.map(O[0],O[1],k)},imap:function(b,P){this.map(b,P,"insert")},nmap:function(b,P){this.map(b,P,"normal")},vmap:function(b,P){this.map(b,P,"visual")},unmap:function(b,P,k){var O=P.args;if(!O||O.length<1){b&&pn(b,"No such mapping: "+P.input);return}er.unmap(O[0],k)},move:function(b,P){Ue.processCommand(b,b.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:P.line+1})},set:function(b,P){var k=P.args,O=P.setCfg||{};if(!k||k.length<1){b&&pn(b,"Invalid mapping: "+P.input);return}var F=k[0].split("="),$=F[0],X=F[1],ee=!1;if($.charAt($.length-1)=="?"){if(X)throw Error("Trailing characters: "+P.argString);$=$.substring(0,$.length-1),ee=!0}X===void 0&&$.substring(0,2)=="no"&&($=$.substring(2),X=!1);var te=$e[$]&&$e[$].type=="boolean";if(te&&X==null&&(X=!0),!te&&X===void 0||ee){var ue=Ze($,b,O);ue instanceof Error?pn(b,ue.message):ue===!0||ue===!1?pn(b," "+(ue?"":"no")+$):pn(b,"  "+$+"="+ue)}else{var de=ht($,X,b,O);de instanceof Error&&pn(b,de.message)}},setlocal:function(b,P){P.setCfg={scope:"local"},this.set(b,P)},setglobal:function(b,P){P.setCfg={scope:"global"},this.set(b,P)},registers:function(b,P){var k=P.args,O=me.registerController.registers,F="----------Registers----------<br><br>";if(k){var $;k=k.join("");for(var ee=0;ee<k.length;ee++)if($=k.charAt(ee),!!me.registerController.isValidRegister($)){var te=O[$]||new Me;F+='"'+$+"    "+te.toString()+"<br>"}}else for(var $ in O){var X=O[$].toString();X.length&&(F+='"'+$+"    "+X+"<br>")}pn(b,F)},sort:function(b,P){var k,O,F,$,X;function ee(){if(P.argString){var Wt=new x.StringStream(P.argString);if(Wt.eat("!")&&(k=!0),Wt.eol())return;if(!Wt.eatSpace())return"Invalid arguments";var Dt=Wt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Dt&&!Wt.eol())return"Invalid arguments";if(Dt[1]){O=Dt[1].indexOf("i")!=-1,F=Dt[1].indexOf("u")!=-1;var Cn=Dt[1].indexOf("d")!=-1||Dt[1].indexOf("n")!=-1&&1,Rn=Dt[1].indexOf("x")!=-1&&1,gn=Dt[1].indexOf("o")!=-1&&1;if(Cn+Rn+gn>1)return"Invalid arguments";$=Cn&&"decimal"||Rn&&"hex"||gn&&"octal"}Dt[2]&&(X=new RegExp(Dt[2].substr(1,Dt[2].length-2),O?"i":""))}}var te=ee();if(te){pn(b,te+": "+P.argString);return}var ue=P.line||b.firstLine(),de=P.lineEnd||P.line||b.lastLine();if(ue==de)return;var Le=R(ue,0),Be=R(de,Sn(b,de)),Ie=b.getRange(Le,Be).split(`
`),it=X||($=="decimal"?/(-?)([\d]+)/:$=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:$=="octal"?/([0-7]+)/:null),mt=$=="decimal"?10:$=="hex"?16:$=="octal"?8:null,qe=[],St=[];if($||X)for(var kt=0;kt<Ie.length;kt++){var $t=X?Ie[kt].match(X):null;$t&&$t[0]!=""?qe.push($t):!X&&it.exec(Ie[kt])?qe.push(Ie[kt]):St.push(Ie[kt])}else St=Ie;function un(Wt,Dt){if(k){var Cn;Cn=Wt,Wt=Dt,Dt=Cn}O&&(Wt=Wt.toLowerCase(),Dt=Dt.toLowerCase());var Rn=$&&it.exec(Wt),gn=$&&it.exec(Dt);return Rn?(Rn=parseInt((Rn[1]+Rn[2]).toLowerCase(),mt),gn=parseInt((gn[1]+gn[2]).toLowerCase(),mt),Rn-gn):Wt<Dt?-1:1}function ai(Wt,Dt){if(k){var Cn;Cn=Wt,Wt=Dt,Dt=Cn}return O&&(Wt[0]=Wt[0].toLowerCase(),Dt[0]=Dt[0].toLowerCase()),Wt[0]<Dt[0]?-1:1}if(qe.sort(X?ai:un),X)for(var kt=0;kt<qe.length;kt++)qe[kt]=qe[kt].input;else $||St.sort(un);if(Ie=k?qe.concat(St):St.concat(qe),F){var Mn=Ie,ei;Ie=[];for(var kt=0;kt<Mn.length;kt++)Mn[kt]!=ei&&Ie.push(Mn[kt]),ei=Mn[kt]}b.replaceRange(Ie.join(`
`),Le,Be)},global:function(b,P){var k=P.argString;if(!k){pn(b,"Regular Expression missing from global");return}var O=P.line!==void 0?P.line:b.firstLine(),F=P.lineEnd||P.line||b.lastLine(),$=oi(k),X=k,ee;if($.length&&(X=$[0],ee=$.slice(1,$.length).join("/")),X)try{aa(b,X,!0,!0)}catch{pn(b,"Invalid regex: "+X);return}for(var te=Vn(b).getQuery(),ue=[],de="",Le=O;Le<=F;Le++){var Be=te.test(b.getLine(Le));Be&&(ue.push(Le+1),de+=b.getLine(Le)+"<br>")}if(!ee){pn(b,de);return}var Ie=0,it=function(){if(Ie<ue.length){var mt=ue[Ie]+ee;er.processCommand(b,mt,{callback:it})}Ie++};it()},substitute:function(b,P){if(!b.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var k=P.argString,O=k?Ei(k,k[0]):[],F,$="",X,ee,te,ue=!1,de=!1;if(O.length)F=O[0],Ze("pcre")&&F!==""&&(F=new RegExp(F).source),$=O[1],F&&F[F.length-1]==="$"&&(F=F.slice(0,F.length-1)+"\\n",$=$?$+`
`:`
`),$!==void 0&&(Ze("pcre")?$=sa($.replace(/([^\\])&/g,"$1$$&")):$=pl($),me.lastSubstituteReplacePart=$),X=O[2]?O[2].split(" "):[];else if(k&&k.length){pn(b,"Substitutions should be of the form :s/pattern/replace/");return}if(X&&(ee=X[0],te=parseInt(X[1]),ee&&(ee.indexOf("c")!=-1&&(ue=!0,ee.replace("c","")),ee.indexOf("g")!=-1&&(de=!0,ee.replace("g","")),Ze("pcre")?F=F+"/"+ee:F=F.replace(/\//g,"\\/")+"/"+ee)),F)try{aa(b,F,!0,!0)}catch{pn(b,"Invalid regex: "+F);return}if($=$||me.lastSubstituteReplacePart,$===void 0){pn(b,"No previous substitute regular expression");return}var Le=Vn(b),Be=Le.getQuery(),Ie=P.line!==void 0?P.line:b.getCursor().line,it=P.lineEnd||Ie;Ie==b.firstLine()&&it==b.lastLine()&&(it=1/0),te&&(Ie=it,it=Ie+te-1);var mt=pe(b,R(Ie,0)),qe=b.getSearchCursor(Be,mt);Ym(b,ue,de,Ie,it,qe,Be,$,P.callback)},redo:x.commands.redo,undo:x.commands.undo,write:function(b){x.commands.save?x.commands.save(b):b.save&&b.save()},nohlsearch:function(b){la(b)},yank:function(b){var P=Pt(b.getCursor()),k=P.line,O=b.getLine(k);me.registerController.pushText("0","yank",O,!0,!0)},delmarks:function(b,P){if(!P.argString||!fs(P.argString)){pn(b,"Argument required");return}for(var k=b.state.vim,O=new x.StringStream(fs(P.argString));!O.eol();){O.eatSpace();var F=O.pos;if(!O.match(/[a-zA-Z]/,!1)){pn(b,"Invalid argument: "+P.argString.substring(F));return}var $=O.next();if(O.match("-",!0)){if(!O.match(/[a-zA-Z]/,!1)){pn(b,"Invalid argument: "+P.argString.substring(F));return}var X=$,ee=O.next();if(ze(X)&&ze(ee)||je(X)&&je(ee)){var te=X.charCodeAt(0),ue=ee.charCodeAt(0);if(te>=ue){pn(b,"Invalid argument: "+P.argString.substring(F));return}for(var de=0;de<=ue-te;de++){var Le=String.fromCharCode(te+de);delete k.marks[Le]}}else{pn(b,"Invalid argument: "+X+"-");return}}else delete k.marks[$]}}},er=new gl;function Ym(b,P,k,O,F,$,X,ee,te){b.state.vim.exMode=!0;var ue=!1,de=$.from();function Le(){b.operation(function(){for(;!ue;)Be(),Ie();it()})}function Be(){var qe=b.getRange($.from(),$.to()),St=qe.replace(X,ee);$.replace(St)}function Ie(){for(;$.findNext()&&lf($.from(),O,F);)if(!(!k&&de&&$.from().line==de.line)){b.scrollIntoView($.from(),30),b.setSelection($.from(),$.to()),de=$.from(),ue=!1;return}ue=!0}function it(qe){if(qe&&qe(),b.focus(),de){b.setCursor(de);var St=b.state.vim;St.exMode=!1,St.lastHPos=St.lastHSPos=de.ch}te&&te()}function mt(qe,St,kt){x.e_stop(qe);var $t=x.keyName(qe);switch($t){case"Y":Be(),Ie();break;case"N":Ie();break;case"A":var un=te;te=void 0,b.operation(Le),te=un;break;case"L":Be();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":it(kt);break}return ue&&it(kt),!0}if(Ie(),ue){pn(b,"No matches for "+X.source);return}if(!P){Le(),te&&te();return}ao(b,{prefix:"replace with <strong>"+ee+"</strong> (y/n/a/q/l)",onKeyDown:mt})}x.keyMap.vim={attach:D,detach:I,call:z};function ps(b){var P=b.state.vim,k=me.macroModeState,O=me.registerController.getRegister("."),F=k.isPlaying,$=k.lastInsertModeChanges;F||(b.off("change",yl),x.off(b.getInputField(),"keydown",ca)),!F&&P.insertModeRepeat>1&&(ff(b,P,P.insertModeRepeat-1,!0),P.lastEditInputState.repeatOverride=P.insertModeRepeat),delete P.insertModeRepeat,P.insertMode=!1,b.setCursor(b.getCursor().line,b.getCursor().ch-1),b.setOption("keyMap","vim"),b.setOption("disableInput",!0),b.toggleOverwrite(!1),O.setText($.changes.join("")),x.signal(b,"vim-mode-change",{mode:"normal"}),k.isRecording&&Kr(k)}function pr(b){M.unshift(b)}function Zm(b,P,k,O,F){var $={keys:b,type:P};$[P]=k,$[P+"Args"]=O;for(var X in F)$[X]=F[X];pr($)}Ne("insertModeEscKeysTimeout",200,"number"),x.keyMap["vim-insert"]={fallthrough:["default"],attach:D,detach:I,call:z},x.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:D,detach:I,call:z};function Qm(b,P,k,O){var F=me.registerController.getRegister(O);if(O==":"){F.keyBuffer[0]&&er.processCommand(b,F.keyBuffer[0]),k.isPlaying=!1;return}var $=F.keyBuffer,X=0;k.isPlaying=!0,k.replaySearchQueries=F.searchQueries.slice(0);for(var ee=0;ee<$.length;ee++)for(var te=$[ee],ue,de;te;)if(ue=/<\w+-.+?>|<\w+>|./.exec(te),de=ue[0],te=te.substring(ue.index+de.length),x.Vim.handleKey(b,de,"macro"),P.insertMode){var Le=F.insertModeChanges[X++].changes;me.macroModeState.lastInsertModeChanges.changes=Le,tr(b,Le,1),ps(b)}k.isPlaying=!1}function Pr(b,P){if(!b.isPlaying){var k=b.latestRegister,O=me.registerController.getRegister(k);O&&O.pushText(P)}}function Kr(b){if(!b.isPlaying){var P=b.latestRegister,k=me.registerController.getRegister(P);k&&k.pushInsertModeChanges&&k.pushInsertModeChanges(b.lastInsertModeChanges)}}function vl(b,P){if(!b.isPlaying){var k=b.latestRegister,O=me.registerController.getRegister(k);O&&O.pushSearchQuery&&O.pushSearchQuery(P)}}function yl(b,P){var k=me.macroModeState,O=k.lastInsertModeChanges;if(!k.isPlaying)for(;P;){if(O.expectCursorActivityForChange=!0,O.ignoreCount>1)O.ignoreCount--;else if(P.origin=="+input"||P.origin=="paste"||P.origin===void 0){var F=b.listSelections().length;F>1&&(O.ignoreCount=F);var $=P.text.join(`
`);O.maybeReset&&(O.changes=[],O.maybeReset=!1),$&&(b.state.overwrite&&!/\n/.test($)?O.changes.push([$]):O.changes.push($))}P=P.next}}function Jc(b){var P=b.state.vim;if(P.insertMode){var k=me.macroModeState;if(k.isPlaying)return;var O=k.lastInsertModeChanges;O.expectCursorActivityForChange?O.expectCursorActivityForChange=!1:O.maybeReset=!0}else b.curOp.isVimOp||mr(b,P);P.visualMode&&hf(b)}function hf(b){var P=b.state.vim,k=pe(b,Pt(P.sel.head)),O=nt(k,0,1);P.fakeCursor&&P.fakeCursor.clear(),P.fakeCursor=b.markText(k,O,{className:"cm-animate-fat-cursor"})}function mr(b,P,k){var O=b.getCursor("anchor"),F=b.getCursor("head");if(P.visualMode&&!b.somethingSelected()?be(b,!1):!P.visualMode&&!P.insertMode&&b.somethingSelected()&&(P.visualMode=!0,P.visualLine=!1,x.signal(b,"vim-mode-change",{mode:"visual"})),P.visualMode){var $=At(F,O)?0:-1,X=At(F,O)?-1:0;F=nt(F,0,$),O=nt(O,0,X),P.sel={anchor:O,head:F},Bn(b,P,"<",cn(F,O)),Bn(b,P,">",Qn(F,O))}else!P.insertMode&&!k&&(P.lastHPos=b.getCursor().ch)}function qc(b){this.keyName=b}function ca(b){var P=me.macroModeState,k=P.lastInsertModeChanges,O=x.keyName(b);if(!O)return;function F(){return k.maybeReset&&(k.changes=[],k.maybeReset=!1),k.changes.push(new qc(O)),!0}(O.indexOf("Delete")!=-1||O.indexOf("Backspace")!=-1)&&x.lookupKey(O,"vim-insert",F)}function ff(b,P,k,O){var F=me.macroModeState;F.isPlaying=!0;var $=!!P.lastEditActionCommand,X=P.inputState;function ee(){$?Ue.processAction(b,P,P.lastEditActionCommand):Ue.evalInput(b,P)}function te(de){if(F.lastInsertModeChanges.changes.length>0){de=P.lastEditActionCommand?de:1;var Le=F.lastInsertModeChanges;tr(b,Le.changes,de)}}if(P.inputState=P.lastEditInputState,$&&P.lastEditActionCommand.interlaceInsertRepeat)for(var ue=0;ue<k;ue++)ee(),te(1);else O||ee(),te(k);P.inputState=X,P.insertMode&&!O&&ps(b),F.isPlaying=!1}function tr(b,P,k){function O(Be){return typeof Be=="string"?x.commands[Be](b):Be(b),!0}var F=b.getCursor("head"),$=me.macroModeState.lastInsertModeChanges.visualBlock;$&&(na(b,F,$+1),k=b.listSelections().length,b.setCursor(F));for(var X=0;X<k;X++){$&&b.setCursor(nt(F,X,0));for(var ee=0;ee<P.length;ee++){var te=P[ee];if(te instanceof qc)x.lookupKey(te.keyName,"vim-insert",O);else if(typeof te=="string"){var ue=b.getCursor();b.replaceRange(te,ue,ue)}else{var de=b.getCursor(),Le=nt(de,0,te[0].length);b.replaceRange(te[0],de,Le)}}}$&&b.setCursor(nt(F,0,1))}ke(),x.Vim=A(),A=x.Vim;var xl={return:"CR",backspace:"BS",delete:"Del",esc:"Esc",left:"Left",right:"Right",up:"Up",down:"Down",space:"Space",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",enter:"CR"};function _l(b,P,k){P.length>1&&P[0]=="n"&&(P=P.replace("numpad","")),P=xl[P]||P;var O="";return k.ctrlKey&&(O+="C-"),k.altKey&&(O+="A-"),(O||P.length>1)&&k.shiftKey&&(O+="S-"),O+=P,O.length>1&&(O="<"+O+">"),O}var Ts=A.handleKey.bind(A);A.handleKey=function(b,P,k){return b.operation(function(){return Ts(b,P,k)},!0)};function ua(b){var P=new b.constructor;return Object.keys(b).forEach(function(k){var O=b[k];Array.isArray(O)?O=O.slice():O&&typeof O=="object"&&O.constructor!=Object&&(O=ua(O)),P[k]=O}),b.sel&&(P.sel={head:b.sel.head&&Pt(b.sel.head),anchor:b.sel.anchor&&Pt(b.sel.anchor)}),P}function eu(b,P,k){var O=!1,F=A.maybeInitVimState_(b),$=F.visualBlock||F.wasInVisualBlock,X=b.ace.inMultiSelectMode;if(F.wasInVisualBlock&&!X?F.wasInVisualBlock=!1:X&&F.visualBlock&&(F.wasInVisualBlock=!0),P=="<Esc>"&&!F.insertMode&&!F.visualMode&&X)b.ace.exitMultiSelectMode();else if($||!X||b.ace.inVirtualSelectionMode)O=A.handleKey(b,P,k);else{var ee=ua(F);b.operation(function(){b.ace.forEachSelection(function(){var te=b.ace.selection;b.state.vim.lastHPos=te.$desiredColumn==null?te.lead.column:te.$desiredColumn;var ue=b.getCursor("head"),de=b.getCursor("anchor"),Le=At(ue,de)?0:-1,Be=At(ue,de)?-1:0;ue=nt(ue,0,Le),de=nt(de,0,Be),b.state.vim.sel.head=ue,b.state.vim.sel.anchor=de,O=Ts(b,P,k),te.$desiredColumn=b.state.vim.lastHPos==-1?null:b.state.vim.lastHPos,b.virtualSelectionMode()&&(b.state.vim=ua(ee))}),b.curOp.cursorActivity&&!O&&(b.curOp.cursorActivity=!1)},!0)}return O&&!F.visualMode&&!F.insert&&F.visualMode!=b.somethingSelected()&&mr(b,F,!0),O}i.CodeMirror=x;var Rs=A.maybeInitVimState_;i.handler={$id:"ace/keyboard/vim",drawCursor:function(b,P,k,O,F){var $=this.state.vim||{},X=k.characterWidth,ee=k.lineHeight,te=P.top,ue=P.left;if(!$.insertMode){var de=O.cursor?s.comparePoints(O.cursor,O.start)<=0:F.selection.isBackwards()||F.selection.isEmpty();!de&&ue>X&&(ue-=X)}!$.insertMode&&$.status&&(ee=ee/2,te+=ee),l.translate(b,ue,te),l.setStyle(b.style,"width",X+"px"),l.setStyle(b.style,"height",ee+"px")},handleKeyboard:function(b,P,k,O,F){var $=b.editor,X=$.state.cm,ee=Rs(X);if(O!=-1){if(ee.insertMode||(P==-1?(k.charCodeAt(0)>255&&b.inputKey&&(k=b.inputKey,k&&b.inputHash==4&&(k=k.toUpperCase())),b.inputChar=k):P==4||P==0?b.inputKey==k&&b.inputHash==P&&b.inputChar?(k=b.inputChar,P=-1):(b.inputChar=null,b.inputKey=k,b.inputHash=P):b.inputChar=b.inputKey=null),k=="c"&&P==1&&!h.isMac&&$.getCopyText())return $.once("copy",function(){$.selection.clearSelection()}),{command:"null",passEvent:!0};if(k=="esc"&&!ee.insertMode&&!ee.visualMode&&!X.ace.inMultiSelectMode){var te=Vn(X),ue=te.getOverlay();ue&&X.removeOverlay(ue)}if(P==-1||P&1||P===0&&k.length>1){var de=ee.insertMode,Le=_l(P,k,F||{});ee.status==null&&(ee.status="");var Be=eu(X,Le,"user");return ee=Rs(X),Be&&ee.status!=null?ee.status+=Le:ee.status==null&&(ee.status=""),X._signal("changeStatus"),!Be&&(P!=-1||de)?void 0:{command:"null",passEvent:!Be}}}},attach:function(b){b.state||(b.state={});var P=new x(b);b.state.cm=P,b.$vimModeHandler=this,x.keyMap.vim.attach(P),Rs(P).status=null,P.on("vim-command-done",function(){P.virtualSelectionMode()||(Rs(P).status=null,P.ace._signal("changeStatus"),P.ace.session.markUndoGroup())}),P.on("changeStatus",function(){P.ace.renderer.updateCursor(),P.ace._signal("changeStatus")}),P.on("vim-mode-change",function(){P.virtualSelectionMode()||(k(),P._signal("changeStatus"))});function k(){var O=Rs(P).insertMode;P.ace.renderer.setStyle("normal-mode",!O),b.textInput.setCommandMode(!O),b.renderer.$keepTextAreaAtCursor=O,b.renderer.$blockCursor=!O}k(),b.renderer.$cursorLayer.drawCursor=this.drawCursor.bind(P)},detach:function(b){var P=b.state.cm;x.keyMap.vim.detach(P),P.destroy(),b.state.cm=null,b.$vimModeHandler=null,b.renderer.$cursorLayer.drawCursor=null,b.renderer.setStyle("normal-mode",!1),b.textInput.setCommandMode(!1),b.renderer.$keepTextAreaAtCursor=!0},getStatusText:function(b){var P=b.state.cm,k=Rs(P);if(k.insertMode)return"INSERT";var O="";return k.visualMode&&(O+="VISUAL",k.visualLine&&(O+=" LINE"),k.visualBlock&&(O+=" BLOCK")),k.status&&(O+=(O?" ":"")+k.status),O}},A.defineOption({name:"wrap",set:function(b,P){P&&P.ace.setOption("wrap",b)},type:"boolean"},!1),A.defineEx("write","w",function(){console.log(":write is not implemented")}),M.push({keys:"zc",type:"action",action:"fold",actionArgs:{open:!1}},{keys:"zC",type:"action",action:"fold",actionArgs:{open:!1,all:!0}},{keys:"zo",type:"action",action:"fold",actionArgs:{open:!0}},{keys:"zO",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"za",type:"action",action:"fold",actionArgs:{toggle:!0}},{keys:"zA",type:"action",action:"fold",actionArgs:{toggle:!0,all:!0}},{keys:"zf",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"zd",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"<C-A-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAbove"}},{keys:"<C-A-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelow"}},{keys:"<C-A-S-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAboveSkipCurrent"}},{keys:"<C-A-S-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelowSkipCurrent"}},{keys:"<C-A-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreBefore"}},{keys:"<C-A-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreAfter"}},{keys:"<C-A-S-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextBefore"}},{keys:"<C-A-S-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextAfter"}}),at.aceCommand=function(b,P,k){b.vimCmd=P,b.ace.inVirtualSelectionMode?b.ace.on("beforeEndOperation",ha):ha(null,b.ace)};function ha(b,P){P.off("beforeEndOperation",ha);var k=P.state.cm.vimCmd;k&&P.execCommand(k.exec?k:k.name,k.args),P.curOp=P.prevOp}at.fold=function(b,P,k){b.ace.execCommand(["toggleFoldWidget","toggleFoldWidget","foldOther","unfoldall"][(P.all?2:0)+(P.open?1:0)])},i.handler.defaultKeymap=M,i.handler.actions=at,i.Vim=A}),function(){ace.require(["ace/keyboard/vim"],function(t){n&&(n.exports=t)})}()})(qU);var eB={exports:{}};(function(n,e){ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(t,i,r){var s=t("./lib/oop");t("./range").Range;var c=t("./search").Search,l=t("./edit_session").EditSession,u=t("./search_highlight").SearchHighlight;function f(){}s.inherits(f,c),(function(){this.enter=function(o,h){if(!h.needle)return!1;var d=o.getCursorPosition();this.displayOccurContent(o,h);var p=this.originalToOccurPosition(o.session,d);return o.moveCursorToPosition(p),!0},this.exit=function(o,h){var d=h.translatePosition&&o.getCursorPosition(),p=d&&this.occurToOriginalPosition(o.session,d);return this.displayOriginalContent(o),p&&o.moveCursorToPosition(p),!0},this.highlight=function(o,h){var d=o.$occurHighlight=o.$occurHighlight||o.addDynamicMarker(new u(null,"ace_occur-highlight","text"));d.setRegexp(h),o._emit("changeBackMarker")},this.displayOccurContent=function(o,h){this.$originalSession=o.session;var d=this.matchingLines(o.session,h),p=d.map(function(x){return x.content}),y=new l(p.join(`
`));y.$occur=this,y.$occurMatchingLines=d,o.setSession(y),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,y.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(y,h.re),y._emit("changeBackMarker")},this.displayOriginalContent=function(o){o.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(o,h){var d=o.$occurMatchingLines,p={row:0,column:0};if(!d)return p;for(var y=0;y<d.length;y++)if(d[y].row===h.row)return{row:y,column:h.column};return p},this.occurToOriginalPosition=function(o,h){var d=o.$occurMatchingLines;return!d||!d[h.row]?h:{row:d[h.row].row,column:h.column}},this.matchingLines=function(o,h){if(h=s.mixin({},h),!o||!h.needle)return[];var d=new c;return d.set(h),d.findAll(o).reduce(function(p,y){var x=y.start.row,g=p[p.length-1];return g&&g.row===x?p:p.concat({row:x,content:o.getLine(x)})},[])}}).call(f.prototype);var a=t("./lib/dom");a.importCssString(`.ace_occur-highlight {
	    border-radius: 4px;
	    background-color: rgba(87, 255, 8, 0.25);
	    position: absolute;
	    z-index: 4;
	    box-sizing: border-box;
	    box-shadow: 0 0 4px rgb(91, 255, 50);
	}
	.ace_dark .ace_occur-highlight {
	    background-color: rgb(80, 140, 85);
	    box-shadow: 0 0 4px rgb(60, 120, 70);
	}
`,"incremental-occur-highlighting"),i.Occur=f}),ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(t,i,r){t("../config");var s=t("../occur").Occur,c={name:"occur",exec:function(o,h){var d=!!o.session.$occur,p=new s().enter(o,h);p&&!d&&a.installIn(o)},readOnly:!0},l=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(o){var h=o.session.$occur;h&&(h.exit(o,{}),o.session.$occur||a.uninstallFrom(o))},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(o){var h=o.session.$occur;h&&(h.exit(o,{translatePosition:!0}),o.session.$occur||a.uninstallFrom(o))},readOnly:!0}],u=t("../keyboard/hash_handler").HashHandler,f=t("../lib/oop");function a(){}f.inherits(a,u),(function(){this.isOccurHandler=!0,this.attach=function(h){u.call(this,l,h.commands.platform),this.$editor=h};var o=this.handleKeyboard;this.handleKeyboard=function(h,d,p,y){var x=o.call(this,h,d,p,y);return x&&x.command?x:void 0}}).call(a.prototype),a.installIn=function(o){var h=new this;o.keyBinding.addKeyboardHandler(h),o.commands.addCommands(l)},a.uninstallFrom=function(o){o.commands.removeCommands(l);var h=o.getKeyboardHandler();h.isOccurHandler&&o.keyBinding.removeKeyboardHandler(h)},i.occurStartCommand=c}),ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(t,i,r){var s=t("../config"),c=t("../lib/oop"),l=t("../keyboard/hash_handler").HashHandler,u=t("./occur_commands").occurStartCommand;i.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(a,o){s.loadModule(["core","ace/incremental_search"],function(h){var d=h.iSearch=h.iSearch||new h.IncrementalSearch;d.activate(a,o.backwards),o.jumpToFirstMatch&&d.next(o)})},readOnly:!0},{name:"iSearchBackwards",exec:function(a,o){a.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(a,o){a.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(a){a.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],i.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(a){a.cancelSearch(!0)}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(a,o){o.useCurrentOrPrevSearch=!0,a.next(o)}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(a,o){o.useCurrentOrPrevSearch=!0,o.backwards=!0,a.next(o)}},{name:"extendSearchTerm",exec:function(a,o){a.addString(o)}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(a){a.addString(" ")}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(a){a.removeChar()}},{name:"confirmSearch",bindKey:"return",exec:function(a){a.deactivate()}},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(a){a.deactivate(!0)}},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(a){var o=c.mixin({},a.$options);a.deactivate(),u.exec(a.$editor,o)}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(a){var o=a.$editor,h=o.selection.getRangeOfMovements(function(p){p.moveCursorWordRight()}),d=o.session.getTextRange(h);a.addString(d)}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(a){var o=a.$editor,h=o.selection.getRangeOfMovements(function(p){p.moveCursorRight()}),d=o.session.getTextRange(h);a.addString(d)}},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(a){a.$editor.execCommand("recenterTopBottom")}},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(a){var o=a.$editor,h=o.session.$isearchHighlight,d=h&&h.cache?h.cache.reduce(function(p,y){return p.concat(y||[])},[]):[];a.deactivate(!1),d.forEach(o.selection.addRange.bind(o.selection))}},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(a){a.convertNeedleToRegExp()}}].map(function(a){return a.readOnly=!0,a.isIncrementalSearchCommand=!0,a.scrollIntoView="animate-cursor",a});function f(a){this.$iSearch=a}c.inherits(f,l),(function(){this.attach=function(o){var h=this.$iSearch;l.call(this,i.iSearchCommands,o.commands.platform),this.$commandExecHandler=o.commands.on("exec",function(d){if(!d.command.isIncrementalSearchCommand)return h.deactivate();d.stopPropagation(),d.preventDefault();var p=o.session.getScrollTop(),y=d.command.exec(h,d.args||{});return o.renderer.scrollCursorIntoView(null,.5),o.renderer.animateScrolling(p),y})},this.detach=function(o){this.$commandExecHandler&&(o.commands.off("exec",this.$commandExecHandler),delete this.$commandExecHandler)};var a=this.handleKeyboard;this.handleKeyboard=function(o,h,d,p){if((h===1||h===8)&&d==="v"||h===1&&d==="y")return null;var y=a.call(this,o,h,d,p);if(y&&y.command)return y;if(h==-1){var x=this.commands.extendSearchTerm;if(x)return{command:x,args:d}}return!1}}).call(f.prototype),i.IncrementalSearchKeyboardHandler=f}),ace.define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(t,i,r){var s=t("./lib/oop"),c=t("./range").Range,l=t("./search").Search,u=t("./search_highlight").SearchHighlight,f=t("./commands/incremental_search_commands"),a=f.IncrementalSearchKeyboardHandler;function o(){this.$options={wrap:!1,skipCurrent:!1},this.$keyboardHandler=new a(this)}s.inherits(o,l);function h(C){return C instanceof RegExp}function d(C){var M=String(C),_=M.indexOf("/"),E=M.lastIndexOf("/");return{expression:M.slice(_+1,E),flags:M.slice(E+1)}}function p(C,M){try{return new RegExp(C,M)}catch{return C}}function y(C){return p(C.expression,C.flags)}(function(){this.activate=function(C,M){this.$editor=C,this.$startPos=this.$currentPos=C.getCursorPosition(),this.$options.needle="",this.$options.backwards=M,C.keyBinding.addKeyboardHandler(this.$keyboardHandler),this.$originalEditorOnPaste=C.onPaste,C.onPaste=this.onPaste.bind(this),this.$mousedownHandler=C.on("mousedown",this.onMouseDown.bind(this)),this.selectionFix(C),this.statusMessage(!0)},this.deactivate=function(C){this.cancelSearch(C);var M=this.$editor;M.keyBinding.removeKeyboardHandler(this.$keyboardHandler),this.$mousedownHandler&&(M.off("mousedown",this.$mousedownHandler),delete this.$mousedownHandler),M.onPaste=this.$originalEditorOnPaste,this.message("")},this.selectionFix=function(C){C.selection.isEmpty()&&!C.session.$emacsMark&&C.clearSelection()},this.highlight=function(C){var M=this.$editor.session,_=M.$isearchHighlight=M.$isearchHighlight||M.addDynamicMarker(new u(null,"ace_isearch-result","text"));_.setRegexp(C),M._emit("changeBackMarker")},this.cancelSearch=function(C){var M=this.$editor;return this.$prevNeedle=this.$options.needle,this.$options.needle="",C?(M.moveCursorToPosition(this.$startPos),this.$currentPos=this.$startPos):M.pushEmacsMark&&M.pushEmacsMark(this.$startPos,!1),this.highlight(null),c.fromPoints(this.$currentPos,this.$currentPos)},this.highlightAndFindWithNeedle=function(C,M){if(!this.$editor)return null;var _=this.$options;if(M&&(_.needle=M.call(this,_.needle||"")||""),_.needle.length===0)return this.statusMessage(!0),this.cancelSearch(!0);_.start=this.$currentPos;var E=this.$editor.session,R=this.find(E),A=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();return R&&(_.backwards&&(R=c.fromPoints(R.end,R.start)),this.$editor.selection.setRange(c.fromPoints(A?this.$startPos:R.end,R.end)),C&&(this.$currentPos=R.end),this.highlight(_.re)),this.statusMessage(R),R},this.addString=function(C){return this.highlightAndFindWithNeedle(!1,function(M){if(!h(M))return M+C;var _=d(M);return _.expression+=C,y(_)})},this.removeChar=function(C){return this.highlightAndFindWithNeedle(!1,function(M){if(!h(M))return M.substring(0,M.length-1);var _=d(M);return _.expression=_.expression.substring(0,_.expression.length-1),y(_)})},this.next=function(C){return C=C||{},this.$options.backwards=!!C.backwards,this.$currentPos=this.$editor.getCursorPosition(),this.highlightAndFindWithNeedle(!0,function(M){return C.useCurrentOrPrevSearch&&M.length===0?this.$prevNeedle||"":M})},this.onMouseDown=function(C){return this.deactivate(),!0},this.onPaste=function(C){this.addString(C)},this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(!1,function(C){return h(C)?C:p(C,"ig")})},this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(!1,function(C){return h(C)?d(C).expression:C})},this.statusMessage=function(C){var M=this.$options,_="";_+=M.backwards?"reverse-":"",_+="isearch: "+M.needle,_+=C?"":" (not found)",this.message(_)},this.message=function(C){this.$editor.showCommandLine&&(this.$editor.showCommandLine(C),this.$editor.focus())}}).call(o.prototype),i.IncrementalSearch=o;var x=t("./lib/dom");x.importCssString&&x.importCssString("	.ace_marker-layer .ace_isearch-result {	  position: absolute;	  z-index: 6;	  box-sizing: border-box;	}	div.ace_isearch-result {	  border-radius: 4px;	  background-color: rgba(255, 200, 0, 0.5);	  box-shadow: 0 0 4px rgb(255, 200, 0);	}	.ace_dark div.ace_isearch-result {	  background-color: rgb(100, 110, 160);	  box-shadow: 0 0 4px rgb(80, 90, 140);	}","incremental-search-highlighting");var g=t("./commands/command_manager");(function(){this.setupIncrementalSearch=function(C,M){if(this.usesIncrementalSearch!=M){this.usesIncrementalSearch=M;var _=f.iSearchStartCommands,E=M?"addCommands":"removeCommands";this[E](_)}}}).call(g.CommandManager.prototype);var w=t("./editor").Editor;t("./config").defineOptions(w.prototype,"editor",{useIncrementalSearch:{set:function(C){this.keyBinding.$handlers.forEach(function(M){M.setupIncrementalSearch&&M.setupIncrementalSearch(this,C)}),this._emit("incrementalSearchSettingChanged",{isEnabled:C})}}})}),ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(t,i,r){var s=t("../lib/dom");t("../incremental_search");var c=t("../commands/incremental_search_commands"),l=t("./hash_handler").HashHandler;i.handler=new l,i.handler.isEmacs=!0,i.handler.$id="ace/keyboard/emacs";var u=!1,f,a;i.handler.attach=function(g){u||(u=!0,s.importCssString("	            .emacs-mode .ace_cursor{	                border: 1px rgba(50,250,50,0.8) solid!important;	                box-sizing: border-box!important;	                background-color: rgba(0,250,0,0.9);	                opacity: 0.5;	            }	            .emacs-mode .ace_hidden-cursors .ace_cursor{	                opacity: 1;	                background-color: transparent;	            }	            .emacs-mode .ace_overwrite-cursors .ace_cursor {	                opacity: 1;	                background-color: transparent;	                border-width: 0 0 2px 2px !important;	            }	            .emacs-mode .ace_text-layer {	                z-index: 4	            }	            .emacs-mode .ace_cursor-layer {	                z-index: 2	            }","emacsMode")),f=g.session.$selectLongWords,g.session.$selectLongWords=!0,a=g.session.$useEmacsStyleLineStart,g.session.$useEmacsStyleLineStart=!0,g.session.$emacsMark=null,g.session.$emacsMarkRing=g.session.$emacsMarkRing||[],g.emacsMark=function(){return this.session.$emacsMark},g.setEmacsMark=function(w){this.session.$emacsMark=w},g.pushEmacsMark=function(w,C){var M=this.session.$emacsMark;M&&this.session.$emacsMarkRing.push(M),!w||C?this.setEmacsMark(w):this.session.$emacsMarkRing.push(w)},g.popEmacsMark=function(){var w=this.emacsMark();return w?(this.setEmacsMark(null),w):this.session.$emacsMarkRing.pop()},g.getLastEmacsMark=function(w){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]},g.emacsMarkForSelection=function(w){var C=this.selection,M=this.multiSelect?this.multiSelect.getAllRanges().length:1,_=C.index||0,E=this.session.$emacsMarkRing,R=E.length-(M-_),A=E[R]||C.anchor;return w&&E.splice(R,1,"row"in w&&"column"in w?w:void 0),A},g.on("click",h),g.on("changeSession",o),g.renderer.$blockCursor=!0,g.setStyle("emacs-mode"),g.commands.addCommands(x),i.handler.platform=g.commands.platform,g.$emacsModeHandler=this,g.on("copy",this.onCopy),g.on("paste",this.onPaste)},i.handler.detach=function(g){g.renderer.$blockCursor=!1,g.session.$selectLongWords=f,g.session.$useEmacsStyleLineStart=a,g.off("click",h),g.off("changeSession",o),g.unsetStyle("emacs-mode"),g.commands.removeCommands(x),g.off("copy",this.onCopy),g.off("paste",this.onPaste),g.$emacsModeHandler=null};var o=function(g){g.oldSession&&(g.oldSession.$selectLongWords=f,g.oldSession.$useEmacsStyleLineStart=a),f=g.session.$selectLongWords,g.session.$selectLongWords=!0,a=g.session.$useEmacsStyleLineStart,g.session.$useEmacsStyleLineStart=!0,g.session.hasOwnProperty("$emacsMark")||(g.session.$emacsMark=null),g.session.hasOwnProperty("$emacsMarkRing")||(g.session.$emacsMarkRing=[])},h=function(g){g.editor.session.$emacsMark=null},d=t("../lib/keys").KEY_MODS,p={C:"ctrl",S:"shift",M:"alt",CMD:"command"},y=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];y.forEach(function(g){var w=0;g.split("-").forEach(function(C){w=w|d[p[C]]}),p[w]=g.toLowerCase()+"-"}),i.handler.onCopy=function(g,w){w.$handlesEmacsOnCopy||(w.$handlesEmacsOnCopy=!0,i.handler.commands.killRingSave.exec(w),w.$handlesEmacsOnCopy=!1)},i.handler.onPaste=function(g,w){w.pushEmacsMark(w.getCursorPosition())},i.handler.bindKey=function(g,w){if(typeof g=="object"&&(g=g[this.platform]),!!g){var C=this.commandKeyBinding;g.split("|").forEach(function(M){M=M.toLowerCase(),C[M]=w;var _=M.split(" ").slice(0,-1);_.reduce(function(E,R,A){var T=E[A-1]?E[A-1]+" ":"";return E.concat([T+R])},[]).forEach(function(E){C[E]||(C[E]="null")})},this)}},i.handler.getStatusText=function(g,w){var C="";return w.count&&(C+=w.count),w.keyChain&&(C+=" "+w.keyChain),C},i.handler.handleKeyboard=function(g,w,C,M){if(M!==-1){var _=g.editor;if(_._signal("changeStatus"),w==-1&&(_.pushEmacsMark(),g.count)){var E=new Array(g.count+1).join(C);return g.count=null,{command:"insertstring",args:E}}var R=p[w];if(R=="c-"||g.count){var A=parseInt(C[C.length-1]);if(typeof A=="number"&&!isNaN(A))return g.count=Math.max(g.count,0)||0,g.count=10*g.count+A,{command:"null"}}R&&(C=R+C),g.keyChain&&(C=g.keyChain+=" "+C);var T=this.commandKeyBinding[C];if(g.keyChain=T=="null"?C:"",!!T){if(T==="null")return{command:"null"};if(T==="universalArgument")return g.count=-4,{command:"null"};var S;if(typeof T!="string"&&(S=T.args,T.command&&(T=T.command),T==="goorselect"&&(T=_.emacsMark()?S[1]:S[0],S=null)),!(typeof T=="string"&&((T==="insertstring"||T==="splitline"||T==="togglecomment")&&_.pushEmacsMark(),T=this.commands[T]||_.commands.commands[T],!T))){if(!T.readOnly&&!T.isYank&&(g.lastCommand=null),!T.readOnly&&_.emacsMark()&&_.setEmacsMark(null),g.count){var A=g.count;if(g.count=0,!T||!T.handlesCount)return{args:S,command:{exec:function(D,z){for(var B=0;B<A;B++)T.exec(D,z)},multiSelectAction:T.multiSelectAction}};S||(S={}),typeof S=="object"&&(S.count=A)}return{command:T,args:S}}}}},i.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:`
`},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}},i.handler.bindKeys(i.emacsKeys),i.handler.addCommands({recenterTopBottom:function(g){var w=g.renderer,C=w.$cursorLayer.getPixelPosition(),M=w.$size.scrollerHeight-w.lineHeight,_=w.scrollTop;Math.abs(C.top-_)<2?_=C.top-M:Math.abs(C.top-_-M*.5)<2?_=C.top:_=C.top-M*.5,g.session.setScrollTop(_)},selectRectangularRegion:function(g){g.multiSelect.toggleBlockSelection()},setMark:{exec:function(g,w){if(w&&w.count){g.inMultiSelectMode?g.forEachSelection(R):R(),R();return}var C=g.emacsMark(),M=g.selection.getAllRanges(),_=M.map(function(A){return{row:A.start.row,column:A.start.column}}),E=M.every(function(A){return A.isEmpty()});if(C||!E){g.inMultiSelectMode?g.forEachSelection({exec:g.clearSelection.bind(g)}):g.clearSelection(),C&&g.pushEmacsMark(null);return}if(!C){_.forEach(function(A){g.pushEmacsMark(A)}),g.setEmacsMark(_[_.length-1]);return}function R(){var A=g.popEmacsMark();A&&g.moveCursorToPosition(A)}},readOnly:!0,handlesCount:!0},exchangePointAndMark:{exec:function(w,C){var M=w.selection;if(!C.count&&!M.isEmpty()){M.setSelectionRange(M.getRange(),!M.isBackwards());return}if(C.count){var _={row:M.lead.row,column:M.lead.column};M.clearSelection(),M.moveCursorToPosition(w.emacsMarkForSelection(_))}else M.selectToPosition(w.emacsMarkForSelection())},readOnly:!0,handlesCount:!0,multiSelectAction:"forEach"},killWord:{exec:function(g,w){g.clearSelection(),w=="left"?g.selection.selectWordLeft():g.selection.selectWordRight();var C=g.getSelectionRange(),M=g.session.getTextRange(C);i.killRing.add(M),g.session.remove(C),g.clearSelection()},multiSelectAction:"forEach"},killLine:function(g){g.pushEmacsMark(null),g.clearSelection();var w=g.getSelectionRange(),C=g.session.getLine(w.start.row);w.end.column=C.length,C=C.substr(w.start.column);var M=g.session.getFoldLine(w.start.row);M&&w.end.row!=M.end.row&&(w.end.row=M.end.row,C="x"),/^\s*$/.test(C)&&(w.end.row++,C=g.session.getLine(w.end.row),w.end.column=/^\s*$/.test(C)?C.length:0);var _=g.session.getTextRange(w);g.prevOp.command==this?i.killRing.append(_):i.killRing.add(_),g.session.remove(w),g.clearSelection()},yank:function(g){g.onPaste(i.killRing.get()||""),g.keyBinding.$data.lastCommand="yank"},yankRotate:function(g){g.keyBinding.$data.lastCommand=="yank"&&(g.undo(),g.session.$emacsMarkRing.pop(),g.onPaste(i.killRing.rotate()),g.keyBinding.$data.lastCommand="yank")},killRegion:{exec:function(g){i.killRing.add(g.getCopyText()),g.commands.byName.cut.exec(g),g.setEmacsMark(null)},readOnly:!0,multiSelectAction:"forEach"},killRingSave:{exec:function(g){g.$handlesEmacsOnCopy=!0;var w=g.session.$emacsMarkRing.slice(),C=[];i.killRing.add(g.getCopyText()),setTimeout(function(){function M(){var _=g.selection,E=_.getRange(),R=_.isBackwards()?E.end:E.start;C.push({row:R.row,column:R.column}),_.clearSelection()}g.$handlesEmacsOnCopy=!1,g.inMultiSelectMode?g.forEachSelection({exec:M}):M(),g.setEmacsMark(null),g.session.$emacsMarkRing=w.concat(C.reverse())},0)},readOnly:!0},keyboardQuit:function(g){g.selection.clearSelection(),g.setEmacsMark(null),g.keyBinding.$data.count=null},focusCommandLine:function(g,w){g.showCommandLine&&g.showCommandLine(w)}}),i.handler.addCommands(c.iSearchStartCommands);var x=i.handler.commands;x.yank.isYank=!0,x.yankRotate.isYank=!0,i.killRing={$data:[],add:function(g){g&&this.$data.push(g),this.$data.length>30&&this.$data.shift()},append:function(g){var w=this.$data.length-1,C=this.$data[w]||"";g&&(C+=g),C&&(this.$data[w]=C)},get:function(g){return g=g||1,this.$data.slice(this.$data.length-g,this.$data.length).reverse().join(`
`)},pop:function(){return this.$data.length>1&&this.$data.pop(),this.get()},rotate:function(){return this.$data.unshift(this.$data.pop()),this.get()}}}),function(){ace.require(["ace/keyboard/emacs"],function(t){n&&(n.exports=t)})}()})(eB);const YM=({id:n,defaultValue:e,onChange:t})=>{const i=Ce.useRef(null),r=Ce.useRef(!1);Ce.useEffect(()=>{const c=YU.edit(n);return i.current=c,c&&(c.setTheme("ace/theme/monokai"),c.session.setMode("ace/mode/glsl"),r.current||c.getValue()!==e&&(c.setValue(e,-1),r.current=!0),c.on("change",()=>{t&&i.current&&t(i.current.getValue())}),c.setOptions({fontSize:14,showPrintMargin:!1,highlightActiveLine:!0,highlightSelectedWord:!0,showLineNumbers:!0,showGutter:!0,wrap:!0,indentedSoftWrap:!1,behavioursEnabled:!0,wrapBehavioursEnabled:!0,enableAutoIndent:!0,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,cursorStyle:"ace",scrollPastEnd:.5}),c.container&&(c.container.style.lineHeight="1.5",c.container.style.fontFamily='Consolas, Monaco, "Courier New", monospace'),setTimeout(()=>{i.current&&i.current.resize()},100)),()=>{if(i.current){try{i.current.destroy()}catch{}i.current=null,r.current=!1}}},[n]),Ce.useEffect(()=>{i.current&&e!==void 0&&i.current.getValue()!==e&&i.current.setValue(e,-1)},[e]);const s=()=>{i.current&&i.current.resize()};return Ce.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[]),Q.jsx("div",{id:n,style:{width:"100%",height:"100%"}})},tB=({uniforms:n,vertexShader:e,fragmentShader:t,transparent:i=!1,shape:r="plane"})=>{const s=Ce.useRef(null),c=Ce.useRef(null),[l,u]=Ce.useState(!1);console.log("ShaderMaterial",n,JSON.stringify(n)),Ce.useEffect(()=>(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{console.log("shaderMaterial",n),s.current=new cs({uniforms:n,vertexShader:e,fragmentShader:t,side:rs,transparent:i}),u(!0)},500),()=>{c.current&&clearTimeout(c.current)}),[e,t,i,n]),Ce.useEffect(()=>{s.current&&Object.keys(n).forEach(a=>{if(s.current.uniforms[a]||(s.current.uniforms[a]={value:null}),s.current.uniforms[a]){const o=n[a],h=s.current.uniforms[a].value;if(o.value===null){h!==null&&(s.current.uniforms[a].value=null);return}if(o.type==="sampler2D")if(o.value&&typeof o.value=="object"&&"src"in o.value){const d=o.value;if(h instanceof An&&h.image&&h.image.src===d.src)return;const p=new Image;p.onload=()=>{const y=new An(p);y.needsUpdate=!0,s.current.uniforms[a].value=y},p.src=d.src}else o.value===null&&h!==null&&(s.current.uniforms[a].value=null);else if(o.type==="vec2"||typeof o.value=="object"&&o.value!==null&&!("a"in o.value)&&!("r"in o.value)&&typeof o.value.x=="number"&&typeof o.value.y=="number"&&typeof o.value.z!="number"){const d=o.value;if(h instanceof Ge){if(Math.abs(h.x-d.x)<1e-4&&Math.abs(h.y-d.y)<1e-4){console.log(`ShaderMaterial: Skipping vec2 update for ${a}, values are identical within tolerance`);return}console.log(`ShaderMaterial: Updating vec2 ${a} from [${h.x}, ${h.y}] to [${d.x}, ${d.y}]`)}else console.log(`ShaderMaterial: Creating new vec2 ${a} with [${d.x}, ${d.y}]`);s.current.uniforms[a].value=new Ge(d.x,d.y)}else if(o.type==="vec3"||typeof o.value=="object"&&o.value!==null&&!("a"in o.value)){let d;const p=o.value;if(typeof p.r=="number"&&typeof p.g=="number"&&typeof p.b=="number")d={r:p.r,g:p.g,b:p.b};else if(typeof p.x=="number"&&typeof p.y=="number"){const y=typeof p.z=="number"?p.z:0;d={r:p.x,g:p.y,b:y},console.log(`ShaderMaterial: Converting Vector format for ${a}:`,p,"->",d)}else{console.error(`ShaderMaterial: Invalid vec3 format for ${a}:`,o.value);return}if(h instanceof se){if(Math.abs(h.x-d.r)<1e-4&&Math.abs(h.y-d.g)<1e-4&&Math.abs(h.z-d.b)<1e-4){console.log(`ShaderMaterial: Skipping vec3 update for ${a}, values are identical within tolerance`);return}console.log(`ShaderMaterial: Updating vec3 ${a} from [${h.x}, ${h.y}, ${h.z}] to [${d.r}, ${d.g}, ${d.b}], color:`,d)}else console.log(`ShaderMaterial: Creating new vec3 ${a} with [${d.r}, ${d.g}, ${d.b}]`);s.current.uniforms[a].value=new se(d.r,d.g,d.b)}else if(o.type==="vec4"||typeof o.value=="object"&&"r"in o.value&&"a"in o.value){const d=o.value;if(h instanceof ln&&Math.abs(h.x-d.r)<1e-4&&Math.abs(h.y-d.g)<1e-4&&Math.abs(h.z-d.b)<1e-4&&Math.abs(h.w-d.a)<1e-4)return;s.current.uniforms[a].value=new ln(d.r,d.g,d.b,d.a)}else h!==o.value&&(s.current.uniforms[a].value=o.value)}})},[n]),A_(a=>{s.current&&s.current.uniforms.iTime&&(s.current.uniforms.iTime.value=a.clock.elapsedTime)});const f=Ce.useMemo(()=>{switch(r){case"cube":return Q.jsx("boxGeometry",{args:[.9,.9,.9]});case"sphere":return Q.jsx("sphereGeometry",{args:[.7,32,32]});case"plane":default:return Q.jsx("planeGeometry",{args:[1.3,1.3]})}},[r]);return!l||!s.current?null:Q.jsxs("mesh",{rotation:r=="cube"?[.5,.5,0]:[0,0,0],children:[f,Q.jsx("primitive",{object:s.current,attach:"material"})]})},nB=({color:n,onChange:e,showAlpha:t=!0,label:i})=>{var a;const r=cC.useMemo(()=>{const o=t?{r:1,g:1,b:1,a:1}:{r:1,g:1,b:1};if(!n||typeof n!="object")return console.warn(`ColorPicker: Invalid color prop for ${i}, using default`,n),o;const h={...n};"x"in h&&typeof h.x=="number"&&(h.r=h.x),"y"in h&&typeof h.y=="number"&&(h.g=h.y),"z"in h&&typeof h.z=="number"&&(h.b=h.z);const d={r:typeof h.r=="number"&&!isNaN(h.r)?Math.max(0,Math.min(1,h.r)):1,g:typeof h.g=="number"&&!isNaN(h.g)?Math.max(0,Math.min(1,h.g)):1,b:typeof h.b=="number"&&!isNaN(h.b)?Math.max(0,Math.min(1,h.b)):1,...t&&{a:typeof h.a=="number"&&!isNaN(h.a)?Math.max(0,Math.min(1,h.a)):1}};return console.log(`ColorPicker: Validated color for ${i}:`,d,"from original:",n),d},[n,i,t]),s=Ce.useRef(null),c=Ce.useRef(`color-picker-${Math.random().toString(36).substr(2,9)}`),l=(o,h,d)=>{const p=y=>Math.round(y*255).toString(16).padStart(2,"0");return`#${p(o)}${p(h)}${p(d)}`},u=o=>{const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return h?{r:parseInt(h[1],16)/255,g:parseInt(h[2],16)/255,b:parseInt(h[3],16)/255}:{r:0,g:0,b:0}},f=(o,h,d)=>{if(console.log(`ColorPicker handleColorChange - type: ${o}, value: ${h}, channel: ${d}, localColor:`,r),o==="hex"&&typeof h=="string"){const p=u(h),y=t?{...p,a:r.a}:p;console.log("ColorPicker onChange called with:",y),y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"?e(y):console.error("ColorPicker: Invalid color generated from hex:",y)}else if(o==="rgba"&&d&&typeof h=="number"&&(t||d!=="a")){const p={...r,[d]:h};console.log("ColorPicker onChange called with:",p),p&&typeof p.r=="number"&&typeof p.g=="number"&&typeof p.b=="number"?(t&&(typeof p.a!="number"||isNaN(p.a))&&(p.a=1),e(p)):console.error("ColorPicker: Invalid color generated from RGBA slider:",p)}};return Q.jsx("div",{className:"color-picker-container",ref:s,"data-color-picker-id":c.current,children:Q.jsx("div",{className:"color-picker-panel",children:Q.jsxs("div",{className:"color-picker-content",children:[Q.jsx("div",{className:"color-input-group",children:Q.jsx("input",{type:"color",value:l(r.r,r.g,r.b),onChange:o=>f("hex",o.target.value),className:"color-input-hex"})}),Q.jsxs("div",{className:"color-sliders",children:[Q.jsxs("div",{className:"color-slider-group",children:[Q.jsxs("label",{children:["R: ",r.r.toFixed(2)]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:r.r,onChange:o=>f("rgba",parseFloat(o.target.value),"r"),className:"color-slider red-slider",style:{"--progress":`${r.r*100}%`}})]}),Q.jsxs("div",{className:"color-slider-group",children:[Q.jsxs("label",{children:["G: ",r.g.toFixed(2)]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:r.g,onChange:o=>f("rgba",parseFloat(o.target.value),"g"),className:"color-slider green-slider",style:{"--progress":`${r.g*100}%`}})]}),Q.jsxs("div",{className:"color-slider-group",children:[Q.jsxs("label",{children:["B: ",r.b.toFixed(2)]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:r.b,onChange:o=>f("rgba",parseFloat(o.target.value),"b"),className:"color-slider blue-slider",style:{"--progress":`${r.b*100}%`}})]}),t&&Q.jsxs("div",{className:"color-slider-group",children:[Q.jsxs("label",{children:["A: ",((a=r.a)==null?void 0:a.toFixed(2))||"1.00"]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:r.a||1,onChange:o=>f("rgba",parseFloat(o.target.value),"a"),className:"color-slider alpha-slider",style:{"--progress":`${(r.a||1)*100}%`}})]})]})]})})})},iB=({isOpen:n,onClose:e,history:t,onLoadHistory:i,onDeleteHistory:r,onRenameHistory:s,onSaveCurrent:c})=>{const[l,u]=Ce.useState(null),[f,a]=Ce.useState(""),[o,h]=Ce.useState("");if(!n)return null;const d=x=>{f.trim()&&(s(x,f.trim()),u(null),a(""))},p=()=>{o.trim()&&(c(o.trim()),h(""))},y=x=>new Date(x).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return Q.jsx("div",{className:"shader-history-overlay",onClick:e,children:Q.jsxs("div",{className:"shader-history-panel",onClick:x=>x.stopPropagation(),children:[Q.jsxs("div",{className:"shader-history-header",children:[Q.jsx("h2",{children:"Shader "}),Q.jsx("button",{className:"close-btn",onClick:e,children:""})]}),Q.jsxs("div",{className:"save-current-section",children:[Q.jsx("h3",{children:" Shader"}),Q.jsxs("div",{className:"save-input-group",children:[Q.jsx("input",{type:"text",placeholder:"...",value:o,onChange:x=>h(x.target.value),onKeyPress:x=>x.key==="Enter"&&p()}),Q.jsx("button",{className:"save-btn",onClick:p,disabled:!o.trim(),children:""})]})]}),Q.jsxs("div",{className:"history-list-section",children:[Q.jsxs("h3",{children:[" (",t.length,")"]}),t.length===0?Q.jsxs("div",{className:"empty-state",children:[Q.jsx("p",{children:""}),Q.jsx("p",{className:"hint",children:" shader "})]}):Q.jsx("div",{className:"history-list",children:t.map(x=>Q.jsxs("div",{className:"history-item",children:[Q.jsx("div",{className:"history-item-content",children:l===x.id?Q.jsx("input",{type:"text",className:"rename-input",value:f,onChange:g=>a(g.target.value),onBlur:()=>d(x.id),onKeyPress:g=>g.key==="Enter"&&d(x.id),autoFocus:!0}):Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"history-item-header",children:[Q.jsx("h4",{className:"history-name",children:x.name}),Q.jsxs("div",{className:"history-actions",children:[Q.jsx("button",{className:"action-btn rename-btn",onClick:()=>{u(x.id),a(x.name)},title:"",children:""}),Q.jsx("button",{className:"action-btn delete-btn",onClick:()=>{window.confirm(` "${x.name}" `)&&r(x.id)},title:"",children:""})]})]}),Q.jsx("p",{className:"history-time",children:y(x.timestamp)}),Q.jsxs("div",{className:"history-preview",children:[Q.jsxs("div",{className:"preview-info",children:[Q.jsx("span",{className:"preview-label",children:":"}),Q.jsxs("span",{className:"preview-length",children:[x.vertexShader.length," "]})]}),Q.jsxs("div",{className:"preview-info",children:[Q.jsx("span",{className:"preview-label",children:":"}),Q.jsxs("span",{className:"preview-length",children:[x.fragmentShader.length," "]})]}),Q.jsxs("div",{className:"preview-info",children:[Q.jsx("span",{className:"preview-label",children:"Uniforms:"}),Q.jsxs("span",{className:"preview-length",children:[Object.keys(x.uniforms).length," "]})]})]})]})}),Q.jsx("button",{className:"load-btn",onClick:()=>i(x),children:""})]},x.id))})]})]})})},ZM=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,QM=`
uniform float iTime;
uniform vec2 iResolution;
uniform sampler2D uTexture;
uniform float uTextureIntensity;
uniform vec3 uTintColor;

varying vec2 vUv;

void main() {
    vec2 uv = vUv;
    
    // 
    vec3 baseColor = 0.5 + 0.5 * cos(iTime + uv.xyx * 6.0 + vec3(0, 2, 4));
    
    // 
    vec4 texColor = texture2D(uTexture, uv);
    
    // 
    vec3 finalColor = mix(baseColor, texColor.rgb * uTintColor, uTextureIntensity * texColor.a);
    
    // 
    finalColor += sin(uv.x * 20.0 + iTime * 2.0) * 0.05;
    finalColor += cos(uv.y * 15.0 + iTime * 1.5) * 0.05;
    
    gl_FragColor = vec4(finalColor, 1.0);
}
`,JM=(n,e)=>{const t=new RegExp(`uniform\\s+float\\s+${e};`),i=new RegExp(`uniform\\s+vec3\\s+${e};`),r=new RegExp(`uniform\\s+vec4\\s+${e};`),s=new RegExp(`uniform\\s+sampler2D\\s+${e};`);return t.test(n)?"float":i.test(n)?"vec3":r.test(n)?"vec4":s.test(n)?"sampler2D":"float"},rB=n=>{const e=/uniform\s+float\s+([a-zA-Z_]\w*);/g,t=/uniform\s+vec3\s+([a-zA-Z_]\w*);/g,i=/uniform\s+vec4\s+([a-zA-Z_]\w*);/g,r=/uniform\s+sampler2D\s+([a-zA-Z_]\w*);/g;let s;const c=new Set,l=["iTime","iResolution","projectionMatrix","modelViewMatrix","viewMatrix","normalMatrix","cameraPosition"];for(;(s=e.exec(n))!==null;){const u=s[1];l.includes(u)||c.add(u)}for(;(s=t.exec(n))!==null;){const u=s[1];l.includes(u)||c.add(u)}for(;(s=i.exec(n))!==null;){const u=s[1];l.includes(u)||c.add(u)}for(;(s=r.exec(n))!==null;){const u=s[1];l.includes(u)||c.add(u)}return Array.from(c)},sB=(n,e,t,i,r,s)=>{const c={...e};let l=!1;if(n.forEach(u=>{if(u in c){if(s){const f=JM(s,u),a=c[u];(!a.type||a.type!==f)&&(oB(a.value,f)?c[u]={...a,type:f}:f==="vec3"?c[u]={value:{r:1,g:1,b:1},type:"vec3"}:f==="vec4"?c[u]={value:{r:1,g:1,b:1,a:1},type:"vec4"}:f==="sampler2D"?a.value instanceof HTMLImageElement||typeof a.value=="object"&&a.value!==null&&"src"in a.value?(console.log(`sampler2D: ${typeof a.value}`),c[u]={...a,type:"sampler2D"}):c[u]={value:null,type:"sampler2D"}:c[u]={value:.5,type:"float"},console.log("uniformvalue"),l=!0)}}else{if(s){const f=JM(s,u);f==="vec3"?c[u]={value:{r:1,g:1,b:1},type:"vec3"}:f==="vec4"?c[u]={value:{r:1,g:1,b:1,a:1},type:"vec4"}:f==="sampler2D"?(console.log(`sampler2D uniform ${u} null`),c[u]={value:null,type:"sampler2D"}):c[u]={value:.5}}else c[u]={value:.5};console.log("uniformkey"),l=!0}}),Object.keys(c).forEach(u=>{!n.includes(u)&&u!=="iTime"&&u!=="iResolution"&&(delete c[u],l=!0)}),l){t(c);const u={...i,...c};i.iTime&&(u.iTime=i.iTime),i.iResolution&&(u.iResolution=i.iResolution),Object.keys(c).forEach(f=>{c[f].type==="sampler2D"&&i[f]&&i[f].value instanceof An&&(u[f]=i[f])}),r(u)}},oB=(n,e)=>{if(n==null)return!0;switch(e){case"float":return typeof n=="number";case"vec3":return typeof n=="object"&&"r"in n&&"g"in n&&"b"in n&&Object.keys(n).length===3;case"vec4":return typeof n=="object"&&"r"in n&&"g"in n&&"b"in n&&"a"in n&&Object.keys(n).length===4;case"sampler2D":return n instanceof HTMLImageElement||typeof n=="object"&&n!==null&&"src"in n||n===null||n===void 0;default:return!1}},qM=(n,e)=>{if(n===e)return!0;if(n==null||e==null)return!1;if(n instanceof HTMLImageElement&&e instanceof HTMLImageElement||typeof n=="object"&&n!==null&&"src"in n&&typeof e=="object"&&e!==null&&"src"in e||n instanceof HTMLImageElement&&typeof e=="object"&&e!==null&&"src"in e||typeof n=="object"&&n!==null&&"src"in n&&e instanceof HTMLImageElement)return n.src===e.src;if(typeof n=="object"&&typeof e=="object"){const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(const r of t)if(n[r]!==e[r])return!1;return!0}return n===e},KT="shaderchat_models_config",tm="shaderchat_secure_key_2026",aB=n=>{try{let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n.charCodeAt(t)^tm.charCodeAt(t%tm.length));return btoa(e)}catch(e){return console.error(":",e),n}},lB=n=>{try{const e=atob(n);let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)^tm.charCodeAt(i%tm.length));return t}catch(e){return console.error(":",e),n}},cB=()=>{try{const n=localStorage.getItem(KT);if(n){const e=JSON.parse(n);if(Array.isArray(e))return e.filter(t=>{if(!t||typeof t.id!="string"||typeof t.name!="string"||typeof t.address!="string"||typeof t.model!="string"||typeof t.apiKey!="string")return!1;try{t.apiKey=lB(t.apiKey)}catch(i){console.error("API:",i),t.apiKey=""}return!0})}}catch(n){console.error("localStorage:",n)}return[]},uB=n=>{try{const e=n.map(t=>({...t,apiKey:aB(t.apiKey)}));localStorage.setItem(KT,JSON.stringify(e))}catch(e){console.error("localStorage:",e)}},hB=()=>{const[n,e]=Ce.useState([]),[t,i]=Ce.useState(""),[r,s]=Ce.useState(null),c=(a,o="success")=>{s({message:a,type:o}),setTimeout(()=>s(null),3e3)},l=a=>{const o=[...n,a];e(o),i(a.name),c(` "${a.name}" `,"success")},u=a=>{e(n.map(o=>o.id===a.id?a:o)),c(` "${a.name}" `,"success")},f=a=>{const o=n.find(d=>d.id===a),h=n.filter(d=>d.id!==a);e(h),o&&t===o.name&&h.length>0?i(h[0].name):h.length===0&&i(""),o&&c(` "${o.name}" `,"success")};return Ce.useEffect(()=>{const a=cB();console.log("localStorage:",a),a.length>0?(e(a),t||(i(a[0].name),console.log(":",a[0].name))):console.log("")},[]),Ce.useEffect(()=>{uB(n)},[n]),{models:n,selectedModel:t,setModels:e,setSelectedModel:i,handleAddModel:l,handleUpdateModel:u,handleDeleteModel:f,showNotification:c,notification:r}};function fB(n,e){let t=null;return function(...i){t&&clearTimeout(t),t=setTimeout(()=>{n(...i)},e)}}function dB(){const[n,e]=Ce.useState(ZM),[t,i]=Ce.useState(QM),[r,s]=Ce.useState({iTime:{value:0},iResolution:{value:{x:1,y:1},type:"vec2"}}),[c,l]=Ce.useState({}),[u,f]=Ce.useState(!1),[a,o]=Ce.useState([{text:" ShaderChat",sender:"assistant"}]),[h,d]=Ce.useState(""),[p,y]=Ce.useState(!1),[x,g]=Ce.useState(!1);Ce.useEffect(()=>{f(!1)},[]),Ce.useEffect(()=>{const ge=localStorage.getItem("shaderHistory");if(ge)try{D(JSON.parse(ge))}catch(Me){console.error(":",Me)}},[]);const w=Ce.useCallback(ge=>{try{localStorage.setItem("shaderHistory",JSON.stringify(ge))}catch(Me){console.error(":",Me)}},[]);Ce.useEffect(()=>{Y()},[]);const[C,M]=Ce.useState(400),[_,E]=Ce.useState(!1),[R,A]=Ce.useState(!0),[T,S]=Ce.useState("plane"),[I,D]=Ce.useState([]),[z,B]=Ce.useState(!1),W=Ce.useRef(null),H=Ce.useRef(0),[J,G]=Ce.useState(null),K=()=>{J&&(J.vertexShader&&J.vertexShader!==""&&e(J.vertexShader),J.fragmentShader&&J.fragmentShader!==""&&i(J.fragmentShader),G(null))},Y=()=>{e(ZM),i(QM)},ne=ge=>{const Me=ge.indexOf("=== FORMAT START ==="),_e=ge.indexOf("=== FORMAT END ===");if(Me===-1||_e===-1)return null;const et=ge.substring(Me+20,_e).trim(),ot=et.match(/\*\*\*\*\s*\n([^*]+)/),Ue=et.match(/\*\*Vertex Shader\*\*\s*\n```glsl\s*\n([\s\S]*?)\n```/),We=et.match(/\*\*Fragment Shader\*\*\s*\n```glsl\s*\n([\s\S]*?)\n```/),rt=et.match(/\*\*\*\*\s*\n([\s\S]*?)(?=\n\*|$)/);if(!ot||!Ue||!We)return null;const he=ot[1].trim(),De=Ue[1].trim(),tt=We[1].trim();let at=[];return rt&&(at=rt[1].split(`
`).map(Ke=>Ke.trim()).filter(Ke=>Ke.startsWith("- ")).map(Ke=>Ke.substring(2))),{description:he,vertexShader:De===""?"":De,fragmentShader:tt===""?"":tt,changes:at}},{models:le,setModels:j,selectedModel:re,setSelectedModel:fe}=hB(),ve=async ge=>{var Me;try{console.log(":",ge.name),console.log(":",{name:ge.name,address:ge.address,model:ge.model,hasApiKey:!!ge.apiKey,apiKeyLength:((Me=ge.apiKey)==null?void 0:Me.length)||0});const _e=[{role:"user",content:'Hello, this is a test message. Please respond with "OK".'}],et={model:ge.model,messages:_e,temperature:.1,max_tokens:10},ot={"Content-Type":"application/json"};ge.apiKey&&(ot.Authorization=`Bearer ${ge.apiKey}`);let Ue;ge.address.includes("openai.com")?Ue=`${ge.address}/chat/completions`:Ue=`${ge.address.endsWith("/v1")?ge.address:`${ge.address}/v1`}/chat/completions`,console.log("URL:",Ue),console.log(":",ot),console.log(":",et);const We=await fetch(Ue,{method:"POST",headers:ot,body:JSON.stringify(et)});if(console.log(":",We.status),console.log(":",We.headers),!We.ok){const he=await We.text();return console.error(":",We.status,":",he),!1}const rt=await We.json();return console.log(":",rt),!0}catch(_e){return console.error(":",_e),!1}},ye=Ce.useCallback(ge=>{i(ge)},[]),ze=Ce.useCallback(fB(ge=>{const Me=rB(ge);sB(Me,c,l,r,s,ge)},500),[c,r]);Ce.useEffect(()=>{t&&ze(t)},[t,c,ze]);const Xe=ge=>{ye(ge)},Ae=Ce.useCallback((ge,Me)=>{console.log("updateUniformValue",ge,Me),console.log(r),l(_e=>{var Ue,We;(Ue=_e[ge])==null||Ue.value;const et=(We=_e[ge])==null?void 0:We.type,ot={..._e};return ot[ge]={value:Me,type:et||"float"},ot}),s(_e=>{var ot,Ue;(ot=_e[ge])==null||ot.value;const et=(Ue=_e[ge])==null?void 0:Ue.type;return{..._e,[ge]:{value:Me,type:et||"float"}}})},[]),je=Ce.useCallback((ge,Me)=>{if(console.log("updateVec3UniformValue",ge,Me),!Me||typeof Me.r!="number"||typeof Me.g!="number"||typeof Me.b!="number"){console.error(`updateVec3UniformValue: Invalid value for ${ge}:`,Me);return}const _e={r:Math.max(0,Math.min(1,Me.r)),g:Math.max(0,Math.min(1,Me.g)),b:Math.max(0,Math.min(1,Me.b))};console.log(`updateVec3UniformValue: Setting ${ge} to [${_e.r}, ${_e.g}, ${_e.b}]`),l(et=>{const ot={...et,[ge]:{value:_e,type:"vec3"}};return console.log("updateVec3UniformValue: customUniforms before update:",et),console.log("updateVec3UniformValue: customUniforms after update:",ot),ot}),s(et=>{const ot={...et,[ge]:{value:_e,type:"vec3"}};return console.log("updateVec3UniformValue: uniforms before update:",et),console.log("updateVec3UniformValue: uniforms after update:",ot),ot})},[]),oe=Ce.useCallback((ge,Me)=>{if(console.log("updateVec4UniformValue",ge,Me),!Me||typeof Me.r!="number"||typeof Me.g!="number"||typeof Me.b!="number"||typeof Me.a!="number"){console.error(`updateVec4UniformValue: Invalid value for ${ge}:`,Me);return}const _e={r:Math.max(0,Math.min(1,Me.r)),g:Math.max(0,Math.min(1,Me.g)),b:Math.max(0,Math.min(1,Me.b)),a:Math.max(0,Math.min(1,Me.a))};console.log(`updateVec4UniformValue: Setting ${ge} to [${_e.r}, ${_e.g}, ${_e.b}, ${_e.a}]`),l(et=>({...et,[ge]:{value:_e,type:"vec4"}})),s(et=>({...et,[ge]:{value:_e,type:"vec4"}}))},[]),[Ve,Te]=Ce.useState(!1),$e=Ce.useCallback((ge,Me)=>{const _e=new FileReader;_e.onload=et=>{var We;const ot=(We=et.target)==null?void 0:We.result,Ue=new Image;Ue.onload=()=>{const rt={src:ot,width:Ue.naturalWidth,height:Ue.naturalHeight};l(he=>{var tt;const De=(tt=he[ge])==null?void 0:tt.value;return qM(De,rt)?he:{...he,[ge]:{value:rt,type:"sampler2D"}}}),s(he=>{var tt;const De=(tt=he[ge])==null?void 0:tt.value;return qM(De,rt)?he:{...he,[ge]:{value:rt,type:"sampler2D"}}})},Ue.onerror=()=>{console.error(":",Me.name)},Ue.src=ot},_e.onerror=()=>{console.error(":",Me.name)},_e.readAsDataURL(Me)},[]),Ne=ge=>{ge.preventDefault(),Te(!0)},ht=ge=>{ge.preventDefault(),Te(!1)},Ze=(ge,Me)=>{ge.preventDefault(),Te(!1);const _e=ge.dataTransfer.files;if(_e.length>0){const et=_e[0];et.type.startsWith("image/")&&$e(Me,et)}};Ce.useEffect(()=>()=>{H.current&&cancelAnimationFrame(H.current)},[]);const q=async ge=>{var Ue;if(!ge.trim())return;let Me=ge;ge.includes("#vs")&&(Me=Me.replace(/#vs/g,`
=== Vertex Shader ===
${n}
=== Vertex Shader ===
`)),ge.includes("#fs")&&(Me=Me.replace(/#fs/g,`
=== Fragment Shader ===
${t}
=== Fragment Shader ===
`));const _e=`GLSL

=== FORMAT START ===
****
[]

**Vertex Shader**
\`\`\`glsl
[""]
\`\`\`

**Fragment Shader**
\`\`\`glsl
[""]
\`\`\`

****
- []
=== FORMAT END ===


1. 
2. glsl
3. ""
4. 
5. `,et=[...a,{text:ge,sender:"user"}];if(o(et),d(""),!re){const We={text:"AI",sender:"assistant"};o([...et,We]);return}const ot=le.find(We=>We.name===re);if(!ot){const We={text:"",sender:"assistant"};o([...et,We]);return}console.log(":",{name:ot.name,address:ot.address,model:ot.model,hasApiKey:!!ot.apiKey,apiKeyLength:((Ue=ot.apiKey)==null?void 0:Ue.length)||0});try{let We;if(ot.address.includes("openai.com")){if(We=await fetch(`${ot.address}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ot.apiKey}`},body:JSON.stringify({model:ot.model,messages:[{role:"system",content:_e},{role:"user",content:Me}],max_tokens:2e3,temperature:.7})}),!We.ok)throw new Error(`OpenAI API: ${We.status}`);const he=(await We.json()).choices[0].message.content,De=ne(he);if(De){const at={text:`###  
${De.description}

###  
- **** ${De.vertexShader===""?" ":" "}
- **** ${De.fragmentShader===""?" ":" "}

###  
${De.changes.map(Ke=>`- ${Ke}`).join(`
`)}

###  
""`,sender:"assistant",metadata:{type:"shader_update",parsed:De,originalText:he}};o([...et,at]),G(De)}else{const tt={text:he,sender:"assistant"};o([...et,tt])}}else{const rt=ot.address.endsWith("/v1")?ot.address:`${ot.address}/v1`;if(We=await fetch(`${rt}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ot.apiKey}`},body:JSON.stringify({model:ot.model,messages:[{role:"system",content:_e},{role:"user",content:Me}],max_tokens:2e3,temperature:.7})}),!We.ok)throw new Error(`API: ${We.status}`);const De=(await We.json()).choices[0].message.content,tt=ne(De);if(tt){const Ke={text:`=== FORMAT START ===

****
${tt.description}

**Vertex Shader**
\`\`\`glsl
${tt.vertexShader}
\`\`\`

**Fragment Shader**
\`\`\`glsl
${tt.fragmentShader}
\`\`\`

****
${tt.changes.map(pe=>`- ${pe}`).join(`
`)}

=== FORMAT END ===`,sender:"assistant",metadata:{type:"shader_update",parsed:tt,originalText:De}};o([...et,Ke]),G(tt)}else{const at={text:De,sender:"assistant"};o([...et,at])}}}catch(We){console.error("API:",We);let rt=": ";We instanceof Error?We.message.includes("401")?rt+="APIAPI":We.message.includes("404")?rt+="API":We.message.includes("NetworkError")||We.message.includes("fetch")?rt+="API":rt+=We.message:rt+="";const he={text:rt,sender:"assistant"};o([...et,he])}},Z=Ce.useCallback(ge=>{const Me={id:Date.now().toString(),name:ge,vertexShader:n,fragmentShader:t,uniforms:r,customUniforms:c,timestamp:Date.now()},_e=[...I,Me];D(_e),w(_e)},[n,t,r,c,I,w]),ae=Ce.useCallback(ge=>{e(ge.vertexShader),i(ge.fragmentShader),s(ge.uniforms),l(ge.customUniforms),B(!1)},[]),Ee=Ce.useCallback(ge=>{const Me=I.filter(_e=>_e.id!==ge);D(Me),w(Me)},[I,w]),me=Ce.useCallback((ge,Me)=>{const _e=I.map(et=>et.id===ge?{...et,name:Me}:et);D(_e),w(_e)},[I,w]),ke=()=>{y(!p)},Qe=()=>{g(!x)},Ye=()=>{A(!R)};Ce.useEffect(()=>{},[R]);const Je=ge=>{ge.preventDefault(),ge.stopPropagation(),E(!0),document.body.classList.add("resizing");const Me=ge.clientX,_e=C,et=300,ot=Math.max(500,window.innerWidth-400);let Ue=null,We=0;const rt=16,he=tt=>{const at=Date.now();at-We<rt||(We=at,!Ue&&(Ue=requestAnimationFrame(()=>{const Ke=tt.clientX-Me,pe=Math.max(et,Math.min(ot,_e+Ke));M(pe),Ue=null})))},De=()=>{E(!1),document.body.classList.remove("resizing"),Ue&&(cancelAnimationFrame(Ue),Ue=null),document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",De),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})};document.addEventListener("mousemove",he),document.addEventListener("mouseup",De)};return Q.jsxs("div",{id:"main-container",children:[Q.jsx(WU,{onHistoryClick:()=>B(!0)}),Q.jsxs("div",{id:"app-container",children:[Q.jsxs("div",{id:"editor-panel",className:`${p?"collapsed-vs":""} ${x?"collapsed-fs":""}`,style:{width:`${C}px`},children:[Q.jsxs("div",{className:"panel-header",children:["Vertex Shader (VS)",Q.jsx("button",{className:`collapse-btn ${p?"collapsed":""}`,onClick:ke,"data-target":"vs"})]}),Q.jsxs("div",{id:"editor-vs",children:[Q.jsx(YM,{id:"vs-editor",defaultValue:n,onChange:e}),J&&J.vertexShader!==""&&Q.jsxs("div",{className:"ai-suggestion-banner",children:[Q.jsx("span",{children:" AI"}),Q.jsx("button",{className:"ai-apply-btn",onClick:K,children:""})]})]}),Q.jsxs("div",{className:"panel-header",children:["Fragment Shader (FS)",Q.jsx("button",{className:`collapse-btn ${x?"collapsed":""}`,onClick:Qe,"data-target":"fs"})]}),Q.jsxs("div",{id:"editor-fs",children:[Q.jsx(YM,{id:"fs-editor",defaultValue:t,onChange:Xe}),J&&J.fragmentShader!==""&&Q.jsxs("div",{className:"ai-suggestion-banner",children:[Q.jsx("span",{children:" AI"}),Q.jsx("button",{className:"ai-apply-btn",onClick:K,children:""})]})]})]}),Q.jsx("div",{className:`resizable-divider ${_?"dragging":""}`,onMouseDown:Je}),Q.jsx("div",{id:"preview-container",children:Q.jsxs("div",{id:"preview-panel",children:[Q.jsxs("div",{className:"panel-header",children:["PREVIEW",Q.jsx("div",{className:"panel-header-controls",children:Q.jsx("button",{className:`controls-toggle-btn ${R?"active":""}`,onClick:Ye,title:R?"":"",children:"Uniforms"})})]}),Q.jsxs("div",{id:"shader-canvas",ref:W,children:[Q.jsxs("div",{className:"shape-controls",children:[Q.jsx("button",{className:`shape-btn ${T==="plane"?"active":""}`,onClick:()=>S("plane"),title:"",children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("path",{d:"M2 12h20"}),Q.jsx("path",{d:"M2 16h20"}),Q.jsx("path",{d:"M2 20h20"}),Q.jsx("path",{d:"M2 4h20"}),Q.jsx("path",{d:"M2 8h20"})]})}),Q.jsx("button",{className:`shape-btn ${T==="cube"?"active":""}`,onClick:()=>S("cube"),title:"",children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Q.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"1"})]})}),Q.jsx("button",{className:`shape-btn ${T==="sphere"?"active":""}`,onClick:()=>S("sphere"),title:"",children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"9"}),Q.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"4"})]})})]}),Q.jsxs(RU,{resize:{scroll:!1},style:{width:"100%",height:"100%"},gl:{preserveDrawingBuffer:!0},children:[Q.jsx(zU,{makeDefault:!0,position:[0,0,2]}),Q.jsx(HU,{enableDamping:!0,dampingFactor:.05,minDistance:1,maxDistance:4,enableZoom:!1}),Q.jsx("ambientLight",{intensity:.5}),Q.jsx(tB,{uniforms:r,vertexShader:n,fragmentShader:t,transparent:!0,shape:T})]}),Q.jsx(KU,{isOpen:u,onToggle:()=>f(!u),messages:a,onSendMessage:q,inputMessage:h,setInputMessage:d,models:le,setModels:j,selectedModel:re,setSelectedModel:fe,onTestModel:ve,onApplyVertexShader:e,onApplyFragmentShader:i})]})]})}),Q.jsx("div",{id:"controls-panel",className:R?"visible":"hidden",children:Q.jsx("div",{id:"uniforms-controls",children:Object.keys(c).map(ge=>{const Me=c[ge],_e=Me.type==="vec3"||Me.value&&typeof Me.value=="object"&&"r"in Me.value&&!("a"in Me.value),et=Me.type==="vec4"||Me.value&&typeof Me.value=="object"&&"r"in Me.value&&"a"in Me.value;return Me.type==="sampler2D"||Me.value instanceof HTMLImageElement||Me.value&&typeof Me.value=="object"&&"src"in Me.value?Q.jsxs("div",{className:"uniform-control sampler2d-control",children:[Q.jsx("label",{children:ge}),Q.jsxs("div",{className:`image-upload-container ${Ve?"drag-over":""} ${Me.value?"has-image":""}`,onDragOver:Ne,onDragLeave:ht,onDrop:Ue=>Ze(Ue,ge),children:[Me.value?Q.jsxs("div",{className:"image-preview has-image",children:[Q.jsx("img",{src:(typeof Me.value=="object"&&"src"in Me.value,Me.value.src),alt:ge,width:"120",height:"120"}),Q.jsx("button",{className:"remove-image-btn",onClick:()=>{l(Ue=>({...Ue,[ge]:{value:null,type:"sampler2D"}})),s(Ue=>({...Ue,[ge]:{value:null,type:"sampler2D"}}))},title:"",children:""})]}):Q.jsxs("div",{className:"upload-placeholder",children:[Q.jsx("div",{children:""}),Q.jsx("div",{style:{fontSize:"12px",opacity:.7},children:""})]}),Q.jsx("input",{type:"file",accept:"image/*",onChange:Ue=>{var rt;const We=(rt=Ue.target.files)==null?void 0:rt[0];We&&$e(ge,We)},style:{display:"none"},id:`image-upload-${ge}`}),Q.jsx("label",{htmlFor:`image-upload-${ge}`,className:"upload-button",children:""})]})]},ge):_e||et?Q.jsxs("div",{className:`uniform-control ${et?"vec4-control":"vec3-control"}`,children:[Q.jsx("label",{children:ge}),Q.jsx(nB,{color:(()=>{if(console.log(`App: Rendering ColorPicker for ${ge}, uniform.value:`,Me.value),_e){const Ue=Me.value;if(Ue){if(typeof Ue.x=="number"&&typeof Ue.y=="number"&&typeof Ue.z=="number")return console.log(`App: Converting Vector3 format for ${ge}:`,Ue),{r:Ue.x,g:Ue.y,b:Ue.z};if(typeof Ue.r=="number"&&typeof Ue.g=="number"&&typeof Ue.b=="number")return console.log(`App: Using RGB format for ${ge}:`,Ue),{r:Ue.r,g:Ue.g,b:Ue.b}}return console.log(`App: Using default color for ${ge}`),{r:1,g:1,b:1}}else{const Ue=Me.value;return console.log(`App: Using vec4 format for ${ge}:`,Ue),Ue||{r:1,g:1,b:1,a:1}}})(),onChange:Ue=>{if(console.log(`App ColorPicker onChange - name: ${ge}, color:`,Ue),console.log(`App ColorPicker onChange - color.r: ${Ue==null?void 0:Ue.r}, color.g: ${Ue==null?void 0:Ue.g}, color.b: ${Ue==null?void 0:Ue.b}${_e?"":", color.a: "+(Ue==null?void 0:Ue.a)}`),_e){const We=Ue;We&&typeof We.r=="number"&&typeof We.g=="number"&&typeof We.b=="number"?je(ge,We):console.error(`App ColorPicker onChange - Invalid vec3 color for ${ge}:`,We)}else{const We=Ue;We&&typeof We.r=="number"&&typeof We.g=="number"&&typeof We.b=="number"&&typeof We.a=="number"?oe(ge,We):console.error(`App ColorPicker onChange - Invalid vec4 color for ${ge}:`,We)}},label:ge,showAlpha:!_e})]},ge):Q.jsxs("div",{className:"uniform-control",children:[Q.jsx("label",{children:ge}),Q.jsxs("div",{children:[Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:Me.value.toFixed(2),onChange:Ue=>Ae(ge,parseFloat(Ue.target.value)),style:{"--progress":`${Me.value*100}%`}}),Q.jsx("span",{children:Me.value.toFixed(2)})]})]},ge)})})})]}),Q.jsx(iB,{isOpen:z,onClose:()=>B(!1),history:I,onLoadHistory:ae,onDeleteHistory:Ee,onRenameHistory:me,onSaveCurrent:Z})]})}r0.createRoot(document.getElementById("root")).render(Q.jsx(cC.StrictMode,{children:Q.jsx(dB,{})}));
